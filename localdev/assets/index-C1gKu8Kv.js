(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const u of o.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function t(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(s){if(s.ep)return;s.ep=!0;const o=t(s);fetch(s.href,o)}})();var Ey={exports:{}},sh={};var IA;function UP(){if(IA)return sh;IA=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(i,s,o){var u=null;if(o!==void 0&&(u=""+o),s.key!==void 0&&(u=""+s.key),"key"in s){o={};for(var h in s)h!=="key"&&(o[h]=s[h])}else o=s;return s=o.ref,{$$typeof:n,type:i,key:u,ref:s!==void 0?s:null,props:o}}return sh.Fragment=e,sh.jsx=t,sh.jsxs=t,sh}var AA;function FP(){return AA||(AA=1,Ey.exports=UP()),Ey.exports}var me=FP(),Ty={exports:{}},Re={};var bA;function BP(){if(bA)return Re;bA=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),u=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),y=Symbol.for("react.activity"),w=Symbol.iterator;function A(M){return M===null||typeof M!="object"?null:(M=w&&M[w]||M["@@iterator"],typeof M=="function"?M:null)}var O={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},F=Object.assign,V={};function X(M,ee,ue){this.props=M,this.context=ee,this.refs=V,this.updater=ue||O}X.prototype.isReactComponent={},X.prototype.setState=function(M,ee){if(typeof M!="object"&&typeof M!="function"&&M!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,M,ee,"setState")},X.prototype.forceUpdate=function(M){this.updater.enqueueForceUpdate(this,M,"forceUpdate")};function ne(){}ne.prototype=X.prototype;function te(M,ee,ue){this.props=M,this.context=ee,this.refs=V,this.updater=ue||O}var fe=te.prototype=new ne;fe.constructor=te,F(fe,X.prototype),fe.isPureReactComponent=!0;var ye=Array.isArray;function ve(){}var R={H:null,A:null,T:null,S:null},b=Object.prototype.hasOwnProperty;function C(M,ee,ue){var de=ue.ref;return{$$typeof:n,type:M,key:ee,ref:de!==void 0?de:null,props:ue}}function k(M,ee){return C(M.type,ee,M.props)}function x(M){return typeof M=="object"&&M!==null&&M.$$typeof===n}function U(M){var ee={"=":"=0",":":"=2"};return"$"+M.replace(/[=:]/g,function(ue){return ee[ue]})}var N=/\/+/g;function Et(M,ee){return typeof M=="object"&&M!==null&&M.key!=null?U(""+M.key):ee.toString(36)}function Wt(M){switch(M.status){case"fulfilled":return M.value;case"rejected":throw M.reason;default:switch(typeof M.status=="string"?M.then(ve,ve):(M.status="pending",M.then(function(ee){M.status==="pending"&&(M.status="fulfilled",M.value=ee)},function(ee){M.status==="pending"&&(M.status="rejected",M.reason=ee)})),M.status){case"fulfilled":return M.value;case"rejected":throw M.reason}}throw M}function W(M,ee,ue,de,Ae){var Oe=typeof M;(Oe==="undefined"||Oe==="boolean")&&(M=null);var qe=!1;if(M===null)qe=!0;else switch(Oe){case"bigint":case"string":case"number":qe=!0;break;case"object":switch(M.$$typeof){case n:case e:qe=!0;break;case _:return qe=M._init,W(qe(M._payload),ee,ue,de,Ae)}}if(qe)return Ae=Ae(M),qe=de===""?"."+Et(M,0):de,ye(Ae)?(ue="",qe!=null&&(ue=qe.replace(N,"$&/")+"/"),W(Ae,ee,ue,"",function(Ba){return Ba})):Ae!=null&&(x(Ae)&&(Ae=k(Ae,ue+(Ae.key==null||M&&M.key===Ae.key?"":(""+Ae.key).replace(N,"$&/")+"/")+qe)),ee.push(Ae)),1;qe=0;var Xt=de===""?".":de+":";if(ye(M))for(var Tt=0;Tt<M.length;Tt++)de=M[Tt],Oe=Xt+Et(de,Tt),qe+=W(de,ee,ue,Oe,Ae);else if(Tt=A(M),typeof Tt=="function")for(M=Tt.call(M),Tt=0;!(de=M.next()).done;)de=de.value,Oe=Xt+Et(de,Tt++),qe+=W(de,ee,ue,Oe,Ae);else if(Oe==="object"){if(typeof M.then=="function")return W(Wt(M),ee,ue,de,Ae);throw ee=String(M),Error("Objects are not valid as a React child (found: "+(ee==="[object Object]"?"object with keys {"+Object.keys(M).join(", ")+"}":ee)+"). If you meant to render a collection of children, use an array instead.")}return qe}function le(M,ee,ue){if(M==null)return M;var de=[],Ae=0;return W(M,de,"","",function(Oe){return ee.call(ue,Oe,Ae++)}),de}function we(M){if(M._status===-1){var ee=M._result;ee=ee(),ee.then(function(ue){(M._status===0||M._status===-1)&&(M._status=1,M._result=ue)},function(ue){(M._status===0||M._status===-1)&&(M._status=2,M._result=ue)}),M._status===-1&&(M._status=0,M._result=ee)}if(M._status===1)return M._result.default;throw M._result}var Qe=typeof reportError=="function"?reportError:function(M){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ee=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof M=="object"&&M!==null&&typeof M.message=="string"?String(M.message):String(M),error:M});if(!window.dispatchEvent(ee))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",M);return}console.error(M)},tt={map:le,forEach:function(M,ee,ue){le(M,function(){ee.apply(this,arguments)},ue)},count:function(M){var ee=0;return le(M,function(){ee++}),ee},toArray:function(M){return le(M,function(ee){return ee})||[]},only:function(M){if(!x(M))throw Error("React.Children.only expected to receive a single React element child.");return M}};return Re.Activity=y,Re.Children=tt,Re.Component=X,Re.Fragment=t,Re.Profiler=s,Re.PureComponent=te,Re.StrictMode=i,Re.Suspense=d,Re.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=R,Re.__COMPILER_RUNTIME={__proto__:null,c:function(M){return R.H.useMemoCache(M)}},Re.cache=function(M){return function(){return M.apply(null,arguments)}},Re.cacheSignal=function(){return null},Re.cloneElement=function(M,ee,ue){if(M==null)throw Error("The argument must be a React element, but you passed "+M+".");var de=F({},M.props),Ae=M.key;if(ee!=null)for(Oe in ee.key!==void 0&&(Ae=""+ee.key),ee)!b.call(ee,Oe)||Oe==="key"||Oe==="__self"||Oe==="__source"||Oe==="ref"&&ee.ref===void 0||(de[Oe]=ee[Oe]);var Oe=arguments.length-2;if(Oe===1)de.children=ue;else if(1<Oe){for(var qe=Array(Oe),Xt=0;Xt<Oe;Xt++)qe[Xt]=arguments[Xt+2];de.children=qe}return C(M.type,Ae,de)},Re.createContext=function(M){return M={$$typeof:u,_currentValue:M,_currentValue2:M,_threadCount:0,Provider:null,Consumer:null},M.Provider=M,M.Consumer={$$typeof:o,_context:M},M},Re.createElement=function(M,ee,ue){var de,Ae={},Oe=null;if(ee!=null)for(de in ee.key!==void 0&&(Oe=""+ee.key),ee)b.call(ee,de)&&de!=="key"&&de!=="__self"&&de!=="__source"&&(Ae[de]=ee[de]);var qe=arguments.length-2;if(qe===1)Ae.children=ue;else if(1<qe){for(var Xt=Array(qe),Tt=0;Tt<qe;Tt++)Xt[Tt]=arguments[Tt+2];Ae.children=Xt}if(M&&M.defaultProps)for(de in qe=M.defaultProps,qe)Ae[de]===void 0&&(Ae[de]=qe[de]);return C(M,Oe,Ae)},Re.createRef=function(){return{current:null}},Re.forwardRef=function(M){return{$$typeof:h,render:M}},Re.isValidElement=x,Re.lazy=function(M){return{$$typeof:_,_payload:{_status:-1,_result:M},_init:we}},Re.memo=function(M,ee){return{$$typeof:p,type:M,compare:ee===void 0?null:ee}},Re.startTransition=function(M){var ee=R.T,ue={};R.T=ue;try{var de=M(),Ae=R.S;Ae!==null&&Ae(ue,de),typeof de=="object"&&de!==null&&typeof de.then=="function"&&de.then(ve,Qe)}catch(Oe){Qe(Oe)}finally{ee!==null&&ue.types!==null&&(ee.types=ue.types),R.T=ee}},Re.unstable_useCacheRefresh=function(){return R.H.useCacheRefresh()},Re.use=function(M){return R.H.use(M)},Re.useActionState=function(M,ee,ue){return R.H.useActionState(M,ee,ue)},Re.useCallback=function(M,ee){return R.H.useCallback(M,ee)},Re.useContext=function(M){return R.H.useContext(M)},Re.useDebugValue=function(){},Re.useDeferredValue=function(M,ee){return R.H.useDeferredValue(M,ee)},Re.useEffect=function(M,ee){return R.H.useEffect(M,ee)},Re.useEffectEvent=function(M){return R.H.useEffectEvent(M)},Re.useId=function(){return R.H.useId()},Re.useImperativeHandle=function(M,ee,ue){return R.H.useImperativeHandle(M,ee,ue)},Re.useInsertionEffect=function(M,ee){return R.H.useInsertionEffect(M,ee)},Re.useLayoutEffect=function(M,ee){return R.H.useLayoutEffect(M,ee)},Re.useMemo=function(M,ee){return R.H.useMemo(M,ee)},Re.useOptimistic=function(M,ee){return R.H.useOptimistic(M,ee)},Re.useReducer=function(M,ee,ue){return R.H.useReducer(M,ee,ue)},Re.useRef=function(M){return R.H.useRef(M)},Re.useState=function(M){return R.H.useState(M)},Re.useSyncExternalStore=function(M,ee,ue){return R.H.useSyncExternalStore(M,ee,ue)},Re.useTransition=function(){return R.H.useTransition()},Re.version="19.2.1",Re}var RA;function Zv(){return RA||(RA=1,Ty.exports=BP()),Ty.exports}var $=Zv(),wy={exports:{}},ah={},Sy={exports:{}},Iy={};var CA;function zP(){return CA||(CA=1,(function(n){function e(W,le){var we=W.length;W.push(le);e:for(;0<we;){var Qe=we-1>>>1,tt=W[Qe];if(0<s(tt,le))W[Qe]=le,W[we]=tt,we=Qe;else break e}}function t(W){return W.length===0?null:W[0]}function i(W){if(W.length===0)return null;var le=W[0],we=W.pop();if(we!==le){W[0]=we;e:for(var Qe=0,tt=W.length,M=tt>>>1;Qe<M;){var ee=2*(Qe+1)-1,ue=W[ee],de=ee+1,Ae=W[de];if(0>s(ue,we))de<tt&&0>s(Ae,ue)?(W[Qe]=Ae,W[de]=we,Qe=de):(W[Qe]=ue,W[ee]=we,Qe=ee);else if(de<tt&&0>s(Ae,we))W[Qe]=Ae,W[de]=we,Qe=de;else break e}}return le}function s(W,le){var we=W.sortIndex-le.sortIndex;return we!==0?we:W.id-le.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var u=Date,h=u.now();n.unstable_now=function(){return u.now()-h}}var d=[],p=[],_=1,y=null,w=3,A=!1,O=!1,F=!1,V=!1,X=typeof setTimeout=="function"?setTimeout:null,ne=typeof clearTimeout=="function"?clearTimeout:null,te=typeof setImmediate<"u"?setImmediate:null;function fe(W){for(var le=t(p);le!==null;){if(le.callback===null)i(p);else if(le.startTime<=W)i(p),le.sortIndex=le.expirationTime,e(d,le);else break;le=t(p)}}function ye(W){if(F=!1,fe(W),!O)if(t(d)!==null)O=!0,ve||(ve=!0,U());else{var le=t(p);le!==null&&Wt(ye,le.startTime-W)}}var ve=!1,R=-1,b=5,C=-1;function k(){return V?!0:!(n.unstable_now()-C<b)}function x(){if(V=!1,ve){var W=n.unstable_now();C=W;var le=!0;try{e:{O=!1,F&&(F=!1,ne(R),R=-1),A=!0;var we=w;try{t:{for(fe(W),y=t(d);y!==null&&!(y.expirationTime>W&&k());){var Qe=y.callback;if(typeof Qe=="function"){y.callback=null,w=y.priorityLevel;var tt=Qe(y.expirationTime<=W);if(W=n.unstable_now(),typeof tt=="function"){y.callback=tt,fe(W),le=!0;break t}y===t(d)&&i(d),fe(W)}else i(d);y=t(d)}if(y!==null)le=!0;else{var M=t(p);M!==null&&Wt(ye,M.startTime-W),le=!1}}break e}finally{y=null,w=we,A=!1}le=void 0}}finally{le?U():ve=!1}}}var U;if(typeof te=="function")U=function(){te(x)};else if(typeof MessageChannel<"u"){var N=new MessageChannel,Et=N.port2;N.port1.onmessage=x,U=function(){Et.postMessage(null)}}else U=function(){X(x,0)};function Wt(W,le){R=X(function(){W(n.unstable_now())},le)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(W){W.callback=null},n.unstable_forceFrameRate=function(W){0>W||125<W?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):b=0<W?Math.floor(1e3/W):5},n.unstable_getCurrentPriorityLevel=function(){return w},n.unstable_next=function(W){switch(w){case 1:case 2:case 3:var le=3;break;default:le=w}var we=w;w=le;try{return W()}finally{w=we}},n.unstable_requestPaint=function(){V=!0},n.unstable_runWithPriority=function(W,le){switch(W){case 1:case 2:case 3:case 4:case 5:break;default:W=3}var we=w;w=W;try{return le()}finally{w=we}},n.unstable_scheduleCallback=function(W,le,we){var Qe=n.unstable_now();switch(typeof we=="object"&&we!==null?(we=we.delay,we=typeof we=="number"&&0<we?Qe+we:Qe):we=Qe,W){case 1:var tt=-1;break;case 2:tt=250;break;case 5:tt=1073741823;break;case 4:tt=1e4;break;default:tt=5e3}return tt=we+tt,W={id:_++,callback:le,priorityLevel:W,startTime:we,expirationTime:tt,sortIndex:-1},we>Qe?(W.sortIndex=we,e(p,W),t(d)===null&&W===t(p)&&(F?(ne(R),R=-1):F=!0,Wt(ye,we-Qe))):(W.sortIndex=tt,e(d,W),O||A||(O=!0,ve||(ve=!0,U()))),W},n.unstable_shouldYield=k,n.unstable_wrapCallback=function(W){var le=w;return function(){var we=w;w=le;try{return W.apply(this,arguments)}finally{w=we}}}})(Iy)),Iy}var NA;function qP(){return NA||(NA=1,Sy.exports=zP()),Sy.exports}var Ay={exports:{}},wn={};var DA;function jP(){if(DA)return wn;DA=1;var n=Zv();function e(d){var p="https://react.dev/errors/"+d;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var _=2;_<arguments.length;_++)p+="&args[]="+encodeURIComponent(arguments[_])}return"Minified React error #"+d+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var i={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},s=Symbol.for("react.portal");function o(d,p,_){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:y==null?null:""+y,children:d,containerInfo:p,implementation:_}}var u=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(d,p){if(d==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return wn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,wn.createPortal=function(d,p){var _=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(e(299));return o(d,p,null,_)},wn.flushSync=function(d){var p=u.T,_=i.p;try{if(u.T=null,i.p=2,d)return d()}finally{u.T=p,i.p=_,i.d.f()}},wn.preconnect=function(d,p){typeof d=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,i.d.C(d,p))},wn.prefetchDNS=function(d){typeof d=="string"&&i.d.D(d)},wn.preinit=function(d,p){if(typeof d=="string"&&p&&typeof p.as=="string"){var _=p.as,y=h(_,p.crossOrigin),w=typeof p.integrity=="string"?p.integrity:void 0,A=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;_==="style"?i.d.S(d,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:y,integrity:w,fetchPriority:A}):_==="script"&&i.d.X(d,{crossOrigin:y,integrity:w,fetchPriority:A,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},wn.preinitModule=function(d,p){if(typeof d=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var _=h(p.as,p.crossOrigin);i.d.M(d,{crossOrigin:_,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&i.d.M(d)},wn.preload=function(d,p){if(typeof d=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var _=p.as,y=h(_,p.crossOrigin);i.d.L(d,_,{crossOrigin:y,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},wn.preloadModule=function(d,p){if(typeof d=="string")if(p){var _=h(p.as,p.crossOrigin);i.d.m(d,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:_,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else i.d.m(d)},wn.requestFormReset=function(d){i.d.r(d)},wn.unstable_batchedUpdates=function(d,p){return d(p)},wn.useFormState=function(d,p,_){return u.H.useFormState(d,p,_)},wn.useFormStatus=function(){return u.H.useHostTransitionStatus()},wn.version="19.2.1",wn}var OA;function HP(){if(OA)return Ay.exports;OA=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Ay.exports=jP(),Ay.exports}var xA;function GP(){if(xA)return ah;xA=1;var n=qP(),e=Zv(),t=HP();function i(r){var a="https://react.dev/errors/"+r;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)a+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+r+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function o(r){var a=r,l=r;if(r.alternate)for(;a.return;)a=a.return;else{r=a;do a=r,(a.flags&4098)!==0&&(l=a.return),r=a.return;while(r)}return a.tag===3?l:null}function u(r){if(r.tag===13){var a=r.memoizedState;if(a===null&&(r=r.alternate,r!==null&&(a=r.memoizedState)),a!==null)return a.dehydrated}return null}function h(r){if(r.tag===31){var a=r.memoizedState;if(a===null&&(r=r.alternate,r!==null&&(a=r.memoizedState)),a!==null)return a.dehydrated}return null}function d(r){if(o(r)!==r)throw Error(i(188))}function p(r){var a=r.alternate;if(!a){if(a=o(r),a===null)throw Error(i(188));return a!==r?null:r}for(var l=r,c=a;;){var m=l.return;if(m===null)break;var g=m.alternate;if(g===null){if(c=m.return,c!==null){l=c;continue}break}if(m.child===g.child){for(g=m.child;g;){if(g===l)return d(m),r;if(g===c)return d(m),a;g=g.sibling}throw Error(i(188))}if(l.return!==c.return)l=m,c=g;else{for(var E=!1,S=m.child;S;){if(S===l){E=!0,l=m,c=g;break}if(S===c){E=!0,c=m,l=g;break}S=S.sibling}if(!E){for(S=g.child;S;){if(S===l){E=!0,l=g,c=m;break}if(S===c){E=!0,c=g,l=m;break}S=S.sibling}if(!E)throw Error(i(189))}}if(l.alternate!==c)throw Error(i(190))}if(l.tag!==3)throw Error(i(188));return l.stateNode.current===l?r:a}function _(r){var a=r.tag;if(a===5||a===26||a===27||a===6)return r;for(r=r.child;r!==null;){if(a=_(r),a!==null)return a;r=r.sibling}return null}var y=Object.assign,w=Symbol.for("react.element"),A=Symbol.for("react.transitional.element"),O=Symbol.for("react.portal"),F=Symbol.for("react.fragment"),V=Symbol.for("react.strict_mode"),X=Symbol.for("react.profiler"),ne=Symbol.for("react.consumer"),te=Symbol.for("react.context"),fe=Symbol.for("react.forward_ref"),ye=Symbol.for("react.suspense"),ve=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),C=Symbol.for("react.activity"),k=Symbol.for("react.memo_cache_sentinel"),x=Symbol.iterator;function U(r){return r===null||typeof r!="object"?null:(r=x&&r[x]||r["@@iterator"],typeof r=="function"?r:null)}var N=Symbol.for("react.client.reference");function Et(r){if(r==null)return null;if(typeof r=="function")return r.$$typeof===N?null:r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case F:return"Fragment";case X:return"Profiler";case V:return"StrictMode";case ye:return"Suspense";case ve:return"SuspenseList";case C:return"Activity"}if(typeof r=="object")switch(r.$$typeof){case O:return"Portal";case te:return r.displayName||"Context";case ne:return(r._context.displayName||"Context")+".Consumer";case fe:var a=r.render;return r=r.displayName,r||(r=a.displayName||a.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case R:return a=r.displayName||null,a!==null?a:Et(r.type)||"Memo";case b:a=r._payload,r=r._init;try{return Et(r(a))}catch{}}return null}var Wt=Array.isArray,W=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,le=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,we={pending:!1,data:null,method:null,action:null},Qe=[],tt=-1;function M(r){return{current:r}}function ee(r){0>tt||(r.current=Qe[tt],Qe[tt]=null,tt--)}function ue(r,a){tt++,Qe[tt]=r.current,r.current=a}var de=M(null),Ae=M(null),Oe=M(null),qe=M(null);function Xt(r,a){switch(ue(Oe,a),ue(Ae,r),ue(de,null),a.nodeType){case 9:case 11:r=(r=a.documentElement)&&(r=r.namespaceURI)?QI(r):0;break;default:if(r=a.tagName,a=a.namespaceURI)a=QI(a),r=$I(a,r);else switch(r){case"svg":r=1;break;case"math":r=2;break;default:r=0}}ee(de),ue(de,r)}function Tt(){ee(de),ee(Ae),ee(Oe)}function Ba(r){r.memoizedState!==null&&ue(qe,r);var a=de.current,l=$I(a,r.type);a!==l&&(ue(Ae,r),ue(de,l))}function nl(r){Ae.current===r&&(ee(de),ee(Ae)),qe.current===r&&(ee(qe),th._currentValue=we)}var il,rl;function Zi(r){if(il===void 0)try{throw Error()}catch(l){var a=l.stack.trim().match(/\n( *(at )?)/);il=a&&a[1]||"",rl=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+il+r+rl}var tc=!1;function za(r,a){if(!r||tc)return"";tc=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(a){var Z=function(){throw Error()};if(Object.defineProperty(Z.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Z,[])}catch(Q){var H=Q}Reflect.construct(r,[],Z)}else{try{Z.call()}catch(Q){H=Q}r.call(Z.prototype)}}else{try{throw Error()}catch(Q){H=Q}(Z=r())&&typeof Z.catch=="function"&&Z.catch(function(){})}}catch(Q){if(Q&&H&&typeof Q.stack=="string")return[Q.stack,H.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var m=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");m&&m.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var g=c.DetermineComponentFrameRoot(),E=g[0],S=g[1];if(E&&S){var D=E.split(`
`),j=S.split(`
`);for(m=c=0;c<D.length&&!D[c].includes("DetermineComponentFrameRoot");)c++;for(;m<j.length&&!j[m].includes("DetermineComponentFrameRoot");)m++;if(c===D.length||m===j.length)for(c=D.length-1,m=j.length-1;1<=c&&0<=m&&D[c]!==j[m];)m--;for(;1<=c&&0<=m;c--,m--)if(D[c]!==j[m]){if(c!==1||m!==1)do if(c--,m--,0>m||D[c]!==j[m]){var Y=`
`+D[c].replace(" at new "," at ");return r.displayName&&Y.includes("<anonymous>")&&(Y=Y.replace("<anonymous>",r.displayName)),Y}while(1<=c&&0<=m);break}}}finally{tc=!1,Error.prepareStackTrace=l}return(l=r?r.displayName||r.name:"")?Zi(l):""}function nc(r,a){switch(r.tag){case 26:case 27:case 5:return Zi(r.type);case 16:return Zi("Lazy");case 13:return r.child!==a&&a!==null?Zi("Suspense Fallback"):Zi("Suspense");case 19:return Zi("SuspenseList");case 0:case 15:return za(r.type,!1);case 11:return za(r.type.render,!1);case 1:return za(r.type,!0);case 31:return Zi("Activity");default:return""}}function ic(r){try{var a="",l=null;do a+=nc(r,l),l=r,r=r.return;while(r);return a}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}var Ft=Object.prototype.hasOwnProperty,Jt=n.unstable_scheduleCallback,Ss=n.unstable_cancelCallback,wg=n.unstable_shouldYield,$f=n.unstable_requestPaint,On=n.unstable_now,qa=n.unstable_getCurrentPriorityLevel,rc=n.unstable_ImmediatePriority,sc=n.unstable_UserBlockingPriority,Is=n.unstable_NormalPriority,Sg=n.unstable_LowPriority,Yf=n.unstable_IdlePriority,Wf=n.log,Xf=n.unstable_setDisableYieldValue,Ri=null,fn=null;function li(r){if(typeof Wf=="function"&&Xf(r),fn&&typeof fn.setStrictMode=="function")try{fn.setStrictMode(Ri,r)}catch{}}var xt=Math.clz32?Math.clz32:Zf,Jf=Math.log,sl=Math.LN2;function Zf(r){return r>>>=0,r===0?32:31-(Jf(r)/sl|0)|0}var er=256,ja=262144,Bt=4194304;function tr(r){var a=r&42;if(a!==0)return a;switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return r&261888;case 262144:case 524288:case 1048576:case 2097152:return r&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return r&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return r}}function nr(r,a,l){var c=r.pendingLanes;if(c===0)return 0;var m=0,g=r.suspendedLanes,E=r.pingedLanes;r=r.warmLanes;var S=c&134217727;return S!==0?(c=S&~g,c!==0?m=tr(c):(E&=S,E!==0?m=tr(E):l||(l=S&~r,l!==0&&(m=tr(l))))):(S=c&~g,S!==0?m=tr(S):E!==0?m=tr(E):l||(l=c&~r,l!==0&&(m=tr(l)))),m===0?0:a!==0&&a!==m&&(a&g)===0&&(g=m&-m,l=a&-a,g>=l||g===32&&(l&4194048)!==0)?a:m}function Ci(r,a){return(r.pendingLanes&~(r.suspendedLanes&~r.pingedLanes)&a)===0}function Ig(r,a){switch(r){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ed(){var r=Bt;return Bt<<=1,(Bt&62914560)===0&&(Bt=4194304),r}function ir(r){for(var a=[],l=0;31>l;l++)a.push(r);return a}function Ha(r,a){r.pendingLanes|=a,a!==268435456&&(r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0)}function Ag(r,a,l,c,m,g){var E=r.pendingLanes;r.pendingLanes=l,r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0,r.expiredLanes&=l,r.entangledLanes&=l,r.errorRecoveryDisabledLanes&=l,r.shellSuspendCounter=0;var S=r.entanglements,D=r.expirationTimes,j=r.hiddenUpdates;for(l=E&~l;0<l;){var Y=31-xt(l),Z=1<<Y;S[Y]=0,D[Y]=-1;var H=j[Y];if(H!==null)for(j[Y]=null,Y=0;Y<H.length;Y++){var Q=H[Y];Q!==null&&(Q.lane&=-536870913)}l&=~Z}c!==0&&Ga(r,c,0),g!==0&&m===0&&r.tag!==0&&(r.suspendedLanes|=g&~(E&~a))}function Ga(r,a,l){r.pendingLanes|=a,r.suspendedLanes&=~a;var c=31-xt(a);r.entangledLanes|=a,r.entanglements[c]=r.entanglements[c]|1073741824|l&261930}function ac(r,a){var l=r.entangledLanes|=a;for(r=r.entanglements;l;){var c=31-xt(l),m=1<<c;m&a|r[c]&a&&(r[c]|=a),l&=~m}}function oc(r,a){var l=a&-a;return l=(l&42)!==0?1:Ka(l),(l&(r.suspendedLanes|a))!==0?0:l}function Ka(r){switch(r){case 2:r=1;break;case 8:r=4;break;case 32:r=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:r=128;break;case 268435456:r=134217728;break;default:r=0}return r}function Ur(r){return r&=-r,2<r?8<r?(r&134217727)!==0?32:268435456:8:2}function td(){var r=le.p;return r!==0?r:(r=window.event,r===void 0?32:_A(r.type))}function Ni(r,a){var l=le.p;try{return le.p=r,a()}finally{le.p=l}}var Di=Math.random().toString(36).slice(2),zt="__reactFiber$"+Di,nn="__reactProps$"+Di,rr="__reactContainer$"+Di,al="__reactEvents$"+Di,bg="__reactListeners$"+Di,nd="__reactHandles$"+Di,id="__reactResources$"+Di,sr="__reactMarker$"+Di;function ol(r){delete r[zt],delete r[nn],delete r[al],delete r[bg],delete r[nd]}function ar(r){var a=r[zt];if(a)return a;for(var l=r.parentNode;l;){if(a=l[rr]||l[zt]){if(l=a.alternate,a.child!==null||l!==null&&l.child!==null)for(r=tA(r);r!==null;){if(l=r[zt])return l;r=tA(r)}return a}r=l,l=r.parentNode}return null}function ui(r){if(r=r[zt]||r[rr]){var a=r.tag;if(a===5||a===6||a===13||a===31||a===26||a===27||a===3)return r}return null}function Yn(r){var a=r.tag;if(a===5||a===26||a===27||a===6)return r.stateNode;throw Error(i(33))}function or(r){var a=r[id];return a||(a=r[id]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function qt(r){r[sr]=!0}var lc=new Set,uc={};function lr(r,a){ur(r,a),ur(r+"Capture",a)}function ur(r,a){for(uc[r]=a,r=0;r<a.length;r++)lc.add(a[r])}var cc=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),hc={},fc={};function rd(r){return Ft.call(fc,r)?!0:Ft.call(hc,r)?!1:cc.test(r)?fc[r]=!0:(hc[r]=!0,!1)}function ll(r,a,l){if(rd(a))if(l===null)r.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":r.removeAttribute(a);return;case"boolean":var c=a.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){r.removeAttribute(a);return}}r.setAttribute(a,""+l)}}function Wn(r,a,l){if(l===null)r.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(a);return}r.setAttribute(a,""+l)}}function jt(r,a,l,c){if(c===null)r.removeAttribute(l);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(l);return}r.setAttributeNS(a,l,""+c)}}function rn(r){switch(typeof r){case"bigint":case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function As(r){var a=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function dc(r,a,l){var c=Object.getOwnPropertyDescriptor(r.constructor.prototype,a);if(!r.hasOwnProperty(a)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var m=c.get,g=c.set;return Object.defineProperty(r,a,{configurable:!0,get:function(){return m.call(this)},set:function(E){l=""+E,g.call(this,E)}}),Object.defineProperty(r,a,{enumerable:c.enumerable}),{getValue:function(){return l},setValue:function(E){l=""+E},stopTracking:function(){r._valueTracker=null,delete r[a]}}}}function nt(r){if(!r._valueTracker){var a=As(r)?"checked":"value";r._valueTracker=dc(r,a,""+r[a])}}function Qa(r){if(!r)return!1;var a=r._valueTracker;if(!a)return!0;var l=a.getValue(),c="";return r&&(c=As(r)?r.checked?"true":"false":r.value),r=c,r!==l?(a.setValue(r),!0):!1}function cr(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}var $a=/[\n"\\]/g;function Un(r){return r.replace($a,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function ul(r,a,l,c,m,g,E,S){r.name="",E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?r.type=E:r.removeAttribute("type"),a!=null?E==="number"?(a===0&&r.value===""||r.value!=a)&&(r.value=""+rn(a)):r.value!==""+rn(a)&&(r.value=""+rn(a)):E!=="submit"&&E!=="reset"||r.removeAttribute("value"),a!=null?mc(r,E,rn(a)):l!=null?mc(r,E,rn(l)):c!=null&&r.removeAttribute("value"),m==null&&g!=null&&(r.defaultChecked=!!g),m!=null&&(r.checked=m&&typeof m!="function"&&typeof m!="symbol"),S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?r.name=""+rn(S):r.removeAttribute("name")}function sd(r,a,l,c,m,g,E,S){if(g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"&&(r.type=g),a!=null||l!=null){if(!(g!=="submit"&&g!=="reset"||a!=null)){nt(r);return}l=l!=null?""+rn(l):"",a=a!=null?""+rn(a):l,S||a===r.value||(r.value=a),r.defaultValue=a}c=c??m,c=typeof c!="function"&&typeof c!="symbol"&&!!c,r.checked=S?r.checked:!!c,r.defaultChecked=!!c,E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"&&(r.name=E),nt(r)}function mc(r,a,l){a==="number"&&cr(r.ownerDocument)===r||r.defaultValue===""+l||(r.defaultValue=""+l)}function bs(r,a,l,c){if(r=r.options,a){a={};for(var m=0;m<l.length;m++)a["$"+l[m]]=!0;for(l=0;l<r.length;l++)m=a.hasOwnProperty("$"+r[l].value),r[l].selected!==m&&(r[l].selected=m),m&&c&&(r[l].defaultSelected=!0)}else{for(l=""+rn(l),a=null,m=0;m<r.length;m++){if(r[m].value===l){r[m].selected=!0,c&&(r[m].defaultSelected=!0);return}a!==null||r[m].disabled||(a=r[m])}a!==null&&(a.selected=!0)}}function ad(r,a,l){if(a!=null&&(a=""+rn(a),a!==r.value&&(r.value=a),l==null)){r.defaultValue!==a&&(r.defaultValue=a);return}r.defaultValue=l!=null?""+rn(l):""}function Rs(r,a,l,c){if(a==null){if(c!=null){if(l!=null)throw Error(i(92));if(Wt(c)){if(1<c.length)throw Error(i(93));c=c[0]}l=c}l==null&&(l=""),a=l}l=rn(a),r.defaultValue=l,c=r.textContent,c===l&&c!==""&&c!==null&&(r.value=c),nt(r)}function Fn(r,a){if(a){var l=r.firstChild;if(l&&l===r.lastChild&&l.nodeType===3){l.nodeValue=a;return}}r.textContent=a}var od=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function pc(r,a,l){var c=a.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?c?r.setProperty(a,""):a==="float"?r.cssFloat="":r[a]="":c?r.setProperty(a,l):typeof l!="number"||l===0||od.has(a)?a==="float"?r.cssFloat=l:r[a]=(""+l).trim():r[a]=l+"px"}function gc(r,a,l){if(a!=null&&typeof a!="object")throw Error(i(62));if(r=r.style,l!=null){for(var c in l)!l.hasOwnProperty(c)||a!=null&&a.hasOwnProperty(c)||(c.indexOf("--")===0?r.setProperty(c,""):c==="float"?r.cssFloat="":r[c]="");for(var m in a)c=a[m],a.hasOwnProperty(m)&&l[m]!==c&&pc(r,m,c)}else for(var g in a)a.hasOwnProperty(g)&&pc(r,g,a[g])}function cl(r){if(r.indexOf("-")===-1)return!1;switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ld=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Cs=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function hl(r){return Cs.test(""+r)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":r}function Oi(){}var _c=null;function ci(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var Ns=null,hr=null;function Ya(r){var a=ui(r);if(a&&(r=a.stateNode)){var l=r[nn]||null;e:switch(r=a.stateNode,a.type){case"input":if(ul(r,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),a=l.name,l.type==="radio"&&a!=null){for(l=r;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+Un(""+a)+'"][type="radio"]'),a=0;a<l.length;a++){var c=l[a];if(c!==r&&c.form===r.form){var m=c[nn]||null;if(!m)throw Error(i(90));ul(c,m.value,m.defaultValue,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name)}}for(a=0;a<l.length;a++)c=l[a],c.form===r.form&&Qa(c)}break e;case"textarea":ad(r,l.value,l.defaultValue);break e;case"select":a=l.value,a!=null&&bs(r,!!l.multiple,a,!1)}}}var fl=!1;function Ds(r,a,l){if(fl)return r(a,l);fl=!0;try{var c=r(a);return c}finally{if(fl=!1,(Ns!==null||hr!==null)&&(tm(),Ns&&(a=Ns,r=hr,hr=Ns=null,Ya(a),r)))for(a=0;a<r.length;a++)Ya(r[a])}}function xi(r,a){var l=r.stateNode;if(l===null)return null;var c=l[nn]||null;if(c===null)return null;l=c[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(r=r.type,c=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!c;break e;default:r=!1}if(r)return null;if(l&&typeof l!="function")throw Error(i(231,a,typeof l));return l}var hi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Wa=!1;if(hi)try{var ot={};Object.defineProperty(ot,"passive",{get:function(){Wa=!0}}),window.addEventListener("test",ot,ot),window.removeEventListener("test",ot,ot)}catch{Wa=!1}var fr=null,yc=null,Xa=null;function vc(){if(Xa)return Xa;var r,a=yc,l=a.length,c,m="value"in fr?fr.value:fr.textContent,g=m.length;for(r=0;r<l&&a[r]===m[r];r++);var E=l-r;for(c=1;c<=E&&a[l-c]===m[g-c];c++);return Xa=m.slice(r,1<c?1-c:void 0)}function Ja(r){var a=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&a===13&&(r=13)):r=a,r===10&&(r=13),32<=r||r===13?r:0}function Fr(){return!0}function Pi(){return!1}function dn(r){function a(l,c,m,g,E){this._reactName=l,this._targetInst=m,this.type=c,this.nativeEvent=g,this.target=E,this.currentTarget=null;for(var S in r)r.hasOwnProperty(S)&&(l=r[S],this[S]=l?l(g):g[S]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?Fr:Pi,this.isPropagationStopped=Pi,this}return y(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=Fr)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=Fr)},persist:function(){},isPersistent:Fr}),a}var Br={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},dr=dn(Br),Os=y({},Br,{view:0,detail:0}),Ec=dn(Os),xs,dl,mr,ml=y({},Os,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ps,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==mr&&(mr&&r.type==="mousemove"?(xs=r.screenX-mr.screenX,dl=r.screenY-mr.screenY):dl=xs=0,mr=r),xs)},movementY:function(r){return"movementY"in r?r.movementY:dl}}),Tc=dn(ml),Za=y({},ml,{dataTransfer:0}),ud=dn(Za),cd=y({},Os,{relatedTarget:0}),eo=dn(cd),wc=y({},Br,{animationName:0,elapsedTime:0,pseudoElement:0}),hd=dn(wc),pl=y({},Br,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),fd=dn(pl),dd=y({},Br,{data:0}),pr=dn(dd),md={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},pd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},gd={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function _d(r){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(r):(r=gd[r])?!!a[r]:!1}function Ps(){return _d}var xn=y({},Os,{key:function(r){if(r.key){var a=md[r.key]||r.key;if(a!=="Unidentified")return a}return r.type==="keypress"?(r=Ja(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?pd[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ps,charCode:function(r){return r.type==="keypress"?Ja(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?Ja(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),yd=dn(xn),vd=y({},ml,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),zr=dn(vd),f=y({},Os,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ps}),v=dn(f),T=y({},Br,{propertyName:0,elapsedTime:0,pseudoElement:0}),I=dn(T),z=y({},ml,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),K=dn(z),se=y({},Br,{newState:0,oldState:0}),Ce=dn(se),Pt=[9,13,27,32],Xe=hi&&"CompositionEvent"in window,wt=null;hi&&"documentMode"in document&&(wt=document.documentMode);var fi=hi&&"TextEvent"in window&&!wt,gr=hi&&(!Xe||wt&&8<wt&&11>=wt),Mi=" ",ki=!1;function to(r,a){switch(r){case"keyup":return Pt.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function gl(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var _l=!1;function lx(r,a){switch(r){case"compositionend":return gl(a);case"keypress":return a.which!==32?null:(ki=!0,Mi);case"textInput":return r=a.data,r===Mi&&ki?null:r;default:return null}}function ux(r,a){if(_l)return r==="compositionend"||!Xe&&to(r,a)?(r=vc(),Xa=yc=fr=null,_l=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return gr&&a.locale!=="ko"?null:a.data;default:return null}}var cx={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function rw(r){var a=r&&r.nodeName&&r.nodeName.toLowerCase();return a==="input"?!!cx[r.type]:a==="textarea"}function sw(r,a,l,c){Ns?hr?hr.push(c):hr=[c]:Ns=c,a=lm(a,"onChange"),0<a.length&&(l=new dr("onChange","change",null,l,c),r.push({event:l,listeners:a}))}var Sc=null,Ic=null;function hx(r){zI(r,0)}function Ed(r){var a=Yn(r);if(Qa(a))return r}function aw(r,a){if(r==="change")return a}var ow=!1;if(hi){var Rg;if(hi){var Cg="oninput"in document;if(!Cg){var lw=document.createElement("div");lw.setAttribute("oninput","return;"),Cg=typeof lw.oninput=="function"}Rg=Cg}else Rg=!1;ow=Rg&&(!document.documentMode||9<document.documentMode)}function uw(){Sc&&(Sc.detachEvent("onpropertychange",cw),Ic=Sc=null)}function cw(r){if(r.propertyName==="value"&&Ed(Ic)){var a=[];sw(a,Ic,r,ci(r)),Ds(hx,a)}}function fx(r,a,l){r==="focusin"?(uw(),Sc=a,Ic=l,Sc.attachEvent("onpropertychange",cw)):r==="focusout"&&uw()}function dx(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return Ed(Ic)}function mx(r,a){if(r==="click")return Ed(a)}function px(r,a){if(r==="input"||r==="change")return Ed(a)}function gx(r,a){return r===a&&(r!==0||1/r===1/a)||r!==r&&a!==a}var Xn=typeof Object.is=="function"?Object.is:gx;function Ac(r,a){if(Xn(r,a))return!0;if(typeof r!="object"||r===null||typeof a!="object"||a===null)return!1;var l=Object.keys(r),c=Object.keys(a);if(l.length!==c.length)return!1;for(c=0;c<l.length;c++){var m=l[c];if(!Ft.call(a,m)||!Xn(r[m],a[m]))return!1}return!0}function hw(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function fw(r,a){var l=hw(r);r=0;for(var c;l;){if(l.nodeType===3){if(c=r+l.textContent.length,r<=a&&c>=a)return{node:l,offset:a-r};r=c}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=hw(l)}}function dw(r,a){return r&&a?r===a?!0:r&&r.nodeType===3?!1:a&&a.nodeType===3?dw(r,a.parentNode):"contains"in r?r.contains(a):r.compareDocumentPosition?!!(r.compareDocumentPosition(a)&16):!1:!1}function mw(r){r=r!=null&&r.ownerDocument!=null&&r.ownerDocument.defaultView!=null?r.ownerDocument.defaultView:window;for(var a=cr(r.document);a instanceof r.HTMLIFrameElement;){try{var l=typeof a.contentWindow.location.href=="string"}catch{l=!1}if(l)r=a.contentWindow;else break;a=cr(r.document)}return a}function Ng(r){var a=r&&r.nodeName&&r.nodeName.toLowerCase();return a&&(a==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||a==="textarea"||r.contentEditable==="true")}var _x=hi&&"documentMode"in document&&11>=document.documentMode,yl=null,Dg=null,bc=null,Og=!1;function pw(r,a,l){var c=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;Og||yl==null||yl!==cr(c)||(c=yl,"selectionStart"in c&&Ng(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),bc&&Ac(bc,c)||(bc=c,c=lm(Dg,"onSelect"),0<c.length&&(a=new dr("onSelect","select",null,a,l),r.push({event:a,listeners:c}),a.target=yl)))}function no(r,a){var l={};return l[r.toLowerCase()]=a.toLowerCase(),l["Webkit"+r]="webkit"+a,l["Moz"+r]="moz"+a,l}var vl={animationend:no("Animation","AnimationEnd"),animationiteration:no("Animation","AnimationIteration"),animationstart:no("Animation","AnimationStart"),transitionrun:no("Transition","TransitionRun"),transitionstart:no("Transition","TransitionStart"),transitioncancel:no("Transition","TransitionCancel"),transitionend:no("Transition","TransitionEnd")},xg={},gw={};hi&&(gw=document.createElement("div").style,"AnimationEvent"in window||(delete vl.animationend.animation,delete vl.animationiteration.animation,delete vl.animationstart.animation),"TransitionEvent"in window||delete vl.transitionend.transition);function io(r){if(xg[r])return xg[r];if(!vl[r])return r;var a=vl[r],l;for(l in a)if(a.hasOwnProperty(l)&&l in gw)return xg[r]=a[l];return r}var _w=io("animationend"),yw=io("animationiteration"),vw=io("animationstart"),yx=io("transitionrun"),vx=io("transitionstart"),Ex=io("transitioncancel"),Ew=io("transitionend"),Tw=new Map,Pg="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Pg.push("scrollEnd");function Vi(r,a){Tw.set(r,a),lr(a,[r])}var Td=typeof reportError=="function"?reportError:function(r){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof r=="object"&&r!==null&&typeof r.message=="string"?String(r.message):String(r),error:r});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",r);return}console.error(r)},di=[],El=0,Mg=0;function wd(){for(var r=El,a=Mg=El=0;a<r;){var l=di[a];di[a++]=null;var c=di[a];di[a++]=null;var m=di[a];di[a++]=null;var g=di[a];if(di[a++]=null,c!==null&&m!==null){var E=c.pending;E===null?m.next=m:(m.next=E.next,E.next=m),c.pending=m}g!==0&&ww(l,m,g)}}function Sd(r,a,l,c){di[El++]=r,di[El++]=a,di[El++]=l,di[El++]=c,Mg|=c,r.lanes|=c,r=r.alternate,r!==null&&(r.lanes|=c)}function kg(r,a,l,c){return Sd(r,a,l,c),Id(r)}function ro(r,a){return Sd(r,null,null,a),Id(r)}function ww(r,a,l){r.lanes|=l;var c=r.alternate;c!==null&&(c.lanes|=l);for(var m=!1,g=r.return;g!==null;)g.childLanes|=l,c=g.alternate,c!==null&&(c.childLanes|=l),g.tag===22&&(r=g.stateNode,r===null||r._visibility&1||(m=!0)),r=g,g=g.return;return r.tag===3?(g=r.stateNode,m&&a!==null&&(m=31-xt(l),r=g.hiddenUpdates,c=r[m],c===null?r[m]=[a]:c.push(a),a.lane=l|536870912),g):null}function Id(r){if(50<$c)throw $c=0,H_=null,Error(i(185));for(var a=r.return;a!==null;)r=a,a=r.return;return r.tag===3?r.stateNode:null}var Tl={};function Tx(r,a,l,c){this.tag=r,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Jn(r,a,l,c){return new Tx(r,a,l,c)}function Vg(r){return r=r.prototype,!(!r||!r.isReactComponent)}function qr(r,a){var l=r.alternate;return l===null?(l=Jn(r.tag,a,r.key,r.mode),l.elementType=r.elementType,l.type=r.type,l.stateNode=r.stateNode,l.alternate=r,r.alternate=l):(l.pendingProps=a,l.type=r.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=r.flags&65011712,l.childLanes=r.childLanes,l.lanes=r.lanes,l.child=r.child,l.memoizedProps=r.memoizedProps,l.memoizedState=r.memoizedState,l.updateQueue=r.updateQueue,a=r.dependencies,l.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},l.sibling=r.sibling,l.index=r.index,l.ref=r.ref,l.refCleanup=r.refCleanup,l}function Sw(r,a){r.flags&=65011714;var l=r.alternate;return l===null?(r.childLanes=0,r.lanes=a,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=l.childLanes,r.lanes=l.lanes,r.child=l.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=l.memoizedProps,r.memoizedState=l.memoizedState,r.updateQueue=l.updateQueue,r.type=l.type,a=l.dependencies,r.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),r}function Ad(r,a,l,c,m,g){var E=0;if(c=r,typeof r=="function")Vg(r)&&(E=1);else if(typeof r=="string")E=bP(r,l,de.current)?26:r==="html"||r==="head"||r==="body"?27:5;else e:switch(r){case C:return r=Jn(31,l,a,m),r.elementType=C,r.lanes=g,r;case F:return so(l.children,m,g,a);case V:E=8,m|=24;break;case X:return r=Jn(12,l,a,m|2),r.elementType=X,r.lanes=g,r;case ye:return r=Jn(13,l,a,m),r.elementType=ye,r.lanes=g,r;case ve:return r=Jn(19,l,a,m),r.elementType=ve,r.lanes=g,r;default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case te:E=10;break e;case ne:E=9;break e;case fe:E=11;break e;case R:E=14;break e;case b:E=16,c=null;break e}E=29,l=Error(i(130,r===null?"null":typeof r,"")),c=null}return a=Jn(E,l,a,m),a.elementType=r,a.type=c,a.lanes=g,a}function so(r,a,l,c){return r=Jn(7,r,c,a),r.lanes=l,r}function Lg(r,a,l){return r=Jn(6,r,null,a),r.lanes=l,r}function Iw(r){var a=Jn(18,null,null,0);return a.stateNode=r,a}function Ug(r,a,l){return a=Jn(4,r.children!==null?r.children:[],r.key,a),a.lanes=l,a.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},a}var Aw=new WeakMap;function mi(r,a){if(typeof r=="object"&&r!==null){var l=Aw.get(r);return l!==void 0?l:(a={value:r,source:a,stack:ic(a)},Aw.set(r,a),a)}return{value:r,source:a,stack:ic(a)}}var wl=[],Sl=0,bd=null,Rc=0,pi=[],gi=0,Ms=null,_r=1,yr="";function jr(r,a){wl[Sl++]=Rc,wl[Sl++]=bd,bd=r,Rc=a}function bw(r,a,l){pi[gi++]=_r,pi[gi++]=yr,pi[gi++]=Ms,Ms=r;var c=_r;r=yr;var m=32-xt(c)-1;c&=~(1<<m),l+=1;var g=32-xt(a)+m;if(30<g){var E=m-m%5;g=(c&(1<<E)-1).toString(32),c>>=E,m-=E,_r=1<<32-xt(a)+m|l<<m|c,yr=g+r}else _r=1<<g|l<<m|c,yr=r}function Fg(r){r.return!==null&&(jr(r,1),bw(r,1,0))}function Bg(r){for(;r===bd;)bd=wl[--Sl],wl[Sl]=null,Rc=wl[--Sl],wl[Sl]=null;for(;r===Ms;)Ms=pi[--gi],pi[gi]=null,yr=pi[--gi],pi[gi]=null,_r=pi[--gi],pi[gi]=null}function Rw(r,a){pi[gi++]=_r,pi[gi++]=yr,pi[gi++]=Ms,_r=a.id,yr=a.overflow,Ms=r}var mn=null,mt=null,Be=!1,ks=null,_i=!1,zg=Error(i(519));function Vs(r){var a=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Cc(mi(a,r)),zg}function Cw(r){var a=r.stateNode,l=r.type,c=r.memoizedProps;switch(a[zt]=r,a[nn]=c,l){case"dialog":ke("cancel",a),ke("close",a);break;case"iframe":case"object":case"embed":ke("load",a);break;case"video":case"audio":for(l=0;l<Wc.length;l++)ke(Wc[l],a);break;case"source":ke("error",a);break;case"img":case"image":case"link":ke("error",a),ke("load",a);break;case"details":ke("toggle",a);break;case"input":ke("invalid",a),sd(a,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0);break;case"select":ke("invalid",a);break;case"textarea":ke("invalid",a),Rs(a,c.value,c.defaultValue,c.children)}l=c.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||a.textContent===""+l||c.suppressHydrationWarning===!0||GI(a.textContent,l)?(c.popover!=null&&(ke("beforetoggle",a),ke("toggle",a)),c.onScroll!=null&&ke("scroll",a),c.onScrollEnd!=null&&ke("scrollend",a),c.onClick!=null&&(a.onclick=Oi),a=!0):a=!1,a||Vs(r,!0)}function Nw(r){for(mn=r.return;mn;)switch(mn.tag){case 5:case 31:case 13:_i=!1;return;case 27:case 3:_i=!0;return;default:mn=mn.return}}function Il(r){if(r!==mn)return!1;if(!Be)return Nw(r),Be=!0,!1;var a=r.tag,l;if((l=a!==3&&a!==27)&&((l=a===5)&&(l=r.type,l=!(l!=="form"&&l!=="button")||sy(r.type,r.memoizedProps)),l=!l),l&&mt&&Vs(r),Nw(r),a===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(317));mt=eA(r)}else if(a===31){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(317));mt=eA(r)}else a===27?(a=mt,Ws(r.type)?(r=cy,cy=null,mt=r):mt=a):mt=mn?vi(r.stateNode.nextSibling):null;return!0}function ao(){mt=mn=null,Be=!1}function qg(){var r=ks;return r!==null&&(jn===null?jn=r:jn.push.apply(jn,r),ks=null),r}function Cc(r){ks===null?ks=[r]:ks.push(r)}var jg=M(null),oo=null,Hr=null;function Ls(r,a,l){ue(jg,a._currentValue),a._currentValue=l}function Gr(r){r._currentValue=jg.current,ee(jg)}function Hg(r,a,l){for(;r!==null;){var c=r.alternate;if((r.childLanes&a)!==a?(r.childLanes|=a,c!==null&&(c.childLanes|=a)):c!==null&&(c.childLanes&a)!==a&&(c.childLanes|=a),r===l)break;r=r.return}}function Gg(r,a,l,c){var m=r.child;for(m!==null&&(m.return=r);m!==null;){var g=m.dependencies;if(g!==null){var E=m.child;g=g.firstContext;e:for(;g!==null;){var S=g;g=m;for(var D=0;D<a.length;D++)if(S.context===a[D]){g.lanes|=l,S=g.alternate,S!==null&&(S.lanes|=l),Hg(g.return,l,r),c||(E=null);break e}g=S.next}}else if(m.tag===18){if(E=m.return,E===null)throw Error(i(341));E.lanes|=l,g=E.alternate,g!==null&&(g.lanes|=l),Hg(E,l,r),E=null}else E=m.child;if(E!==null)E.return=m;else for(E=m;E!==null;){if(E===r){E=null;break}if(m=E.sibling,m!==null){m.return=E.return,E=m;break}E=E.return}m=E}}function Al(r,a,l,c){r=null;for(var m=a,g=!1;m!==null;){if(!g){if((m.flags&524288)!==0)g=!0;else if((m.flags&262144)!==0)break}if(m.tag===10){var E=m.alternate;if(E===null)throw Error(i(387));if(E=E.memoizedProps,E!==null){var S=m.type;Xn(m.pendingProps.value,E.value)||(r!==null?r.push(S):r=[S])}}else if(m===qe.current){if(E=m.alternate,E===null)throw Error(i(387));E.memoizedState.memoizedState!==m.memoizedState.memoizedState&&(r!==null?r.push(th):r=[th])}m=m.return}r!==null&&Gg(a,r,l,c),a.flags|=262144}function Rd(r){for(r=r.firstContext;r!==null;){if(!Xn(r.context._currentValue,r.memoizedValue))return!0;r=r.next}return!1}function lo(r){oo=r,Hr=null,r=r.dependencies,r!==null&&(r.firstContext=null)}function pn(r){return Dw(oo,r)}function Cd(r,a){return oo===null&&lo(r),Dw(r,a)}function Dw(r,a){var l=a._currentValue;if(a={context:a,memoizedValue:l,next:null},Hr===null){if(r===null)throw Error(i(308));Hr=a,r.dependencies={lanes:0,firstContext:a},r.flags|=524288}else Hr=Hr.next=a;return l}var wx=typeof AbortController<"u"?AbortController:function(){var r=[],a=this.signal={aborted:!1,addEventListener:function(l,c){r.push(c)}};this.abort=function(){a.aborted=!0,r.forEach(function(l){return l()})}},Sx=n.unstable_scheduleCallback,Ix=n.unstable_NormalPriority,Ht={$$typeof:te,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Kg(){return{controller:new wx,data:new Map,refCount:0}}function Nc(r){r.refCount--,r.refCount===0&&Sx(Ix,function(){r.controller.abort()})}var Dc=null,Qg=0,bl=0,Rl=null;function Ax(r,a){if(Dc===null){var l=Dc=[];Qg=0,bl=W_(),Rl={status:"pending",value:void 0,then:function(c){l.push(c)}}}return Qg++,a.then(Ow,Ow),a}function Ow(){if(--Qg===0&&Dc!==null){Rl!==null&&(Rl.status="fulfilled");var r=Dc;Dc=null,bl=0,Rl=null;for(var a=0;a<r.length;a++)(0,r[a])()}}function bx(r,a){var l=[],c={status:"pending",value:null,reason:null,then:function(m){l.push(m)}};return r.then(function(){c.status="fulfilled",c.value=a;for(var m=0;m<l.length;m++)(0,l[m])(a)},function(m){for(c.status="rejected",c.reason=m,m=0;m<l.length;m++)(0,l[m])(void 0)}),c}var xw=W.S;W.S=function(r,a){pI=On(),typeof a=="object"&&a!==null&&typeof a.then=="function"&&Ax(r,a),xw!==null&&xw(r,a)};var uo=M(null);function $g(){var r=uo.current;return r!==null?r:ft.pooledCache}function Nd(r,a){a===null?ue(uo,uo.current):ue(uo,a.pool)}function Pw(){var r=$g();return r===null?null:{parent:Ht._currentValue,pool:r}}var Cl=Error(i(460)),Yg=Error(i(474)),Dd=Error(i(542)),Od={then:function(){}};function Mw(r){return r=r.status,r==="fulfilled"||r==="rejected"}function kw(r,a,l){switch(l=r[l],l===void 0?r.push(a):l!==a&&(a.then(Oi,Oi),a=l),a.status){case"fulfilled":return a.value;case"rejected":throw r=a.reason,Lw(r),r;default:if(typeof a.status=="string")a.then(Oi,Oi);else{if(r=ft,r!==null&&100<r.shellSuspendCounter)throw Error(i(482));r=a,r.status="pending",r.then(function(c){if(a.status==="pending"){var m=a;m.status="fulfilled",m.value=c}},function(c){if(a.status==="pending"){var m=a;m.status="rejected",m.reason=c}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw r=a.reason,Lw(r),r}throw ho=a,Cl}}function co(r){try{var a=r._init;return a(r._payload)}catch(l){throw l!==null&&typeof l=="object"&&typeof l.then=="function"?(ho=l,Cl):l}}var ho=null;function Vw(){if(ho===null)throw Error(i(459));var r=ho;return ho=null,r}function Lw(r){if(r===Cl||r===Dd)throw Error(i(483))}var Nl=null,Oc=0;function xd(r){var a=Oc;return Oc+=1,Nl===null&&(Nl=[]),kw(Nl,r,a)}function xc(r,a){a=a.props.ref,r.ref=a!==void 0?a:null}function Pd(r,a){throw a.$$typeof===w?Error(i(525)):(r=Object.prototype.toString.call(a),Error(i(31,r==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":r)))}function Uw(r){function a(L,P){if(r){var q=L.deletions;q===null?(L.deletions=[P],L.flags|=16):q.push(P)}}function l(L,P){if(!r)return null;for(;P!==null;)a(L,P),P=P.sibling;return null}function c(L){for(var P=new Map;L!==null;)L.key!==null?P.set(L.key,L):P.set(L.index,L),L=L.sibling;return P}function m(L,P){return L=qr(L,P),L.index=0,L.sibling=null,L}function g(L,P,q){return L.index=q,r?(q=L.alternate,q!==null?(q=q.index,q<P?(L.flags|=67108866,P):q):(L.flags|=67108866,P)):(L.flags|=1048576,P)}function E(L){return r&&L.alternate===null&&(L.flags|=67108866),L}function S(L,P,q,J){return P===null||P.tag!==6?(P=Lg(q,L.mode,J),P.return=L,P):(P=m(P,q),P.return=L,P)}function D(L,P,q,J){var Te=q.type;return Te===F?Y(L,P,q.props.children,J,q.key):P!==null&&(P.elementType===Te||typeof Te=="object"&&Te!==null&&Te.$$typeof===b&&co(Te)===P.type)?(P=m(P,q.props),xc(P,q),P.return=L,P):(P=Ad(q.type,q.key,q.props,null,L.mode,J),xc(P,q),P.return=L,P)}function j(L,P,q,J){return P===null||P.tag!==4||P.stateNode.containerInfo!==q.containerInfo||P.stateNode.implementation!==q.implementation?(P=Ug(q,L.mode,J),P.return=L,P):(P=m(P,q.children||[]),P.return=L,P)}function Y(L,P,q,J,Te){return P===null||P.tag!==7?(P=so(q,L.mode,J,Te),P.return=L,P):(P=m(P,q),P.return=L,P)}function Z(L,P,q){if(typeof P=="string"&&P!==""||typeof P=="number"||typeof P=="bigint")return P=Lg(""+P,L.mode,q),P.return=L,P;if(typeof P=="object"&&P!==null){switch(P.$$typeof){case A:return q=Ad(P.type,P.key,P.props,null,L.mode,q),xc(q,P),q.return=L,q;case O:return P=Ug(P,L.mode,q),P.return=L,P;case b:return P=co(P),Z(L,P,q)}if(Wt(P)||U(P))return P=so(P,L.mode,q,null),P.return=L,P;if(typeof P.then=="function")return Z(L,xd(P),q);if(P.$$typeof===te)return Z(L,Cd(L,P),q);Pd(L,P)}return null}function H(L,P,q,J){var Te=P!==null?P.key:null;if(typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint")return Te!==null?null:S(L,P,""+q,J);if(typeof q=="object"&&q!==null){switch(q.$$typeof){case A:return q.key===Te?D(L,P,q,J):null;case O:return q.key===Te?j(L,P,q,J):null;case b:return q=co(q),H(L,P,q,J)}if(Wt(q)||U(q))return Te!==null?null:Y(L,P,q,J,null);if(typeof q.then=="function")return H(L,P,xd(q),J);if(q.$$typeof===te)return H(L,P,Cd(L,q),J);Pd(L,q)}return null}function Q(L,P,q,J,Te){if(typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint")return L=L.get(q)||null,S(P,L,""+J,Te);if(typeof J=="object"&&J!==null){switch(J.$$typeof){case A:return L=L.get(J.key===null?q:J.key)||null,D(P,L,J,Te);case O:return L=L.get(J.key===null?q:J.key)||null,j(P,L,J,Te);case b:return J=co(J),Q(L,P,q,J,Te)}if(Wt(J)||U(J))return L=L.get(q)||null,Y(P,L,J,Te,null);if(typeof J.then=="function")return Q(L,P,q,xd(J),Te);if(J.$$typeof===te)return Q(L,P,q,Cd(P,J),Te);Pd(P,J)}return null}function pe(L,P,q,J){for(var Te=null,$e=null,_e=P,xe=P=0,Ue=null;_e!==null&&xe<q.length;xe++){_e.index>xe?(Ue=_e,_e=null):Ue=_e.sibling;var Ye=H(L,_e,q[xe],J);if(Ye===null){_e===null&&(_e=Ue);break}r&&_e&&Ye.alternate===null&&a(L,_e),P=g(Ye,P,xe),$e===null?Te=Ye:$e.sibling=Ye,$e=Ye,_e=Ue}if(xe===q.length)return l(L,_e),Be&&jr(L,xe),Te;if(_e===null){for(;xe<q.length;xe++)_e=Z(L,q[xe],J),_e!==null&&(P=g(_e,P,xe),$e===null?Te=_e:$e.sibling=_e,$e=_e);return Be&&jr(L,xe),Te}for(_e=c(_e);xe<q.length;xe++)Ue=Q(_e,L,xe,q[xe],J),Ue!==null&&(r&&Ue.alternate!==null&&_e.delete(Ue.key===null?xe:Ue.key),P=g(Ue,P,xe),$e===null?Te=Ue:$e.sibling=Ue,$e=Ue);return r&&_e.forEach(function(ta){return a(L,ta)}),Be&&jr(L,xe),Te}function Se(L,P,q,J){if(q==null)throw Error(i(151));for(var Te=null,$e=null,_e=P,xe=P=0,Ue=null,Ye=q.next();_e!==null&&!Ye.done;xe++,Ye=q.next()){_e.index>xe?(Ue=_e,_e=null):Ue=_e.sibling;var ta=H(L,_e,Ye.value,J);if(ta===null){_e===null&&(_e=Ue);break}r&&_e&&ta.alternate===null&&a(L,_e),P=g(ta,P,xe),$e===null?Te=ta:$e.sibling=ta,$e=ta,_e=Ue}if(Ye.done)return l(L,_e),Be&&jr(L,xe),Te;if(_e===null){for(;!Ye.done;xe++,Ye=q.next())Ye=Z(L,Ye.value,J),Ye!==null&&(P=g(Ye,P,xe),$e===null?Te=Ye:$e.sibling=Ye,$e=Ye);return Be&&jr(L,xe),Te}for(_e=c(_e);!Ye.done;xe++,Ye=q.next())Ye=Q(_e,L,xe,Ye.value,J),Ye!==null&&(r&&Ye.alternate!==null&&_e.delete(Ye.key===null?xe:Ye.key),P=g(Ye,P,xe),$e===null?Te=Ye:$e.sibling=Ye,$e=Ye);return r&&_e.forEach(function(LP){return a(L,LP)}),Be&&jr(L,xe),Te}function ct(L,P,q,J){if(typeof q=="object"&&q!==null&&q.type===F&&q.key===null&&(q=q.props.children),typeof q=="object"&&q!==null){switch(q.$$typeof){case A:e:{for(var Te=q.key;P!==null;){if(P.key===Te){if(Te=q.type,Te===F){if(P.tag===7){l(L,P.sibling),J=m(P,q.props.children),J.return=L,L=J;break e}}else if(P.elementType===Te||typeof Te=="object"&&Te!==null&&Te.$$typeof===b&&co(Te)===P.type){l(L,P.sibling),J=m(P,q.props),xc(J,q),J.return=L,L=J;break e}l(L,P);break}else a(L,P);P=P.sibling}q.type===F?(J=so(q.props.children,L.mode,J,q.key),J.return=L,L=J):(J=Ad(q.type,q.key,q.props,null,L.mode,J),xc(J,q),J.return=L,L=J)}return E(L);case O:e:{for(Te=q.key;P!==null;){if(P.key===Te)if(P.tag===4&&P.stateNode.containerInfo===q.containerInfo&&P.stateNode.implementation===q.implementation){l(L,P.sibling),J=m(P,q.children||[]),J.return=L,L=J;break e}else{l(L,P);break}else a(L,P);P=P.sibling}J=Ug(q,L.mode,J),J.return=L,L=J}return E(L);case b:return q=co(q),ct(L,P,q,J)}if(Wt(q))return pe(L,P,q,J);if(U(q)){if(Te=U(q),typeof Te!="function")throw Error(i(150));return q=Te.call(q),Se(L,P,q,J)}if(typeof q.then=="function")return ct(L,P,xd(q),J);if(q.$$typeof===te)return ct(L,P,Cd(L,q),J);Pd(L,q)}return typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint"?(q=""+q,P!==null&&P.tag===6?(l(L,P.sibling),J=m(P,q),J.return=L,L=J):(l(L,P),J=Lg(q,L.mode,J),J.return=L,L=J),E(L)):l(L,P)}return function(L,P,q,J){try{Oc=0;var Te=ct(L,P,q,J);return Nl=null,Te}catch(_e){if(_e===Cl||_e===Dd)throw _e;var $e=Jn(29,_e,null,L.mode);return $e.lanes=J,$e.return=L,$e}finally{}}}var fo=Uw(!0),Fw=Uw(!1),Us=!1;function Wg(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Xg(r,a){r=r.updateQueue,a.updateQueue===r&&(a.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,callbacks:null})}function Fs(r){return{lane:r,tag:0,payload:null,callback:null,next:null}}function Bs(r,a,l){var c=r.updateQueue;if(c===null)return null;if(c=c.shared,(Je&2)!==0){var m=c.pending;return m===null?a.next=a:(a.next=m.next,m.next=a),c.pending=a,a=Id(r),ww(r,null,l),a}return Sd(r,c,a,l),Id(r)}function Pc(r,a,l){if(a=a.updateQueue,a!==null&&(a=a.shared,(l&4194048)!==0)){var c=a.lanes;c&=r.pendingLanes,l|=c,a.lanes=l,ac(r,l)}}function Jg(r,a){var l=r.updateQueue,c=r.alternate;if(c!==null&&(c=c.updateQueue,l===c)){var m=null,g=null;if(l=l.firstBaseUpdate,l!==null){do{var E={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};g===null?m=g=E:g=g.next=E,l=l.next}while(l!==null);g===null?m=g=a:g=g.next=a}else m=g=a;l={baseState:c.baseState,firstBaseUpdate:m,lastBaseUpdate:g,shared:c.shared,callbacks:c.callbacks},r.updateQueue=l;return}r=l.lastBaseUpdate,r===null?l.firstBaseUpdate=a:r.next=a,l.lastBaseUpdate=a}var Zg=!1;function Mc(){if(Zg){var r=Rl;if(r!==null)throw r}}function kc(r,a,l,c){Zg=!1;var m=r.updateQueue;Us=!1;var g=m.firstBaseUpdate,E=m.lastBaseUpdate,S=m.shared.pending;if(S!==null){m.shared.pending=null;var D=S,j=D.next;D.next=null,E===null?g=j:E.next=j,E=D;var Y=r.alternate;Y!==null&&(Y=Y.updateQueue,S=Y.lastBaseUpdate,S!==E&&(S===null?Y.firstBaseUpdate=j:S.next=j,Y.lastBaseUpdate=D))}if(g!==null){var Z=m.baseState;E=0,Y=j=D=null,S=g;do{var H=S.lane&-536870913,Q=H!==S.lane;if(Q?(Le&H)===H:(c&H)===H){H!==0&&H===bl&&(Zg=!0),Y!==null&&(Y=Y.next={lane:0,tag:S.tag,payload:S.payload,callback:null,next:null});e:{var pe=r,Se=S;H=a;var ct=l;switch(Se.tag){case 1:if(pe=Se.payload,typeof pe=="function"){Z=pe.call(ct,Z,H);break e}Z=pe;break e;case 3:pe.flags=pe.flags&-65537|128;case 0:if(pe=Se.payload,H=typeof pe=="function"?pe.call(ct,Z,H):pe,H==null)break e;Z=y({},Z,H);break e;case 2:Us=!0}}H=S.callback,H!==null&&(r.flags|=64,Q&&(r.flags|=8192),Q=m.callbacks,Q===null?m.callbacks=[H]:Q.push(H))}else Q={lane:H,tag:S.tag,payload:S.payload,callback:S.callback,next:null},Y===null?(j=Y=Q,D=Z):Y=Y.next=Q,E|=H;if(S=S.next,S===null){if(S=m.shared.pending,S===null)break;Q=S,S=Q.next,Q.next=null,m.lastBaseUpdate=Q,m.shared.pending=null}}while(!0);Y===null&&(D=Z),m.baseState=D,m.firstBaseUpdate=j,m.lastBaseUpdate=Y,g===null&&(m.shared.lanes=0),Gs|=E,r.lanes=E,r.memoizedState=Z}}function Bw(r,a){if(typeof r!="function")throw Error(i(191,r));r.call(a)}function zw(r,a){var l=r.callbacks;if(l!==null)for(r.callbacks=null,r=0;r<l.length;r++)Bw(l[r],a)}var Dl=M(null),Md=M(0);function qw(r,a){r=es,ue(Md,r),ue(Dl,a),es=r|a.baseLanes}function e_(){ue(Md,es),ue(Dl,Dl.current)}function t_(){es=Md.current,ee(Dl),ee(Md)}var Zn=M(null),yi=null;function zs(r){var a=r.alternate;ue(Mt,Mt.current&1),ue(Zn,r),yi===null&&(a===null||Dl.current!==null||a.memoizedState!==null)&&(yi=r)}function n_(r){ue(Mt,Mt.current),ue(Zn,r),yi===null&&(yi=r)}function jw(r){r.tag===22?(ue(Mt,Mt.current),ue(Zn,r),yi===null&&(yi=r)):qs()}function qs(){ue(Mt,Mt.current),ue(Zn,Zn.current)}function ei(r){ee(Zn),yi===r&&(yi=null),ee(Mt)}var Mt=M(0);function kd(r){for(var a=r;a!==null;){if(a.tag===13){var l=a.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||ly(l)||uy(l)))return a}else if(a.tag===19&&(a.memoizedProps.revealOrder==="forwards"||a.memoizedProps.revealOrder==="backwards"||a.memoizedProps.revealOrder==="unstable_legacy-backwards"||a.memoizedProps.revealOrder==="together")){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===r)break;for(;a.sibling===null;){if(a.return===null||a.return===r)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var Kr=0,Ne=null,lt=null,Gt=null,Vd=!1,Ol=!1,mo=!1,Ld=0,Vc=0,xl=null,Rx=0;function Nt(){throw Error(i(321))}function i_(r,a){if(a===null)return!1;for(var l=0;l<a.length&&l<r.length;l++)if(!Xn(r[l],a[l]))return!1;return!0}function r_(r,a,l,c,m,g){return Kr=g,Ne=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,W.H=r===null||r.memoizedState===null?bS:v_,mo=!1,g=l(c,m),mo=!1,Ol&&(g=Gw(a,l,c,m)),Hw(r),g}function Hw(r){W.H=Fc;var a=lt!==null&&lt.next!==null;if(Kr=0,Gt=lt=Ne=null,Vd=!1,Vc=0,xl=null,a)throw Error(i(300));r===null||Kt||(r=r.dependencies,r!==null&&Rd(r)&&(Kt=!0))}function Gw(r,a,l,c){Ne=r;var m=0;do{if(Ol&&(xl=null),Vc=0,Ol=!1,25<=m)throw Error(i(301));if(m+=1,Gt=lt=null,r.updateQueue!=null){var g=r.updateQueue;g.lastEffect=null,g.events=null,g.stores=null,g.memoCache!=null&&(g.memoCache.index=0)}W.H=RS,g=a(l,c)}while(Ol);return g}function Cx(){var r=W.H,a=r.useState()[0];return a=typeof a.then=="function"?Lc(a):a,r=r.useState()[0],(lt!==null?lt.memoizedState:null)!==r&&(Ne.flags|=1024),a}function s_(){var r=Ld!==0;return Ld=0,r}function a_(r,a,l){a.updateQueue=r.updateQueue,a.flags&=-2053,r.lanes&=~l}function o_(r){if(Vd){for(r=r.memoizedState;r!==null;){var a=r.queue;a!==null&&(a.pending=null),r=r.next}Vd=!1}Kr=0,Gt=lt=Ne=null,Ol=!1,Vc=Ld=0,xl=null}function Pn(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Gt===null?Ne.memoizedState=Gt=r:Gt=Gt.next=r,Gt}function kt(){if(lt===null){var r=Ne.alternate;r=r!==null?r.memoizedState:null}else r=lt.next;var a=Gt===null?Ne.memoizedState:Gt.next;if(a!==null)Gt=a,lt=r;else{if(r===null)throw Ne.alternate===null?Error(i(467)):Error(i(310));lt=r,r={memoizedState:lt.memoizedState,baseState:lt.baseState,baseQueue:lt.baseQueue,queue:lt.queue,next:null},Gt===null?Ne.memoizedState=Gt=r:Gt=Gt.next=r}return Gt}function Ud(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Lc(r){var a=Vc;return Vc+=1,xl===null&&(xl=[]),r=kw(xl,r,a),a=Ne,(Gt===null?a.memoizedState:Gt.next)===null&&(a=a.alternate,W.H=a===null||a.memoizedState===null?bS:v_),r}function Fd(r){if(r!==null&&typeof r=="object"){if(typeof r.then=="function")return Lc(r);if(r.$$typeof===te)return pn(r)}throw Error(i(438,String(r)))}function l_(r){var a=null,l=Ne.updateQueue;if(l!==null&&(a=l.memoCache),a==null){var c=Ne.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(a={data:c.data.map(function(m){return m.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),l===null&&(l=Ud(),Ne.updateQueue=l),l.memoCache=a,l=a.data[a.index],l===void 0)for(l=a.data[a.index]=Array(r),c=0;c<r;c++)l[c]=k;return a.index++,l}function Qr(r,a){return typeof a=="function"?a(r):a}function Bd(r){var a=kt();return u_(a,lt,r)}function u_(r,a,l){var c=r.queue;if(c===null)throw Error(i(311));c.lastRenderedReducer=l;var m=r.baseQueue,g=c.pending;if(g!==null){if(m!==null){var E=m.next;m.next=g.next,g.next=E}a.baseQueue=m=g,c.pending=null}if(g=r.baseState,m===null)r.memoizedState=g;else{a=m.next;var S=E=null,D=null,j=a,Y=!1;do{var Z=j.lane&-536870913;if(Z!==j.lane?(Le&Z)===Z:(Kr&Z)===Z){var H=j.revertLane;if(H===0)D!==null&&(D=D.next={lane:0,revertLane:0,gesture:null,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null}),Z===bl&&(Y=!0);else if((Kr&H)===H){j=j.next,H===bl&&(Y=!0);continue}else Z={lane:0,revertLane:j.revertLane,gesture:null,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null},D===null?(S=D=Z,E=g):D=D.next=Z,Ne.lanes|=H,Gs|=H;Z=j.action,mo&&l(g,Z),g=j.hasEagerState?j.eagerState:l(g,Z)}else H={lane:Z,revertLane:j.revertLane,gesture:j.gesture,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null},D===null?(S=D=H,E=g):D=D.next=H,Ne.lanes|=Z,Gs|=Z;j=j.next}while(j!==null&&j!==a);if(D===null?E=g:D.next=S,!Xn(g,r.memoizedState)&&(Kt=!0,Y&&(l=Rl,l!==null)))throw l;r.memoizedState=g,r.baseState=E,r.baseQueue=D,c.lastRenderedState=g}return m===null&&(c.lanes=0),[r.memoizedState,c.dispatch]}function c_(r){var a=kt(),l=a.queue;if(l===null)throw Error(i(311));l.lastRenderedReducer=r;var c=l.dispatch,m=l.pending,g=a.memoizedState;if(m!==null){l.pending=null;var E=m=m.next;do g=r(g,E.action),E=E.next;while(E!==m);Xn(g,a.memoizedState)||(Kt=!0),a.memoizedState=g,a.baseQueue===null&&(a.baseState=g),l.lastRenderedState=g}return[g,c]}function Kw(r,a,l){var c=Ne,m=kt(),g=Be;if(g){if(l===void 0)throw Error(i(407));l=l()}else l=a();var E=!Xn((lt||m).memoizedState,l);if(E&&(m.memoizedState=l,Kt=!0),m=m.queue,d_(Yw.bind(null,c,m,r),[r]),m.getSnapshot!==a||E||Gt!==null&&Gt.memoizedState.tag&1){if(c.flags|=2048,Pl(9,{destroy:void 0},$w.bind(null,c,m,l,a),null),ft===null)throw Error(i(349));g||(Kr&127)!==0||Qw(c,a,l)}return l}function Qw(r,a,l){r.flags|=16384,r={getSnapshot:a,value:l},a=Ne.updateQueue,a===null?(a=Ud(),Ne.updateQueue=a,a.stores=[r]):(l=a.stores,l===null?a.stores=[r]:l.push(r))}function $w(r,a,l,c){a.value=l,a.getSnapshot=c,Ww(a)&&Xw(r)}function Yw(r,a,l){return l(function(){Ww(a)&&Xw(r)})}function Ww(r){var a=r.getSnapshot;r=r.value;try{var l=a();return!Xn(r,l)}catch{return!0}}function Xw(r){var a=ro(r,2);a!==null&&Hn(a,r,2)}function h_(r){var a=Pn();if(typeof r=="function"){var l=r;if(r=l(),mo){li(!0);try{l()}finally{li(!1)}}}return a.memoizedState=a.baseState=r,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Qr,lastRenderedState:r},a}function Jw(r,a,l,c){return r.baseState=l,u_(r,lt,typeof c=="function"?c:Qr)}function Nx(r,a,l,c,m){if(jd(r))throw Error(i(485));if(r=a.action,r!==null){var g={payload:m,action:r,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(E){g.listeners.push(E)}};W.T!==null?l(!0):g.isTransition=!1,c(g),l=a.pending,l===null?(g.next=a.pending=g,Zw(a,g)):(g.next=l.next,a.pending=l.next=g)}}function Zw(r,a){var l=a.action,c=a.payload,m=r.state;if(a.isTransition){var g=W.T,E={};W.T=E;try{var S=l(m,c),D=W.S;D!==null&&D(E,S),eS(r,a,S)}catch(j){f_(r,a,j)}finally{g!==null&&E.types!==null&&(g.types=E.types),W.T=g}}else try{g=l(m,c),eS(r,a,g)}catch(j){f_(r,a,j)}}function eS(r,a,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(c){tS(r,a,c)},function(c){return f_(r,a,c)}):tS(r,a,l)}function tS(r,a,l){a.status="fulfilled",a.value=l,nS(a),r.state=l,a=r.pending,a!==null&&(l=a.next,l===a?r.pending=null:(l=l.next,a.next=l,Zw(r,l)))}function f_(r,a,l){var c=r.pending;if(r.pending=null,c!==null){c=c.next;do a.status="rejected",a.reason=l,nS(a),a=a.next;while(a!==c)}r.action=null}function nS(r){r=r.listeners;for(var a=0;a<r.length;a++)(0,r[a])()}function iS(r,a){return a}function rS(r,a){if(Be){var l=ft.formState;if(l!==null){e:{var c=Ne;if(Be){if(mt){t:{for(var m=mt,g=_i;m.nodeType!==8;){if(!g){m=null;break t}if(m=vi(m.nextSibling),m===null){m=null;break t}}g=m.data,m=g==="F!"||g==="F"?m:null}if(m){mt=vi(m.nextSibling),c=m.data==="F!";break e}}Vs(c)}c=!1}c&&(a=l[0])}}return l=Pn(),l.memoizedState=l.baseState=a,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:iS,lastRenderedState:a},l.queue=c,l=SS.bind(null,Ne,c),c.dispatch=l,c=h_(!1),g=y_.bind(null,Ne,!1,c.queue),c=Pn(),m={state:a,dispatch:null,action:r,pending:null},c.queue=m,l=Nx.bind(null,Ne,m,g,l),m.dispatch=l,c.memoizedState=r,[a,l,!1]}function sS(r){var a=kt();return aS(a,lt,r)}function aS(r,a,l){if(a=u_(r,a,iS)[0],r=Bd(Qr)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var c=Lc(a)}catch(E){throw E===Cl?Dd:E}else c=a;a=kt();var m=a.queue,g=m.dispatch;return l!==a.memoizedState&&(Ne.flags|=2048,Pl(9,{destroy:void 0},Dx.bind(null,m,l),null)),[c,g,r]}function Dx(r,a){r.action=a}function oS(r){var a=kt(),l=lt;if(l!==null)return aS(a,l,r);kt(),a=a.memoizedState,l=kt();var c=l.queue.dispatch;return l.memoizedState=r,[a,c,!1]}function Pl(r,a,l,c){return r={tag:r,create:l,deps:c,inst:a,next:null},a=Ne.updateQueue,a===null&&(a=Ud(),Ne.updateQueue=a),l=a.lastEffect,l===null?a.lastEffect=r.next=r:(c=l.next,l.next=r,r.next=c,a.lastEffect=r),r}function lS(){return kt().memoizedState}function zd(r,a,l,c){var m=Pn();Ne.flags|=r,m.memoizedState=Pl(1|a,{destroy:void 0},l,c===void 0?null:c)}function qd(r,a,l,c){var m=kt();c=c===void 0?null:c;var g=m.memoizedState.inst;lt!==null&&c!==null&&i_(c,lt.memoizedState.deps)?m.memoizedState=Pl(a,g,l,c):(Ne.flags|=r,m.memoizedState=Pl(1|a,g,l,c))}function uS(r,a){zd(8390656,8,r,a)}function d_(r,a){qd(2048,8,r,a)}function Ox(r){Ne.flags|=4;var a=Ne.updateQueue;if(a===null)a=Ud(),Ne.updateQueue=a,a.events=[r];else{var l=a.events;l===null?a.events=[r]:l.push(r)}}function cS(r){var a=kt().memoizedState;return Ox({ref:a,nextImpl:r}),function(){if((Je&2)!==0)throw Error(i(440));return a.impl.apply(void 0,arguments)}}function hS(r,a){return qd(4,2,r,a)}function fS(r,a){return qd(4,4,r,a)}function dS(r,a){if(typeof a=="function"){r=r();var l=a(r);return function(){typeof l=="function"?l():a(null)}}if(a!=null)return r=r(),a.current=r,function(){a.current=null}}function mS(r,a,l){l=l!=null?l.concat([r]):null,qd(4,4,dS.bind(null,a,r),l)}function m_(){}function pS(r,a){var l=kt();a=a===void 0?null:a;var c=l.memoizedState;return a!==null&&i_(a,c[1])?c[0]:(l.memoizedState=[r,a],r)}function gS(r,a){var l=kt();a=a===void 0?null:a;var c=l.memoizedState;if(a!==null&&i_(a,c[1]))return c[0];if(c=r(),mo){li(!0);try{r()}finally{li(!1)}}return l.memoizedState=[c,a],c}function p_(r,a,l){return l===void 0||(Kr&1073741824)!==0&&(Le&261930)===0?r.memoizedState=a:(r.memoizedState=l,r=_I(),Ne.lanes|=r,Gs|=r,l)}function _S(r,a,l,c){return Xn(l,a)?l:Dl.current!==null?(r=p_(r,l,c),Xn(r,a)||(Kt=!0),r):(Kr&42)===0||(Kr&1073741824)!==0&&(Le&261930)===0?(Kt=!0,r.memoizedState=l):(r=_I(),Ne.lanes|=r,Gs|=r,a)}function yS(r,a,l,c,m){var g=le.p;le.p=g!==0&&8>g?g:8;var E=W.T,S={};W.T=S,y_(r,!1,a,l);try{var D=m(),j=W.S;if(j!==null&&j(S,D),D!==null&&typeof D=="object"&&typeof D.then=="function"){var Y=bx(D,c);Uc(r,a,Y,ii(r))}else Uc(r,a,c,ii(r))}catch(Z){Uc(r,a,{then:function(){},status:"rejected",reason:Z},ii())}finally{le.p=g,E!==null&&S.types!==null&&(E.types=S.types),W.T=E}}function xx(){}function g_(r,a,l,c){if(r.tag!==5)throw Error(i(476));var m=vS(r).queue;yS(r,m,a,we,l===null?xx:function(){return ES(r),l(c)})}function vS(r){var a=r.memoizedState;if(a!==null)return a;a={memoizedState:we,baseState:we,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Qr,lastRenderedState:we},next:null};var l={};return a.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Qr,lastRenderedState:l},next:null},r.memoizedState=a,r=r.alternate,r!==null&&(r.memoizedState=a),a}function ES(r){var a=vS(r);a.next===null&&(a=r.alternate.memoizedState),Uc(r,a.next.queue,{},ii())}function __(){return pn(th)}function TS(){return kt().memoizedState}function wS(){return kt().memoizedState}function Px(r){for(var a=r.return;a!==null;){switch(a.tag){case 24:case 3:var l=ii();r=Fs(l);var c=Bs(a,r,l);c!==null&&(Hn(c,a,l),Pc(c,a,l)),a={cache:Kg()},r.payload=a;return}a=a.return}}function Mx(r,a,l){var c=ii();l={lane:c,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},jd(r)?IS(a,l):(l=kg(r,a,l,c),l!==null&&(Hn(l,r,c),AS(l,a,c)))}function SS(r,a,l){var c=ii();Uc(r,a,l,c)}function Uc(r,a,l,c){var m={lane:c,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null};if(jd(r))IS(a,m);else{var g=r.alternate;if(r.lanes===0&&(g===null||g.lanes===0)&&(g=a.lastRenderedReducer,g!==null))try{var E=a.lastRenderedState,S=g(E,l);if(m.hasEagerState=!0,m.eagerState=S,Xn(S,E))return Sd(r,a,m,0),ft===null&&wd(),!1}catch{}finally{}if(l=kg(r,a,m,c),l!==null)return Hn(l,r,c),AS(l,a,c),!0}return!1}function y_(r,a,l,c){if(c={lane:2,revertLane:W_(),gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},jd(r)){if(a)throw Error(i(479))}else a=kg(r,l,c,2),a!==null&&Hn(a,r,2)}function jd(r){var a=r.alternate;return r===Ne||a!==null&&a===Ne}function IS(r,a){Ol=Vd=!0;var l=r.pending;l===null?a.next=a:(a.next=l.next,l.next=a),r.pending=a}function AS(r,a,l){if((l&4194048)!==0){var c=a.lanes;c&=r.pendingLanes,l|=c,a.lanes=l,ac(r,l)}}var Fc={readContext:pn,use:Fd,useCallback:Nt,useContext:Nt,useEffect:Nt,useImperativeHandle:Nt,useLayoutEffect:Nt,useInsertionEffect:Nt,useMemo:Nt,useReducer:Nt,useRef:Nt,useState:Nt,useDebugValue:Nt,useDeferredValue:Nt,useTransition:Nt,useSyncExternalStore:Nt,useId:Nt,useHostTransitionStatus:Nt,useFormState:Nt,useActionState:Nt,useOptimistic:Nt,useMemoCache:Nt,useCacheRefresh:Nt};Fc.useEffectEvent=Nt;var bS={readContext:pn,use:Fd,useCallback:function(r,a){return Pn().memoizedState=[r,a===void 0?null:a],r},useContext:pn,useEffect:uS,useImperativeHandle:function(r,a,l){l=l!=null?l.concat([r]):null,zd(4194308,4,dS.bind(null,a,r),l)},useLayoutEffect:function(r,a){return zd(4194308,4,r,a)},useInsertionEffect:function(r,a){zd(4,2,r,a)},useMemo:function(r,a){var l=Pn();a=a===void 0?null:a;var c=r();if(mo){li(!0);try{r()}finally{li(!1)}}return l.memoizedState=[c,a],c},useReducer:function(r,a,l){var c=Pn();if(l!==void 0){var m=l(a);if(mo){li(!0);try{l(a)}finally{li(!1)}}}else m=a;return c.memoizedState=c.baseState=m,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:m},c.queue=r,r=r.dispatch=Mx.bind(null,Ne,r),[c.memoizedState,r]},useRef:function(r){var a=Pn();return r={current:r},a.memoizedState=r},useState:function(r){r=h_(r);var a=r.queue,l=SS.bind(null,Ne,a);return a.dispatch=l,[r.memoizedState,l]},useDebugValue:m_,useDeferredValue:function(r,a){var l=Pn();return p_(l,r,a)},useTransition:function(){var r=h_(!1);return r=yS.bind(null,Ne,r.queue,!0,!1),Pn().memoizedState=r,[!1,r]},useSyncExternalStore:function(r,a,l){var c=Ne,m=Pn();if(Be){if(l===void 0)throw Error(i(407));l=l()}else{if(l=a(),ft===null)throw Error(i(349));(Le&127)!==0||Qw(c,a,l)}m.memoizedState=l;var g={value:l,getSnapshot:a};return m.queue=g,uS(Yw.bind(null,c,g,r),[r]),c.flags|=2048,Pl(9,{destroy:void 0},$w.bind(null,c,g,l,a),null),l},useId:function(){var r=Pn(),a=ft.identifierPrefix;if(Be){var l=yr,c=_r;l=(c&~(1<<32-xt(c)-1)).toString(32)+l,a="_"+a+"R_"+l,l=Ld++,0<l&&(a+="H"+l.toString(32)),a+="_"}else l=Rx++,a="_"+a+"r_"+l.toString(32)+"_";return r.memoizedState=a},useHostTransitionStatus:__,useFormState:rS,useActionState:rS,useOptimistic:function(r){var a=Pn();a.memoizedState=a.baseState=r;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=l,a=y_.bind(null,Ne,!0,l),l.dispatch=a,[r,a]},useMemoCache:l_,useCacheRefresh:function(){return Pn().memoizedState=Px.bind(null,Ne)},useEffectEvent:function(r){var a=Pn(),l={impl:r};return a.memoizedState=l,function(){if((Je&2)!==0)throw Error(i(440));return l.impl.apply(void 0,arguments)}}},v_={readContext:pn,use:Fd,useCallback:pS,useContext:pn,useEffect:d_,useImperativeHandle:mS,useInsertionEffect:hS,useLayoutEffect:fS,useMemo:gS,useReducer:Bd,useRef:lS,useState:function(){return Bd(Qr)},useDebugValue:m_,useDeferredValue:function(r,a){var l=kt();return _S(l,lt.memoizedState,r,a)},useTransition:function(){var r=Bd(Qr)[0],a=kt().memoizedState;return[typeof r=="boolean"?r:Lc(r),a]},useSyncExternalStore:Kw,useId:TS,useHostTransitionStatus:__,useFormState:sS,useActionState:sS,useOptimistic:function(r,a){var l=kt();return Jw(l,lt,r,a)},useMemoCache:l_,useCacheRefresh:wS};v_.useEffectEvent=cS;var RS={readContext:pn,use:Fd,useCallback:pS,useContext:pn,useEffect:d_,useImperativeHandle:mS,useInsertionEffect:hS,useLayoutEffect:fS,useMemo:gS,useReducer:c_,useRef:lS,useState:function(){return c_(Qr)},useDebugValue:m_,useDeferredValue:function(r,a){var l=kt();return lt===null?p_(l,r,a):_S(l,lt.memoizedState,r,a)},useTransition:function(){var r=c_(Qr)[0],a=kt().memoizedState;return[typeof r=="boolean"?r:Lc(r),a]},useSyncExternalStore:Kw,useId:TS,useHostTransitionStatus:__,useFormState:oS,useActionState:oS,useOptimistic:function(r,a){var l=kt();return lt!==null?Jw(l,lt,r,a):(l.baseState=r,[r,l.queue.dispatch])},useMemoCache:l_,useCacheRefresh:wS};RS.useEffectEvent=cS;function E_(r,a,l,c){a=r.memoizedState,l=l(c,a),l=l==null?a:y({},a,l),r.memoizedState=l,r.lanes===0&&(r.updateQueue.baseState=l)}var T_={enqueueSetState:function(r,a,l){r=r._reactInternals;var c=ii(),m=Fs(c);m.payload=a,l!=null&&(m.callback=l),a=Bs(r,m,c),a!==null&&(Hn(a,r,c),Pc(a,r,c))},enqueueReplaceState:function(r,a,l){r=r._reactInternals;var c=ii(),m=Fs(c);m.tag=1,m.payload=a,l!=null&&(m.callback=l),a=Bs(r,m,c),a!==null&&(Hn(a,r,c),Pc(a,r,c))},enqueueForceUpdate:function(r,a){r=r._reactInternals;var l=ii(),c=Fs(l);c.tag=2,a!=null&&(c.callback=a),a=Bs(r,c,l),a!==null&&(Hn(a,r,l),Pc(a,r,l))}};function CS(r,a,l,c,m,g,E){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(c,g,E):a.prototype&&a.prototype.isPureReactComponent?!Ac(l,c)||!Ac(m,g):!0}function NS(r,a,l,c){r=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(l,c),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(l,c),a.state!==r&&T_.enqueueReplaceState(a,a.state,null)}function po(r,a){var l=a;if("ref"in a){l={};for(var c in a)c!=="ref"&&(l[c]=a[c])}if(r=r.defaultProps){l===a&&(l=y({},l));for(var m in r)l[m]===void 0&&(l[m]=r[m])}return l}function DS(r){Td(r)}function OS(r){console.error(r)}function xS(r){Td(r)}function Hd(r,a){try{var l=r.onUncaughtError;l(a.value,{componentStack:a.stack})}catch(c){setTimeout(function(){throw c})}}function PS(r,a,l){try{var c=r.onCaughtError;c(l.value,{componentStack:l.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(m){setTimeout(function(){throw m})}}function w_(r,a,l){return l=Fs(l),l.tag=3,l.payload={element:null},l.callback=function(){Hd(r,a)},l}function MS(r){return r=Fs(r),r.tag=3,r}function kS(r,a,l,c){var m=l.type.getDerivedStateFromError;if(typeof m=="function"){var g=c.value;r.payload=function(){return m(g)},r.callback=function(){PS(a,l,c)}}var E=l.stateNode;E!==null&&typeof E.componentDidCatch=="function"&&(r.callback=function(){PS(a,l,c),typeof m!="function"&&(Ks===null?Ks=new Set([this]):Ks.add(this));var S=c.stack;this.componentDidCatch(c.value,{componentStack:S!==null?S:""})})}function kx(r,a,l,c,m){if(l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(a=l.alternate,a!==null&&Al(a,l,m,!0),l=Zn.current,l!==null){switch(l.tag){case 31:case 13:return yi===null?nm():l.alternate===null&&Dt===0&&(Dt=3),l.flags&=-257,l.flags|=65536,l.lanes=m,c===Od?l.flags|=16384:(a=l.updateQueue,a===null?l.updateQueue=new Set([c]):a.add(c),Q_(r,c,m)),!1;case 22:return l.flags|=65536,c===Od?l.flags|=16384:(a=l.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([c])},l.updateQueue=a):(l=a.retryQueue,l===null?a.retryQueue=new Set([c]):l.add(c)),Q_(r,c,m)),!1}throw Error(i(435,l.tag))}return Q_(r,c,m),nm(),!1}if(Be)return a=Zn.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=m,c!==zg&&(r=Error(i(422),{cause:c}),Cc(mi(r,l)))):(c!==zg&&(a=Error(i(423),{cause:c}),Cc(mi(a,l))),r=r.current.alternate,r.flags|=65536,m&=-m,r.lanes|=m,c=mi(c,l),m=w_(r.stateNode,c,m),Jg(r,m),Dt!==4&&(Dt=2)),!1;var g=Error(i(520),{cause:c});if(g=mi(g,l),Qc===null?Qc=[g]:Qc.push(g),Dt!==4&&(Dt=2),a===null)return!0;c=mi(c,l),l=a;do{switch(l.tag){case 3:return l.flags|=65536,r=m&-m,l.lanes|=r,r=w_(l.stateNode,c,r),Jg(l,r),!1;case 1:if(a=l.type,g=l.stateNode,(l.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(Ks===null||!Ks.has(g))))return l.flags|=65536,m&=-m,l.lanes|=m,m=MS(m),kS(m,r,l,c),Jg(l,m),!1}l=l.return}while(l!==null);return!1}var S_=Error(i(461)),Kt=!1;function gn(r,a,l,c){a.child=r===null?Fw(a,null,l,c):fo(a,r.child,l,c)}function VS(r,a,l,c,m){l=l.render;var g=a.ref;if("ref"in c){var E={};for(var S in c)S!=="ref"&&(E[S]=c[S])}else E=c;return lo(a),c=r_(r,a,l,E,g,m),S=s_(),r!==null&&!Kt?(a_(r,a,m),$r(r,a,m)):(Be&&S&&Fg(a),a.flags|=1,gn(r,a,c,m),a.child)}function LS(r,a,l,c,m){if(r===null){var g=l.type;return typeof g=="function"&&!Vg(g)&&g.defaultProps===void 0&&l.compare===null?(a.tag=15,a.type=g,US(r,a,g,c,m)):(r=Ad(l.type,null,c,a,a.mode,m),r.ref=a.ref,r.return=a,a.child=r)}if(g=r.child,!O_(r,m)){var E=g.memoizedProps;if(l=l.compare,l=l!==null?l:Ac,l(E,c)&&r.ref===a.ref)return $r(r,a,m)}return a.flags|=1,r=qr(g,c),r.ref=a.ref,r.return=a,a.child=r}function US(r,a,l,c,m){if(r!==null){var g=r.memoizedProps;if(Ac(g,c)&&r.ref===a.ref)if(Kt=!1,a.pendingProps=c=g,O_(r,m))(r.flags&131072)!==0&&(Kt=!0);else return a.lanes=r.lanes,$r(r,a,m)}return I_(r,a,l,c,m)}function FS(r,a,l,c){var m=c.children,g=r!==null?r.memoizedState:null;if(r===null&&a.stateNode===null&&(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.mode==="hidden"){if((a.flags&128)!==0){if(g=g!==null?g.baseLanes|l:l,r!==null){for(c=a.child=r.child,m=0;c!==null;)m=m|c.lanes|c.childLanes,c=c.sibling;c=m&~g}else c=0,a.child=null;return BS(r,a,g,l,c)}if((l&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},r!==null&&Nd(a,g!==null?g.cachePool:null),g!==null?qw(a,g):e_(),jw(a);else return c=a.lanes=536870912,BS(r,a,g!==null?g.baseLanes|l:l,l,c)}else g!==null?(Nd(a,g.cachePool),qw(a,g),qs(),a.memoizedState=null):(r!==null&&Nd(a,null),e_(),qs());return gn(r,a,m,l),a.child}function Bc(r,a){return r!==null&&r.tag===22||a.stateNode!==null||(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),a.sibling}function BS(r,a,l,c,m){var g=$g();return g=g===null?null:{parent:Ht._currentValue,pool:g},a.memoizedState={baseLanes:l,cachePool:g},r!==null&&Nd(a,null),e_(),jw(a),r!==null&&Al(r,a,c,!0),a.childLanes=m,null}function Gd(r,a){return a=Qd({mode:a.mode,children:a.children},r.mode),a.ref=r.ref,r.child=a,a.return=r,a}function zS(r,a,l){return fo(a,r.child,null,l),r=Gd(a,a.pendingProps),r.flags|=2,ei(a),a.memoizedState=null,r}function Vx(r,a,l){var c=a.pendingProps,m=(a.flags&128)!==0;if(a.flags&=-129,r===null){if(Be){if(c.mode==="hidden")return r=Gd(a,c),a.lanes=536870912,Bc(null,r);if(n_(a),(r=mt)?(r=ZI(r,_i),r=r!==null&&r.data==="&"?r:null,r!==null&&(a.memoizedState={dehydrated:r,treeContext:Ms!==null?{id:_r,overflow:yr}:null,retryLane:536870912,hydrationErrors:null},l=Iw(r),l.return=a,a.child=l,mn=a,mt=null)):r=null,r===null)throw Vs(a);return a.lanes=536870912,null}return Gd(a,c)}var g=r.memoizedState;if(g!==null){var E=g.dehydrated;if(n_(a),m)if(a.flags&256)a.flags&=-257,a=zS(r,a,l);else if(a.memoizedState!==null)a.child=r.child,a.flags|=128,a=null;else throw Error(i(558));else if(Kt||Al(r,a,l,!1),m=(l&r.childLanes)!==0,Kt||m){if(c=ft,c!==null&&(E=oc(c,l),E!==0&&E!==g.retryLane))throw g.retryLane=E,ro(r,E),Hn(c,r,E),S_;nm(),a=zS(r,a,l)}else r=g.treeContext,mt=vi(E.nextSibling),mn=a,Be=!0,ks=null,_i=!1,r!==null&&Rw(a,r),a=Gd(a,c),a.flags|=4096;return a}return r=qr(r.child,{mode:c.mode,children:c.children}),r.ref=a.ref,a.child=r,r.return=a,r}function Kd(r,a){var l=a.ref;if(l===null)r!==null&&r.ref!==null&&(a.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(i(284));(r===null||r.ref!==l)&&(a.flags|=4194816)}}function I_(r,a,l,c,m){return lo(a),l=r_(r,a,l,c,void 0,m),c=s_(),r!==null&&!Kt?(a_(r,a,m),$r(r,a,m)):(Be&&c&&Fg(a),a.flags|=1,gn(r,a,l,m),a.child)}function qS(r,a,l,c,m,g){return lo(a),a.updateQueue=null,l=Gw(a,c,l,m),Hw(r),c=s_(),r!==null&&!Kt?(a_(r,a,g),$r(r,a,g)):(Be&&c&&Fg(a),a.flags|=1,gn(r,a,l,g),a.child)}function jS(r,a,l,c,m){if(lo(a),a.stateNode===null){var g=Tl,E=l.contextType;typeof E=="object"&&E!==null&&(g=pn(E)),g=new l(c,g),a.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,g.updater=T_,a.stateNode=g,g._reactInternals=a,g=a.stateNode,g.props=c,g.state=a.memoizedState,g.refs={},Wg(a),E=l.contextType,g.context=typeof E=="object"&&E!==null?pn(E):Tl,g.state=a.memoizedState,E=l.getDerivedStateFromProps,typeof E=="function"&&(E_(a,l,E,c),g.state=a.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(E=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),E!==g.state&&T_.enqueueReplaceState(g,g.state,null),kc(a,c,g,m),Mc(),g.state=a.memoizedState),typeof g.componentDidMount=="function"&&(a.flags|=4194308),c=!0}else if(r===null){g=a.stateNode;var S=a.memoizedProps,D=po(l,S);g.props=D;var j=g.context,Y=l.contextType;E=Tl,typeof Y=="object"&&Y!==null&&(E=pn(Y));var Z=l.getDerivedStateFromProps;Y=typeof Z=="function"||typeof g.getSnapshotBeforeUpdate=="function",S=a.pendingProps!==S,Y||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(S||j!==E)&&NS(a,g,c,E),Us=!1;var H=a.memoizedState;g.state=H,kc(a,c,g,m),Mc(),j=a.memoizedState,S||H!==j||Us?(typeof Z=="function"&&(E_(a,l,Z,c),j=a.memoizedState),(D=Us||CS(a,l,D,c,H,j,E))?(Y||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount()),typeof g.componentDidMount=="function"&&(a.flags|=4194308)):(typeof g.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=c,a.memoizedState=j),g.props=c,g.state=j,g.context=E,c=D):(typeof g.componentDidMount=="function"&&(a.flags|=4194308),c=!1)}else{g=a.stateNode,Xg(r,a),E=a.memoizedProps,Y=po(l,E),g.props=Y,Z=a.pendingProps,H=g.context,j=l.contextType,D=Tl,typeof j=="object"&&j!==null&&(D=pn(j)),S=l.getDerivedStateFromProps,(j=typeof S=="function"||typeof g.getSnapshotBeforeUpdate=="function")||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(E!==Z||H!==D)&&NS(a,g,c,D),Us=!1,H=a.memoizedState,g.state=H,kc(a,c,g,m),Mc();var Q=a.memoizedState;E!==Z||H!==Q||Us||r!==null&&r.dependencies!==null&&Rd(r.dependencies)?(typeof S=="function"&&(E_(a,l,S,c),Q=a.memoizedState),(Y=Us||CS(a,l,Y,c,H,Q,D)||r!==null&&r.dependencies!==null&&Rd(r.dependencies))?(j||typeof g.UNSAFE_componentWillUpdate!="function"&&typeof g.componentWillUpdate!="function"||(typeof g.componentWillUpdate=="function"&&g.componentWillUpdate(c,Q,D),typeof g.UNSAFE_componentWillUpdate=="function"&&g.UNSAFE_componentWillUpdate(c,Q,D)),typeof g.componentDidUpdate=="function"&&(a.flags|=4),typeof g.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof g.componentDidUpdate!="function"||E===r.memoizedProps&&H===r.memoizedState||(a.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||E===r.memoizedProps&&H===r.memoizedState||(a.flags|=1024),a.memoizedProps=c,a.memoizedState=Q),g.props=c,g.state=Q,g.context=D,c=Y):(typeof g.componentDidUpdate!="function"||E===r.memoizedProps&&H===r.memoizedState||(a.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||E===r.memoizedProps&&H===r.memoizedState||(a.flags|=1024),c=!1)}return g=c,Kd(r,a),c=(a.flags&128)!==0,g||c?(g=a.stateNode,l=c&&typeof l.getDerivedStateFromError!="function"?null:g.render(),a.flags|=1,r!==null&&c?(a.child=fo(a,r.child,null,m),a.child=fo(a,null,l,m)):gn(r,a,l,m),a.memoizedState=g.state,r=a.child):r=$r(r,a,m),r}function HS(r,a,l,c){return ao(),a.flags|=256,gn(r,a,l,c),a.child}var A_={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function b_(r){return{baseLanes:r,cachePool:Pw()}}function R_(r,a,l){return r=r!==null?r.childLanes&~l:0,a&&(r|=ni),r}function GS(r,a,l){var c=a.pendingProps,m=!1,g=(a.flags&128)!==0,E;if((E=g)||(E=r!==null&&r.memoizedState===null?!1:(Mt.current&2)!==0),E&&(m=!0,a.flags&=-129),E=(a.flags&32)!==0,a.flags&=-33,r===null){if(Be){if(m?zs(a):qs(),(r=mt)?(r=ZI(r,_i),r=r!==null&&r.data!=="&"?r:null,r!==null&&(a.memoizedState={dehydrated:r,treeContext:Ms!==null?{id:_r,overflow:yr}:null,retryLane:536870912,hydrationErrors:null},l=Iw(r),l.return=a,a.child=l,mn=a,mt=null)):r=null,r===null)throw Vs(a);return uy(r)?a.lanes=32:a.lanes=536870912,null}var S=c.children;return c=c.fallback,m?(qs(),m=a.mode,S=Qd({mode:"hidden",children:S},m),c=so(c,m,l,null),S.return=a,c.return=a,S.sibling=c,a.child=S,c=a.child,c.memoizedState=b_(l),c.childLanes=R_(r,E,l),a.memoizedState=A_,Bc(null,c)):(zs(a),C_(a,S))}var D=r.memoizedState;if(D!==null&&(S=D.dehydrated,S!==null)){if(g)a.flags&256?(zs(a),a.flags&=-257,a=N_(r,a,l)):a.memoizedState!==null?(qs(),a.child=r.child,a.flags|=128,a=null):(qs(),S=c.fallback,m=a.mode,c=Qd({mode:"visible",children:c.children},m),S=so(S,m,l,null),S.flags|=2,c.return=a,S.return=a,c.sibling=S,a.child=c,fo(a,r.child,null,l),c=a.child,c.memoizedState=b_(l),c.childLanes=R_(r,E,l),a.memoizedState=A_,a=Bc(null,c));else if(zs(a),uy(S)){if(E=S.nextSibling&&S.nextSibling.dataset,E)var j=E.dgst;E=j,c=Error(i(419)),c.stack="",c.digest=E,Cc({value:c,source:null,stack:null}),a=N_(r,a,l)}else if(Kt||Al(r,a,l,!1),E=(l&r.childLanes)!==0,Kt||E){if(E=ft,E!==null&&(c=oc(E,l),c!==0&&c!==D.retryLane))throw D.retryLane=c,ro(r,c),Hn(E,r,c),S_;ly(S)||nm(),a=N_(r,a,l)}else ly(S)?(a.flags|=192,a.child=r.child,a=null):(r=D.treeContext,mt=vi(S.nextSibling),mn=a,Be=!0,ks=null,_i=!1,r!==null&&Rw(a,r),a=C_(a,c.children),a.flags|=4096);return a}return m?(qs(),S=c.fallback,m=a.mode,D=r.child,j=D.sibling,c=qr(D,{mode:"hidden",children:c.children}),c.subtreeFlags=D.subtreeFlags&65011712,j!==null?S=qr(j,S):(S=so(S,m,l,null),S.flags|=2),S.return=a,c.return=a,c.sibling=S,a.child=c,Bc(null,c),c=a.child,S=r.child.memoizedState,S===null?S=b_(l):(m=S.cachePool,m!==null?(D=Ht._currentValue,m=m.parent!==D?{parent:D,pool:D}:m):m=Pw(),S={baseLanes:S.baseLanes|l,cachePool:m}),c.memoizedState=S,c.childLanes=R_(r,E,l),a.memoizedState=A_,Bc(r.child,c)):(zs(a),l=r.child,r=l.sibling,l=qr(l,{mode:"visible",children:c.children}),l.return=a,l.sibling=null,r!==null&&(E=a.deletions,E===null?(a.deletions=[r],a.flags|=16):E.push(r)),a.child=l,a.memoizedState=null,l)}function C_(r,a){return a=Qd({mode:"visible",children:a},r.mode),a.return=r,r.child=a}function Qd(r,a){return r=Jn(22,r,null,a),r.lanes=0,r}function N_(r,a,l){return fo(a,r.child,null,l),r=C_(a,a.pendingProps.children),r.flags|=2,a.memoizedState=null,r}function KS(r,a,l){r.lanes|=a;var c=r.alternate;c!==null&&(c.lanes|=a),Hg(r.return,a,l)}function D_(r,a,l,c,m,g){var E=r.memoizedState;E===null?r.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:c,tail:l,tailMode:m,treeForkCount:g}:(E.isBackwards=a,E.rendering=null,E.renderingStartTime=0,E.last=c,E.tail=l,E.tailMode=m,E.treeForkCount=g)}function QS(r,a,l){var c=a.pendingProps,m=c.revealOrder,g=c.tail;c=c.children;var E=Mt.current,S=(E&2)!==0;if(S?(E=E&1|2,a.flags|=128):E&=1,ue(Mt,E),gn(r,a,c,l),c=Be?Rc:0,!S&&r!==null&&(r.flags&128)!==0)e:for(r=a.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&KS(r,l,a);else if(r.tag===19)KS(r,l,a);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===a)break e;for(;r.sibling===null;){if(r.return===null||r.return===a)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}switch(m){case"forwards":for(l=a.child,m=null;l!==null;)r=l.alternate,r!==null&&kd(r)===null&&(m=l),l=l.sibling;l=m,l===null?(m=a.child,a.child=null):(m=l.sibling,l.sibling=null),D_(a,!1,m,l,g,c);break;case"backwards":case"unstable_legacy-backwards":for(l=null,m=a.child,a.child=null;m!==null;){if(r=m.alternate,r!==null&&kd(r)===null){a.child=m;break}r=m.sibling,m.sibling=l,l=m,m=r}D_(a,!0,l,null,g,c);break;case"together":D_(a,!1,null,null,void 0,c);break;default:a.memoizedState=null}return a.child}function $r(r,a,l){if(r!==null&&(a.dependencies=r.dependencies),Gs|=a.lanes,(l&a.childLanes)===0)if(r!==null){if(Al(r,a,l,!1),(l&a.childLanes)===0)return null}else return null;if(r!==null&&a.child!==r.child)throw Error(i(153));if(a.child!==null){for(r=a.child,l=qr(r,r.pendingProps),a.child=l,l.return=a;r.sibling!==null;)r=r.sibling,l=l.sibling=qr(r,r.pendingProps),l.return=a;l.sibling=null}return a.child}function O_(r,a){return(r.lanes&a)!==0?!0:(r=r.dependencies,!!(r!==null&&Rd(r)))}function Lx(r,a,l){switch(a.tag){case 3:Xt(a,a.stateNode.containerInfo),Ls(a,Ht,r.memoizedState.cache),ao();break;case 27:case 5:Ba(a);break;case 4:Xt(a,a.stateNode.containerInfo);break;case 10:Ls(a,a.type,a.memoizedProps.value);break;case 31:if(a.memoizedState!==null)return a.flags|=128,n_(a),null;break;case 13:var c=a.memoizedState;if(c!==null)return c.dehydrated!==null?(zs(a),a.flags|=128,null):(l&a.child.childLanes)!==0?GS(r,a,l):(zs(a),r=$r(r,a,l),r!==null?r.sibling:null);zs(a);break;case 19:var m=(r.flags&128)!==0;if(c=(l&a.childLanes)!==0,c||(Al(r,a,l,!1),c=(l&a.childLanes)!==0),m){if(c)return QS(r,a,l);a.flags|=128}if(m=a.memoizedState,m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),ue(Mt,Mt.current),c)break;return null;case 22:return a.lanes=0,FS(r,a,l,a.pendingProps);case 24:Ls(a,Ht,r.memoizedState.cache)}return $r(r,a,l)}function $S(r,a,l){if(r!==null)if(r.memoizedProps!==a.pendingProps)Kt=!0;else{if(!O_(r,l)&&(a.flags&128)===0)return Kt=!1,Lx(r,a,l);Kt=(r.flags&131072)!==0}else Kt=!1,Be&&(a.flags&1048576)!==0&&bw(a,Rc,a.index);switch(a.lanes=0,a.tag){case 16:e:{var c=a.pendingProps;if(r=co(a.elementType),a.type=r,typeof r=="function")Vg(r)?(c=po(r,c),a.tag=1,a=jS(null,a,r,c,l)):(a.tag=0,a=I_(null,a,r,c,l));else{if(r!=null){var m=r.$$typeof;if(m===fe){a.tag=11,a=VS(null,a,r,c,l);break e}else if(m===R){a.tag=14,a=LS(null,a,r,c,l);break e}}throw a=Et(r)||r,Error(i(306,a,""))}}return a;case 0:return I_(r,a,a.type,a.pendingProps,l);case 1:return c=a.type,m=po(c,a.pendingProps),jS(r,a,c,m,l);case 3:e:{if(Xt(a,a.stateNode.containerInfo),r===null)throw Error(i(387));c=a.pendingProps;var g=a.memoizedState;m=g.element,Xg(r,a),kc(a,c,null,l);var E=a.memoizedState;if(c=E.cache,Ls(a,Ht,c),c!==g.cache&&Gg(a,[Ht],l,!0),Mc(),c=E.element,g.isDehydrated)if(g={element:c,isDehydrated:!1,cache:E.cache},a.updateQueue.baseState=g,a.memoizedState=g,a.flags&256){a=HS(r,a,c,l);break e}else if(c!==m){m=mi(Error(i(424)),a),Cc(m),a=HS(r,a,c,l);break e}else{switch(r=a.stateNode.containerInfo,r.nodeType){case 9:r=r.body;break;default:r=r.nodeName==="HTML"?r.ownerDocument.body:r}for(mt=vi(r.firstChild),mn=a,Be=!0,ks=null,_i=!0,l=Fw(a,null,c,l),a.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling}else{if(ao(),c===m){a=$r(r,a,l);break e}gn(r,a,c,l)}a=a.child}return a;case 26:return Kd(r,a),r===null?(l=sA(a.type,null,a.pendingProps,null))?a.memoizedState=l:Be||(l=a.type,r=a.pendingProps,c=um(Oe.current).createElement(l),c[zt]=a,c[nn]=r,_n(c,l,r),qt(c),a.stateNode=c):a.memoizedState=sA(a.type,r.memoizedProps,a.pendingProps,r.memoizedState),null;case 27:return Ba(a),r===null&&Be&&(c=a.stateNode=nA(a.type,a.pendingProps,Oe.current),mn=a,_i=!0,m=mt,Ws(a.type)?(cy=m,mt=vi(c.firstChild)):mt=m),gn(r,a,a.pendingProps.children,l),Kd(r,a),r===null&&(a.flags|=4194304),a.child;case 5:return r===null&&Be&&((m=c=mt)&&(c=dP(c,a.type,a.pendingProps,_i),c!==null?(a.stateNode=c,mn=a,mt=vi(c.firstChild),_i=!1,m=!0):m=!1),m||Vs(a)),Ba(a),m=a.type,g=a.pendingProps,E=r!==null?r.memoizedProps:null,c=g.children,sy(m,g)?c=null:E!==null&&sy(m,E)&&(a.flags|=32),a.memoizedState!==null&&(m=r_(r,a,Cx,null,null,l),th._currentValue=m),Kd(r,a),gn(r,a,c,l),a.child;case 6:return r===null&&Be&&((r=l=mt)&&(l=mP(l,a.pendingProps,_i),l!==null?(a.stateNode=l,mn=a,mt=null,r=!0):r=!1),r||Vs(a)),null;case 13:return GS(r,a,l);case 4:return Xt(a,a.stateNode.containerInfo),c=a.pendingProps,r===null?a.child=fo(a,null,c,l):gn(r,a,c,l),a.child;case 11:return VS(r,a,a.type,a.pendingProps,l);case 7:return gn(r,a,a.pendingProps,l),a.child;case 8:return gn(r,a,a.pendingProps.children,l),a.child;case 12:return gn(r,a,a.pendingProps.children,l),a.child;case 10:return c=a.pendingProps,Ls(a,a.type,c.value),gn(r,a,c.children,l),a.child;case 9:return m=a.type._context,c=a.pendingProps.children,lo(a),m=pn(m),c=c(m),a.flags|=1,gn(r,a,c,l),a.child;case 14:return LS(r,a,a.type,a.pendingProps,l);case 15:return US(r,a,a.type,a.pendingProps,l);case 19:return QS(r,a,l);case 31:return Vx(r,a,l);case 22:return FS(r,a,l,a.pendingProps);case 24:return lo(a),c=pn(Ht),r===null?(m=$g(),m===null&&(m=ft,g=Kg(),m.pooledCache=g,g.refCount++,g!==null&&(m.pooledCacheLanes|=l),m=g),a.memoizedState={parent:c,cache:m},Wg(a),Ls(a,Ht,m)):((r.lanes&l)!==0&&(Xg(r,a),kc(a,null,null,l),Mc()),m=r.memoizedState,g=a.memoizedState,m.parent!==c?(m={parent:c,cache:c},a.memoizedState=m,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=m),Ls(a,Ht,c)):(c=g.cache,Ls(a,Ht,c),c!==m.cache&&Gg(a,[Ht],l,!0))),gn(r,a,a.pendingProps.children,l),a.child;case 29:throw a.pendingProps}throw Error(i(156,a.tag))}function Yr(r){r.flags|=4}function x_(r,a,l,c,m){if((a=(r.mode&32)!==0)&&(a=!1),a){if(r.flags|=16777216,(m&335544128)===m)if(r.stateNode.complete)r.flags|=8192;else if(TI())r.flags|=8192;else throw ho=Od,Yg}else r.flags&=-16777217}function YS(r,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)r.flags&=-16777217;else if(r.flags|=16777216,!cA(a))if(TI())r.flags|=8192;else throw ho=Od,Yg}function $d(r,a){a!==null&&(r.flags|=4),r.flags&16384&&(a=r.tag!==22?ed():536870912,r.lanes|=a,Ll|=a)}function zc(r,a){if(!Be)switch(r.tailMode){case"hidden":a=r.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?r.tail=null:l.sibling=null;break;case"collapsed":l=r.tail;for(var c=null;l!==null;)l.alternate!==null&&(c=l),l=l.sibling;c===null?a||r.tail===null?r.tail=null:r.tail.sibling=null:c.sibling=null}}function pt(r){var a=r.alternate!==null&&r.alternate.child===r.child,l=0,c=0;if(a)for(var m=r.child;m!==null;)l|=m.lanes|m.childLanes,c|=m.subtreeFlags&65011712,c|=m.flags&65011712,m.return=r,m=m.sibling;else for(m=r.child;m!==null;)l|=m.lanes|m.childLanes,c|=m.subtreeFlags,c|=m.flags,m.return=r,m=m.sibling;return r.subtreeFlags|=c,r.childLanes=l,a}function Ux(r,a,l){var c=a.pendingProps;switch(Bg(a),a.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return pt(a),null;case 1:return pt(a),null;case 3:return l=a.stateNode,c=null,r!==null&&(c=r.memoizedState.cache),a.memoizedState.cache!==c&&(a.flags|=2048),Gr(Ht),Tt(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(r===null||r.child===null)&&(Il(a)?Yr(a):r===null||r.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,qg())),pt(a),null;case 26:var m=a.type,g=a.memoizedState;return r===null?(Yr(a),g!==null?(pt(a),YS(a,g)):(pt(a),x_(a,m,null,c,l))):g?g!==r.memoizedState?(Yr(a),pt(a),YS(a,g)):(pt(a),a.flags&=-16777217):(r=r.memoizedProps,r!==c&&Yr(a),pt(a),x_(a,m,r,c,l)),null;case 27:if(nl(a),l=Oe.current,m=a.type,r!==null&&a.stateNode!=null)r.memoizedProps!==c&&Yr(a);else{if(!c){if(a.stateNode===null)throw Error(i(166));return pt(a),null}r=de.current,Il(a)?Cw(a):(r=nA(m,c,l),a.stateNode=r,Yr(a))}return pt(a),null;case 5:if(nl(a),m=a.type,r!==null&&a.stateNode!=null)r.memoizedProps!==c&&Yr(a);else{if(!c){if(a.stateNode===null)throw Error(i(166));return pt(a),null}if(g=de.current,Il(a))Cw(a);else{var E=um(Oe.current);switch(g){case 1:g=E.createElementNS("http://www.w3.org/2000/svg",m);break;case 2:g=E.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;default:switch(m){case"svg":g=E.createElementNS("http://www.w3.org/2000/svg",m);break;case"math":g=E.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;case"script":g=E.createElement("div"),g.innerHTML="<script><\/script>",g=g.removeChild(g.firstChild);break;case"select":g=typeof c.is=="string"?E.createElement("select",{is:c.is}):E.createElement("select"),c.multiple?g.multiple=!0:c.size&&(g.size=c.size);break;default:g=typeof c.is=="string"?E.createElement(m,{is:c.is}):E.createElement(m)}}g[zt]=a,g[nn]=c;e:for(E=a.child;E!==null;){if(E.tag===5||E.tag===6)g.appendChild(E.stateNode);else if(E.tag!==4&&E.tag!==27&&E.child!==null){E.child.return=E,E=E.child;continue}if(E===a)break e;for(;E.sibling===null;){if(E.return===null||E.return===a)break e;E=E.return}E.sibling.return=E.return,E=E.sibling}a.stateNode=g;e:switch(_n(g,m,c),m){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}c&&Yr(a)}}return pt(a),x_(a,a.type,r===null?null:r.memoizedProps,a.pendingProps,l),null;case 6:if(r&&a.stateNode!=null)r.memoizedProps!==c&&Yr(a);else{if(typeof c!="string"&&a.stateNode===null)throw Error(i(166));if(r=Oe.current,Il(a)){if(r=a.stateNode,l=a.memoizedProps,c=null,m=mn,m!==null)switch(m.tag){case 27:case 5:c=m.memoizedProps}r[zt]=a,r=!!(r.nodeValue===l||c!==null&&c.suppressHydrationWarning===!0||GI(r.nodeValue,l)),r||Vs(a,!0)}else r=um(r).createTextNode(c),r[zt]=a,a.stateNode=r}return pt(a),null;case 31:if(l=a.memoizedState,r===null||r.memoizedState!==null){if(c=Il(a),l!==null){if(r===null){if(!c)throw Error(i(318));if(r=a.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(557));r[zt]=a}else ao(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;pt(a),r=!1}else l=qg(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=l),r=!0;if(!r)return a.flags&256?(ei(a),a):(ei(a),null);if((a.flags&128)!==0)throw Error(i(558))}return pt(a),null;case 13:if(c=a.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(m=Il(a),c!==null&&c.dehydrated!==null){if(r===null){if(!m)throw Error(i(318));if(m=a.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(i(317));m[zt]=a}else ao(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;pt(a),m=!1}else m=qg(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=m),m=!0;if(!m)return a.flags&256?(ei(a),a):(ei(a),null)}return ei(a),(a.flags&128)!==0?(a.lanes=l,a):(l=c!==null,r=r!==null&&r.memoizedState!==null,l&&(c=a.child,m=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(m=c.alternate.memoizedState.cachePool.pool),g=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(g=c.memoizedState.cachePool.pool),g!==m&&(c.flags|=2048)),l!==r&&l&&(a.child.flags|=8192),$d(a,a.updateQueue),pt(a),null);case 4:return Tt(),r===null&&ey(a.stateNode.containerInfo),pt(a),null;case 10:return Gr(a.type),pt(a),null;case 19:if(ee(Mt),c=a.memoizedState,c===null)return pt(a),null;if(m=(a.flags&128)!==0,g=c.rendering,g===null)if(m)zc(c,!1);else{if(Dt!==0||r!==null&&(r.flags&128)!==0)for(r=a.child;r!==null;){if(g=kd(r),g!==null){for(a.flags|=128,zc(c,!1),r=g.updateQueue,a.updateQueue=r,$d(a,r),a.subtreeFlags=0,r=l,l=a.child;l!==null;)Sw(l,r),l=l.sibling;return ue(Mt,Mt.current&1|2),Be&&jr(a,c.treeForkCount),a.child}r=r.sibling}c.tail!==null&&On()>Zd&&(a.flags|=128,m=!0,zc(c,!1),a.lanes=4194304)}else{if(!m)if(r=kd(g),r!==null){if(a.flags|=128,m=!0,r=r.updateQueue,a.updateQueue=r,$d(a,r),zc(c,!0),c.tail===null&&c.tailMode==="hidden"&&!g.alternate&&!Be)return pt(a),null}else 2*On()-c.renderingStartTime>Zd&&l!==536870912&&(a.flags|=128,m=!0,zc(c,!1),a.lanes=4194304);c.isBackwards?(g.sibling=a.child,a.child=g):(r=c.last,r!==null?r.sibling=g:a.child=g,c.last=g)}return c.tail!==null?(r=c.tail,c.rendering=r,c.tail=r.sibling,c.renderingStartTime=On(),r.sibling=null,l=Mt.current,ue(Mt,m?l&1|2:l&1),Be&&jr(a,c.treeForkCount),r):(pt(a),null);case 22:case 23:return ei(a),t_(),c=a.memoizedState!==null,r!==null?r.memoizedState!==null!==c&&(a.flags|=8192):c&&(a.flags|=8192),c?(l&536870912)!==0&&(a.flags&128)===0&&(pt(a),a.subtreeFlags&6&&(a.flags|=8192)):pt(a),l=a.updateQueue,l!==null&&$d(a,l.retryQueue),l=null,r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(l=r.memoizedState.cachePool.pool),c=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(c=a.memoizedState.cachePool.pool),c!==l&&(a.flags|=2048),r!==null&&ee(uo),null;case 24:return l=null,r!==null&&(l=r.memoizedState.cache),a.memoizedState.cache!==l&&(a.flags|=2048),Gr(Ht),pt(a),null;case 25:return null;case 30:return null}throw Error(i(156,a.tag))}function Fx(r,a){switch(Bg(a),a.tag){case 1:return r=a.flags,r&65536?(a.flags=r&-65537|128,a):null;case 3:return Gr(Ht),Tt(),r=a.flags,(r&65536)!==0&&(r&128)===0?(a.flags=r&-65537|128,a):null;case 26:case 27:case 5:return nl(a),null;case 31:if(a.memoizedState!==null){if(ei(a),a.alternate===null)throw Error(i(340));ao()}return r=a.flags,r&65536?(a.flags=r&-65537|128,a):null;case 13:if(ei(a),r=a.memoizedState,r!==null&&r.dehydrated!==null){if(a.alternate===null)throw Error(i(340));ao()}return r=a.flags,r&65536?(a.flags=r&-65537|128,a):null;case 19:return ee(Mt),null;case 4:return Tt(),null;case 10:return Gr(a.type),null;case 22:case 23:return ei(a),t_(),r!==null&&ee(uo),r=a.flags,r&65536?(a.flags=r&-65537|128,a):null;case 24:return Gr(Ht),null;case 25:return null;default:return null}}function WS(r,a){switch(Bg(a),a.tag){case 3:Gr(Ht),Tt();break;case 26:case 27:case 5:nl(a);break;case 4:Tt();break;case 31:a.memoizedState!==null&&ei(a);break;case 13:ei(a);break;case 19:ee(Mt);break;case 10:Gr(a.type);break;case 22:case 23:ei(a),t_(),r!==null&&ee(uo);break;case 24:Gr(Ht)}}function qc(r,a){try{var l=a.updateQueue,c=l!==null?l.lastEffect:null;if(c!==null){var m=c.next;l=m;do{if((l.tag&r)===r){c=void 0;var g=l.create,E=l.inst;c=g(),E.destroy=c}l=l.next}while(l!==m)}}catch(S){rt(a,a.return,S)}}function js(r,a,l){try{var c=a.updateQueue,m=c!==null?c.lastEffect:null;if(m!==null){var g=m.next;c=g;do{if((c.tag&r)===r){var E=c.inst,S=E.destroy;if(S!==void 0){E.destroy=void 0,m=a;var D=l,j=S;try{j()}catch(Y){rt(m,D,Y)}}}c=c.next}while(c!==g)}}catch(Y){rt(a,a.return,Y)}}function XS(r){var a=r.updateQueue;if(a!==null){var l=r.stateNode;try{zw(a,l)}catch(c){rt(r,r.return,c)}}}function JS(r,a,l){l.props=po(r.type,r.memoizedProps),l.state=r.memoizedState;try{l.componentWillUnmount()}catch(c){rt(r,a,c)}}function jc(r,a){try{var l=r.ref;if(l!==null){switch(r.tag){case 26:case 27:case 5:var c=r.stateNode;break;case 30:c=r.stateNode;break;default:c=r.stateNode}typeof l=="function"?r.refCleanup=l(c):l.current=c}}catch(m){rt(r,a,m)}}function vr(r,a){var l=r.ref,c=r.refCleanup;if(l!==null)if(typeof c=="function")try{c()}catch(m){rt(r,a,m)}finally{r.refCleanup=null,r=r.alternate,r!=null&&(r.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(m){rt(r,a,m)}else l.current=null}function ZS(r){var a=r.type,l=r.memoizedProps,c=r.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":l.autoFocus&&c.focus();break e;case"img":l.src?c.src=l.src:l.srcSet&&(c.srcset=l.srcSet)}}catch(m){rt(r,r.return,m)}}function P_(r,a,l){try{var c=r.stateNode;oP(c,r.type,l,a),c[nn]=a}catch(m){rt(r,r.return,m)}}function eI(r){return r.tag===5||r.tag===3||r.tag===26||r.tag===27&&Ws(r.type)||r.tag===4}function M_(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||eI(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.tag===27&&Ws(r.type)||r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function k_(r,a,l){var c=r.tag;if(c===5||c===6)r=r.stateNode,a?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(r,a):(a=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,a.appendChild(r),l=l._reactRootContainer,l!=null||a.onclick!==null||(a.onclick=Oi));else if(c!==4&&(c===27&&Ws(r.type)&&(l=r.stateNode,a=null),r=r.child,r!==null))for(k_(r,a,l),r=r.sibling;r!==null;)k_(r,a,l),r=r.sibling}function Yd(r,a,l){var c=r.tag;if(c===5||c===6)r=r.stateNode,a?l.insertBefore(r,a):l.appendChild(r);else if(c!==4&&(c===27&&Ws(r.type)&&(l=r.stateNode),r=r.child,r!==null))for(Yd(r,a,l),r=r.sibling;r!==null;)Yd(r,a,l),r=r.sibling}function tI(r){var a=r.stateNode,l=r.memoizedProps;try{for(var c=r.type,m=a.attributes;m.length;)a.removeAttributeNode(m[0]);_n(a,c,l),a[zt]=r,a[nn]=l}catch(g){rt(r,r.return,g)}}var Wr=!1,Qt=!1,V_=!1,nI=typeof WeakSet=="function"?WeakSet:Set,sn=null;function Bx(r,a){if(r=r.containerInfo,iy=gm,r=mw(r),Ng(r)){if("selectionStart"in r)var l={start:r.selectionStart,end:r.selectionEnd};else e:{l=(l=r.ownerDocument)&&l.defaultView||window;var c=l.getSelection&&l.getSelection();if(c&&c.rangeCount!==0){l=c.anchorNode;var m=c.anchorOffset,g=c.focusNode;c=c.focusOffset;try{l.nodeType,g.nodeType}catch{l=null;break e}var E=0,S=-1,D=-1,j=0,Y=0,Z=r,H=null;t:for(;;){for(var Q;Z!==l||m!==0&&Z.nodeType!==3||(S=E+m),Z!==g||c!==0&&Z.nodeType!==3||(D=E+c),Z.nodeType===3&&(E+=Z.nodeValue.length),(Q=Z.firstChild)!==null;)H=Z,Z=Q;for(;;){if(Z===r)break t;if(H===l&&++j===m&&(S=E),H===g&&++Y===c&&(D=E),(Q=Z.nextSibling)!==null)break;Z=H,H=Z.parentNode}Z=Q}l=S===-1||D===-1?null:{start:S,end:D}}else l=null}l=l||{start:0,end:0}}else l=null;for(ry={focusedElem:r,selectionRange:l},gm=!1,sn=a;sn!==null;)if(a=sn,r=a.child,(a.subtreeFlags&1028)!==0&&r!==null)r.return=a,sn=r;else for(;sn!==null;){switch(a=sn,g=a.alternate,r=a.flags,a.tag){case 0:if((r&4)!==0&&(r=a.updateQueue,r=r!==null?r.events:null,r!==null))for(l=0;l<r.length;l++)m=r[l],m.ref.impl=m.nextImpl;break;case 11:case 15:break;case 1:if((r&1024)!==0&&g!==null){r=void 0,l=a,m=g.memoizedProps,g=g.memoizedState,c=l.stateNode;try{var pe=po(l.type,m);r=c.getSnapshotBeforeUpdate(pe,g),c.__reactInternalSnapshotBeforeUpdate=r}catch(Se){rt(l,l.return,Se)}}break;case 3:if((r&1024)!==0){if(r=a.stateNode.containerInfo,l=r.nodeType,l===9)oy(r);else if(l===1)switch(r.nodeName){case"HEAD":case"HTML":case"BODY":oy(r);break;default:r.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((r&1024)!==0)throw Error(i(163))}if(r=a.sibling,r!==null){r.return=a.return,sn=r;break}sn=a.return}}function iI(r,a,l){var c=l.flags;switch(l.tag){case 0:case 11:case 15:Jr(r,l),c&4&&qc(5,l);break;case 1:if(Jr(r,l),c&4)if(r=l.stateNode,a===null)try{r.componentDidMount()}catch(E){rt(l,l.return,E)}else{var m=po(l.type,a.memoizedProps);a=a.memoizedState;try{r.componentDidUpdate(m,a,r.__reactInternalSnapshotBeforeUpdate)}catch(E){rt(l,l.return,E)}}c&64&&XS(l),c&512&&jc(l,l.return);break;case 3:if(Jr(r,l),c&64&&(r=l.updateQueue,r!==null)){if(a=null,l.child!==null)switch(l.child.tag){case 27:case 5:a=l.child.stateNode;break;case 1:a=l.child.stateNode}try{zw(r,a)}catch(E){rt(l,l.return,E)}}break;case 27:a===null&&c&4&&tI(l);case 26:case 5:Jr(r,l),a===null&&c&4&&ZS(l),c&512&&jc(l,l.return);break;case 12:Jr(r,l);break;case 31:Jr(r,l),c&4&&aI(r,l);break;case 13:Jr(r,l),c&4&&oI(r,l),c&64&&(r=l.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&(l=Yx.bind(null,l),pP(r,l))));break;case 22:if(c=l.memoizedState!==null||Wr,!c){a=a!==null&&a.memoizedState!==null||Qt,m=Wr;var g=Qt;Wr=c,(Qt=a)&&!g?Zr(r,l,(l.subtreeFlags&8772)!==0):Jr(r,l),Wr=m,Qt=g}break;case 30:break;default:Jr(r,l)}}function rI(r){var a=r.alternate;a!==null&&(r.alternate=null,rI(a)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(a=r.stateNode,a!==null&&ol(a)),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}var St=null,Bn=!1;function Xr(r,a,l){for(l=l.child;l!==null;)sI(r,a,l),l=l.sibling}function sI(r,a,l){if(fn&&typeof fn.onCommitFiberUnmount=="function")try{fn.onCommitFiberUnmount(Ri,l)}catch{}switch(l.tag){case 26:Qt||vr(l,a),Xr(r,a,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:Qt||vr(l,a);var c=St,m=Bn;Ws(l.type)&&(St=l.stateNode,Bn=!1),Xr(r,a,l),Jc(l.stateNode),St=c,Bn=m;break;case 5:Qt||vr(l,a);case 6:if(c=St,m=Bn,St=null,Xr(r,a,l),St=c,Bn=m,St!==null)if(Bn)try{(St.nodeType===9?St.body:St.nodeName==="HTML"?St.ownerDocument.body:St).removeChild(l.stateNode)}catch(g){rt(l,a,g)}else try{St.removeChild(l.stateNode)}catch(g){rt(l,a,g)}break;case 18:St!==null&&(Bn?(r=St,XI(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,l.stateNode),Gl(r)):XI(St,l.stateNode));break;case 4:c=St,m=Bn,St=l.stateNode.containerInfo,Bn=!0,Xr(r,a,l),St=c,Bn=m;break;case 0:case 11:case 14:case 15:js(2,l,a),Qt||js(4,l,a),Xr(r,a,l);break;case 1:Qt||(vr(l,a),c=l.stateNode,typeof c.componentWillUnmount=="function"&&JS(l,a,c)),Xr(r,a,l);break;case 21:Xr(r,a,l);break;case 22:Qt=(c=Qt)||l.memoizedState!==null,Xr(r,a,l),Qt=c;break;default:Xr(r,a,l)}}function aI(r,a){if(a.memoizedState===null&&(r=a.alternate,r!==null&&(r=r.memoizedState,r!==null))){r=r.dehydrated;try{Gl(r)}catch(l){rt(a,a.return,l)}}}function oI(r,a){if(a.memoizedState===null&&(r=a.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null))))try{Gl(r)}catch(l){rt(a,a.return,l)}}function zx(r){switch(r.tag){case 31:case 13:case 19:var a=r.stateNode;return a===null&&(a=r.stateNode=new nI),a;case 22:return r=r.stateNode,a=r._retryCache,a===null&&(a=r._retryCache=new nI),a;default:throw Error(i(435,r.tag))}}function Wd(r,a){var l=zx(r);a.forEach(function(c){if(!l.has(c)){l.add(c);var m=Wx.bind(null,r,c);c.then(m,m)}})}function zn(r,a){var l=a.deletions;if(l!==null)for(var c=0;c<l.length;c++){var m=l[c],g=r,E=a,S=E;e:for(;S!==null;){switch(S.tag){case 27:if(Ws(S.type)){St=S.stateNode,Bn=!1;break e}break;case 5:St=S.stateNode,Bn=!1;break e;case 3:case 4:St=S.stateNode.containerInfo,Bn=!0;break e}S=S.return}if(St===null)throw Error(i(160));sI(g,E,m),St=null,Bn=!1,g=m.alternate,g!==null&&(g.return=null),m.return=null}if(a.subtreeFlags&13886)for(a=a.child;a!==null;)lI(a,r),a=a.sibling}var Li=null;function lI(r,a){var l=r.alternate,c=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:zn(a,r),qn(r),c&4&&(js(3,r,r.return),qc(3,r),js(5,r,r.return));break;case 1:zn(a,r),qn(r),c&512&&(Qt||l===null||vr(l,l.return)),c&64&&Wr&&(r=r.updateQueue,r!==null&&(c=r.callbacks,c!==null&&(l=r.shared.hiddenCallbacks,r.shared.hiddenCallbacks=l===null?c:l.concat(c))));break;case 26:var m=Li;if(zn(a,r),qn(r),c&512&&(Qt||l===null||vr(l,l.return)),c&4){var g=l!==null?l.memoizedState:null;if(c=r.memoizedState,l===null)if(c===null)if(r.stateNode===null){e:{c=r.type,l=r.memoizedProps,m=m.ownerDocument||m;t:switch(c){case"title":g=m.getElementsByTagName("title")[0],(!g||g[sr]||g[zt]||g.namespaceURI==="http://www.w3.org/2000/svg"||g.hasAttribute("itemprop"))&&(g=m.createElement(c),m.head.insertBefore(g,m.querySelector("head > title"))),_n(g,c,l),g[zt]=r,qt(g),c=g;break e;case"link":var E=lA("link","href",m).get(c+(l.href||""));if(E){for(var S=0;S<E.length;S++)if(g=E[S],g.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&g.getAttribute("rel")===(l.rel==null?null:l.rel)&&g.getAttribute("title")===(l.title==null?null:l.title)&&g.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){E.splice(S,1);break t}}g=m.createElement(c),_n(g,c,l),m.head.appendChild(g);break;case"meta":if(E=lA("meta","content",m).get(c+(l.content||""))){for(S=0;S<E.length;S++)if(g=E[S],g.getAttribute("content")===(l.content==null?null:""+l.content)&&g.getAttribute("name")===(l.name==null?null:l.name)&&g.getAttribute("property")===(l.property==null?null:l.property)&&g.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&g.getAttribute("charset")===(l.charSet==null?null:l.charSet)){E.splice(S,1);break t}}g=m.createElement(c),_n(g,c,l),m.head.appendChild(g);break;default:throw Error(i(468,c))}g[zt]=r,qt(g),c=g}r.stateNode=c}else uA(m,r.type,r.stateNode);else r.stateNode=oA(m,c,r.memoizedProps);else g!==c?(g===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):g.count--,c===null?uA(m,r.type,r.stateNode):oA(m,c,r.memoizedProps)):c===null&&r.stateNode!==null&&P_(r,r.memoizedProps,l.memoizedProps)}break;case 27:zn(a,r),qn(r),c&512&&(Qt||l===null||vr(l,l.return)),l!==null&&c&4&&P_(r,r.memoizedProps,l.memoizedProps);break;case 5:if(zn(a,r),qn(r),c&512&&(Qt||l===null||vr(l,l.return)),r.flags&32){m=r.stateNode;try{Fn(m,"")}catch(pe){rt(r,r.return,pe)}}c&4&&r.stateNode!=null&&(m=r.memoizedProps,P_(r,m,l!==null?l.memoizedProps:m)),c&1024&&(V_=!0);break;case 6:if(zn(a,r),qn(r),c&4){if(r.stateNode===null)throw Error(i(162));c=r.memoizedProps,l=r.stateNode;try{l.nodeValue=c}catch(pe){rt(r,r.return,pe)}}break;case 3:if(fm=null,m=Li,Li=cm(a.containerInfo),zn(a,r),Li=m,qn(r),c&4&&l!==null&&l.memoizedState.isDehydrated)try{Gl(a.containerInfo)}catch(pe){rt(r,r.return,pe)}V_&&(V_=!1,uI(r));break;case 4:c=Li,Li=cm(r.stateNode.containerInfo),zn(a,r),qn(r),Li=c;break;case 12:zn(a,r),qn(r);break;case 31:zn(a,r),qn(r),c&4&&(c=r.updateQueue,c!==null&&(r.updateQueue=null,Wd(r,c)));break;case 13:zn(a,r),qn(r),r.child.flags&8192&&r.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(Jd=On()),c&4&&(c=r.updateQueue,c!==null&&(r.updateQueue=null,Wd(r,c)));break;case 22:m=r.memoizedState!==null;var D=l!==null&&l.memoizedState!==null,j=Wr,Y=Qt;if(Wr=j||m,Qt=Y||D,zn(a,r),Qt=Y,Wr=j,qn(r),c&8192)e:for(a=r.stateNode,a._visibility=m?a._visibility&-2:a._visibility|1,m&&(l===null||D||Wr||Qt||go(r)),l=null,a=r;;){if(a.tag===5||a.tag===26){if(l===null){D=l=a;try{if(g=D.stateNode,m)E=g.style,typeof E.setProperty=="function"?E.setProperty("display","none","important"):E.display="none";else{S=D.stateNode;var Z=D.memoizedProps.style,H=Z!=null&&Z.hasOwnProperty("display")?Z.display:null;S.style.display=H==null||typeof H=="boolean"?"":(""+H).trim()}}catch(pe){rt(D,D.return,pe)}}}else if(a.tag===6){if(l===null){D=a;try{D.stateNode.nodeValue=m?"":D.memoizedProps}catch(pe){rt(D,D.return,pe)}}}else if(a.tag===18){if(l===null){D=a;try{var Q=D.stateNode;m?JI(Q,!0):JI(D.stateNode,!1)}catch(pe){rt(D,D.return,pe)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===r)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===r)break e;for(;a.sibling===null;){if(a.return===null||a.return===r)break e;l===a&&(l=null),a=a.return}l===a&&(l=null),a.sibling.return=a.return,a=a.sibling}c&4&&(c=r.updateQueue,c!==null&&(l=c.retryQueue,l!==null&&(c.retryQueue=null,Wd(r,l))));break;case 19:zn(a,r),qn(r),c&4&&(c=r.updateQueue,c!==null&&(r.updateQueue=null,Wd(r,c)));break;case 30:break;case 21:break;default:zn(a,r),qn(r)}}function qn(r){var a=r.flags;if(a&2){try{for(var l,c=r.return;c!==null;){if(eI(c)){l=c;break}c=c.return}if(l==null)throw Error(i(160));switch(l.tag){case 27:var m=l.stateNode,g=M_(r);Yd(r,g,m);break;case 5:var E=l.stateNode;l.flags&32&&(Fn(E,""),l.flags&=-33);var S=M_(r);Yd(r,S,E);break;case 3:case 4:var D=l.stateNode.containerInfo,j=M_(r);k_(r,j,D);break;default:throw Error(i(161))}}catch(Y){rt(r,r.return,Y)}r.flags&=-3}a&4096&&(r.flags&=-4097)}function uI(r){if(r.subtreeFlags&1024)for(r=r.child;r!==null;){var a=r;uI(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),r=r.sibling}}function Jr(r,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)iI(r,a.alternate,a),a=a.sibling}function go(r){for(r=r.child;r!==null;){var a=r;switch(a.tag){case 0:case 11:case 14:case 15:js(4,a,a.return),go(a);break;case 1:vr(a,a.return);var l=a.stateNode;typeof l.componentWillUnmount=="function"&&JS(a,a.return,l),go(a);break;case 27:Jc(a.stateNode);case 26:case 5:vr(a,a.return),go(a);break;case 22:a.memoizedState===null&&go(a);break;case 30:go(a);break;default:go(a)}r=r.sibling}}function Zr(r,a,l){for(l=l&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var c=a.alternate,m=r,g=a,E=g.flags;switch(g.tag){case 0:case 11:case 15:Zr(m,g,l),qc(4,g);break;case 1:if(Zr(m,g,l),c=g,m=c.stateNode,typeof m.componentDidMount=="function")try{m.componentDidMount()}catch(j){rt(c,c.return,j)}if(c=g,m=c.updateQueue,m!==null){var S=c.stateNode;try{var D=m.shared.hiddenCallbacks;if(D!==null)for(m.shared.hiddenCallbacks=null,m=0;m<D.length;m++)Bw(D[m],S)}catch(j){rt(c,c.return,j)}}l&&E&64&&XS(g),jc(g,g.return);break;case 27:tI(g);case 26:case 5:Zr(m,g,l),l&&c===null&&E&4&&ZS(g),jc(g,g.return);break;case 12:Zr(m,g,l);break;case 31:Zr(m,g,l),l&&E&4&&aI(m,g);break;case 13:Zr(m,g,l),l&&E&4&&oI(m,g);break;case 22:g.memoizedState===null&&Zr(m,g,l),jc(g,g.return);break;case 30:break;default:Zr(m,g,l)}a=a.sibling}}function L_(r,a){var l=null;r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(l=r.memoizedState.cachePool.pool),r=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(r=a.memoizedState.cachePool.pool),r!==l&&(r!=null&&r.refCount++,l!=null&&Nc(l))}function U_(r,a){r=null,a.alternate!==null&&(r=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==r&&(a.refCount++,r!=null&&Nc(r))}function Ui(r,a,l,c){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)cI(r,a,l,c),a=a.sibling}function cI(r,a,l,c){var m=a.flags;switch(a.tag){case 0:case 11:case 15:Ui(r,a,l,c),m&2048&&qc(9,a);break;case 1:Ui(r,a,l,c);break;case 3:Ui(r,a,l,c),m&2048&&(r=null,a.alternate!==null&&(r=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==r&&(a.refCount++,r!=null&&Nc(r)));break;case 12:if(m&2048){Ui(r,a,l,c),r=a.stateNode;try{var g=a.memoizedProps,E=g.id,S=g.onPostCommit;typeof S=="function"&&S(E,a.alternate===null?"mount":"update",r.passiveEffectDuration,-0)}catch(D){rt(a,a.return,D)}}else Ui(r,a,l,c);break;case 31:Ui(r,a,l,c);break;case 13:Ui(r,a,l,c);break;case 23:break;case 22:g=a.stateNode,E=a.alternate,a.memoizedState!==null?g._visibility&2?Ui(r,a,l,c):Hc(r,a):g._visibility&2?Ui(r,a,l,c):(g._visibility|=2,Ml(r,a,l,c,(a.subtreeFlags&10256)!==0||!1)),m&2048&&L_(E,a);break;case 24:Ui(r,a,l,c),m&2048&&U_(a.alternate,a);break;default:Ui(r,a,l,c)}}function Ml(r,a,l,c,m){for(m=m&&((a.subtreeFlags&10256)!==0||!1),a=a.child;a!==null;){var g=r,E=a,S=l,D=c,j=E.flags;switch(E.tag){case 0:case 11:case 15:Ml(g,E,S,D,m),qc(8,E);break;case 23:break;case 22:var Y=E.stateNode;E.memoizedState!==null?Y._visibility&2?Ml(g,E,S,D,m):Hc(g,E):(Y._visibility|=2,Ml(g,E,S,D,m)),m&&j&2048&&L_(E.alternate,E);break;case 24:Ml(g,E,S,D,m),m&&j&2048&&U_(E.alternate,E);break;default:Ml(g,E,S,D,m)}a=a.sibling}}function Hc(r,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var l=r,c=a,m=c.flags;switch(c.tag){case 22:Hc(l,c),m&2048&&L_(c.alternate,c);break;case 24:Hc(l,c),m&2048&&U_(c.alternate,c);break;default:Hc(l,c)}a=a.sibling}}var Gc=8192;function kl(r,a,l){if(r.subtreeFlags&Gc)for(r=r.child;r!==null;)hI(r,a,l),r=r.sibling}function hI(r,a,l){switch(r.tag){case 26:kl(r,a,l),r.flags&Gc&&r.memoizedState!==null&&RP(l,Li,r.memoizedState,r.memoizedProps);break;case 5:kl(r,a,l);break;case 3:case 4:var c=Li;Li=cm(r.stateNode.containerInfo),kl(r,a,l),Li=c;break;case 22:r.memoizedState===null&&(c=r.alternate,c!==null&&c.memoizedState!==null?(c=Gc,Gc=16777216,kl(r,a,l),Gc=c):kl(r,a,l));break;default:kl(r,a,l)}}function fI(r){var a=r.alternate;if(a!==null&&(r=a.child,r!==null)){a.child=null;do a=r.sibling,r.sibling=null,r=a;while(r!==null)}}function Kc(r){var a=r.deletions;if((r.flags&16)!==0){if(a!==null)for(var l=0;l<a.length;l++){var c=a[l];sn=c,mI(c,r)}fI(r)}if(r.subtreeFlags&10256)for(r=r.child;r!==null;)dI(r),r=r.sibling}function dI(r){switch(r.tag){case 0:case 11:case 15:Kc(r),r.flags&2048&&js(9,r,r.return);break;case 3:Kc(r);break;case 12:Kc(r);break;case 22:var a=r.stateNode;r.memoizedState!==null&&a._visibility&2&&(r.return===null||r.return.tag!==13)?(a._visibility&=-3,Xd(r)):Kc(r);break;default:Kc(r)}}function Xd(r){var a=r.deletions;if((r.flags&16)!==0){if(a!==null)for(var l=0;l<a.length;l++){var c=a[l];sn=c,mI(c,r)}fI(r)}for(r=r.child;r!==null;){switch(a=r,a.tag){case 0:case 11:case 15:js(8,a,a.return),Xd(a);break;case 22:l=a.stateNode,l._visibility&2&&(l._visibility&=-3,Xd(a));break;default:Xd(a)}r=r.sibling}}function mI(r,a){for(;sn!==null;){var l=sn;switch(l.tag){case 0:case 11:case 15:js(8,l,a);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var c=l.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:Nc(l.memoizedState.cache)}if(c=l.child,c!==null)c.return=l,sn=c;else e:for(l=r;sn!==null;){c=sn;var m=c.sibling,g=c.return;if(rI(c),c===l){sn=null;break e}if(m!==null){m.return=g,sn=m;break e}sn=g}}}var qx={getCacheForType:function(r){var a=pn(Ht),l=a.data.get(r);return l===void 0&&(l=r(),a.data.set(r,l)),l},cacheSignal:function(){return pn(Ht).controller.signal}},jx=typeof WeakMap=="function"?WeakMap:Map,Je=0,ft=null,Me=null,Le=0,it=0,ti=null,Hs=!1,Vl=!1,F_=!1,es=0,Dt=0,Gs=0,_o=0,B_=0,ni=0,Ll=0,Qc=null,jn=null,z_=!1,Jd=0,pI=0,Zd=1/0,em=null,Ks=null,Zt=0,Qs=null,Ul=null,ts=0,q_=0,j_=null,gI=null,$c=0,H_=null;function ii(){return(Je&2)!==0&&Le!==0?Le&-Le:W.T!==null?W_():td()}function _I(){if(ni===0)if((Le&536870912)===0||Be){var r=ja;ja<<=1,(ja&3932160)===0&&(ja=262144),ni=r}else ni=536870912;return r=Zn.current,r!==null&&(r.flags|=32),ni}function Hn(r,a,l){(r===ft&&(it===2||it===9)||r.cancelPendingCommit!==null)&&(Fl(r,0),$s(r,Le,ni,!1)),Ha(r,l),((Je&2)===0||r!==ft)&&(r===ft&&((Je&2)===0&&(_o|=l),Dt===4&&$s(r,Le,ni,!1)),Er(r))}function yI(r,a,l){if((Je&6)!==0)throw Error(i(327));var c=!l&&(a&127)===0&&(a&r.expiredLanes)===0||Ci(r,a),m=c?Kx(r,a):K_(r,a,!0),g=c;do{if(m===0){Vl&&!c&&$s(r,a,0,!1);break}else{if(l=r.current.alternate,g&&!Hx(l)){m=K_(r,a,!1),g=!1;continue}if(m===2){if(g=a,r.errorRecoveryDisabledLanes&g)var E=0;else E=r.pendingLanes&-536870913,E=E!==0?E:E&536870912?536870912:0;if(E!==0){a=E;e:{var S=r;m=Qc;var D=S.current.memoizedState.isDehydrated;if(D&&(Fl(S,E).flags|=256),E=K_(S,E,!1),E!==2){if(F_&&!D){S.errorRecoveryDisabledLanes|=g,_o|=g,m=4;break e}g=jn,jn=m,g!==null&&(jn===null?jn=g:jn.push.apply(jn,g))}m=E}if(g=!1,m!==2)continue}}if(m===1){Fl(r,0),$s(r,a,0,!0);break}e:{switch(c=r,g=m,g){case 0:case 1:throw Error(i(345));case 4:if((a&4194048)!==a)break;case 6:$s(c,a,ni,!Hs);break e;case 2:jn=null;break;case 3:case 5:break;default:throw Error(i(329))}if((a&62914560)===a&&(m=Jd+300-On(),10<m)){if($s(c,a,ni,!Hs),nr(c,0,!0)!==0)break e;ts=a,c.timeoutHandle=YI(vI.bind(null,c,l,jn,em,z_,a,ni,_o,Ll,Hs,g,"Throttled",-0,0),m);break e}vI(c,l,jn,em,z_,a,ni,_o,Ll,Hs,g,null,-0,0)}}break}while(!0);Er(r)}function vI(r,a,l,c,m,g,E,S,D,j,Y,Z,H,Q){if(r.timeoutHandle=-1,Z=a.subtreeFlags,Z&8192||(Z&16785408)===16785408){Z={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Oi},hI(a,g,Z);var pe=(g&62914560)===g?Jd-On():(g&4194048)===g?pI-On():0;if(pe=CP(Z,pe),pe!==null){ts=g,r.cancelPendingCommit=pe(RI.bind(null,r,a,g,l,c,m,E,S,D,Y,Z,null,H,Q)),$s(r,g,E,!j);return}}RI(r,a,g,l,c,m,E,S,D)}function Hx(r){for(var a=r;;){var l=a.tag;if((l===0||l===11||l===15)&&a.flags&16384&&(l=a.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var c=0;c<l.length;c++){var m=l[c],g=m.getSnapshot;m=m.value;try{if(!Xn(g(),m))return!1}catch{return!1}}if(l=a.child,a.subtreeFlags&16384&&l!==null)l.return=a,a=l;else{if(a===r)break;for(;a.sibling===null;){if(a.return===null||a.return===r)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function $s(r,a,l,c){a&=~B_,a&=~_o,r.suspendedLanes|=a,r.pingedLanes&=~a,c&&(r.warmLanes|=a),c=r.expirationTimes;for(var m=a;0<m;){var g=31-xt(m),E=1<<g;c[g]=-1,m&=~E}l!==0&&Ga(r,l,a)}function tm(){return(Je&6)===0?(Yc(0),!1):!0}function G_(){if(Me!==null){if(it===0)var r=Me.return;else r=Me,Hr=oo=null,o_(r),Nl=null,Oc=0,r=Me;for(;r!==null;)WS(r.alternate,r),r=r.return;Me=null}}function Fl(r,a){var l=r.timeoutHandle;l!==-1&&(r.timeoutHandle=-1,cP(l)),l=r.cancelPendingCommit,l!==null&&(r.cancelPendingCommit=null,l()),ts=0,G_(),ft=r,Me=l=qr(r.current,null),Le=a,it=0,ti=null,Hs=!1,Vl=Ci(r,a),F_=!1,Ll=ni=B_=_o=Gs=Dt=0,jn=Qc=null,z_=!1,(a&8)!==0&&(a|=a&32);var c=r.entangledLanes;if(c!==0)for(r=r.entanglements,c&=a;0<c;){var m=31-xt(c),g=1<<m;a|=r[m],c&=~g}return es=a,wd(),l}function EI(r,a){Ne=null,W.H=Fc,a===Cl||a===Dd?(a=Vw(),it=3):a===Yg?(a=Vw(),it=4):it=a===S_?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,ti=a,Me===null&&(Dt=1,Hd(r,mi(a,r.current)))}function TI(){var r=Zn.current;return r===null?!0:(Le&4194048)===Le?yi===null:(Le&62914560)===Le||(Le&536870912)!==0?r===yi:!1}function wI(){var r=W.H;return W.H=Fc,r===null?Fc:r}function SI(){var r=W.A;return W.A=qx,r}function nm(){Dt=4,Hs||(Le&4194048)!==Le&&Zn.current!==null||(Vl=!0),(Gs&134217727)===0&&(_o&134217727)===0||ft===null||$s(ft,Le,ni,!1)}function K_(r,a,l){var c=Je;Je|=2;var m=wI(),g=SI();(ft!==r||Le!==a)&&(em=null,Fl(r,a)),a=!1;var E=Dt;e:do try{if(it!==0&&Me!==null){var S=Me,D=ti;switch(it){case 8:G_(),E=6;break e;case 3:case 2:case 9:case 6:Zn.current===null&&(a=!0);var j=it;if(it=0,ti=null,Bl(r,S,D,j),l&&Vl){E=0;break e}break;default:j=it,it=0,ti=null,Bl(r,S,D,j)}}Gx(),E=Dt;break}catch(Y){EI(r,Y)}while(!0);return a&&r.shellSuspendCounter++,Hr=oo=null,Je=c,W.H=m,W.A=g,Me===null&&(ft=null,Le=0,wd()),E}function Gx(){for(;Me!==null;)II(Me)}function Kx(r,a){var l=Je;Je|=2;var c=wI(),m=SI();ft!==r||Le!==a?(em=null,Zd=On()+500,Fl(r,a)):Vl=Ci(r,a);e:do try{if(it!==0&&Me!==null){a=Me;var g=ti;t:switch(it){case 1:it=0,ti=null,Bl(r,a,g,1);break;case 2:case 9:if(Mw(g)){it=0,ti=null,AI(a);break}a=function(){it!==2&&it!==9||ft!==r||(it=7),Er(r)},g.then(a,a);break e;case 3:it=7;break e;case 4:it=5;break e;case 7:Mw(g)?(it=0,ti=null,AI(a)):(it=0,ti=null,Bl(r,a,g,7));break;case 5:var E=null;switch(Me.tag){case 26:E=Me.memoizedState;case 5:case 27:var S=Me;if(E?cA(E):S.stateNode.complete){it=0,ti=null;var D=S.sibling;if(D!==null)Me=D;else{var j=S.return;j!==null?(Me=j,im(j)):Me=null}break t}}it=0,ti=null,Bl(r,a,g,5);break;case 6:it=0,ti=null,Bl(r,a,g,6);break;case 8:G_(),Dt=6;break e;default:throw Error(i(462))}}Qx();break}catch(Y){EI(r,Y)}while(!0);return Hr=oo=null,W.H=c,W.A=m,Je=l,Me!==null?0:(ft=null,Le=0,wd(),Dt)}function Qx(){for(;Me!==null&&!wg();)II(Me)}function II(r){var a=$S(r.alternate,r,es);r.memoizedProps=r.pendingProps,a===null?im(r):Me=a}function AI(r){var a=r,l=a.alternate;switch(a.tag){case 15:case 0:a=qS(l,a,a.pendingProps,a.type,void 0,Le);break;case 11:a=qS(l,a,a.pendingProps,a.type.render,a.ref,Le);break;case 5:o_(a);default:WS(l,a),a=Me=Sw(a,es),a=$S(l,a,es)}r.memoizedProps=r.pendingProps,a===null?im(r):Me=a}function Bl(r,a,l,c){Hr=oo=null,o_(a),Nl=null,Oc=0;var m=a.return;try{if(kx(r,m,a,l,Le)){Dt=1,Hd(r,mi(l,r.current)),Me=null;return}}catch(g){if(m!==null)throw Me=m,g;Dt=1,Hd(r,mi(l,r.current)),Me=null;return}a.flags&32768?(Be||c===1?r=!0:Vl||(Le&536870912)!==0?r=!1:(Hs=r=!0,(c===2||c===9||c===3||c===6)&&(c=Zn.current,c!==null&&c.tag===13&&(c.flags|=16384))),bI(a,r)):im(a)}function im(r){var a=r;do{if((a.flags&32768)!==0){bI(a,Hs);return}r=a.return;var l=Ux(a.alternate,a,es);if(l!==null){Me=l;return}if(a=a.sibling,a!==null){Me=a;return}Me=a=r}while(a!==null);Dt===0&&(Dt=5)}function bI(r,a){do{var l=Fx(r.alternate,r);if(l!==null){l.flags&=32767,Me=l;return}if(l=r.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!a&&(r=r.sibling,r!==null)){Me=r;return}Me=r=l}while(r!==null);Dt=6,Me=null}function RI(r,a,l,c,m,g,E,S,D){r.cancelPendingCommit=null;do rm();while(Zt!==0);if((Je&6)!==0)throw Error(i(327));if(a!==null){if(a===r.current)throw Error(i(177));if(g=a.lanes|a.childLanes,g|=Mg,Ag(r,l,g,E,S,D),r===ft&&(Me=ft=null,Le=0),Ul=a,Qs=r,ts=l,q_=g,j_=m,gI=c,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(r.callbackNode=null,r.callbackPriority=0,Xx(Is,function(){return xI(),null})):(r.callbackNode=null,r.callbackPriority=0),c=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||c){c=W.T,W.T=null,m=le.p,le.p=2,E=Je,Je|=4;try{Bx(r,a,l)}finally{Je=E,le.p=m,W.T=c}}Zt=1,CI(),NI(),DI()}}function CI(){if(Zt===1){Zt=0;var r=Qs,a=Ul,l=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||l){l=W.T,W.T=null;var c=le.p;le.p=2;var m=Je;Je|=4;try{lI(a,r);var g=ry,E=mw(r.containerInfo),S=g.focusedElem,D=g.selectionRange;if(E!==S&&S&&S.ownerDocument&&dw(S.ownerDocument.documentElement,S)){if(D!==null&&Ng(S)){var j=D.start,Y=D.end;if(Y===void 0&&(Y=j),"selectionStart"in S)S.selectionStart=j,S.selectionEnd=Math.min(Y,S.value.length);else{var Z=S.ownerDocument||document,H=Z&&Z.defaultView||window;if(H.getSelection){var Q=H.getSelection(),pe=S.textContent.length,Se=Math.min(D.start,pe),ct=D.end===void 0?Se:Math.min(D.end,pe);!Q.extend&&Se>ct&&(E=ct,ct=Se,Se=E);var L=fw(S,Se),P=fw(S,ct);if(L&&P&&(Q.rangeCount!==1||Q.anchorNode!==L.node||Q.anchorOffset!==L.offset||Q.focusNode!==P.node||Q.focusOffset!==P.offset)){var q=Z.createRange();q.setStart(L.node,L.offset),Q.removeAllRanges(),Se>ct?(Q.addRange(q),Q.extend(P.node,P.offset)):(q.setEnd(P.node,P.offset),Q.addRange(q))}}}}for(Z=[],Q=S;Q=Q.parentNode;)Q.nodeType===1&&Z.push({element:Q,left:Q.scrollLeft,top:Q.scrollTop});for(typeof S.focus=="function"&&S.focus(),S=0;S<Z.length;S++){var J=Z[S];J.element.scrollLeft=J.left,J.element.scrollTop=J.top}}gm=!!iy,ry=iy=null}finally{Je=m,le.p=c,W.T=l}}r.current=a,Zt=2}}function NI(){if(Zt===2){Zt=0;var r=Qs,a=Ul,l=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||l){l=W.T,W.T=null;var c=le.p;le.p=2;var m=Je;Je|=4;try{iI(r,a.alternate,a)}finally{Je=m,le.p=c,W.T=l}}Zt=3}}function DI(){if(Zt===4||Zt===3){Zt=0,$f();var r=Qs,a=Ul,l=ts,c=gI;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?Zt=5:(Zt=0,Ul=Qs=null,OI(r,r.pendingLanes));var m=r.pendingLanes;if(m===0&&(Ks=null),Ur(l),a=a.stateNode,fn&&typeof fn.onCommitFiberRoot=="function")try{fn.onCommitFiberRoot(Ri,a,void 0,(a.current.flags&128)===128)}catch{}if(c!==null){a=W.T,m=le.p,le.p=2,W.T=null;try{for(var g=r.onRecoverableError,E=0;E<c.length;E++){var S=c[E];g(S.value,{componentStack:S.stack})}}finally{W.T=a,le.p=m}}(ts&3)!==0&&rm(),Er(r),m=r.pendingLanes,(l&261930)!==0&&(m&42)!==0?r===H_?$c++:($c=0,H_=r):$c=0,Yc(0)}}function OI(r,a){(r.pooledCacheLanes&=a)===0&&(a=r.pooledCache,a!=null&&(r.pooledCache=null,Nc(a)))}function rm(){return CI(),NI(),DI(),xI()}function xI(){if(Zt!==5)return!1;var r=Qs,a=q_;q_=0;var l=Ur(ts),c=W.T,m=le.p;try{le.p=32>l?32:l,W.T=null,l=j_,j_=null;var g=Qs,E=ts;if(Zt=0,Ul=Qs=null,ts=0,(Je&6)!==0)throw Error(i(331));var S=Je;if(Je|=4,dI(g.current),cI(g,g.current,E,l),Je=S,Yc(0,!1),fn&&typeof fn.onPostCommitFiberRoot=="function")try{fn.onPostCommitFiberRoot(Ri,g)}catch{}return!0}finally{le.p=m,W.T=c,OI(r,a)}}function PI(r,a,l){a=mi(l,a),a=w_(r.stateNode,a,2),r=Bs(r,a,2),r!==null&&(Ha(r,2),Er(r))}function rt(r,a,l){if(r.tag===3)PI(r,r,l);else for(;a!==null;){if(a.tag===3){PI(a,r,l);break}else if(a.tag===1){var c=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(Ks===null||!Ks.has(c))){r=mi(l,r),l=MS(2),c=Bs(a,l,2),c!==null&&(kS(l,c,a,r),Ha(c,2),Er(c));break}}a=a.return}}function Q_(r,a,l){var c=r.pingCache;if(c===null){c=r.pingCache=new jx;var m=new Set;c.set(a,m)}else m=c.get(a),m===void 0&&(m=new Set,c.set(a,m));m.has(l)||(F_=!0,m.add(l),r=$x.bind(null,r,a,l),a.then(r,r))}function $x(r,a,l){var c=r.pingCache;c!==null&&c.delete(a),r.pingedLanes|=r.suspendedLanes&l,r.warmLanes&=~l,ft===r&&(Le&l)===l&&(Dt===4||Dt===3&&(Le&62914560)===Le&&300>On()-Jd?(Je&2)===0&&Fl(r,0):B_|=l,Ll===Le&&(Ll=0)),Er(r)}function MI(r,a){a===0&&(a=ed()),r=ro(r,a),r!==null&&(Ha(r,a),Er(r))}function Yx(r){var a=r.memoizedState,l=0;a!==null&&(l=a.retryLane),MI(r,l)}function Wx(r,a){var l=0;switch(r.tag){case 31:case 13:var c=r.stateNode,m=r.memoizedState;m!==null&&(l=m.retryLane);break;case 19:c=r.stateNode;break;case 22:c=r.stateNode._retryCache;break;default:throw Error(i(314))}c!==null&&c.delete(a),MI(r,l)}function Xx(r,a){return Jt(r,a)}var sm=null,zl=null,$_=!1,am=!1,Y_=!1,Ys=0;function Er(r){r!==zl&&r.next===null&&(zl===null?sm=zl=r:zl=zl.next=r),am=!0,$_||($_=!0,Zx())}function Yc(r,a){if(!Y_&&am){Y_=!0;do for(var l=!1,c=sm;c!==null;){if(r!==0){var m=c.pendingLanes;if(m===0)var g=0;else{var E=c.suspendedLanes,S=c.pingedLanes;g=(1<<31-xt(42|r)+1)-1,g&=m&~(E&~S),g=g&201326741?g&201326741|1:g?g|2:0}g!==0&&(l=!0,UI(c,g))}else g=Le,g=nr(c,c===ft?g:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(g&3)===0||Ci(c,g)||(l=!0,UI(c,g));c=c.next}while(l);Y_=!1}}function Jx(){kI()}function kI(){am=$_=!1;var r=0;Ys!==0&&uP()&&(r=Ys);for(var a=On(),l=null,c=sm;c!==null;){var m=c.next,g=VI(c,a);g===0?(c.next=null,l===null?sm=m:l.next=m,m===null&&(zl=l)):(l=c,(r!==0||(g&3)!==0)&&(am=!0)),c=m}Zt!==0&&Zt!==5||Yc(r),Ys!==0&&(Ys=0)}function VI(r,a){for(var l=r.suspendedLanes,c=r.pingedLanes,m=r.expirationTimes,g=r.pendingLanes&-62914561;0<g;){var E=31-xt(g),S=1<<E,D=m[E];D===-1?((S&l)===0||(S&c)!==0)&&(m[E]=Ig(S,a)):D<=a&&(r.expiredLanes|=S),g&=~S}if(a=ft,l=Le,l=nr(r,r===a?l:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),c=r.callbackNode,l===0||r===a&&(it===2||it===9)||r.cancelPendingCommit!==null)return c!==null&&c!==null&&Ss(c),r.callbackNode=null,r.callbackPriority=0;if((l&3)===0||Ci(r,l)){if(a=l&-l,a===r.callbackPriority)return a;switch(c!==null&&Ss(c),Ur(l)){case 2:case 8:l=sc;break;case 32:l=Is;break;case 268435456:l=Yf;break;default:l=Is}return c=LI.bind(null,r),l=Jt(l,c),r.callbackPriority=a,r.callbackNode=l,a}return c!==null&&c!==null&&Ss(c),r.callbackPriority=2,r.callbackNode=null,2}function LI(r,a){if(Zt!==0&&Zt!==5)return r.callbackNode=null,r.callbackPriority=0,null;var l=r.callbackNode;if(rm()&&r.callbackNode!==l)return null;var c=Le;return c=nr(r,r===ft?c:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),c===0?null:(yI(r,c,a),VI(r,On()),r.callbackNode!=null&&r.callbackNode===l?LI.bind(null,r):null)}function UI(r,a){if(rm())return null;yI(r,a,!0)}function Zx(){hP(function(){(Je&6)!==0?Jt(rc,Jx):kI()})}function W_(){if(Ys===0){var r=bl;r===0&&(r=er,er<<=1,(er&261888)===0&&(er=256)),Ys=r}return Ys}function FI(r){return r==null||typeof r=="symbol"||typeof r=="boolean"?null:typeof r=="function"?r:hl(""+r)}function BI(r,a){var l=a.ownerDocument.createElement("input");return l.name=a.name,l.value=a.value,r.id&&l.setAttribute("form",r.id),a.parentNode.insertBefore(l,a),r=new FormData(r),l.parentNode.removeChild(l),r}function eP(r,a,l,c,m){if(a==="submit"&&l&&l.stateNode===m){var g=FI((m[nn]||null).action),E=c.submitter;E&&(a=(a=E[nn]||null)?FI(a.formAction):E.getAttribute("formAction"),a!==null&&(g=a,E=null));var S=new dr("action","action",null,c,m);r.push({event:S,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(Ys!==0){var D=E?BI(m,E):new FormData(m);g_(l,{pending:!0,data:D,method:m.method,action:g},null,D)}}else typeof g=="function"&&(S.preventDefault(),D=E?BI(m,E):new FormData(m),g_(l,{pending:!0,data:D,method:m.method,action:g},g,D))},currentTarget:m}]})}}for(var X_=0;X_<Pg.length;X_++){var J_=Pg[X_],tP=J_.toLowerCase(),nP=J_[0].toUpperCase()+J_.slice(1);Vi(tP,"on"+nP)}Vi(_w,"onAnimationEnd"),Vi(yw,"onAnimationIteration"),Vi(vw,"onAnimationStart"),Vi("dblclick","onDoubleClick"),Vi("focusin","onFocus"),Vi("focusout","onBlur"),Vi(yx,"onTransitionRun"),Vi(vx,"onTransitionStart"),Vi(Ex,"onTransitionCancel"),Vi(Ew,"onTransitionEnd"),ur("onMouseEnter",["mouseout","mouseover"]),ur("onMouseLeave",["mouseout","mouseover"]),ur("onPointerEnter",["pointerout","pointerover"]),ur("onPointerLeave",["pointerout","pointerover"]),lr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),lr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),lr("onBeforeInput",["compositionend","keypress","textInput","paste"]),lr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),lr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),lr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Wc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),iP=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Wc));function zI(r,a){a=(a&4)!==0;for(var l=0;l<r.length;l++){var c=r[l],m=c.event;c=c.listeners;e:{var g=void 0;if(a)for(var E=c.length-1;0<=E;E--){var S=c[E],D=S.instance,j=S.currentTarget;if(S=S.listener,D!==g&&m.isPropagationStopped())break e;g=S,m.currentTarget=j;try{g(m)}catch(Y){Td(Y)}m.currentTarget=null,g=D}else for(E=0;E<c.length;E++){if(S=c[E],D=S.instance,j=S.currentTarget,S=S.listener,D!==g&&m.isPropagationStopped())break e;g=S,m.currentTarget=j;try{g(m)}catch(Y){Td(Y)}m.currentTarget=null,g=D}}}}function ke(r,a){var l=a[al];l===void 0&&(l=a[al]=new Set);var c=r+"__bubble";l.has(c)||(qI(a,r,2,!1),l.add(c))}function Z_(r,a,l){var c=0;a&&(c|=4),qI(l,r,c,a)}var om="_reactListening"+Math.random().toString(36).slice(2);function ey(r){if(!r[om]){r[om]=!0,lc.forEach(function(l){l!=="selectionchange"&&(iP.has(l)||Z_(l,!1,r),Z_(l,!0,r))});var a=r.nodeType===9?r:r.ownerDocument;a===null||a[om]||(a[om]=!0,Z_("selectionchange",!1,a))}}function qI(r,a,l,c){switch(_A(a)){case 2:var m=OP;break;case 8:m=xP;break;default:m=py}l=m.bind(null,a,l,r),m=void 0,!Wa||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(m=!0),c?m!==void 0?r.addEventListener(a,l,{capture:!0,passive:m}):r.addEventListener(a,l,!0):m!==void 0?r.addEventListener(a,l,{passive:m}):r.addEventListener(a,l,!1)}function ty(r,a,l,c,m){var g=c;if((a&1)===0&&(a&2)===0&&c!==null)e:for(;;){if(c===null)return;var E=c.tag;if(E===3||E===4){var S=c.stateNode.containerInfo;if(S===m)break;if(E===4)for(E=c.return;E!==null;){var D=E.tag;if((D===3||D===4)&&E.stateNode.containerInfo===m)return;E=E.return}for(;S!==null;){if(E=ar(S),E===null)return;if(D=E.tag,D===5||D===6||D===26||D===27){c=g=E;continue e}S=S.parentNode}}c=c.return}Ds(function(){var j=g,Y=ci(l),Z=[];e:{var H=Tw.get(r);if(H!==void 0){var Q=dr,pe=r;switch(r){case"keypress":if(Ja(l)===0)break e;case"keydown":case"keyup":Q=yd;break;case"focusin":pe="focus",Q=eo;break;case"focusout":pe="blur",Q=eo;break;case"beforeblur":case"afterblur":Q=eo;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Q=Tc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Q=ud;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Q=v;break;case _w:case yw:case vw:Q=hd;break;case Ew:Q=I;break;case"scroll":case"scrollend":Q=Ec;break;case"wheel":Q=K;break;case"copy":case"cut":case"paste":Q=fd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Q=zr;break;case"toggle":case"beforetoggle":Q=Ce}var Se=(a&4)!==0,ct=!Se&&(r==="scroll"||r==="scrollend"),L=Se?H!==null?H+"Capture":null:H;Se=[];for(var P=j,q;P!==null;){var J=P;if(q=J.stateNode,J=J.tag,J!==5&&J!==26&&J!==27||q===null||L===null||(J=xi(P,L),J!=null&&Se.push(Xc(P,J,q))),ct)break;P=P.return}0<Se.length&&(H=new Q(H,pe,null,l,Y),Z.push({event:H,listeners:Se}))}}if((a&7)===0){e:{if(H=r==="mouseover"||r==="pointerover",Q=r==="mouseout"||r==="pointerout",H&&l!==_c&&(pe=l.relatedTarget||l.fromElement)&&(ar(pe)||pe[rr]))break e;if((Q||H)&&(H=Y.window===Y?Y:(H=Y.ownerDocument)?H.defaultView||H.parentWindow:window,Q?(pe=l.relatedTarget||l.toElement,Q=j,pe=pe?ar(pe):null,pe!==null&&(ct=o(pe),Se=pe.tag,pe!==ct||Se!==5&&Se!==27&&Se!==6)&&(pe=null)):(Q=null,pe=j),Q!==pe)){if(Se=Tc,J="onMouseLeave",L="onMouseEnter",P="mouse",(r==="pointerout"||r==="pointerover")&&(Se=zr,J="onPointerLeave",L="onPointerEnter",P="pointer"),ct=Q==null?H:Yn(Q),q=pe==null?H:Yn(pe),H=new Se(J,P+"leave",Q,l,Y),H.target=ct,H.relatedTarget=q,J=null,ar(Y)===j&&(Se=new Se(L,P+"enter",pe,l,Y),Se.target=q,Se.relatedTarget=ct,J=Se),ct=J,Q&&pe)t:{for(Se=rP,L=Q,P=pe,q=0,J=L;J;J=Se(J))q++;J=0;for(var Te=P;Te;Te=Se(Te))J++;for(;0<q-J;)L=Se(L),q--;for(;0<J-q;)P=Se(P),J--;for(;q--;){if(L===P||P!==null&&L===P.alternate){Se=L;break t}L=Se(L),P=Se(P)}Se=null}else Se=null;Q!==null&&jI(Z,H,Q,Se,!1),pe!==null&&ct!==null&&jI(Z,ct,pe,Se,!0)}}e:{if(H=j?Yn(j):window,Q=H.nodeName&&H.nodeName.toLowerCase(),Q==="select"||Q==="input"&&H.type==="file")var $e=aw;else if(rw(H))if(ow)$e=px;else{$e=dx;var _e=fx}else Q=H.nodeName,!Q||Q.toLowerCase()!=="input"||H.type!=="checkbox"&&H.type!=="radio"?j&&cl(j.elementType)&&($e=aw):$e=mx;if($e&&($e=$e(r,j))){sw(Z,$e,l,Y);break e}_e&&_e(r,H,j),r==="focusout"&&j&&H.type==="number"&&j.memoizedProps.value!=null&&mc(H,"number",H.value)}switch(_e=j?Yn(j):window,r){case"focusin":(rw(_e)||_e.contentEditable==="true")&&(yl=_e,Dg=j,bc=null);break;case"focusout":bc=Dg=yl=null;break;case"mousedown":Og=!0;break;case"contextmenu":case"mouseup":case"dragend":Og=!1,pw(Z,l,Y);break;case"selectionchange":if(_x)break;case"keydown":case"keyup":pw(Z,l,Y)}var xe;if(Xe)e:{switch(r){case"compositionstart":var Ue="onCompositionStart";break e;case"compositionend":Ue="onCompositionEnd";break e;case"compositionupdate":Ue="onCompositionUpdate";break e}Ue=void 0}else _l?to(r,l)&&(Ue="onCompositionEnd"):r==="keydown"&&l.keyCode===229&&(Ue="onCompositionStart");Ue&&(gr&&l.locale!=="ko"&&(_l||Ue!=="onCompositionStart"?Ue==="onCompositionEnd"&&_l&&(xe=vc()):(fr=Y,yc="value"in fr?fr.value:fr.textContent,_l=!0)),_e=lm(j,Ue),0<_e.length&&(Ue=new pr(Ue,r,null,l,Y),Z.push({event:Ue,listeners:_e}),xe?Ue.data=xe:(xe=gl(l),xe!==null&&(Ue.data=xe)))),(xe=fi?lx(r,l):ux(r,l))&&(Ue=lm(j,"onBeforeInput"),0<Ue.length&&(_e=new pr("onBeforeInput","beforeinput",null,l,Y),Z.push({event:_e,listeners:Ue}),_e.data=xe)),eP(Z,r,j,l,Y)}zI(Z,a)})}function Xc(r,a,l){return{instance:r,listener:a,currentTarget:l}}function lm(r,a){for(var l=a+"Capture",c=[];r!==null;){var m=r,g=m.stateNode;if(m=m.tag,m!==5&&m!==26&&m!==27||g===null||(m=xi(r,l),m!=null&&c.unshift(Xc(r,m,g)),m=xi(r,a),m!=null&&c.push(Xc(r,m,g))),r.tag===3)return c;r=r.return}return[]}function rP(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5&&r.tag!==27);return r||null}function jI(r,a,l,c,m){for(var g=a._reactName,E=[];l!==null&&l!==c;){var S=l,D=S.alternate,j=S.stateNode;if(S=S.tag,D!==null&&D===c)break;S!==5&&S!==26&&S!==27||j===null||(D=j,m?(j=xi(l,g),j!=null&&E.unshift(Xc(l,j,D))):m||(j=xi(l,g),j!=null&&E.push(Xc(l,j,D)))),l=l.return}E.length!==0&&r.push({event:a,listeners:E})}var sP=/\r\n?/g,aP=/\u0000|\uFFFD/g;function HI(r){return(typeof r=="string"?r:""+r).replace(sP,`
`).replace(aP,"")}function GI(r,a){return a=HI(a),HI(r)===a}function ut(r,a,l,c,m,g){switch(l){case"children":typeof c=="string"?a==="body"||a==="textarea"&&c===""||Fn(r,c):(typeof c=="number"||typeof c=="bigint")&&a!=="body"&&Fn(r,""+c);break;case"className":Wn(r,"class",c);break;case"tabIndex":Wn(r,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":Wn(r,l,c);break;case"style":gc(r,c,g);break;case"data":if(a!=="object"){Wn(r,"data",c);break}case"src":case"href":if(c===""&&(a!=="a"||l!=="href")){r.removeAttribute(l);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){r.removeAttribute(l);break}c=hl(""+c),r.setAttribute(l,c);break;case"action":case"formAction":if(typeof c=="function"){r.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof g=="function"&&(l==="formAction"?(a!=="input"&&ut(r,a,"name",m.name,m,null),ut(r,a,"formEncType",m.formEncType,m,null),ut(r,a,"formMethod",m.formMethod,m,null),ut(r,a,"formTarget",m.formTarget,m,null)):(ut(r,a,"encType",m.encType,m,null),ut(r,a,"method",m.method,m,null),ut(r,a,"target",m.target,m,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){r.removeAttribute(l);break}c=hl(""+c),r.setAttribute(l,c);break;case"onClick":c!=null&&(r.onclick=Oi);break;case"onScroll":c!=null&&ke("scroll",r);break;case"onScrollEnd":c!=null&&ke("scrollend",r);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(l=c.__html,l!=null){if(m.children!=null)throw Error(i(60));r.innerHTML=l}}break;case"multiple":r.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":r.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){r.removeAttribute("xlink:href");break}l=hl(""+c),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?r.setAttribute(l,""+c):r.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?r.setAttribute(l,""):r.removeAttribute(l);break;case"capture":case"download":c===!0?r.setAttribute(l,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?r.setAttribute(l,c):r.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?r.setAttribute(l,c):r.removeAttribute(l);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?r.removeAttribute(l):r.setAttribute(l,c);break;case"popover":ke("beforetoggle",r),ke("toggle",r),ll(r,"popover",c);break;case"xlinkActuate":jt(r,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":jt(r,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":jt(r,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":jt(r,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":jt(r,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":jt(r,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":jt(r,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":jt(r,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":jt(r,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":ll(r,"is",c);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=ld.get(l)||l,ll(r,l,c))}}function ny(r,a,l,c,m,g){switch(l){case"style":gc(r,c,g);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(l=c.__html,l!=null){if(m.children!=null)throw Error(i(60));r.innerHTML=l}}break;case"children":typeof c=="string"?Fn(r,c):(typeof c=="number"||typeof c=="bigint")&&Fn(r,""+c);break;case"onScroll":c!=null&&ke("scroll",r);break;case"onScrollEnd":c!=null&&ke("scrollend",r);break;case"onClick":c!=null&&(r.onclick=Oi);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!uc.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(m=l.endsWith("Capture"),a=l.slice(2,m?l.length-7:void 0),g=r[nn]||null,g=g!=null?g[l]:null,typeof g=="function"&&r.removeEventListener(a,g,m),typeof c=="function")){typeof g!="function"&&g!==null&&(l in r?r[l]=null:r.hasAttribute(l)&&r.removeAttribute(l)),r.addEventListener(a,c,m);break e}l in r?r[l]=c:c===!0?r.setAttribute(l,""):ll(r,l,c)}}}function _n(r,a,l){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ke("error",r),ke("load",r);var c=!1,m=!1,g;for(g in l)if(l.hasOwnProperty(g)){var E=l[g];if(E!=null)switch(g){case"src":c=!0;break;case"srcSet":m=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,a));default:ut(r,a,g,E,l,null)}}m&&ut(r,a,"srcSet",l.srcSet,l,null),c&&ut(r,a,"src",l.src,l,null);return;case"input":ke("invalid",r);var S=g=E=m=null,D=null,j=null;for(c in l)if(l.hasOwnProperty(c)){var Y=l[c];if(Y!=null)switch(c){case"name":m=Y;break;case"type":E=Y;break;case"checked":D=Y;break;case"defaultChecked":j=Y;break;case"value":g=Y;break;case"defaultValue":S=Y;break;case"children":case"dangerouslySetInnerHTML":if(Y!=null)throw Error(i(137,a));break;default:ut(r,a,c,Y,l,null)}}sd(r,g,S,D,j,E,m,!1);return;case"select":ke("invalid",r),c=E=g=null;for(m in l)if(l.hasOwnProperty(m)&&(S=l[m],S!=null))switch(m){case"value":g=S;break;case"defaultValue":E=S;break;case"multiple":c=S;default:ut(r,a,m,S,l,null)}a=g,l=E,r.multiple=!!c,a!=null?bs(r,!!c,a,!1):l!=null&&bs(r,!!c,l,!0);return;case"textarea":ke("invalid",r),g=m=c=null;for(E in l)if(l.hasOwnProperty(E)&&(S=l[E],S!=null))switch(E){case"value":c=S;break;case"defaultValue":m=S;break;case"children":g=S;break;case"dangerouslySetInnerHTML":if(S!=null)throw Error(i(91));break;default:ut(r,a,E,S,l,null)}Rs(r,c,m,g);return;case"option":for(D in l)if(l.hasOwnProperty(D)&&(c=l[D],c!=null))switch(D){case"selected":r.selected=c&&typeof c!="function"&&typeof c!="symbol";break;default:ut(r,a,D,c,l,null)}return;case"dialog":ke("beforetoggle",r),ke("toggle",r),ke("cancel",r),ke("close",r);break;case"iframe":case"object":ke("load",r);break;case"video":case"audio":for(c=0;c<Wc.length;c++)ke(Wc[c],r);break;case"image":ke("error",r),ke("load",r);break;case"details":ke("toggle",r);break;case"embed":case"source":case"link":ke("error",r),ke("load",r);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(j in l)if(l.hasOwnProperty(j)&&(c=l[j],c!=null))switch(j){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,a));default:ut(r,a,j,c,l,null)}return;default:if(cl(a)){for(Y in l)l.hasOwnProperty(Y)&&(c=l[Y],c!==void 0&&ny(r,a,Y,c,l,void 0));return}}for(S in l)l.hasOwnProperty(S)&&(c=l[S],c!=null&&ut(r,a,S,c,l,null))}function oP(r,a,l,c){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var m=null,g=null,E=null,S=null,D=null,j=null,Y=null;for(Q in l){var Z=l[Q];if(l.hasOwnProperty(Q)&&Z!=null)switch(Q){case"checked":break;case"value":break;case"defaultValue":D=Z;default:c.hasOwnProperty(Q)||ut(r,a,Q,null,c,Z)}}for(var H in c){var Q=c[H];if(Z=l[H],c.hasOwnProperty(H)&&(Q!=null||Z!=null))switch(H){case"type":g=Q;break;case"name":m=Q;break;case"checked":j=Q;break;case"defaultChecked":Y=Q;break;case"value":E=Q;break;case"defaultValue":S=Q;break;case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(i(137,a));break;default:Q!==Z&&ut(r,a,H,Q,c,Z)}}ul(r,E,S,D,j,Y,g,m);return;case"select":Q=E=S=H=null;for(g in l)if(D=l[g],l.hasOwnProperty(g)&&D!=null)switch(g){case"value":break;case"multiple":Q=D;default:c.hasOwnProperty(g)||ut(r,a,g,null,c,D)}for(m in c)if(g=c[m],D=l[m],c.hasOwnProperty(m)&&(g!=null||D!=null))switch(m){case"value":H=g;break;case"defaultValue":S=g;break;case"multiple":E=g;default:g!==D&&ut(r,a,m,g,c,D)}a=S,l=E,c=Q,H!=null?bs(r,!!l,H,!1):!!c!=!!l&&(a!=null?bs(r,!!l,a,!0):bs(r,!!l,l?[]:"",!1));return;case"textarea":Q=H=null;for(S in l)if(m=l[S],l.hasOwnProperty(S)&&m!=null&&!c.hasOwnProperty(S))switch(S){case"value":break;case"children":break;default:ut(r,a,S,null,c,m)}for(E in c)if(m=c[E],g=l[E],c.hasOwnProperty(E)&&(m!=null||g!=null))switch(E){case"value":H=m;break;case"defaultValue":Q=m;break;case"children":break;case"dangerouslySetInnerHTML":if(m!=null)throw Error(i(91));break;default:m!==g&&ut(r,a,E,m,c,g)}ad(r,H,Q);return;case"option":for(var pe in l)if(H=l[pe],l.hasOwnProperty(pe)&&H!=null&&!c.hasOwnProperty(pe))switch(pe){case"selected":r.selected=!1;break;default:ut(r,a,pe,null,c,H)}for(D in c)if(H=c[D],Q=l[D],c.hasOwnProperty(D)&&H!==Q&&(H!=null||Q!=null))switch(D){case"selected":r.selected=H&&typeof H!="function"&&typeof H!="symbol";break;default:ut(r,a,D,H,c,Q)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Se in l)H=l[Se],l.hasOwnProperty(Se)&&H!=null&&!c.hasOwnProperty(Se)&&ut(r,a,Se,null,c,H);for(j in c)if(H=c[j],Q=l[j],c.hasOwnProperty(j)&&H!==Q&&(H!=null||Q!=null))switch(j){case"children":case"dangerouslySetInnerHTML":if(H!=null)throw Error(i(137,a));break;default:ut(r,a,j,H,c,Q)}return;default:if(cl(a)){for(var ct in l)H=l[ct],l.hasOwnProperty(ct)&&H!==void 0&&!c.hasOwnProperty(ct)&&ny(r,a,ct,void 0,c,H);for(Y in c)H=c[Y],Q=l[Y],!c.hasOwnProperty(Y)||H===Q||H===void 0&&Q===void 0||ny(r,a,Y,H,c,Q);return}}for(var L in l)H=l[L],l.hasOwnProperty(L)&&H!=null&&!c.hasOwnProperty(L)&&ut(r,a,L,null,c,H);for(Z in c)H=c[Z],Q=l[Z],!c.hasOwnProperty(Z)||H===Q||H==null&&Q==null||ut(r,a,Z,H,c,Q)}function KI(r){switch(r){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function lP(){if(typeof performance.getEntriesByType=="function"){for(var r=0,a=0,l=performance.getEntriesByType("resource"),c=0;c<l.length;c++){var m=l[c],g=m.transferSize,E=m.initiatorType,S=m.duration;if(g&&S&&KI(E)){for(E=0,S=m.responseEnd,c+=1;c<l.length;c++){var D=l[c],j=D.startTime;if(j>S)break;var Y=D.transferSize,Z=D.initiatorType;Y&&KI(Z)&&(D=D.responseEnd,E+=Y*(D<S?1:(S-j)/(D-j)))}if(--c,a+=8*(g+E)/(m.duration/1e3),r++,10<r)break}}if(0<r)return a/r/1e6}return navigator.connection&&(r=navigator.connection.downlink,typeof r=="number")?r:5}var iy=null,ry=null;function um(r){return r.nodeType===9?r:r.ownerDocument}function QI(r){switch(r){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function $I(r,a){if(r===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return r===1&&a==="foreignObject"?0:r}function sy(r,a){return r==="textarea"||r==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var ay=null;function uP(){var r=window.event;return r&&r.type==="popstate"?r===ay?!1:(ay=r,!0):(ay=null,!1)}var YI=typeof setTimeout=="function"?setTimeout:void 0,cP=typeof clearTimeout=="function"?clearTimeout:void 0,WI=typeof Promise=="function"?Promise:void 0,hP=typeof queueMicrotask=="function"?queueMicrotask:typeof WI<"u"?function(r){return WI.resolve(null).then(r).catch(fP)}:YI;function fP(r){setTimeout(function(){throw r})}function Ws(r){return r==="head"}function XI(r,a){var l=a,c=0;do{var m=l.nextSibling;if(r.removeChild(l),m&&m.nodeType===8)if(l=m.data,l==="/$"||l==="/&"){if(c===0){r.removeChild(m),Gl(a);return}c--}else if(l==="$"||l==="$?"||l==="$~"||l==="$!"||l==="&")c++;else if(l==="html")Jc(r.ownerDocument.documentElement);else if(l==="head"){l=r.ownerDocument.head,Jc(l);for(var g=l.firstChild;g;){var E=g.nextSibling,S=g.nodeName;g[sr]||S==="SCRIPT"||S==="STYLE"||S==="LINK"&&g.rel.toLowerCase()==="stylesheet"||l.removeChild(g),g=E}}else l==="body"&&Jc(r.ownerDocument.body);l=m}while(l);Gl(a)}function JI(r,a){var l=r;r=0;do{var c=l.nextSibling;if(l.nodeType===1?a?(l._stashedDisplay=l.style.display,l.style.display="none"):(l.style.display=l._stashedDisplay||"",l.getAttribute("style")===""&&l.removeAttribute("style")):l.nodeType===3&&(a?(l._stashedText=l.nodeValue,l.nodeValue=""):l.nodeValue=l._stashedText||""),c&&c.nodeType===8)if(l=c.data,l==="/$"){if(r===0)break;r--}else l!=="$"&&l!=="$?"&&l!=="$~"&&l!=="$!"||r++;l=c}while(l)}function oy(r){var a=r.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var l=a;switch(a=a.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":oy(l),ol(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}r.removeChild(l)}}function dP(r,a,l,c){for(;r.nodeType===1;){var m=l;if(r.nodeName.toLowerCase()!==a.toLowerCase()){if(!c&&(r.nodeName!=="INPUT"||r.type!=="hidden"))break}else if(c){if(!r[sr])switch(a){case"meta":if(!r.hasAttribute("itemprop"))break;return r;case"link":if(g=r.getAttribute("rel"),g==="stylesheet"&&r.hasAttribute("data-precedence"))break;if(g!==m.rel||r.getAttribute("href")!==(m.href==null||m.href===""?null:m.href)||r.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin)||r.getAttribute("title")!==(m.title==null?null:m.title))break;return r;case"style":if(r.hasAttribute("data-precedence"))break;return r;case"script":if(g=r.getAttribute("src"),(g!==(m.src==null?null:m.src)||r.getAttribute("type")!==(m.type==null?null:m.type)||r.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin))&&g&&r.hasAttribute("async")&&!r.hasAttribute("itemprop"))break;return r;default:return r}}else if(a==="input"&&r.type==="hidden"){var g=m.name==null?null:""+m.name;if(m.type==="hidden"&&r.getAttribute("name")===g)return r}else return r;if(r=vi(r.nextSibling),r===null)break}return null}function mP(r,a,l){if(a==="")return null;for(;r.nodeType!==3;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!l||(r=vi(r.nextSibling),r===null))return null;return r}function ZI(r,a){for(;r.nodeType!==8;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!a||(r=vi(r.nextSibling),r===null))return null;return r}function ly(r){return r.data==="$?"||r.data==="$~"}function uy(r){return r.data==="$!"||r.data==="$?"&&r.ownerDocument.readyState!=="loading"}function pP(r,a){var l=r.ownerDocument;if(r.data==="$~")r._reactRetry=a;else if(r.data!=="$?"||l.readyState!=="loading")a();else{var c=function(){a(),l.removeEventListener("DOMContentLoaded",c)};l.addEventListener("DOMContentLoaded",c),r._reactRetry=c}}function vi(r){for(;r!=null;r=r.nextSibling){var a=r.nodeType;if(a===1||a===3)break;if(a===8){if(a=r.data,a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"||a==="F!"||a==="F")break;if(a==="/$"||a==="/&")return null}}return r}var cy=null;function eA(r){r=r.nextSibling;for(var a=0;r;){if(r.nodeType===8){var l=r.data;if(l==="/$"||l==="/&"){if(a===0)return vi(r.nextSibling);a--}else l!=="$"&&l!=="$!"&&l!=="$?"&&l!=="$~"&&l!=="&"||a++}r=r.nextSibling}return null}function tA(r){r=r.previousSibling;for(var a=0;r;){if(r.nodeType===8){var l=r.data;if(l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"){if(a===0)return r;a--}else l!=="/$"&&l!=="/&"||a++}r=r.previousSibling}return null}function nA(r,a,l){switch(a=um(l),r){case"html":if(r=a.documentElement,!r)throw Error(i(452));return r;case"head":if(r=a.head,!r)throw Error(i(453));return r;case"body":if(r=a.body,!r)throw Error(i(454));return r;default:throw Error(i(451))}}function Jc(r){for(var a=r.attributes;a.length;)r.removeAttributeNode(a[0]);ol(r)}var Ei=new Map,iA=new Set;function cm(r){return typeof r.getRootNode=="function"?r.getRootNode():r.nodeType===9?r:r.ownerDocument}var ns=le.d;le.d={f:gP,r:_P,D:yP,C:vP,L:EP,m:TP,X:SP,S:wP,M:IP};function gP(){var r=ns.f(),a=tm();return r||a}function _P(r){var a=ui(r);a!==null&&a.tag===5&&a.type==="form"?ES(a):ns.r(r)}var ql=typeof document>"u"?null:document;function rA(r,a,l){var c=ql;if(c&&typeof a=="string"&&a){var m=Un(a);m='link[rel="'+r+'"][href="'+m+'"]',typeof l=="string"&&(m+='[crossorigin="'+l+'"]'),iA.has(m)||(iA.add(m),r={rel:r,crossOrigin:l,href:a},c.querySelector(m)===null&&(a=c.createElement("link"),_n(a,"link",r),qt(a),c.head.appendChild(a)))}}function yP(r){ns.D(r),rA("dns-prefetch",r,null)}function vP(r,a){ns.C(r,a),rA("preconnect",r,a)}function EP(r,a,l){ns.L(r,a,l);var c=ql;if(c&&r&&a){var m='link[rel="preload"][as="'+Un(a)+'"]';a==="image"&&l&&l.imageSrcSet?(m+='[imagesrcset="'+Un(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(m+='[imagesizes="'+Un(l.imageSizes)+'"]')):m+='[href="'+Un(r)+'"]';var g=m;switch(a){case"style":g=jl(r);break;case"script":g=Hl(r)}Ei.has(g)||(r=y({rel:"preload",href:a==="image"&&l&&l.imageSrcSet?void 0:r,as:a},l),Ei.set(g,r),c.querySelector(m)!==null||a==="style"&&c.querySelector(Zc(g))||a==="script"&&c.querySelector(eh(g))||(a=c.createElement("link"),_n(a,"link",r),qt(a),c.head.appendChild(a)))}}function TP(r,a){ns.m(r,a);var l=ql;if(l&&r){var c=a&&typeof a.as=="string"?a.as:"script",m='link[rel="modulepreload"][as="'+Un(c)+'"][href="'+Un(r)+'"]',g=m;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":g=Hl(r)}if(!Ei.has(g)&&(r=y({rel:"modulepreload",href:r},a),Ei.set(g,r),l.querySelector(m)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(eh(g)))return}c=l.createElement("link"),_n(c,"link",r),qt(c),l.head.appendChild(c)}}}function wP(r,a,l){ns.S(r,a,l);var c=ql;if(c&&r){var m=or(c).hoistableStyles,g=jl(r);a=a||"default";var E=m.get(g);if(!E){var S={loading:0,preload:null};if(E=c.querySelector(Zc(g)))S.loading=5;else{r=y({rel:"stylesheet",href:r,"data-precedence":a},l),(l=Ei.get(g))&&hy(r,l);var D=E=c.createElement("link");qt(D),_n(D,"link",r),D._p=new Promise(function(j,Y){D.onload=j,D.onerror=Y}),D.addEventListener("load",function(){S.loading|=1}),D.addEventListener("error",function(){S.loading|=2}),S.loading|=4,hm(E,a,c)}E={type:"stylesheet",instance:E,count:1,state:S},m.set(g,E)}}}function SP(r,a){ns.X(r,a);var l=ql;if(l&&r){var c=or(l).hoistableScripts,m=Hl(r),g=c.get(m);g||(g=l.querySelector(eh(m)),g||(r=y({src:r,async:!0},a),(a=Ei.get(m))&&fy(r,a),g=l.createElement("script"),qt(g),_n(g,"link",r),l.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},c.set(m,g))}}function IP(r,a){ns.M(r,a);var l=ql;if(l&&r){var c=or(l).hoistableScripts,m=Hl(r),g=c.get(m);g||(g=l.querySelector(eh(m)),g||(r=y({src:r,async:!0,type:"module"},a),(a=Ei.get(m))&&fy(r,a),g=l.createElement("script"),qt(g),_n(g,"link",r),l.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},c.set(m,g))}}function sA(r,a,l,c){var m=(m=Oe.current)?cm(m):null;if(!m)throw Error(i(446));switch(r){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(a=jl(l.href),l=or(m).hoistableStyles,c=l.get(a),c||(c={type:"style",instance:null,count:0,state:null},l.set(a,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){r=jl(l.href);var g=or(m).hoistableStyles,E=g.get(r);if(E||(m=m.ownerDocument||m,E={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},g.set(r,E),(g=m.querySelector(Zc(r)))&&!g._p&&(E.instance=g,E.state.loading=5),Ei.has(r)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},Ei.set(r,l),g||AP(m,r,l,E.state))),a&&c===null)throw Error(i(528,""));return E}if(a&&c!==null)throw Error(i(529,""));return null;case"script":return a=l.async,l=l.src,typeof l=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=Hl(l),l=or(m).hoistableScripts,c=l.get(a),c||(c={type:"script",instance:null,count:0,state:null},l.set(a,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,r))}}function jl(r){return'href="'+Un(r)+'"'}function Zc(r){return'link[rel="stylesheet"]['+r+"]"}function aA(r){return y({},r,{"data-precedence":r.precedence,precedence:null})}function AP(r,a,l,c){r.querySelector('link[rel="preload"][as="style"]['+a+"]")?c.loading=1:(a=r.createElement("link"),c.preload=a,a.addEventListener("load",function(){return c.loading|=1}),a.addEventListener("error",function(){return c.loading|=2}),_n(a,"link",l),qt(a),r.head.appendChild(a))}function Hl(r){return'[src="'+Un(r)+'"]'}function eh(r){return"script[async]"+r}function oA(r,a,l){if(a.count++,a.instance===null)switch(a.type){case"style":var c=r.querySelector('style[data-href~="'+Un(l.href)+'"]');if(c)return a.instance=c,qt(c),c;var m=y({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return c=(r.ownerDocument||r).createElement("style"),qt(c),_n(c,"style",m),hm(c,l.precedence,r),a.instance=c;case"stylesheet":m=jl(l.href);var g=r.querySelector(Zc(m));if(g)return a.state.loading|=4,a.instance=g,qt(g),g;c=aA(l),(m=Ei.get(m))&&hy(c,m),g=(r.ownerDocument||r).createElement("link"),qt(g);var E=g;return E._p=new Promise(function(S,D){E.onload=S,E.onerror=D}),_n(g,"link",c),a.state.loading|=4,hm(g,l.precedence,r),a.instance=g;case"script":return g=Hl(l.src),(m=r.querySelector(eh(g)))?(a.instance=m,qt(m),m):(c=l,(m=Ei.get(g))&&(c=y({},l),fy(c,m)),r=r.ownerDocument||r,m=r.createElement("script"),qt(m),_n(m,"link",c),r.head.appendChild(m),a.instance=m);case"void":return null;default:throw Error(i(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(c=a.instance,a.state.loading|=4,hm(c,l.precedence,r));return a.instance}function hm(r,a,l){for(var c=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),m=c.length?c[c.length-1]:null,g=m,E=0;E<c.length;E++){var S=c[E];if(S.dataset.precedence===a)g=S;else if(g!==m)break}g?g.parentNode.insertBefore(r,g.nextSibling):(a=l.nodeType===9?l.head:l,a.insertBefore(r,a.firstChild))}function hy(r,a){r.crossOrigin==null&&(r.crossOrigin=a.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=a.referrerPolicy),r.title==null&&(r.title=a.title)}function fy(r,a){r.crossOrigin==null&&(r.crossOrigin=a.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=a.referrerPolicy),r.integrity==null&&(r.integrity=a.integrity)}var fm=null;function lA(r,a,l){if(fm===null){var c=new Map,m=fm=new Map;m.set(l,c)}else m=fm,c=m.get(l),c||(c=new Map,m.set(l,c));if(c.has(r))return c;for(c.set(r,null),l=l.getElementsByTagName(r),m=0;m<l.length;m++){var g=l[m];if(!(g[sr]||g[zt]||r==="link"&&g.getAttribute("rel")==="stylesheet")&&g.namespaceURI!=="http://www.w3.org/2000/svg"){var E=g.getAttribute(a)||"";E=r+E;var S=c.get(E);S?S.push(g):c.set(E,[g])}}return c}function uA(r,a,l){r=r.ownerDocument||r,r.head.insertBefore(l,a==="title"?r.querySelector("head > title"):null)}function bP(r,a,l){if(l===1||a.itemProp!=null)return!1;switch(r){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;switch(a.rel){case"stylesheet":return r=a.disabled,typeof a.precedence=="string"&&r==null;default:return!0}case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function cA(r){return!(r.type==="stylesheet"&&(r.state.loading&3)===0)}function RP(r,a,l,c){if(l.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var m=jl(c.href),g=a.querySelector(Zc(m));if(g){a=g._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(r.count++,r=dm.bind(r),a.then(r,r)),l.state.loading|=4,l.instance=g,qt(g);return}g=a.ownerDocument||a,c=aA(c),(m=Ei.get(m))&&hy(c,m),g=g.createElement("link"),qt(g);var E=g;E._p=new Promise(function(S,D){E.onload=S,E.onerror=D}),_n(g,"link",c),l.instance=g}r.stylesheets===null&&(r.stylesheets=new Map),r.stylesheets.set(l,a),(a=l.state.preload)&&(l.state.loading&3)===0&&(r.count++,l=dm.bind(r),a.addEventListener("load",l),a.addEventListener("error",l))}}var dy=0;function CP(r,a){return r.stylesheets&&r.count===0&&pm(r,r.stylesheets),0<r.count||0<r.imgCount?function(l){var c=setTimeout(function(){if(r.stylesheets&&pm(r,r.stylesheets),r.unsuspend){var g=r.unsuspend;r.unsuspend=null,g()}},6e4+a);0<r.imgBytes&&dy===0&&(dy=62500*lP());var m=setTimeout(function(){if(r.waitingForImages=!1,r.count===0&&(r.stylesheets&&pm(r,r.stylesheets),r.unsuspend)){var g=r.unsuspend;r.unsuspend=null,g()}},(r.imgBytes>dy?50:800)+a);return r.unsuspend=l,function(){r.unsuspend=null,clearTimeout(c),clearTimeout(m)}}:null}function dm(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)pm(this,this.stylesheets);else if(this.unsuspend){var r=this.unsuspend;this.unsuspend=null,r()}}}var mm=null;function pm(r,a){r.stylesheets=null,r.unsuspend!==null&&(r.count++,mm=new Map,a.forEach(NP,r),mm=null,dm.call(r))}function NP(r,a){if(!(a.state.loading&4)){var l=mm.get(r);if(l)var c=l.get(null);else{l=new Map,mm.set(r,l);for(var m=r.querySelectorAll("link[data-precedence],style[data-precedence]"),g=0;g<m.length;g++){var E=m[g];(E.nodeName==="LINK"||E.getAttribute("media")!=="not all")&&(l.set(E.dataset.precedence,E),c=E)}c&&l.set(null,c)}m=a.instance,E=m.getAttribute("data-precedence"),g=l.get(E)||c,g===c&&l.set(null,m),l.set(E,m),this.count++,c=dm.bind(this),m.addEventListener("load",c),m.addEventListener("error",c),g?g.parentNode.insertBefore(m,g.nextSibling):(r=r.nodeType===9?r.head:r,r.insertBefore(m,r.firstChild)),a.state.loading|=4}}var th={$$typeof:te,Provider:null,Consumer:null,_currentValue:we,_currentValue2:we,_threadCount:0};function DP(r,a,l,c,m,g,E,S,D){this.tag=1,this.containerInfo=r,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ir(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ir(0),this.hiddenUpdates=ir(null),this.identifierPrefix=c,this.onUncaughtError=m,this.onCaughtError=g,this.onRecoverableError=E,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=D,this.incompleteTransitions=new Map}function hA(r,a,l,c,m,g,E,S,D,j,Y,Z){return r=new DP(r,a,l,E,D,j,Y,Z,S),a=1,g===!0&&(a|=24),g=Jn(3,null,null,a),r.current=g,g.stateNode=r,a=Kg(),a.refCount++,r.pooledCache=a,a.refCount++,g.memoizedState={element:c,isDehydrated:l,cache:a},Wg(g),r}function fA(r){return r?(r=Tl,r):Tl}function dA(r,a,l,c,m,g){m=fA(m),c.context===null?c.context=m:c.pendingContext=m,c=Fs(a),c.payload={element:l},g=g===void 0?null:g,g!==null&&(c.callback=g),l=Bs(r,c,a),l!==null&&(Hn(l,r,a),Pc(l,r,a))}function mA(r,a){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var l=r.retryLane;r.retryLane=l!==0&&l<a?l:a}}function my(r,a){mA(r,a),(r=r.alternate)&&mA(r,a)}function pA(r){if(r.tag===13||r.tag===31){var a=ro(r,67108864);a!==null&&Hn(a,r,67108864),my(r,67108864)}}function gA(r){if(r.tag===13||r.tag===31){var a=ii();a=Ka(a);var l=ro(r,a);l!==null&&Hn(l,r,a),my(r,a)}}var gm=!0;function OP(r,a,l,c){var m=W.T;W.T=null;var g=le.p;try{le.p=2,py(r,a,l,c)}finally{le.p=g,W.T=m}}function xP(r,a,l,c){var m=W.T;W.T=null;var g=le.p;try{le.p=8,py(r,a,l,c)}finally{le.p=g,W.T=m}}function py(r,a,l,c){if(gm){var m=gy(c);if(m===null)ty(r,a,c,_m,l),yA(r,c);else if(MP(m,r,a,l,c))c.stopPropagation();else if(yA(r,c),a&4&&-1<PP.indexOf(r)){for(;m!==null;){var g=ui(m);if(g!==null)switch(g.tag){case 3:if(g=g.stateNode,g.current.memoizedState.isDehydrated){var E=tr(g.pendingLanes);if(E!==0){var S=g;for(S.pendingLanes|=2,S.entangledLanes|=2;E;){var D=1<<31-xt(E);S.entanglements[1]|=D,E&=~D}Er(g),(Je&6)===0&&(Zd=On()+500,Yc(0))}}break;case 31:case 13:S=ro(g,2),S!==null&&Hn(S,g,2),tm(),my(g,2)}if(g=gy(c),g===null&&ty(r,a,c,_m,l),g===m)break;m=g}m!==null&&c.stopPropagation()}else ty(r,a,c,null,l)}}function gy(r){return r=ci(r),_y(r)}var _m=null;function _y(r){if(_m=null,r=ar(r),r!==null){var a=o(r);if(a===null)r=null;else{var l=a.tag;if(l===13){if(r=u(a),r!==null)return r;r=null}else if(l===31){if(r=h(a),r!==null)return r;r=null}else if(l===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;r=null}else a!==r&&(r=null)}}return _m=r,null}function _A(r){switch(r){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(qa()){case rc:return 2;case sc:return 8;case Is:case Sg:return 32;case Yf:return 268435456;default:return 32}default:return 32}}var yy=!1,Xs=null,Js=null,Zs=null,nh=new Map,ih=new Map,ea=[],PP="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function yA(r,a){switch(r){case"focusin":case"focusout":Xs=null;break;case"dragenter":case"dragleave":Js=null;break;case"mouseover":case"mouseout":Zs=null;break;case"pointerover":case"pointerout":nh.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":ih.delete(a.pointerId)}}function rh(r,a,l,c,m,g){return r===null||r.nativeEvent!==g?(r={blockedOn:a,domEventName:l,eventSystemFlags:c,nativeEvent:g,targetContainers:[m]},a!==null&&(a=ui(a),a!==null&&pA(a)),r):(r.eventSystemFlags|=c,a=r.targetContainers,m!==null&&a.indexOf(m)===-1&&a.push(m),r)}function MP(r,a,l,c,m){switch(a){case"focusin":return Xs=rh(Xs,r,a,l,c,m),!0;case"dragenter":return Js=rh(Js,r,a,l,c,m),!0;case"mouseover":return Zs=rh(Zs,r,a,l,c,m),!0;case"pointerover":var g=m.pointerId;return nh.set(g,rh(nh.get(g)||null,r,a,l,c,m)),!0;case"gotpointercapture":return g=m.pointerId,ih.set(g,rh(ih.get(g)||null,r,a,l,c,m)),!0}return!1}function vA(r){var a=ar(r.target);if(a!==null){var l=o(a);if(l!==null){if(a=l.tag,a===13){if(a=u(l),a!==null){r.blockedOn=a,Ni(r.priority,function(){gA(l)});return}}else if(a===31){if(a=h(l),a!==null){r.blockedOn=a,Ni(r.priority,function(){gA(l)});return}}else if(a===3&&l.stateNode.current.memoizedState.isDehydrated){r.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}r.blockedOn=null}function ym(r){if(r.blockedOn!==null)return!1;for(var a=r.targetContainers;0<a.length;){var l=gy(r.nativeEvent);if(l===null){l=r.nativeEvent;var c=new l.constructor(l.type,l);_c=c,l.target.dispatchEvent(c),_c=null}else return a=ui(l),a!==null&&pA(a),r.blockedOn=l,!1;a.shift()}return!0}function EA(r,a,l){ym(r)&&l.delete(a)}function kP(){yy=!1,Xs!==null&&ym(Xs)&&(Xs=null),Js!==null&&ym(Js)&&(Js=null),Zs!==null&&ym(Zs)&&(Zs=null),nh.forEach(EA),ih.forEach(EA)}function vm(r,a){r.blockedOn===a&&(r.blockedOn=null,yy||(yy=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,kP)))}var Em=null;function TA(r){Em!==r&&(Em=r,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Em===r&&(Em=null);for(var a=0;a<r.length;a+=3){var l=r[a],c=r[a+1],m=r[a+2];if(typeof c!="function"){if(_y(c||l)===null)continue;break}var g=ui(l);g!==null&&(r.splice(a,3),a-=3,g_(g,{pending:!0,data:m,method:l.method,action:c},c,m))}}))}function Gl(r){function a(D){return vm(D,r)}Xs!==null&&vm(Xs,r),Js!==null&&vm(Js,r),Zs!==null&&vm(Zs,r),nh.forEach(a),ih.forEach(a);for(var l=0;l<ea.length;l++){var c=ea[l];c.blockedOn===r&&(c.blockedOn=null)}for(;0<ea.length&&(l=ea[0],l.blockedOn===null);)vA(l),l.blockedOn===null&&ea.shift();if(l=(r.ownerDocument||r).$$reactFormReplay,l!=null)for(c=0;c<l.length;c+=3){var m=l[c],g=l[c+1],E=m[nn]||null;if(typeof g=="function")E||TA(l);else if(E){var S=null;if(g&&g.hasAttribute("formAction")){if(m=g,E=g[nn]||null)S=E.formAction;else if(_y(m)!==null)continue}else S=E.action;typeof S=="function"?l[c+1]=S:(l.splice(c,3),c-=3),TA(l)}}}function wA(){function r(g){g.canIntercept&&g.info==="react-transition"&&g.intercept({handler:function(){return new Promise(function(E){return m=E})},focusReset:"manual",scroll:"manual"})}function a(){m!==null&&(m(),m=null),c||setTimeout(l,20)}function l(){if(!c&&!navigation.transition){var g=navigation.currentEntry;g&&g.url!=null&&navigation.navigate(g.url,{state:g.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var c=!1,m=null;return navigation.addEventListener("navigate",r),navigation.addEventListener("navigatesuccess",a),navigation.addEventListener("navigateerror",a),setTimeout(l,100),function(){c=!0,navigation.removeEventListener("navigate",r),navigation.removeEventListener("navigatesuccess",a),navigation.removeEventListener("navigateerror",a),m!==null&&(m(),m=null)}}}function vy(r){this._internalRoot=r}Tm.prototype.render=vy.prototype.render=function(r){var a=this._internalRoot;if(a===null)throw Error(i(409));var l=a.current,c=ii();dA(l,c,r,a,null,null)},Tm.prototype.unmount=vy.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var a=r.containerInfo;dA(r.current,2,null,r,null,null),tm(),a[rr]=null}};function Tm(r){this._internalRoot=r}Tm.prototype.unstable_scheduleHydration=function(r){if(r){var a=td();r={blockedOn:null,target:r,priority:a};for(var l=0;l<ea.length&&a!==0&&a<ea[l].priority;l++);ea.splice(l,0,r),l===0&&vA(r)}};var SA=e.version;if(SA!=="19.2.1")throw Error(i(527,SA,"19.2.1"));le.findDOMNode=function(r){var a=r._reactInternals;if(a===void 0)throw typeof r.render=="function"?Error(i(188)):(r=Object.keys(r).join(","),Error(i(268,r)));return r=p(a),r=r!==null?_(r):null,r=r===null?null:r.stateNode,r};var VP={bundleType:0,version:"19.2.1",rendererPackageName:"react-dom",currentDispatcherRef:W,reconcilerVersion:"19.2.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var wm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!wm.isDisabled&&wm.supportsFiber)try{Ri=wm.inject(VP),fn=wm}catch{}}return ah.createRoot=function(r,a){if(!s(r))throw Error(i(299));var l=!1,c="",m=DS,g=OS,E=xS;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(c=a.identifierPrefix),a.onUncaughtError!==void 0&&(m=a.onUncaughtError),a.onCaughtError!==void 0&&(g=a.onCaughtError),a.onRecoverableError!==void 0&&(E=a.onRecoverableError)),a=hA(r,1,!1,null,null,l,c,null,m,g,E,wA),r[rr]=a.current,ey(r),new vy(a)},ah.hydrateRoot=function(r,a,l){if(!s(r))throw Error(i(299));var c=!1,m="",g=DS,E=OS,S=xS,D=null;return l!=null&&(l.unstable_strictMode===!0&&(c=!0),l.identifierPrefix!==void 0&&(m=l.identifierPrefix),l.onUncaughtError!==void 0&&(g=l.onUncaughtError),l.onCaughtError!==void 0&&(E=l.onCaughtError),l.onRecoverableError!==void 0&&(S=l.onRecoverableError),l.formState!==void 0&&(D=l.formState)),a=hA(r,1,!0,a,l??null,c,m,D,g,E,S,wA),a.context=fA(null),l=a.current,c=ii(),c=Ka(c),m=Fs(c),m.callback=null,Bs(l,m,c),l=c,a.current.lanes=l,Ha(a,l),Er(a),r[rr]=a.current,ey(r),new Tm(a)},ah.version="19.2.1",ah}var PA;function KP(){if(PA)return wy.exports;PA=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),wy.exports=GP(),wy.exports}var QP=KP();var MA="popstate";function $P(n={}){function e(i,s){let{pathname:o,search:u,hash:h}=i.location;return Jy("",{pathname:o,search:u,hash:h},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function t(i,s){return typeof s=="string"?s:zh(s)}return WP(e,t,null,n)}function Rt(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function $i(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function YP(){return Math.random().toString(36).substring(2,10)}function kA(n,e){return{usr:n.state,key:n.key,idx:e}}function Jy(n,e,t=null,i){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?Lu(e):e,state:t,key:e&&e.key||i||YP()}}function zh({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function Lu(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let i=n.indexOf("?");i>=0&&(e.search=n.substring(i),n=n.substring(0,i)),n&&(e.pathname=n)}return e}function WP(n,e,t,i={}){let{window:s=document.defaultView,v5Compat:o=!1}=i,u=s.history,h="POP",d=null,p=_();p==null&&(p=0,u.replaceState({...u.state,idx:p},""));function _(){return(u.state||{idx:null}).idx}function y(){h="POP";let V=_(),X=V==null?null:V-p;p=V,d&&d({action:h,location:F.location,delta:X})}function w(V,X){h="PUSH";let ne=Jy(F.location,V,X);p=_()+1;let te=kA(ne,p),fe=F.createHref(ne);try{u.pushState(te,"",fe)}catch(ye){if(ye instanceof DOMException&&ye.name==="DataCloneError")throw ye;s.location.assign(fe)}o&&d&&d({action:h,location:F.location,delta:1})}function A(V,X){h="REPLACE";let ne=Jy(F.location,V,X);p=_();let te=kA(ne,p),fe=F.createHref(ne);u.replaceState(te,"",fe),o&&d&&d({action:h,location:F.location,delta:0})}function O(V){return XP(V)}let F={get action(){return h},get location(){return n(s,u)},listen(V){if(d)throw new Error("A history only accepts one active listener");return s.addEventListener(MA,y),d=V,()=>{s.removeEventListener(MA,y),d=null}},createHref(V){return e(s,V)},createURL:O,encodeLocation(V){let X=O(V);return{pathname:X.pathname,search:X.search,hash:X.hash}},push:w,replace:A,go(V){return u.go(V)}};return F}function XP(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),Rt(t,"No window.location.(origin|href) available to create URL");let i=typeof n=="string"?n:zh(n);return i=i.replace(/ $/,"%20"),!e&&i.startsWith("//")&&(i=t+i),new URL(i,t)}function OR(n,e,t="/"){return JP(n,e,t,!1)}function JP(n,e,t,i){let s=typeof e=="string"?Lu(e):e,o=fs(s.pathname||"/",t);if(o==null)return null;let u=xR(n);ZP(u);let h=null;for(let d=0;h==null&&d<u.length;++d){let p=cM(o);h=lM(u[d],p,i)}return h}function xR(n,e=[],t=[],i="",s=!1){let o=(u,h,d=s,p)=>{let _={relativePath:p===void 0?u.path||"":p,caseSensitive:u.caseSensitive===!0,childrenIndex:h,route:u};if(_.relativePath.startsWith("/")){if(!_.relativePath.startsWith(i)&&d)return;Rt(_.relativePath.startsWith(i),`Absolute route path "${_.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),_.relativePath=_.relativePath.slice(i.length)}let y=us([i,_.relativePath]),w=t.concat(_);u.children&&u.children.length>0&&(Rt(u.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${y}".`),xR(u.children,e,w,y,d)),!(u.path==null&&!u.index)&&e.push({path:y,score:aM(y,u.index),routesMeta:w})};return n.forEach((u,h)=>{if(u.path===""||!u.path?.includes("?"))o(u,h);else for(let d of PR(u.path))o(u,h,!0,d)}),e}function PR(n){let e=n.split("/");if(e.length===0)return[];let[t,...i]=e,s=t.endsWith("?"),o=t.replace(/\?$/,"");if(i.length===0)return s?[o,""]:[o];let u=PR(i.join("/")),h=[];return h.push(...u.map(d=>d===""?o:[o,d].join("/"))),s&&h.push(...u),h.map(d=>n.startsWith("/")&&d===""?"/":d)}function ZP(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:oM(e.routesMeta.map(i=>i.childrenIndex),t.routesMeta.map(i=>i.childrenIndex)))}var eM=/^:[\w-]+$/,tM=3,nM=2,iM=1,rM=10,sM=-2,VA=n=>n==="*";function aM(n,e){let t=n.split("/"),i=t.length;return t.some(VA)&&(i+=sM),e&&(i+=nM),t.filter(s=>!VA(s)).reduce((s,o)=>s+(eM.test(o)?tM:o===""?iM:rM),i)}function oM(n,e){return n.length===e.length&&n.slice(0,-1).every((i,s)=>i===e[s])?n[n.length-1]-e[e.length-1]:0}function lM(n,e,t=!1){let{routesMeta:i}=n,s={},o="/",u=[];for(let h=0;h<i.length;++h){let d=i[h],p=h===i.length-1,_=o==="/"?e:e.slice(o.length)||"/",y=Zm({path:d.relativePath,caseSensitive:d.caseSensitive,end:p},_),w=d.route;if(!y&&p&&t&&!i[i.length-1].route.index&&(y=Zm({path:d.relativePath,caseSensitive:d.caseSensitive,end:!1},_)),!y)return null;Object.assign(s,y.params),u.push({params:s,pathname:us([o,y.pathname]),pathnameBase:pM(us([o,y.pathnameBase])),route:w}),y.pathnameBase!=="/"&&(o=us([o,y.pathnameBase]))}return u}function Zm(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,i]=uM(n.path,n.caseSensitive,n.end),s=e.match(t);if(!s)return null;let o=s[0],u=o.replace(/(.)\/+$/,"$1"),h=s.slice(1);return{params:i.reduce((p,{paramName:_,isOptional:y},w)=>{if(_==="*"){let O=h[w]||"";u=o.slice(0,o.length-O.length).replace(/(.)\/+$/,"$1")}const A=h[w];return y&&!A?p[_]=void 0:p[_]=(A||"").replace(/%2F/g,"/"),p},{}),pathname:o,pathnameBase:u,pattern:n}}function uM(n,e=!1,t=!0){$i(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let i=[],s="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(u,h,d)=>(i.push({paramName:h,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return n.endsWith("*")?(i.push({paramName:"*"}),s+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?s+="\\/*$":n!==""&&n!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),i]}function cM(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return $i(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function fs(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,i=n.charAt(t);return i&&i!=="/"?null:n.slice(t)||"/"}var hM=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,fM=n=>hM.test(n);function dM(n,e="/"){let{pathname:t,search:i="",hash:s=""}=typeof n=="string"?Lu(n):n,o;if(t)if(fM(t))o=t;else{if(t.includes("//")){let u=t;t=t.replace(/\/\/+/g,"/"),$i(!1,`Pathnames cannot have embedded double slashes - normalizing ${u} -> ${t}`)}t.startsWith("/")?o=LA(t.substring(1),"/"):o=LA(t,e)}else o=e;return{pathname:o,search:gM(i),hash:_M(s)}}function LA(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(s=>{s===".."?t.length>1&&t.pop():s!=="."&&t.push(s)}),t.length>1?t.join("/"):"/"}function by(n,e,t,i){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function mM(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function MR(n){let e=mM(n);return e.map((t,i)=>i===e.length-1?t.pathname:t.pathnameBase)}function kR(n,e,t,i=!1){let s;typeof n=="string"?s=Lu(n):(s={...n},Rt(!s.pathname||!s.pathname.includes("?"),by("?","pathname","search",s)),Rt(!s.pathname||!s.pathname.includes("#"),by("#","pathname","hash",s)),Rt(!s.search||!s.search.includes("#"),by("#","search","hash",s)));let o=n===""||s.pathname==="",u=o?"/":s.pathname,h;if(u==null)h=t;else{let y=e.length-1;if(!i&&u.startsWith("..")){let w=u.split("/");for(;w[0]==="..";)w.shift(),y-=1;s.pathname=w.join("/")}h=y>=0?e[y]:"/"}let d=dM(s,h),p=u&&u!=="/"&&u.endsWith("/"),_=(o||u===".")&&t.endsWith("/");return!d.pathname.endsWith("/")&&(p||_)&&(d.pathname+="/"),d}var us=n=>n.join("/").replace(/\/\/+/g,"/"),pM=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),gM=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,_M=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function yM(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}function vM(n){return n.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var VR=["POST","PUT","PATCH","DELETE"];new Set(VR);var EM=["GET",...VR];new Set(EM);var Uu=$.createContext(null);Uu.displayName="DataRouter";var Vp=$.createContext(null);Vp.displayName="DataRouterState";$.createContext(!1);var LR=$.createContext({isTransitioning:!1});LR.displayName="ViewTransition";var TM=$.createContext(new Map);TM.displayName="Fetchers";var wM=$.createContext(null);wM.displayName="Await";var Xi=$.createContext(null);Xi.displayName="Navigation";var gf=$.createContext(null);gf.displayName="Location";var Mr=$.createContext({outlet:null,matches:[],isDataRoute:!1});Mr.displayName="Route";var eE=$.createContext(null);eE.displayName="RouteError";function SM(n,{relative:e}={}){Rt(_f(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:i}=$.useContext(Xi),{hash:s,pathname:o,search:u}=yf(n,{relative:e}),h=o;return t!=="/"&&(h=o==="/"?t:us([t,o])),i.createHref({pathname:h,search:u,hash:s})}function _f(){return $.useContext(gf)!=null}function $o(){return Rt(_f(),"useLocation() may be used only in the context of a <Router> component."),$.useContext(gf).location}var UR="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function FR(n){$.useContext(Xi).static||$.useLayoutEffect(n)}function Fu(){let{isDataRoute:n}=$.useContext(Mr);return n?VM():IM()}function IM(){Rt(_f(),"useNavigate() may be used only in the context of a <Router> component.");let n=$.useContext(Uu),{basename:e,navigator:t}=$.useContext(Xi),{matches:i}=$.useContext(Mr),{pathname:s}=$o(),o=JSON.stringify(MR(i)),u=$.useRef(!1);return FR(()=>{u.current=!0}),$.useCallback((d,p={})=>{if($i(u.current,UR),!u.current)return;if(typeof d=="number"){t.go(d);return}let _=kR(d,JSON.parse(o),s,p.relative==="path");n==null&&e!=="/"&&(_.pathname=_.pathname==="/"?e:us([e,_.pathname])),(p.replace?t.replace:t.push)(_,p.state,p)},[e,t,o,s,n])}$.createContext(null);function BR(){let{matches:n}=$.useContext(Mr),e=n[n.length-1];return e?e.params:{}}function yf(n,{relative:e}={}){let{matches:t}=$.useContext(Mr),{pathname:i}=$o(),s=JSON.stringify(MR(t));return $.useMemo(()=>kR(n,JSON.parse(s),i,e==="path"),[n,s,i,e])}function AM(n,e){return zR(n,e)}function zR(n,e,t,i,s){Rt(_f(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=$.useContext(Xi),{matches:u}=$.useContext(Mr),h=u[u.length-1],d=h?h.params:{},p=h?h.pathname:"/",_=h?h.pathnameBase:"/",y=h&&h.route;{let ne=y&&y.path||"";qR(p,!y||ne.endsWith("*")||ne.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${p}" (under <Route path="${ne}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${ne}"> to <Route path="${ne==="/"?"*":`${ne}/*`}">.`)}let w=$o(),A;if(e){let ne=typeof e=="string"?Lu(e):e;Rt(_==="/"||ne.pathname?.startsWith(_),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${_}" but pathname "${ne.pathname}" was given in the \`location\` prop.`),A=ne}else A=w;let O=A.pathname||"/",F=O;if(_!=="/"){let ne=_.replace(/^\//,"").split("/");F="/"+O.replace(/^\//,"").split("/").slice(ne.length).join("/")}let V=OR(n,{pathname:F});$i(y||V!=null,`No routes matched location "${A.pathname}${A.search}${A.hash}" `),$i(V==null||V[V.length-1].route.element!==void 0||V[V.length-1].route.Component!==void 0||V[V.length-1].route.lazy!==void 0,`Matched leaf route at location "${A.pathname}${A.search}${A.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let X=DM(V&&V.map(ne=>Object.assign({},ne,{params:Object.assign({},d,ne.params),pathname:us([_,o.encodeLocation?o.encodeLocation(ne.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:ne.pathname]),pathnameBase:ne.pathnameBase==="/"?_:us([_,o.encodeLocation?o.encodeLocation(ne.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:ne.pathnameBase])})),u,t,i,s);return e&&X?$.createElement(gf.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...A},navigationType:"POP"}},X):X}function bM(){let n=kM(),e=yM(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,i="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:i},o={padding:"2px 4px",backgroundColor:i},u=null;return console.error("Error handled by React Router default ErrorBoundary:",n),u=$.createElement($.Fragment,null,$.createElement("p",null," Hey developer "),$.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",$.createElement("code",{style:o},"ErrorBoundary")," or"," ",$.createElement("code",{style:o},"errorElement")," prop on your route.")),$.createElement($.Fragment,null,$.createElement("h2",null,"Unexpected Application Error!"),$.createElement("h3",{style:{fontStyle:"italic"}},e),t?$.createElement("pre",{style:s},t):null,u)}var RM=$.createElement(bM,null),CM=class extends $.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){this.props.onError?this.props.onError(n,e):console.error("React Router caught the following error during render",n)}render(){return this.state.error!==void 0?$.createElement(Mr.Provider,{value:this.props.routeContext},$.createElement(eE.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function NM({routeContext:n,match:e,children:t}){let i=$.useContext(Uu);return i&&i.static&&i.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=e.route.id),$.createElement(Mr.Provider,{value:n},t)}function DM(n,e=[],t=null,i=null,s=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let o=n,u=t?.errors;if(u!=null){let _=o.findIndex(y=>y.route.id&&u?.[y.route.id]!==void 0);Rt(_>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(u).join(",")}`),o=o.slice(0,Math.min(o.length,_+1))}let h=!1,d=-1;if(t)for(let _=0;_<o.length;_++){let y=o[_];if((y.route.HydrateFallback||y.route.hydrateFallbackElement)&&(d=_),y.route.id){let{loaderData:w,errors:A}=t,O=y.route.loader&&!w.hasOwnProperty(y.route.id)&&(!A||A[y.route.id]===void 0);if(y.route.lazy||O){h=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}let p=t&&i?(_,y)=>{i(_,{location:t.location,params:t.matches?.[0]?.params??{},unstable_pattern:vM(t.matches),errorInfo:y})}:void 0;return o.reduceRight((_,y,w)=>{let A,O=!1,F=null,V=null;t&&(A=u&&y.route.id?u[y.route.id]:void 0,F=y.route.errorElement||RM,h&&(d<0&&w===0?(qR("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),O=!0,V=null):d===w&&(O=!0,V=y.route.hydrateFallbackElement||null)));let X=e.concat(o.slice(0,w+1)),ne=()=>{let te;return A?te=F:O?te=V:y.route.Component?te=$.createElement(y.route.Component,null):y.route.element?te=y.route.element:te=_,$.createElement(NM,{match:y,routeContext:{outlet:_,matches:X,isDataRoute:t!=null},children:te})};return t&&(y.route.ErrorBoundary||y.route.errorElement||w===0)?$.createElement(CM,{location:t.location,revalidation:t.revalidation,component:F,error:A,children:ne(),routeContext:{outlet:null,matches:X,isDataRoute:!0},onError:p}):ne()},null)}function tE(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function OM(n){let e=$.useContext(Uu);return Rt(e,tE(n)),e}function xM(n){let e=$.useContext(Vp);return Rt(e,tE(n)),e}function PM(n){let e=$.useContext(Mr);return Rt(e,tE(n)),e}function nE(n){let e=PM(n),t=e.matches[e.matches.length-1];return Rt(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function MM(){return nE("useRouteId")}function kM(){let n=$.useContext(eE),e=xM("useRouteError"),t=nE("useRouteError");return n!==void 0?n:e.errors?.[t]}function VM(){let{router:n}=OM("useNavigate"),e=nE("useNavigate"),t=$.useRef(!1);return FR(()=>{t.current=!0}),$.useCallback(async(s,o={})=>{$i(t.current,UR),t.current&&(typeof s=="number"?await n.navigate(s):await n.navigate(s,{fromRouteId:e,...o}))},[n,e])}var UA={};function qR(n,e,t){!e&&!UA[n]&&(UA[n]=!0,$i(!1,t))}$.memo(LM);function LM({routes:n,future:e,state:t,unstable_onError:i}){return zR(n,void 0,t,i,e)}function yh(n){Rt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function UM({basename:n="/",children:e=null,location:t,navigationType:i="POP",navigator:s,static:o=!1,unstable_useTransitions:u}){Rt(!_f(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let h=n.replace(/^\/*/,"/"),d=$.useMemo(()=>({basename:h,navigator:s,static:o,unstable_useTransitions:u,future:{}}),[h,s,o,u]);typeof t=="string"&&(t=Lu(t));let{pathname:p="/",search:_="",hash:y="",state:w=null,key:A="default"}=t,O=$.useMemo(()=>{let F=fs(p,h);return F==null?null:{location:{pathname:F,search:_,hash:y,state:w,key:A},navigationType:i}},[h,p,_,y,w,A,i]);return $i(O!=null,`<Router basename="${h}"> is not able to match the URL "${p}${_}${y}" because it does not start with the basename, so the <Router> won't render anything.`),O==null?null:$.createElement(Xi.Provider,{value:d},$.createElement(gf.Provider,{children:e,value:O}))}function FM({children:n,location:e}){return AM(Zy(n),e)}function Zy(n,e=[]){let t=[];return $.Children.forEach(n,(i,s)=>{if(!$.isValidElement(i))return;let o=[...e,s];if(i.type===$.Fragment){t.push.apply(t,Zy(i.props.children,o));return}Rt(i.type===yh,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Rt(!i.props.index||!i.props.children,"An index route cannot have child routes.");let u={id:i.props.id||o.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,middleware:i.props.middleware,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(u.children=Zy(i.props.children,o)),t.push(u)}),t}var km="get",Vm="application/x-www-form-urlencoded";function Lp(n){return typeof HTMLElement<"u"&&n instanceof HTMLElement}function BM(n){return Lp(n)&&n.tagName.toLowerCase()==="button"}function zM(n){return Lp(n)&&n.tagName.toLowerCase()==="form"}function qM(n){return Lp(n)&&n.tagName.toLowerCase()==="input"}function jM(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function HM(n,e){return n.button===0&&(!e||e==="_self")&&!jM(n)}var Sm=null;function GM(){if(Sm===null)try{new FormData(document.createElement("form"),0),Sm=!1}catch{Sm=!0}return Sm}var KM=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Ry(n){return n!=null&&!KM.has(n)?($i(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Vm}"`),null):n}function QM(n,e){let t,i,s,o,u;if(zM(n)){let h=n.getAttribute("action");i=h?fs(h,e):null,t=n.getAttribute("method")||km,s=Ry(n.getAttribute("enctype"))||Vm,o=new FormData(n)}else if(BM(n)||qM(n)&&(n.type==="submit"||n.type==="image")){let h=n.form;if(h==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let d=n.getAttribute("formaction")||h.getAttribute("action");if(i=d?fs(d,e):null,t=n.getAttribute("formmethod")||h.getAttribute("method")||km,s=Ry(n.getAttribute("formenctype"))||Ry(h.getAttribute("enctype"))||Vm,o=new FormData(h,n),!GM()){let{name:p,type:_,value:y}=n;if(_==="image"){let w=p?`${p}.`:"";o.append(`${w}x`,"0"),o.append(`${w}y`,"0")}else p&&o.append(p,y)}}else{if(Lp(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=km,i=null,s=Vm,u=n}return o&&s==="text/plain"&&(u=o,o=void 0),{action:i,method:t.toLowerCase(),encType:s,formData:o,body:u}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function iE(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function $M(n,e,t){let i=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return i.pathname==="/"?i.pathname=`_root.${t}`:e&&fs(i.pathname,e)==="/"?i.pathname=`${e.replace(/\/$/,"")}/_root.${t}`:i.pathname=`${i.pathname.replace(/\/$/,"")}.${t}`,i}async function YM(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function WM(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function XM(n,e,t){let i=await Promise.all(n.map(async s=>{let o=e.routes[s.route.id];if(o){let u=await YM(o,t);return u.links?u.links():[]}return[]}));return tk(i.flat(1).filter(WM).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function FA(n,e,t,i,s,o){let u=(d,p)=>t[p]?d.route.id!==t[p].route.id:!0,h=(d,p)=>t[p].pathname!==d.pathname||t[p].route.path?.endsWith("*")&&t[p].params["*"]!==d.params["*"];return o==="assets"?e.filter((d,p)=>u(d,p)||h(d,p)):o==="data"?e.filter((d,p)=>{let _=i.routes[d.route.id];if(!_||!_.hasLoader)return!1;if(u(d,p)||h(d,p))return!0;if(d.route.shouldRevalidate){let y=d.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:t[0]?.params||{},nextUrl:new URL(n,window.origin),nextParams:d.params,defaultShouldRevalidate:!0});if(typeof y=="boolean")return y}return!0}):[]}function JM(n,e,{includeHydrateFallback:t}={}){return ZM(n.map(i=>{let s=e.routes[i.route.id];if(!s)return[];let o=[s.module];return s.clientActionModule&&(o=o.concat(s.clientActionModule)),s.clientLoaderModule&&(o=o.concat(s.clientLoaderModule)),t&&s.hydrateFallbackModule&&(o=o.concat(s.hydrateFallbackModule)),s.imports&&(o=o.concat(s.imports)),o}).flat(1))}function ZM(n){return[...new Set(n)]}function ek(n){let e={},t=Object.keys(n).sort();for(let i of t)e[i]=n[i];return e}function tk(n,e){let t=new Set;return new Set(e),n.reduce((i,s)=>{let o=JSON.stringify(ek(s));return t.has(o)||(t.add(o),i.push({key:o,link:s})),i},[])}function jR(){let n=$.useContext(Uu);return iE(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function nk(){let n=$.useContext(Vp);return iE(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var rE=$.createContext(void 0);rE.displayName="FrameworkContext";function HR(){let n=$.useContext(rE);return iE(n,"You must render this element inside a <HydratedRouter> element"),n}function ik(n,e){let t=$.useContext(rE),[i,s]=$.useState(!1),[o,u]=$.useState(!1),{onFocus:h,onBlur:d,onMouseEnter:p,onMouseLeave:_,onTouchStart:y}=e,w=$.useRef(null);$.useEffect(()=>{if(n==="render"&&u(!0),n==="viewport"){let F=X=>{X.forEach(ne=>{u(ne.isIntersecting)})},V=new IntersectionObserver(F,{threshold:.5});return w.current&&V.observe(w.current),()=>{V.disconnect()}}},[n]),$.useEffect(()=>{if(i){let F=setTimeout(()=>{u(!0)},100);return()=>{clearTimeout(F)}}},[i]);let A=()=>{s(!0)},O=()=>{s(!1),u(!1)};return t?n!=="intent"?[o,w,{}]:[o,w,{onFocus:oh(h,A),onBlur:oh(d,O),onMouseEnter:oh(p,A),onMouseLeave:oh(_,O),onTouchStart:oh(y,A)}]:[!1,w,{}]}function oh(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function rk({page:n,...e}){let{router:t}=jR(),i=$.useMemo(()=>OR(t.routes,n,t.basename),[t.routes,n,t.basename]);return i?$.createElement(ak,{page:n,matches:i,...e}):null}function sk(n){let{manifest:e,routeModules:t}=HR(),[i,s]=$.useState([]);return $.useEffect(()=>{let o=!1;return XM(n,e,t).then(u=>{o||s(u)}),()=>{o=!0}},[n,e,t]),i}function ak({page:n,matches:e,...t}){let i=$o(),{manifest:s,routeModules:o}=HR(),{basename:u}=jR(),{loaderData:h,matches:d}=nk(),p=$.useMemo(()=>FA(n,e,d,s,i,"data"),[n,e,d,s,i]),_=$.useMemo(()=>FA(n,e,d,s,i,"assets"),[n,e,d,s,i]),y=$.useMemo(()=>{if(n===i.pathname+i.search+i.hash)return[];let O=new Set,F=!1;if(e.forEach(X=>{let ne=s.routes[X.route.id];!ne||!ne.hasLoader||(!p.some(te=>te.route.id===X.route.id)&&X.route.id in h&&o[X.route.id]?.shouldRevalidate||ne.hasClientLoader?F=!0:O.add(X.route.id))}),O.size===0)return[];let V=$M(n,u,"data");return F&&O.size>0&&V.searchParams.set("_routes",e.filter(X=>O.has(X.route.id)).map(X=>X.route.id).join(",")),[V.pathname+V.search]},[u,h,i,s,p,e,n,o]),w=$.useMemo(()=>JM(_,s),[_,s]),A=sk(_);return $.createElement($.Fragment,null,y.map(O=>$.createElement("link",{key:O,rel:"prefetch",as:"fetch",href:O,...t})),w.map(O=>$.createElement("link",{key:O,rel:"modulepreload",href:O,...t})),A.map(({key:O,link:F})=>$.createElement("link",{key:O,nonce:t.nonce,...F})))}function ok(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var GR=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{GR&&(window.__reactRouterVersion="7.10.1")}catch{}function lk({basename:n,children:e,unstable_useTransitions:t,window:i}){let s=$.useRef();s.current==null&&(s.current=$P({window:i,v5Compat:!0}));let o=s.current,[u,h]=$.useState({action:o.action,location:o.location}),d=$.useCallback(p=>{t===!1?h(p):$.startTransition(()=>h(p))},[t]);return $.useLayoutEffect(()=>o.listen(d),[o,d]),$.createElement(UM,{basename:n,children:e,location:u.location,navigationType:u.action,navigator:o,unstable_useTransitions:t===!0})}var KR=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,vf=$.forwardRef(function({onClick:e,discover:t="render",prefetch:i="none",relative:s,reloadDocument:o,replace:u,state:h,target:d,to:p,preventScrollReset:_,viewTransition:y,...w},A){let{basename:O,unstable_useTransitions:F}=$.useContext(Xi),V=typeof p=="string"&&KR.test(p),X,ne=!1;if(typeof p=="string"&&V&&(X=p,GR))try{let k=new URL(window.location.href),x=p.startsWith("//")?new URL(k.protocol+p):new URL(p),U=fs(x.pathname,O);x.origin===k.origin&&U!=null?p=U+x.search+x.hash:ne=!0}catch{$i(!1,`<Link to="${p}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let te=SM(p,{relative:s}),[fe,ye,ve]=ik(i,w),R=fk(p,{replace:u,state:h,target:d,preventScrollReset:_,relative:s,viewTransition:y,unstable_useTransitions:F});function b(k){e&&e(k),k.defaultPrevented||R(k)}let C=$.createElement("a",{...w,...ve,href:X||te,onClick:ne||o?e:b,ref:ok(A,ye),target:d,"data-discover":!V&&t==="render"?"true":void 0});return fe&&!V?$.createElement($.Fragment,null,C,$.createElement(rk,{page:te})):C});vf.displayName="Link";var uk=$.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:i="",end:s=!1,style:o,to:u,viewTransition:h,children:d,...p},_){let y=yf(u,{relative:p.relative}),w=$o(),A=$.useContext(Vp),{navigator:O,basename:F}=$.useContext(Xi),V=A!=null&&_k(y)&&h===!0,X=O.encodeLocation?O.encodeLocation(y).pathname:y.pathname,ne=w.pathname,te=A&&A.navigation&&A.navigation.location?A.navigation.location.pathname:null;t||(ne=ne.toLowerCase(),te=te?te.toLowerCase():null,X=X.toLowerCase()),te&&F&&(te=fs(te,F)||te);const fe=X!=="/"&&X.endsWith("/")?X.length-1:X.length;let ye=ne===X||!s&&ne.startsWith(X)&&ne.charAt(fe)==="/",ve=te!=null&&(te===X||!s&&te.startsWith(X)&&te.charAt(X.length)==="/"),R={isActive:ye,isPending:ve,isTransitioning:V},b=ye?e:void 0,C;typeof i=="function"?C=i(R):C=[i,ye?"active":null,ve?"pending":null,V?"transitioning":null].filter(Boolean).join(" ");let k=typeof o=="function"?o(R):o;return $.createElement(vf,{...p,"aria-current":b,className:C,ref:_,style:k,to:u,viewTransition:h},typeof d=="function"?d(R):d)});uk.displayName="NavLink";var ck=$.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:i,replace:s,state:o,method:u=km,action:h,onSubmit:d,relative:p,preventScrollReset:_,viewTransition:y,...w},A)=>{let{unstable_useTransitions:O}=$.useContext(Xi),F=pk(),V=gk(h,{relative:p}),X=u.toLowerCase()==="get"?"get":"post",ne=typeof h=="string"&&KR.test(h),te=fe=>{if(d&&d(fe),fe.defaultPrevented)return;fe.preventDefault();let ye=fe.nativeEvent.submitter,ve=ye?.getAttribute("formmethod")||u,R=()=>F(ye||fe.currentTarget,{fetcherKey:e,method:ve,navigate:t,replace:s,state:o,relative:p,preventScrollReset:_,viewTransition:y});O&&t!==!1?$.startTransition(()=>R()):R()};return $.createElement("form",{ref:A,method:X,action:V,onSubmit:i?d:te,...w,"data-discover":!ne&&n==="render"?"true":void 0})});ck.displayName="Form";function hk(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function QR(n){let e=$.useContext(Uu);return Rt(e,hk(n)),e}function fk(n,{target:e,replace:t,state:i,preventScrollReset:s,relative:o,viewTransition:u,unstable_useTransitions:h}={}){let d=Fu(),p=$o(),_=yf(n,{relative:o});return $.useCallback(y=>{if(HM(y,e)){y.preventDefault();let w=t!==void 0?t:zh(p)===zh(_),A=()=>d(n,{replace:w,state:i,preventScrollReset:s,relative:o,viewTransition:u});h?$.startTransition(()=>A()):A()}},[p,d,_,t,i,e,n,s,o,u,h])}var dk=0,mk=()=>`__${String(++dk)}__`;function pk(){let{router:n}=QR("useSubmit"),{basename:e}=$.useContext(Xi),t=MM(),i=n.fetch,s=n.navigate;return $.useCallback(async(o,u={})=>{let{action:h,method:d,encType:p,formData:_,body:y}=QM(o,e);if(u.navigate===!1){let w=u.fetcherKey||mk();await i(w,t,u.action||h,{preventScrollReset:u.preventScrollReset,formData:_,body:y,formMethod:u.method||d,formEncType:u.encType||p,flushSync:u.flushSync})}else await s(u.action||h,{preventScrollReset:u.preventScrollReset,formData:_,body:y,formMethod:u.method||d,formEncType:u.encType||p,replace:u.replace,state:u.state,fromRouteId:t,flushSync:u.flushSync,viewTransition:u.viewTransition})},[i,s,e,t])}function gk(n,{relative:e}={}){let{basename:t}=$.useContext(Xi),i=$.useContext(Mr);Rt(i,"useFormAction must be used inside a RouteContext");let[s]=i.matches.slice(-1),o={...yf(n||".",{relative:e})},u=$o();if(n==null){o.search=u.search;let h=new URLSearchParams(o.search),d=h.getAll("index");if(d.some(_=>_==="")){h.delete("index"),d.filter(y=>y).forEach(y=>h.append("index",y));let _=h.toString();o.search=_?`?${_}`:""}}return(!n||n===".")&&s.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(o.pathname=o.pathname==="/"?t:us([t,o.pathname])),zh(o)}function _k(n,{relative:e}={}){let t=$.useContext(LR);Rt(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=QR("useViewTransitionState"),s=yf(n,{relative:e});if(!t.isTransitioning)return!1;let o=fs(t.currentLocation.pathname,i)||t.currentLocation.pathname,u=fs(t.nextLocation.pathname,i)||t.nextLocation.pathname;return Zm(s.pathname,u)!=null||Zm(s.pathname,o)!=null}const yk=()=>{};var BA={};const $R={NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};const ce=function(n,e){if(!n)throw Bu(e)},Bu=function(n){return new Error("Firebase Database ("+$R.SDK_VERSION+") INTERNAL ASSERT FAILED: "+n)};const YR=function(n){const e=[];let t=0;for(let i=0;i<n.length;i++){let s=n.charCodeAt(i);s<128?e[t++]=s:s<2048?(e[t++]=s>>6|192,e[t++]=s&63|128):(s&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(s=65536+((s&1023)<<10)+(n.charCodeAt(++i)&1023),e[t++]=s>>18|240,e[t++]=s>>12&63|128,e[t++]=s>>6&63|128,e[t++]=s&63|128):(e[t++]=s>>12|224,e[t++]=s>>6&63|128,e[t++]=s&63|128)}return e},vk=function(n){const e=[];let t=0,i=0;for(;t<n.length;){const s=n[t++];if(s<128)e[i++]=String.fromCharCode(s);else if(s>191&&s<224){const o=n[t++];e[i++]=String.fromCharCode((s&31)<<6|o&63)}else if(s>239&&s<365){const o=n[t++],u=n[t++],h=n[t++],d=((s&7)<<18|(o&63)<<12|(u&63)<<6|h&63)-65536;e[i++]=String.fromCharCode(55296+(d>>10)),e[i++]=String.fromCharCode(56320+(d&1023))}else{const o=n[t++],u=n[t++];e[i++]=String.fromCharCode((s&15)<<12|(o&63)<<6|u&63)}}return e.join("")},sE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let s=0;s<n.length;s+=3){const o=n[s],u=s+1<n.length,h=u?n[s+1]:0,d=s+2<n.length,p=d?n[s+2]:0,_=o>>2,y=(o&3)<<4|h>>4;let w=(h&15)<<2|p>>6,A=p&63;d||(A=64,u||(w=64)),i.push(t[_],t[y],t[w],t[A])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(YR(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):vk(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let s=0;s<n.length;){const o=t[n.charAt(s++)],h=s<n.length?t[n.charAt(s)]:0;++s;const p=s<n.length?t[n.charAt(s)]:64;++s;const y=s<n.length?t[n.charAt(s)]:64;if(++s,o==null||h==null||p==null||y==null)throw new Ek;const w=o<<2|h>>4;if(i.push(w),p!==64){const A=h<<4&240|p>>2;if(i.push(A),y!==64){const O=p<<6&192|y;i.push(O)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class Ek extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const WR=function(n){const e=YR(n);return sE.encodeByteArray(e,!0)},ep=function(n){return WR(n).replace(/\./g,"")},qh=function(n){try{return sE.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function Tk(n){return jh(void 0,n)}function jh(n,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const t=e;return new Date(t.getTime());case Object:n===void 0&&(n={});break;case Array:n=[];break;default:return e}for(const t in e)!e.hasOwnProperty(t)||!wk(t)||(n[t]=jh(n[t],e[t]));return n}function wk(n){return n!=="__proto__"}function aE(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const Sk=()=>aE().__FIREBASE_DEFAULTS__,Ik=()=>{if(typeof process>"u"||typeof BA>"u")return;const n=BA.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},Ak=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&qh(n[1]);return e&&JSON.parse(e)},Up=()=>{try{return yk()||Sk()||Ik()||Ak()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},XR=n=>Up()?.emulatorHosts?.[n],Fp=n=>{const e=XR(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},oE=()=>Up()?.config,JR=n=>Up()?.[`_${n}`];class lE{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}function kr(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Ef(n){return(await fetch(n,{credentials:"include"})).ok}function uE(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",s=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u={iss:`https://securetoken.google.com/${i}`,aud:i,iat:s,exp:s+3600,auth_time:s,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}},...n};return[ep(JSON.stringify(t)),ep(JSON.stringify(u)),""].join(".")}const bh={};function bk(){const n={prod:[],emulator:[]};for(const e of Object.keys(bh))bh[e]?n.emulator.push(e):n.prod.push(e);return n}function Rk(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let zA=!1;function Tf(n,e){if(typeof window>"u"||typeof document>"u"||!kr(window.location.host)||bh[n]===e||bh[n]||zA)return;bh[n]=e;function t(w){return`__firebase__banner__${w}`}const i="__firebase__banner",o=bk().prod.length>0;function u(){const w=document.getElementById(i);w&&w.remove()}function h(w){w.style.display="flex",w.style.background="#7faaf0",w.style.position="fixed",w.style.bottom="5px",w.style.left="5px",w.style.padding=".5em",w.style.borderRadius="5px",w.style.alignItems="center"}function d(w,A){w.setAttribute("width","24"),w.setAttribute("id",A),w.setAttribute("height","24"),w.setAttribute("viewBox","0 0 24 24"),w.setAttribute("fill","none"),w.style.marginLeft="-6px"}function p(){const w=document.createElement("span");return w.style.cursor="pointer",w.style.marginLeft="16px",w.style.fontSize="24px",w.innerHTML=" &times;",w.onclick=()=>{zA=!0,u()},w}function _(w,A){w.setAttribute("id",A),w.innerText="Learn more",w.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",w.setAttribute("target","__blank"),w.style.paddingLeft="5px",w.style.textDecoration="underline"}function y(){const w=Rk(i),A=t("text"),O=document.getElementById(A)||document.createElement("span"),F=t("learnmore"),V=document.getElementById(F)||document.createElement("a"),X=t("preprendIcon"),ne=document.getElementById(X)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(w.created){const te=w.element;h(te),_(V,F);const fe=p();d(ne,X),te.append(ne,O,V,fe),document.body.appendChild(te)}o?(O.innerText="Preview backend disconnected.",ne.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(ne.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,O.innerText="Preview backend running in this workspace."),O.setAttribute("id",A)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",y):y()}function en(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function cE(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(en())}function ZR(){const n=Up()?.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Ck(){return typeof window<"u"||eC()}function eC(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function Nk(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Dk(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function tC(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Ok(){const n=en();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function xk(){return $R.NODE_ADMIN===!0}function nC(){return!ZR()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function iC(){return!ZR()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function rC(){try{return typeof indexedDB=="object"}catch{return!1}}function Pk(){return new Promise((n,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(i);s.onsuccess=()=>{s.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},s.onupgradeneeded=()=>{t=!1},s.onerror=()=>{e(s.error?.message||"")}}catch(t){e(t)}})}const Mk="FirebaseError";class Ji extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=Mk,Object.setPrototypeOf(this,Ji.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Yo.prototype.create)}}class Yo{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},s=`${this.service}/${e}`,o=this.errors[e],u=o?kk(o,i):"Error",h=`${this.serviceName}: ${u} (${s}).`;return new Ji(s,h,i)}}function kk(n,e){return n.replace(Vk,(t,i)=>{const s=e[i];return s!=null?String(s):`<${i}?>`})}const Vk=/\{\$([^}]+)}/g;function Hh(n){return JSON.parse(n)}function yn(n){return JSON.stringify(n)}const sC=function(n){let e={},t={},i={},s="";try{const o=n.split(".");e=Hh(qh(o[0])||""),t=Hh(qh(o[1])||""),s=o[2],i=t.d||{},delete t.d}catch{}return{header:e,claims:t,data:i,signature:s}},Lk=function(n){const e=sC(n),t=e.claims;return!!t&&typeof t=="object"&&t.hasOwnProperty("iat")},Uk=function(n){const e=sC(n).claims;return typeof e=="object"&&e.admin===!0};function Yi(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function du(n,e){if(Object.prototype.hasOwnProperty.call(n,e))return n[e]}function ev(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function tp(n,e,t){const i={};for(const s in n)Object.prototype.hasOwnProperty.call(n,s)&&(i[s]=e.call(t,n[s],s,n));return i}function Dr(n,e){if(n===e)return!0;const t=Object.keys(n),i=Object.keys(e);for(const s of t){if(!i.includes(s))return!1;const o=n[s],u=e[s];if(qA(o)&&qA(u)){if(!Dr(o,u))return!1}else if(o!==u)return!1}for(const s of i)if(!t.includes(s))return!1;return!0}function qA(n){return n!==null&&typeof n=="object"}function zu(n){const e=[];for(const[t,i]of Object.entries(n))Array.isArray(i)?i.forEach(s=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function vh(n){const e={};return n.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[s,o]=i.split("=");e[decodeURIComponent(s)]=decodeURIComponent(o)}}),e}function Eh(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}class Fk{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,t){t||(t=0);const i=this.W_;if(typeof e=="string")for(let y=0;y<16;y++)i[y]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(let y=0;y<16;y++)i[y]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(let y=16;y<80;y++){const w=i[y-3]^i[y-8]^i[y-14]^i[y-16];i[y]=(w<<1|w>>>31)&4294967295}let s=this.chain_[0],o=this.chain_[1],u=this.chain_[2],h=this.chain_[3],d=this.chain_[4],p,_;for(let y=0;y<80;y++){y<40?y<20?(p=h^o&(u^h),_=1518500249):(p=o^u^h,_=1859775393):y<60?(p=o&u|h&(o|u),_=2400959708):(p=o^u^h,_=3395469782);const w=(s<<5|s>>>27)+p+d+_+i[y]&4294967295;d=h,h=u,u=(o<<30|o>>>2)&4294967295,o=s,s=w}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+o&4294967295,this.chain_[2]=this.chain_[2]+u&4294967295,this.chain_[3]=this.chain_[3]+h&4294967295,this.chain_[4]=this.chain_[4]+d&4294967295}update(e,t){if(e==null)return;t===void 0&&(t=e.length);const i=t-this.blockSize;let s=0;const o=this.buf_;let u=this.inbuf_;for(;s<t;){if(u===0)for(;s<=i;)this.compress_(e,s),s+=this.blockSize;if(typeof e=="string"){for(;s<t;)if(o[u]=e.charCodeAt(s),++u,++s,u===this.blockSize){this.compress_(o),u=0;break}}else for(;s<t;)if(o[u]=e[s],++u,++s,u===this.blockSize){this.compress_(o),u=0;break}}this.inbuf_=u,this.total_+=t}digest(){const e=[];let t=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let s=this.blockSize-1;s>=56;s--)this.buf_[s]=t&255,t/=256;this.compress_(this.buf_);let i=0;for(let s=0;s<5;s++)for(let o=24;o>=0;o-=8)e[i]=this.chain_[s]>>o&255,++i;return e}}function aC(n,e){const t=new Bk(n,e);return t.subscribe.bind(t)}class Bk{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let s;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");zk(e,["next","error","complete"])?s=e:s={next:e,error:t,complete:i},s.next===void 0&&(s.next=Cy),s.error===void 0&&(s.error=Cy),s.complete===void 0&&(s.complete=Cy);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function zk(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Cy(){}function qk(n,e){return`${n} failed: ${e} argument `}const jk=function(n){const e=[];let t=0;for(let i=0;i<n.length;i++){let s=n.charCodeAt(i);if(s>=55296&&s<=56319){const o=s-55296;i++,ce(i<n.length,"Surrogate pair missing trail surrogate.");const u=n.charCodeAt(i)-56320;s=65536+(o<<10)+u}s<128?e[t++]=s:s<2048?(e[t++]=s>>6|192,e[t++]=s&63|128):s<65536?(e[t++]=s>>12|224,e[t++]=s>>6&63|128,e[t++]=s&63|128):(e[t++]=s>>18|240,e[t++]=s>>12&63|128,e[t++]=s>>6&63|128,e[t++]=s&63|128)}return e},Bp=function(n){let e=0;for(let t=0;t<n.length;t++){const i=n.charCodeAt(t);i<128?e++:i<2048?e+=2:i>=55296&&i<=56319?(e+=4,t++):e+=3}return e};function Ke(n){return n&&n._delegate?n._delegate:n}class Ii{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const vo="[DEFAULT]";class Hk{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new lE;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:t});s&&i.resolve(s)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),i=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Kk(e))try{this.getOrInitializeService({instanceIdentifier:vo})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(t);try{const o=this.getOrInitializeService({instanceIdentifier:s});i.resolve(o)}catch{}}}}clearInstance(e=vo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=vo){return this.instances.has(e)}getOptions(e=vo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[o,u]of this.instancesDeferred.entries()){const h=this.normalizeInstanceIdentifier(o);i===h&&u.resolve(s)}return s}onInit(e,t){const i=this.normalizeInstanceIdentifier(t),s=this.onInitCallbacks.get(i)??new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const s of i)try{s(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:Gk(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=vo){return this.component?this.component.multipleInstances?e:vo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Gk(n){return n===vo?void 0:n}function Kk(n){return n.instantiationMode==="EAGER"}class oC{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new Hk(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const hE=[];var Pe;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Pe||(Pe={}));const lC={debug:Pe.DEBUG,verbose:Pe.VERBOSE,info:Pe.INFO,warn:Pe.WARN,error:Pe.ERROR,silent:Pe.SILENT},Qk=Pe.INFO,$k={[Pe.DEBUG]:"log",[Pe.VERBOSE]:"log",[Pe.INFO]:"info",[Pe.WARN]:"warn",[Pe.ERROR]:"error"},Yk=(n,e,...t)=>{if(e<n.logLevel)return;const i=new Date().toISOString(),s=$k[e];if(s)console[s](`[${i}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class wf{constructor(e){this.name=e,this._logLevel=Qk,this._logHandler=Yk,this._userLogHandler=null,hE.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Pe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?lC[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Pe.DEBUG,...e),this._logHandler(this,Pe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Pe.VERBOSE,...e),this._logHandler(this,Pe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Pe.INFO,...e),this._logHandler(this,Pe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Pe.WARN,...e),this._logHandler(this,Pe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Pe.ERROR,...e),this._logHandler(this,Pe.ERROR,...e)}}function Wk(n){hE.forEach(e=>{e.setLogLevel(n)})}function Xk(n,e){for(const t of hE){let i=null;e&&e.level&&(i=lC[e.level]),n===null?t.userLogHandler=null:t.userLogHandler=(s,o,...u)=>{const h=u.map(d=>{if(d==null)return null;if(typeof d=="string")return d;if(typeof d=="number"||typeof d=="boolean")return d.toString();if(d instanceof Error)return d.message;try{return JSON.stringify(d)}catch{return null}}).filter(d=>d).join(" ");o>=(i??s.logLevel)&&n({level:Pe[o].toLowerCase(),message:h,args:u,type:s.name})}}}const Jk=(n,e)=>e.some(t=>n instanceof t);let jA,HA;function Zk(){return jA||(jA=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function e2(){return HA||(HA=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const uC=new WeakMap,tv=new WeakMap,cC=new WeakMap,Ny=new WeakMap,fE=new WeakMap;function t2(n){const e=new Promise((t,i)=>{const s=()=>{n.removeEventListener("success",o),n.removeEventListener("error",u)},o=()=>{t(da(n.result)),s()},u=()=>{i(n.error),s()};n.addEventListener("success",o),n.addEventListener("error",u)});return e.then(t=>{t instanceof IDBCursor&&uC.set(t,n)}).catch(()=>{}),fE.set(e,n),e}function n2(n){if(tv.has(n))return;const e=new Promise((t,i)=>{const s=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",u),n.removeEventListener("abort",u)},o=()=>{t(),s()},u=()=>{i(n.error||new DOMException("AbortError","AbortError")),s()};n.addEventListener("complete",o),n.addEventListener("error",u),n.addEventListener("abort",u)});tv.set(n,e)}let nv={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return tv.get(n);if(e==="objectStoreNames")return n.objectStoreNames||cC.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return da(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function i2(n){nv=n(nv)}function r2(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=n.call(Dy(this),e,...t);return cC.set(i,e.sort?e.sort():[e]),da(i)}:e2().includes(n)?function(...e){return n.apply(Dy(this),e),da(uC.get(this))}:function(...e){return da(n.apply(Dy(this),e))}}function s2(n){return typeof n=="function"?r2(n):(n instanceof IDBTransaction&&n2(n),Jk(n,Zk())?new Proxy(n,nv):n)}function da(n){if(n instanceof IDBRequest)return t2(n);if(Ny.has(n))return Ny.get(n);const e=s2(n);return e!==n&&(Ny.set(n,e),fE.set(e,n)),e}const Dy=n=>fE.get(n);function a2(n,e,{blocked:t,upgrade:i,blocking:s,terminated:o}={}){const u=indexedDB.open(n,e),h=da(u);return i&&u.addEventListener("upgradeneeded",d=>{i(da(u.result),d.oldVersion,d.newVersion,da(u.transaction),d)}),t&&u.addEventListener("blocked",d=>t(d.oldVersion,d.newVersion,d)),h.then(d=>{o&&d.addEventListener("close",()=>o()),s&&d.addEventListener("versionchange",p=>s(p.oldVersion,p.newVersion,p))}).catch(()=>{}),h}const o2=["get","getKey","getAll","getAllKeys","count"],l2=["put","add","delete","clear"],Oy=new Map;function GA(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Oy.get(e))return Oy.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,s=l2.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(s||o2.includes(t)))return;const o=async function(u,...h){const d=this.transaction(u,s?"readwrite":"readonly");let p=d.store;return i&&(p=p.index(h.shift())),(await Promise.all([p[t](...h),s&&d.done]))[0]};return Oy.set(e,o),o}i2(n=>({...n,get:(e,t,i)=>GA(e,t)||n.get(e,t,i),has:(e,t)=>!!GA(e,t)||n.has(e,t)}));class u2{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(c2(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function c2(n){return n.getComponent()?.type==="VERSION"}const np="@firebase/app",iv="0.14.6";const ds=new wf("@firebase/app"),h2="@firebase/app-compat",f2="@firebase/analytics-compat",d2="@firebase/analytics",m2="@firebase/app-check-compat",p2="@firebase/app-check",g2="@firebase/auth",_2="@firebase/auth-compat",y2="@firebase/database",v2="@firebase/data-connect",E2="@firebase/database-compat",T2="@firebase/functions",w2="@firebase/functions-compat",S2="@firebase/installations",I2="@firebase/installations-compat",A2="@firebase/messaging",b2="@firebase/messaging-compat",R2="@firebase/performance",C2="@firebase/performance-compat",N2="@firebase/remote-config",D2="@firebase/remote-config-compat",O2="@firebase/storage",x2="@firebase/storage-compat",P2="@firebase/firestore",M2="@firebase/ai",k2="@firebase/firestore-compat",V2="firebase",L2="12.6.0";const va="[DEFAULT]",U2={[np]:"fire-core",[h2]:"fire-core-compat",[d2]:"fire-analytics",[f2]:"fire-analytics-compat",[p2]:"fire-app-check",[m2]:"fire-app-check-compat",[g2]:"fire-auth",[_2]:"fire-auth-compat",[y2]:"fire-rtdb",[v2]:"fire-data-connect",[E2]:"fire-rtdb-compat",[T2]:"fire-fn",[w2]:"fire-fn-compat",[S2]:"fire-iid",[I2]:"fire-iid-compat",[A2]:"fire-fcm",[b2]:"fire-fcm-compat",[R2]:"fire-perf",[C2]:"fire-perf-compat",[N2]:"fire-rc",[D2]:"fire-rc-compat",[O2]:"fire-gcs",[x2]:"fire-gcs-compat",[P2]:"fire-fst",[k2]:"fire-fst-compat",[M2]:"fire-vertex","fire-js":"fire-js",[V2]:"fire-js-all"};const Ea=new Map,mu=new Map,pu=new Map;function Gh(n,e){try{n.container.addComponent(e)}catch(t){ds.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function hC(n,e){n.container.addOrOverwriteComponent(e)}function Wi(n){const e=n.name;if(pu.has(e))return ds.debug(`There were multiple attempts to register component ${e}.`),!1;pu.set(e,n);for(const t of Ea.values())Gh(t,n);for(const t of mu.values())Gh(t,n);return!0}function Oa(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function F2(n,e,t=va){Oa(n,e).clearInstance(t)}function dE(n){return n.options!==void 0}function fC(n){return dE(n)?!1:"authIdToken"in n||"appCheckToken"in n||"releaseOnDeref"in n||"automaticDataCollectionEnabled"in n}function vn(n){return n==null?!1:n.settings!==void 0}function B2(){pu.clear()}const z2={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},si=new Yo("app","Firebase",z2);let dC=class{constructor(e,t,i){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Ii("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw si.create("app-deleted",{appName:this._name})}};function KA(n,e){const t=qh(n.split(".")[1]);if(t===null){console.error(`FirebaseServerApp ${e} is invalid: second part could not be parsed.`);return}if(JSON.parse(t).exp===void 0){console.error(`FirebaseServerApp ${e} is invalid: expiration claim could not be parsed`);return}const s=JSON.parse(t).exp*1e3,o=new Date().getTime();s-o<=0&&console.error(`FirebaseServerApp ${e} is invalid: the token has expired.`)}class q2 extends dC{constructor(e,t,i,s){const o=t.automaticDataCollectionEnabled!==void 0?t.automaticDataCollectionEnabled:!0,u={name:i,automaticDataCollectionEnabled:o};if(e.apiKey!==void 0)super(e,u,s);else{const h=e;super(h.options,u,s)}this._serverConfig={automaticDataCollectionEnabled:o,...t},this._serverConfig.authIdToken&&KA(this._serverConfig.authIdToken,"authIdToken"),this._serverConfig.appCheckToken&&KA(this._serverConfig.appCheckToken,"appCheckToken"),this._finalizationRegistry=null,typeof FinalizationRegistry<"u"&&(this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,t.releaseOnDeref=void 0,hn(np,iv,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(e){this.isDeleted||(this._refCount++,e!==void 0&&this._finalizationRegistry!==null&&this._finalizationRegistry.register(e,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){mE(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw si.create("server-app-deleted")}}const Vr=L2;function zp(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const i={name:va,automaticDataCollectionEnabled:!0,...e},s=i.name;if(typeof s!="string"||!s)throw si.create("bad-app-name",{appName:String(s)});if(t||(t=oE()),!t)throw si.create("no-options");const o=Ea.get(s);if(o){if(Dr(t,o.options)&&Dr(i,o.config))return o;throw si.create("duplicate-app",{appName:s})}const u=new oC(s);for(const d of pu.values())u.addComponent(d);const h=new dC(t,i,u);return Ea.set(s,h),h}function j2(n,e={}){if(Ck()&&!eC())throw si.create("invalid-server-app-environment");let t,i=e||{};if(n&&(dE(n)?t=n.options:fC(n)?i=n:t=n),i.automaticDataCollectionEnabled===void 0&&(i.automaticDataCollectionEnabled=!0),t||(t=oE()),!t)throw si.create("no-options");const s={...i,...t};s.releaseOnDeref!==void 0&&delete s.releaseOnDeref;const o=_=>[..._].reduce((y,w)=>Math.imul(31,y)+w.charCodeAt(0)|0,0);if(i.releaseOnDeref!==void 0&&typeof FinalizationRegistry>"u")throw si.create("finalization-registry-not-supported",{});const u=""+o(JSON.stringify(s)),h=mu.get(u);if(h)return h.incRefCount(i.releaseOnDeref),h;const d=new oC(u);for(const _ of pu.values())d.addComponent(_);const p=new q2(t,i,u,d);return mu.set(u,p),p}function qu(n=va){const e=Ea.get(n);if(!e&&n===va&&oE())return zp();if(!e)throw si.create("no-app",{appName:n});return e}function H2(){return Array.from(Ea.values())}async function mE(n){let e=!1;const t=n.name;Ea.has(t)?(e=!0,Ea.delete(t)):mu.has(t)&&n.decRefCount()<=0&&(mu.delete(t),e=!0),e&&(await Promise.all(n.container.getProviders().map(i=>i.delete())),n.isDeleted=!0)}function hn(n,e,t){let i=U2[n]??n;t&&(i+=`-${t}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const u=[`Unable to register library "${i}" with version "${e}":`];s&&u.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&u.push("and"),o&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ds.warn(u.join(" "));return}Wi(new Ii(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}function mC(n,e){if(n!==null&&typeof n!="function")throw si.create("invalid-log-argument");Xk(n,e)}function pC(n){Wk(n)}const G2="firebase-heartbeat-database",K2=1,Kh="firebase-heartbeat-store";let xy=null;function gC(){return xy||(xy=a2(G2,K2,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Kh)}catch(t){console.warn(t)}}}}).catch(n=>{throw si.create("idb-open",{originalErrorMessage:n.message})})),xy}async function Q2(n){try{const t=(await gC()).transaction(Kh),i=await t.objectStore(Kh).get(_C(n));return await t.done,i}catch(e){if(e instanceof Ji)ds.warn(e.message);else{const t=si.create("idb-get",{originalErrorMessage:e?.message});ds.warn(t.message)}}}async function QA(n,e){try{const i=(await gC()).transaction(Kh,"readwrite");await i.objectStore(Kh).put(e,_C(n)),await i.done}catch(t){if(t instanceof Ji)ds.warn(t.message);else{const i=si.create("idb-set",{originalErrorMessage:t?.message});ds.warn(i.message)}}}function _C(n){return`${n.name}!${n.options.appId}`}const $2=1024,Y2=30;class W2{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new J2(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=$A();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(s=>s.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:t}),this._heartbeatsCache.heartbeats.length>Y2){const s=Z2(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){ds.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=$A(),{heartbeatsToSend:t,unsentEntries:i}=X2(this._heartbeatsCache.heartbeats),s=ep(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(e){return ds.warn(e),""}}}function $A(){return new Date().toISOString().substring(0,10)}function X2(n,e=$2){const t=[];let i=n.slice();for(const s of n){const o=t.find(u=>u.agent===s.agent);if(o){if(o.dates.push(s.date),YA(t)>e){o.dates.pop();break}}else if(t.push({agent:s.agent,dates:[s.date]}),YA(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class J2{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return rC()?Pk().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await Q2(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return QA(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return QA(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function YA(n){return ep(JSON.stringify({version:2,heartbeats:n})).length}function Z2(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let i=1;i<n.length;i++)n[i].date<t&&(t=n[i].date,e=i);return e}function eV(n){Wi(new Ii("platform-logger",e=>new u2(e),"PRIVATE")),Wi(new Ii("heartbeat",e=>new W2(e),"PRIVATE")),hn(np,iv,n),hn(np,iv,"esm2020"),hn("fire-js","")}eV("");const tV=Object.freeze(Object.defineProperty({__proto__:null,FirebaseError:Ji,SDK_VERSION:Vr,_DEFAULT_ENTRY_NAME:va,_addComponent:Gh,_addOrOverwriteComponent:hC,_apps:Ea,_clearComponents:B2,_components:pu,_getProvider:Oa,_isFirebaseApp:dE,_isFirebaseServerApp:vn,_isFirebaseServerAppSettings:fC,_registerComponent:Wi,_removeServiceInstance:F2,_serverApps:mu,deleteApp:mE,getApp:qu,getApps:H2,initializeApp:zp,initializeServerApp:j2,onLog:mC,registerVersion:hn,setLogLevel:pC},Symbol.toStringTag,{value:"Module"}));class nV{constructor(e,t){this._delegate=e,this.firebase=t,Gh(e,new Ii("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),mE(this._delegate)))}_getService(e,t=va){this._delegate.checkDestroyed();const i=this._delegate.container.getProvider(e);return!i.isInitialized()&&i.getComponent()?.instantiationMode==="EXPLICIT"&&i.initialize(),i.getImmediate({identifier:t})}_removeServiceInstance(e,t=va){this._delegate.container.getProvider(e).clearInstance(t)}_addComponent(e){Gh(this._delegate,e)}_addOrOverwriteComponent(e){hC(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const iV={"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."},WA=new Yo("app-compat","Firebase",iV);function rV(n){const e={},t={__esModule:!0,initializeApp:o,app:s,registerVersion:hn,setLogLevel:pC,onLog:mC,apps:null,SDK_VERSION:Vr,INTERNAL:{registerComponent:h,removeApp:i,useAsService:d,modularAPIs:tV}};t.default=t,Object.defineProperty(t,"apps",{get:u});function i(p){delete e[p]}function s(p){if(p=p||va,!Yi(e,p))throw WA.create("no-app",{appName:p});return e[p]}s.App=n;function o(p,_={}){const y=zp(p,_);if(Yi(e,y.name))return e[y.name];const w=new n(y,t);return e[y.name]=w,w}function u(){return Object.keys(e).map(p=>e[p])}function h(p){const _=p.name,y=_.replace("-compat","");if(Wi(p)&&p.type==="PUBLIC"){const w=(A=s())=>{if(typeof A[y]!="function")throw WA.create("invalid-app-argument",{appName:_});return A[y]()};p.serviceProps!==void 0&&jh(w,p.serviceProps),t[y]=w,n.prototype[y]=function(...A){return this._getService.bind(this,_).apply(this,p.multipleInstances?A:[])}}return p.type==="PUBLIC"?t[y]:null}function d(p,_){return _==="serverAuth"?null:_}return t}function yC(){const n=rV(nV);n.INTERNAL={...n.INTERNAL,createFirebaseNamespace:yC,extendNamespace:e,createSubscribe:aC,ErrorFactory:Yo,deepExtend:jh};function e(t){jh(n,t)}return n}const sV=yC();const XA=new wf("@firebase/app-compat"),aV="@firebase/app-compat",oV="0.5.6";function lV(n){hn(aV,oV,n)}try{const n=aE();if(n.firebase!==void 0){XA.warn(`
      Warning: Firebase is already defined in the global scope. Please make sure
      Firebase library is only loaded once.
    `);const e=n.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&XA.warn(`
        Warning: You are trying to load Firebase while using Firebase Performance standalone script.
        You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
        `)}}catch{}const uV=sV;lV();var JA=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var ma,vC;(function(){var n;function e(R,b){function C(){}C.prototype=b.prototype,R.F=b.prototype,R.prototype=new C,R.prototype.constructor=R,R.D=function(k,x,U){for(var N=Array(arguments.length-2),Et=2;Et<arguments.length;Et++)N[Et-2]=arguments[Et];return b.prototype[x].apply(k,N)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,t),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(R,b,C){C||(C=0);const k=Array(16);if(typeof b=="string")for(var x=0;x<16;++x)k[x]=b.charCodeAt(C++)|b.charCodeAt(C++)<<8|b.charCodeAt(C++)<<16|b.charCodeAt(C++)<<24;else for(x=0;x<16;++x)k[x]=b[C++]|b[C++]<<8|b[C++]<<16|b[C++]<<24;b=R.g[0],C=R.g[1],x=R.g[2];let U=R.g[3],N;N=b+(U^C&(x^U))+k[0]+3614090360&4294967295,b=C+(N<<7&4294967295|N>>>25),N=U+(x^b&(C^x))+k[1]+3905402710&4294967295,U=b+(N<<12&4294967295|N>>>20),N=x+(C^U&(b^C))+k[2]+606105819&4294967295,x=U+(N<<17&4294967295|N>>>15),N=C+(b^x&(U^b))+k[3]+3250441966&4294967295,C=x+(N<<22&4294967295|N>>>10),N=b+(U^C&(x^U))+k[4]+4118548399&4294967295,b=C+(N<<7&4294967295|N>>>25),N=U+(x^b&(C^x))+k[5]+1200080426&4294967295,U=b+(N<<12&4294967295|N>>>20),N=x+(C^U&(b^C))+k[6]+2821735955&4294967295,x=U+(N<<17&4294967295|N>>>15),N=C+(b^x&(U^b))+k[7]+4249261313&4294967295,C=x+(N<<22&4294967295|N>>>10),N=b+(U^C&(x^U))+k[8]+1770035416&4294967295,b=C+(N<<7&4294967295|N>>>25),N=U+(x^b&(C^x))+k[9]+2336552879&4294967295,U=b+(N<<12&4294967295|N>>>20),N=x+(C^U&(b^C))+k[10]+4294925233&4294967295,x=U+(N<<17&4294967295|N>>>15),N=C+(b^x&(U^b))+k[11]+2304563134&4294967295,C=x+(N<<22&4294967295|N>>>10),N=b+(U^C&(x^U))+k[12]+1804603682&4294967295,b=C+(N<<7&4294967295|N>>>25),N=U+(x^b&(C^x))+k[13]+4254626195&4294967295,U=b+(N<<12&4294967295|N>>>20),N=x+(C^U&(b^C))+k[14]+2792965006&4294967295,x=U+(N<<17&4294967295|N>>>15),N=C+(b^x&(U^b))+k[15]+1236535329&4294967295,C=x+(N<<22&4294967295|N>>>10),N=b+(x^U&(C^x))+k[1]+4129170786&4294967295,b=C+(N<<5&4294967295|N>>>27),N=U+(C^x&(b^C))+k[6]+3225465664&4294967295,U=b+(N<<9&4294967295|N>>>23),N=x+(b^C&(U^b))+k[11]+643717713&4294967295,x=U+(N<<14&4294967295|N>>>18),N=C+(U^b&(x^U))+k[0]+3921069994&4294967295,C=x+(N<<20&4294967295|N>>>12),N=b+(x^U&(C^x))+k[5]+3593408605&4294967295,b=C+(N<<5&4294967295|N>>>27),N=U+(C^x&(b^C))+k[10]+38016083&4294967295,U=b+(N<<9&4294967295|N>>>23),N=x+(b^C&(U^b))+k[15]+3634488961&4294967295,x=U+(N<<14&4294967295|N>>>18),N=C+(U^b&(x^U))+k[4]+3889429448&4294967295,C=x+(N<<20&4294967295|N>>>12),N=b+(x^U&(C^x))+k[9]+568446438&4294967295,b=C+(N<<5&4294967295|N>>>27),N=U+(C^x&(b^C))+k[14]+3275163606&4294967295,U=b+(N<<9&4294967295|N>>>23),N=x+(b^C&(U^b))+k[3]+4107603335&4294967295,x=U+(N<<14&4294967295|N>>>18),N=C+(U^b&(x^U))+k[8]+1163531501&4294967295,C=x+(N<<20&4294967295|N>>>12),N=b+(x^U&(C^x))+k[13]+2850285829&4294967295,b=C+(N<<5&4294967295|N>>>27),N=U+(C^x&(b^C))+k[2]+4243563512&4294967295,U=b+(N<<9&4294967295|N>>>23),N=x+(b^C&(U^b))+k[7]+1735328473&4294967295,x=U+(N<<14&4294967295|N>>>18),N=C+(U^b&(x^U))+k[12]+2368359562&4294967295,C=x+(N<<20&4294967295|N>>>12),N=b+(C^x^U)+k[5]+4294588738&4294967295,b=C+(N<<4&4294967295|N>>>28),N=U+(b^C^x)+k[8]+2272392833&4294967295,U=b+(N<<11&4294967295|N>>>21),N=x+(U^b^C)+k[11]+1839030562&4294967295,x=U+(N<<16&4294967295|N>>>16),N=C+(x^U^b)+k[14]+4259657740&4294967295,C=x+(N<<23&4294967295|N>>>9),N=b+(C^x^U)+k[1]+2763975236&4294967295,b=C+(N<<4&4294967295|N>>>28),N=U+(b^C^x)+k[4]+1272893353&4294967295,U=b+(N<<11&4294967295|N>>>21),N=x+(U^b^C)+k[7]+4139469664&4294967295,x=U+(N<<16&4294967295|N>>>16),N=C+(x^U^b)+k[10]+3200236656&4294967295,C=x+(N<<23&4294967295|N>>>9),N=b+(C^x^U)+k[13]+681279174&4294967295,b=C+(N<<4&4294967295|N>>>28),N=U+(b^C^x)+k[0]+3936430074&4294967295,U=b+(N<<11&4294967295|N>>>21),N=x+(U^b^C)+k[3]+3572445317&4294967295,x=U+(N<<16&4294967295|N>>>16),N=C+(x^U^b)+k[6]+76029189&4294967295,C=x+(N<<23&4294967295|N>>>9),N=b+(C^x^U)+k[9]+3654602809&4294967295,b=C+(N<<4&4294967295|N>>>28),N=U+(b^C^x)+k[12]+3873151461&4294967295,U=b+(N<<11&4294967295|N>>>21),N=x+(U^b^C)+k[15]+530742520&4294967295,x=U+(N<<16&4294967295|N>>>16),N=C+(x^U^b)+k[2]+3299628645&4294967295,C=x+(N<<23&4294967295|N>>>9),N=b+(x^(C|~U))+k[0]+4096336452&4294967295,b=C+(N<<6&4294967295|N>>>26),N=U+(C^(b|~x))+k[7]+1126891415&4294967295,U=b+(N<<10&4294967295|N>>>22),N=x+(b^(U|~C))+k[14]+2878612391&4294967295,x=U+(N<<15&4294967295|N>>>17),N=C+(U^(x|~b))+k[5]+4237533241&4294967295,C=x+(N<<21&4294967295|N>>>11),N=b+(x^(C|~U))+k[12]+1700485571&4294967295,b=C+(N<<6&4294967295|N>>>26),N=U+(C^(b|~x))+k[3]+2399980690&4294967295,U=b+(N<<10&4294967295|N>>>22),N=x+(b^(U|~C))+k[10]+4293915773&4294967295,x=U+(N<<15&4294967295|N>>>17),N=C+(U^(x|~b))+k[1]+2240044497&4294967295,C=x+(N<<21&4294967295|N>>>11),N=b+(x^(C|~U))+k[8]+1873313359&4294967295,b=C+(N<<6&4294967295|N>>>26),N=U+(C^(b|~x))+k[15]+4264355552&4294967295,U=b+(N<<10&4294967295|N>>>22),N=x+(b^(U|~C))+k[6]+2734768916&4294967295,x=U+(N<<15&4294967295|N>>>17),N=C+(U^(x|~b))+k[13]+1309151649&4294967295,C=x+(N<<21&4294967295|N>>>11),N=b+(x^(C|~U))+k[4]+4149444226&4294967295,b=C+(N<<6&4294967295|N>>>26),N=U+(C^(b|~x))+k[11]+3174756917&4294967295,U=b+(N<<10&4294967295|N>>>22),N=x+(b^(U|~C))+k[2]+718787259&4294967295,x=U+(N<<15&4294967295|N>>>17),N=C+(U^(x|~b))+k[9]+3951481745&4294967295,R.g[0]=R.g[0]+b&4294967295,R.g[1]=R.g[1]+(x+(N<<21&4294967295|N>>>11))&4294967295,R.g[2]=R.g[2]+x&4294967295,R.g[3]=R.g[3]+U&4294967295}i.prototype.v=function(R,b){b===void 0&&(b=R.length);const C=b-this.blockSize,k=this.C;let x=this.h,U=0;for(;U<b;){if(x==0)for(;U<=C;)s(this,R,U),U+=this.blockSize;if(typeof R=="string"){for(;U<b;)if(k[x++]=R.charCodeAt(U++),x==this.blockSize){s(this,k),x=0;break}}else for(;U<b;)if(k[x++]=R[U++],x==this.blockSize){s(this,k),x=0;break}}this.h=x,this.o+=b},i.prototype.A=function(){var R=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);R[0]=128;for(var b=1;b<R.length-8;++b)R[b]=0;b=this.o*8;for(var C=R.length-8;C<R.length;++C)R[C]=b&255,b/=256;for(this.v(R),R=Array(16),b=0,C=0;C<4;++C)for(let k=0;k<32;k+=8)R[b++]=this.g[C]>>>k&255;return R};function o(R,b){var C=h;return Object.prototype.hasOwnProperty.call(C,R)?C[R]:C[R]=b(R)}function u(R,b){this.h=b;const C=[];let k=!0;for(let x=R.length-1;x>=0;x--){const U=R[x]|0;k&&U==b||(C[x]=U,k=!1)}this.g=C}var h={};function d(R){return-128<=R&&R<128?o(R,function(b){return new u([b|0],b<0?-1:0)}):new u([R|0],R<0?-1:0)}function p(R){if(isNaN(R)||!isFinite(R))return y;if(R<0)return V(p(-R));const b=[];let C=1;for(let k=0;R>=C;k++)b[k]=R/C|0,C*=4294967296;return new u(b,0)}function _(R,b){if(R.length==0)throw Error("number format error: empty string");if(b=b||10,b<2||36<b)throw Error("radix out of range: "+b);if(R.charAt(0)=="-")return V(_(R.substring(1),b));if(R.indexOf("-")>=0)throw Error('number format error: interior "-" character');const C=p(Math.pow(b,8));let k=y;for(let U=0;U<R.length;U+=8){var x=Math.min(8,R.length-U);const N=parseInt(R.substring(U,U+x),b);x<8?(x=p(Math.pow(b,x)),k=k.j(x).add(p(N))):(k=k.j(C),k=k.add(p(N)))}return k}var y=d(0),w=d(1),A=d(16777216);n=u.prototype,n.m=function(){if(F(this))return-V(this).m();let R=0,b=1;for(let C=0;C<this.g.length;C++){const k=this.i(C);R+=(k>=0?k:4294967296+k)*b,b*=4294967296}return R},n.toString=function(R){if(R=R||10,R<2||36<R)throw Error("radix out of range: "+R);if(O(this))return"0";if(F(this))return"-"+V(this).toString(R);const b=p(Math.pow(R,6));var C=this;let k="";for(;;){const x=fe(C,b).g;C=X(C,x.j(b));let U=((C.g.length>0?C.g[0]:C.h)>>>0).toString(R);if(C=x,O(C))return U+k;for(;U.length<6;)U="0"+U;k=U+k}},n.i=function(R){return R<0?0:R<this.g.length?this.g[R]:this.h};function O(R){if(R.h!=0)return!1;for(let b=0;b<R.g.length;b++)if(R.g[b]!=0)return!1;return!0}function F(R){return R.h==-1}n.l=function(R){return R=X(this,R),F(R)?-1:O(R)?0:1};function V(R){const b=R.g.length,C=[];for(let k=0;k<b;k++)C[k]=~R.g[k];return new u(C,~R.h).add(w)}n.abs=function(){return F(this)?V(this):this},n.add=function(R){const b=Math.max(this.g.length,R.g.length),C=[];let k=0;for(let x=0;x<=b;x++){let U=k+(this.i(x)&65535)+(R.i(x)&65535),N=(U>>>16)+(this.i(x)>>>16)+(R.i(x)>>>16);k=N>>>16,U&=65535,N&=65535,C[x]=N<<16|U}return new u(C,C[C.length-1]&-2147483648?-1:0)};function X(R,b){return R.add(V(b))}n.j=function(R){if(O(this)||O(R))return y;if(F(this))return F(R)?V(this).j(V(R)):V(V(this).j(R));if(F(R))return V(this.j(V(R)));if(this.l(A)<0&&R.l(A)<0)return p(this.m()*R.m());const b=this.g.length+R.g.length,C=[];for(var k=0;k<2*b;k++)C[k]=0;for(k=0;k<this.g.length;k++)for(let x=0;x<R.g.length;x++){const U=this.i(k)>>>16,N=this.i(k)&65535,Et=R.i(x)>>>16,Wt=R.i(x)&65535;C[2*k+2*x]+=N*Wt,ne(C,2*k+2*x),C[2*k+2*x+1]+=U*Wt,ne(C,2*k+2*x+1),C[2*k+2*x+1]+=N*Et,ne(C,2*k+2*x+1),C[2*k+2*x+2]+=U*Et,ne(C,2*k+2*x+2)}for(R=0;R<b;R++)C[R]=C[2*R+1]<<16|C[2*R];for(R=b;R<2*b;R++)C[R]=0;return new u(C,0)};function ne(R,b){for(;(R[b]&65535)!=R[b];)R[b+1]+=R[b]>>>16,R[b]&=65535,b++}function te(R,b){this.g=R,this.h=b}function fe(R,b){if(O(b))throw Error("division by zero");if(O(R))return new te(y,y);if(F(R))return b=fe(V(R),b),new te(V(b.g),V(b.h));if(F(b))return b=fe(R,V(b)),new te(V(b.g),b.h);if(R.g.length>30){if(F(R)||F(b))throw Error("slowDivide_ only works with positive integers.");for(var C=w,k=b;k.l(R)<=0;)C=ye(C),k=ye(k);var x=ve(C,1),U=ve(k,1);for(k=ve(k,2),C=ve(C,2);!O(k);){var N=U.add(k);N.l(R)<=0&&(x=x.add(C),U=N),k=ve(k,1),C=ve(C,1)}return b=X(R,x.j(b)),new te(x,b)}for(x=y;R.l(b)>=0;){for(C=Math.max(1,Math.floor(R.m()/b.m())),k=Math.ceil(Math.log(C)/Math.LN2),k=k<=48?1:Math.pow(2,k-48),U=p(C),N=U.j(b);F(N)||N.l(R)>0;)C-=k,U=p(C),N=U.j(b);O(U)&&(U=w),x=x.add(U),R=X(R,N)}return new te(x,R)}n.B=function(R){return fe(this,R).h},n.and=function(R){const b=Math.max(this.g.length,R.g.length),C=[];for(let k=0;k<b;k++)C[k]=this.i(k)&R.i(k);return new u(C,this.h&R.h)},n.or=function(R){const b=Math.max(this.g.length,R.g.length),C=[];for(let k=0;k<b;k++)C[k]=this.i(k)|R.i(k);return new u(C,this.h|R.h)},n.xor=function(R){const b=Math.max(this.g.length,R.g.length),C=[];for(let k=0;k<b;k++)C[k]=this.i(k)^R.i(k);return new u(C,this.h^R.h)};function ye(R){const b=R.g.length+1,C=[];for(let k=0;k<b;k++)C[k]=R.i(k)<<1|R.i(k-1)>>>31;return new u(C,R.h)}function ve(R,b){const C=b>>5;b%=32;const k=R.g.length-C,x=[];for(let U=0;U<k;U++)x[U]=b>0?R.i(U+C)>>>b|R.i(U+C+1)<<32-b:R.i(U+C);return new u(x,R.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,vC=i,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.B,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=p,u.fromString=_,ma=u}).apply(typeof JA<"u"?JA:typeof self<"u"?self:typeof window<"u"?window:{});var Im=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var EC,Th,TC,Lm,rv,wC,SC,IC;(function(){var n,e=Object.defineProperty;function t(f){f=[typeof globalThis=="object"&&globalThis,f,typeof window=="object"&&window,typeof self=="object"&&self,typeof Im=="object"&&Im];for(var v=0;v<f.length;++v){var T=f[v];if(T&&T.Math==Math)return T}throw Error("Cannot find global object")}var i=t(this);function s(f,v){if(v)e:{var T=i;f=f.split(".");for(var I=0;I<f.length-1;I++){var z=f[I];if(!(z in T))break e;T=T[z]}f=f[f.length-1],I=T[f],v=v(I),v!=I&&v!=null&&e(T,f,{configurable:!0,writable:!0,value:v})}}s("Symbol.dispose",function(f){return f||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(f){return f||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(f){return f||function(v){var T=[],I;for(I in v)Object.prototype.hasOwnProperty.call(v,I)&&T.push([I,v[I]]);return T}});var o=o||{},u=this||self;function h(f){var v=typeof f;return v=="object"&&f!=null||v=="function"}function d(f,v,T){return f.call.apply(f.bind,arguments)}function p(f,v,T){return p=d,p.apply(null,arguments)}function _(f,v){var T=Array.prototype.slice.call(arguments,1);return function(){var I=T.slice();return I.push.apply(I,arguments),f.apply(this,I)}}function y(f,v){function T(){}T.prototype=v.prototype,f.Z=v.prototype,f.prototype=new T,f.prototype.constructor=f,f.Ob=function(I,z,K){for(var se=Array(arguments.length-2),Ce=2;Ce<arguments.length;Ce++)se[Ce-2]=arguments[Ce];return v.prototype[z].apply(I,se)}}var w=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?f=>f&&AsyncContext.Snapshot.wrap(f):f=>f;function A(f){const v=f.length;if(v>0){const T=Array(v);for(let I=0;I<v;I++)T[I]=f[I];return T}return[]}function O(f,v){for(let I=1;I<arguments.length;I++){const z=arguments[I];var T=typeof z;if(T=T!="object"?T:z?Array.isArray(z)?"array":T:"null",T=="array"||T=="object"&&typeof z.length=="number"){T=f.length||0;const K=z.length||0;f.length=T+K;for(let se=0;se<K;se++)f[T+se]=z[se]}else f.push(z)}}class F{constructor(v,T){this.i=v,this.j=T,this.h=0,this.g=null}get(){let v;return this.h>0?(this.h--,v=this.g,this.g=v.next,v.next=null):v=this.i(),v}}function V(f){u.setTimeout(()=>{throw f},0)}function X(){var f=R;let v=null;return f.g&&(v=f.g,f.g=f.g.next,f.g||(f.h=null),v.next=null),v}class ne{constructor(){this.h=this.g=null}add(v,T){const I=te.get();I.set(v,T),this.h?this.h.next=I:this.g=I,this.h=I}}var te=new F(()=>new fe,f=>f.reset());class fe{constructor(){this.next=this.g=this.h=null}set(v,T){this.h=v,this.g=T,this.next=null}reset(){this.next=this.g=this.h=null}}let ye,ve=!1,R=new ne,b=()=>{const f=Promise.resolve(void 0);ye=()=>{f.then(C)}};function C(){for(var f;f=X();){try{f.h.call(f.g)}catch(T){V(T)}var v=te;v.j(f),v.h<100&&(v.h++,f.next=v.g,v.g=f)}ve=!1}function k(){this.u=this.u,this.C=this.C}k.prototype.u=!1,k.prototype.dispose=function(){this.u||(this.u=!0,this.N())},k.prototype[Symbol.dispose]=function(){this.dispose()},k.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function x(f,v){this.type=f,this.g=this.target=v,this.defaultPrevented=!1}x.prototype.h=function(){this.defaultPrevented=!0};var U=(function(){if(!u.addEventListener||!Object.defineProperty)return!1;var f=!1,v=Object.defineProperty({},"passive",{get:function(){f=!0}});try{const T=()=>{};u.addEventListener("test",T,v),u.removeEventListener("test",T,v)}catch{}return f})();function N(f){return/^[\s\xa0]*$/.test(f)}function Et(f,v){x.call(this,f?f.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,f&&this.init(f,v)}y(Et,x),Et.prototype.init=function(f,v){const T=this.type=f.type,I=f.changedTouches&&f.changedTouches.length?f.changedTouches[0]:null;this.target=f.target||f.srcElement,this.g=v,v=f.relatedTarget,v||(T=="mouseover"?v=f.fromElement:T=="mouseout"&&(v=f.toElement)),this.relatedTarget=v,I?(this.clientX=I.clientX!==void 0?I.clientX:I.pageX,this.clientY=I.clientY!==void 0?I.clientY:I.pageY,this.screenX=I.screenX||0,this.screenY=I.screenY||0):(this.clientX=f.clientX!==void 0?f.clientX:f.pageX,this.clientY=f.clientY!==void 0?f.clientY:f.pageY,this.screenX=f.screenX||0,this.screenY=f.screenY||0),this.button=f.button,this.key=f.key||"",this.ctrlKey=f.ctrlKey,this.altKey=f.altKey,this.shiftKey=f.shiftKey,this.metaKey=f.metaKey,this.pointerId=f.pointerId||0,this.pointerType=f.pointerType,this.state=f.state,this.i=f,f.defaultPrevented&&Et.Z.h.call(this)},Et.prototype.h=function(){Et.Z.h.call(this);const f=this.i;f.preventDefault?f.preventDefault():f.returnValue=!1};var Wt="closure_listenable_"+(Math.random()*1e6|0),W=0;function le(f,v,T,I,z){this.listener=f,this.proxy=null,this.src=v,this.type=T,this.capture=!!I,this.ha=z,this.key=++W,this.da=this.fa=!1}function we(f){f.da=!0,f.listener=null,f.proxy=null,f.src=null,f.ha=null}function Qe(f,v,T){for(const I in f)v.call(T,f[I],I,f)}function tt(f,v){for(const T in f)v.call(void 0,f[T],T,f)}function M(f){const v={};for(const T in f)v[T]=f[T];return v}const ee="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ue(f,v){let T,I;for(let z=1;z<arguments.length;z++){I=arguments[z];for(T in I)f[T]=I[T];for(let K=0;K<ee.length;K++)T=ee[K],Object.prototype.hasOwnProperty.call(I,T)&&(f[T]=I[T])}}function de(f){this.src=f,this.g={},this.h=0}de.prototype.add=function(f,v,T,I,z){const K=f.toString();f=this.g[K],f||(f=this.g[K]=[],this.h++);const se=Oe(f,v,I,z);return se>-1?(v=f[se],T||(v.fa=!1)):(v=new le(v,this.src,K,!!I,z),v.fa=T,f.push(v)),v};function Ae(f,v){const T=v.type;if(T in f.g){var I=f.g[T],z=Array.prototype.indexOf.call(I,v,void 0),K;(K=z>=0)&&Array.prototype.splice.call(I,z,1),K&&(we(v),f.g[T].length==0&&(delete f.g[T],f.h--))}}function Oe(f,v,T,I){for(let z=0;z<f.length;++z){const K=f[z];if(!K.da&&K.listener==v&&K.capture==!!T&&K.ha==I)return z}return-1}var qe="closure_lm_"+(Math.random()*1e6|0),Xt={};function Tt(f,v,T,I,z){if(Array.isArray(v)){for(let K=0;K<v.length;K++)Tt(f,v[K],T,I,z);return null}return T=ic(T),f&&f[Wt]?f.J(v,T,h(I)?!!I.capture:!1,z):Ba(f,v,T,!1,I,z)}function Ba(f,v,T,I,z,K){if(!v)throw Error("Invalid event type");const se=h(z)?!!z.capture:!!z;let Ce=za(f);if(Ce||(f[qe]=Ce=new de(f)),T=Ce.add(v,T,I,se,K),T.proxy)return T;if(I=nl(),T.proxy=I,I.src=f,I.listener=T,f.addEventListener)U||(z=se),z===void 0&&(z=!1),f.addEventListener(v.toString(),I,z);else if(f.attachEvent)f.attachEvent(Zi(v.toString()),I);else if(f.addListener&&f.removeListener)f.addListener(I);else throw Error("addEventListener and attachEvent are unavailable.");return T}function nl(){function f(T){return v.call(f.src,f.listener,T)}const v=tc;return f}function il(f,v,T,I,z){if(Array.isArray(v))for(var K=0;K<v.length;K++)il(f,v[K],T,I,z);else I=h(I)?!!I.capture:!!I,T=ic(T),f&&f[Wt]?(f=f.i,K=String(v).toString(),K in f.g&&(v=f.g[K],T=Oe(v,T,I,z),T>-1&&(we(v[T]),Array.prototype.splice.call(v,T,1),v.length==0&&(delete f.g[K],f.h--)))):f&&(f=za(f))&&(v=f.g[v.toString()],f=-1,v&&(f=Oe(v,T,I,z)),(T=f>-1?v[f]:null)&&rl(T))}function rl(f){if(typeof f!="number"&&f&&!f.da){var v=f.src;if(v&&v[Wt])Ae(v.i,f);else{var T=f.type,I=f.proxy;v.removeEventListener?v.removeEventListener(T,I,f.capture):v.detachEvent?v.detachEvent(Zi(T),I):v.addListener&&v.removeListener&&v.removeListener(I),(T=za(v))?(Ae(T,f),T.h==0&&(T.src=null,v[qe]=null)):we(f)}}}function Zi(f){return f in Xt?Xt[f]:Xt[f]="on"+f}function tc(f,v){if(f.da)f=!0;else{v=new Et(v,this);const T=f.listener,I=f.ha||f.src;f.fa&&rl(f),f=T.call(I,v)}return f}function za(f){return f=f[qe],f instanceof de?f:null}var nc="__closure_events_fn_"+(Math.random()*1e9>>>0);function ic(f){return typeof f=="function"?f:(f[nc]||(f[nc]=function(v){return f.handleEvent(v)}),f[nc])}function Ft(){k.call(this),this.i=new de(this),this.M=this,this.G=null}y(Ft,k),Ft.prototype[Wt]=!0,Ft.prototype.removeEventListener=function(f,v,T,I){il(this,f,v,T,I)};function Jt(f,v){var T,I=f.G;if(I)for(T=[];I;I=I.G)T.push(I);if(f=f.M,I=v.type||v,typeof v=="string")v=new x(v,f);else if(v instanceof x)v.target=v.target||f;else{var z=v;v=new x(I,f),ue(v,z)}z=!0;let K,se;if(T)for(se=T.length-1;se>=0;se--)K=v.g=T[se],z=Ss(K,I,!0,v)&&z;if(K=v.g=f,z=Ss(K,I,!0,v)&&z,z=Ss(K,I,!1,v)&&z,T)for(se=0;se<T.length;se++)K=v.g=T[se],z=Ss(K,I,!1,v)&&z}Ft.prototype.N=function(){if(Ft.Z.N.call(this),this.i){var f=this.i;for(const v in f.g){const T=f.g[v];for(let I=0;I<T.length;I++)we(T[I]);delete f.g[v],f.h--}}this.G=null},Ft.prototype.J=function(f,v,T,I){return this.i.add(String(f),v,!1,T,I)},Ft.prototype.K=function(f,v,T,I){return this.i.add(String(f),v,!0,T,I)};function Ss(f,v,T,I){if(v=f.i.g[String(v)],!v)return!0;v=v.concat();let z=!0;for(let K=0;K<v.length;++K){const se=v[K];if(se&&!se.da&&se.capture==T){const Ce=se.listener,Pt=se.ha||se.src;se.fa&&Ae(f.i,se),z=Ce.call(Pt,I)!==!1&&z}}return z&&!I.defaultPrevented}function wg(f,v){if(typeof f!="function")if(f&&typeof f.handleEvent=="function")f=p(f.handleEvent,f);else throw Error("Invalid listener argument");return Number(v)>2147483647?-1:u.setTimeout(f,v||0)}function $f(f){f.g=wg(()=>{f.g=null,f.i&&(f.i=!1,$f(f))},f.l);const v=f.h;f.h=null,f.m.apply(null,v)}class On extends k{constructor(v,T){super(),this.m=v,this.l=T,this.h=null,this.i=!1,this.g=null}j(v){this.h=arguments,this.g?this.i=!0:$f(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function qa(f){k.call(this),this.h=f,this.g={}}y(qa,k);var rc=[];function sc(f){Qe(f.g,function(v,T){this.g.hasOwnProperty(T)&&rl(v)},f),f.g={}}qa.prototype.N=function(){qa.Z.N.call(this),sc(this)},qa.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Is=u.JSON.stringify,Sg=u.JSON.parse,Yf=class{stringify(f){return u.JSON.stringify(f,void 0)}parse(f){return u.JSON.parse(f,void 0)}};function Wf(){}function Xf(){}var Ri={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function fn(){x.call(this,"d")}y(fn,x);function li(){x.call(this,"c")}y(li,x);var xt={},Jf=null;function sl(){return Jf=Jf||new Ft}xt.Ia="serverreachability";function Zf(f){x.call(this,xt.Ia,f)}y(Zf,x);function er(f){const v=sl();Jt(v,new Zf(v))}xt.STAT_EVENT="statevent";function ja(f,v){x.call(this,xt.STAT_EVENT,f),this.stat=v}y(ja,x);function Bt(f){const v=sl();Jt(v,new ja(v,f))}xt.Ja="timingevent";function tr(f,v){x.call(this,xt.Ja,f),this.size=v}y(tr,x);function nr(f,v){if(typeof f!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){f()},v)}function Ci(){this.g=!0}Ci.prototype.ua=function(){this.g=!1};function Ig(f,v,T,I,z,K){f.info(function(){if(f.g)if(K){var se="",Ce=K.split("&");for(let Xe=0;Xe<Ce.length;Xe++){var Pt=Ce[Xe].split("=");if(Pt.length>1){const wt=Pt[0];Pt=Pt[1];const fi=wt.split("_");se=fi.length>=2&&fi[1]=="type"?se+(wt+"="+Pt+"&"):se+(wt+"=redacted&")}}}else se=null;else se=K;return"XMLHTTP REQ ("+I+") [attempt "+z+"]: "+v+`
`+T+`
`+se})}function ed(f,v,T,I,z,K,se){f.info(function(){return"XMLHTTP RESP ("+I+") [ attempt "+z+"]: "+v+`
`+T+`
`+K+" "+se})}function ir(f,v,T,I){f.info(function(){return"XMLHTTP TEXT ("+v+"): "+Ag(f,T)+(I?" "+I:"")})}function Ha(f,v){f.info(function(){return"TIMEOUT: "+v})}Ci.prototype.info=function(){};function Ag(f,v){if(!f.g)return v;if(!v)return null;try{const K=JSON.parse(v);if(K){for(f=0;f<K.length;f++)if(Array.isArray(K[f])){var T=K[f];if(!(T.length<2)){var I=T[1];if(Array.isArray(I)&&!(I.length<1)){var z=I[0];if(z!="noop"&&z!="stop"&&z!="close")for(let se=1;se<I.length;se++)I[se]=""}}}}return Is(K)}catch{return v}}var Ga={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},ac={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},oc;function Ka(){}y(Ka,Wf),Ka.prototype.g=function(){return new XMLHttpRequest},oc=new Ka;function Ur(f){return encodeURIComponent(String(f))}function td(f){var v=1;f=f.split(":");const T=[];for(;v>0&&f.length;)T.push(f.shift()),v--;return f.length&&T.push(f.join(":")),T}function Ni(f,v,T,I){this.j=f,this.i=v,this.l=T,this.S=I||1,this.V=new qa(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Di}function Di(){this.i=null,this.g="",this.h=!1}var zt={},nn={};function rr(f,v,T){f.M=1,f.A=Qa(jt(v)),f.u=T,f.R=!0,al(f,null)}function al(f,v){f.F=Date.now(),sr(f),f.B=jt(f.A);var T=f.B,I=f.S;Array.isArray(I)||(I=[String(I)]),cl(T.i,"t",I),f.C=0,T=f.j.L,f.h=new Di,f.g=gd(f.j,T?v:null,!f.u),f.P>0&&(f.O=new On(p(f.Y,f,f.g),f.P)),v=f.V,T=f.g,I=f.ba;var z="readystatechange";Array.isArray(z)||(z&&(rc[0]=z.toString()),z=rc);for(let K=0;K<z.length;K++){const se=Tt(T,z[K],I||v.handleEvent,!1,v.h||v);if(!se)break;v.g[se.key]=se}v=f.J?M(f.J):{},f.u?(f.v||(f.v="POST"),v["Content-Type"]="application/x-www-form-urlencoded",f.g.ea(f.B,f.v,f.u,v)):(f.v="GET",f.g.ea(f.B,f.v,null,v)),er(),Ig(f.i,f.v,f.B,f.l,f.S,f.u)}Ni.prototype.ba=function(f){f=f.target;const v=this.O;v&&Pi(f)==3?v.j():this.Y(f)},Ni.prototype.Y=function(f){try{if(f==this.g)e:{const Ce=Pi(this.g),Pt=this.g.ya(),Xe=this.g.ca();if(!(Ce<3)&&(Ce!=3||this.g&&(this.h.h||this.g.la()||dn(this.g)))){this.K||Ce!=4||Pt==7||(Pt==8||Xe<=0?er(3):er(2)),ar(this);var v=this.g.ca();this.X=v;var T=bg(this);if(this.o=v==200,ed(this.i,this.v,this.B,this.l,this.S,Ce,v),this.o){if(this.U&&!this.L){t:{if(this.g){var I,z=this.g;if((I=z.g?z.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!N(I)){var K=I;break t}}K=null}if(f=K)ir(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,or(this,f);else{this.o=!1,this.m=3,Bt(12),Yn(this),ui(this);break e}}if(this.R){f=!0;let wt;for(;!this.K&&this.C<T.length;)if(wt=id(this,T),wt==nn){Ce==4&&(this.m=4,Bt(14),f=!1),ir(this.i,this.l,null,"[Incomplete Response]");break}else if(wt==zt){this.m=4,Bt(15),ir(this.i,this.l,T,"[Invalid Chunk]"),f=!1;break}else ir(this.i,this.l,wt,null),or(this,wt);if(nd(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ce!=4||T.length!=0||this.h.h||(this.m=1,Bt(16),f=!1),this.o=this.o&&f,!f)ir(this.i,this.l,T,"[Invalid Chunked Response]"),Yn(this),ui(this);else if(T.length>0&&!this.W){this.W=!0;var se=this.j;se.g==this&&se.aa&&!se.P&&(se.j.info("Great, no buffering proxy detected. Bytes received: "+T.length),wc(se),se.P=!0,Bt(11))}}else ir(this.i,this.l,T,null),or(this,T);Ce==4&&Yn(this),this.o&&!this.K&&(Ce==4?fd(this.j,this):(this.o=!1,sr(this)))}else Br(this.g),v==400&&T.indexOf("Unknown SID")>0?(this.m=3,Bt(12)):(this.m=0,Bt(13)),Yn(this),ui(this)}}}catch{}finally{}};function bg(f){if(!nd(f))return f.g.la();const v=dn(f.g);if(v==="")return"";let T="";const I=v.length,z=Pi(f.g)==4;if(!f.h.i){if(typeof TextDecoder>"u")return Yn(f),ui(f),"";f.h.i=new u.TextDecoder}for(let K=0;K<I;K++)f.h.h=!0,T+=f.h.i.decode(v[K],{stream:!(z&&K==I-1)});return v.length=0,f.h.g+=T,f.C=0,f.h.g}function nd(f){return f.g?f.v=="GET"&&f.M!=2&&f.j.Aa:!1}function id(f,v){var T=f.C,I=v.indexOf(`
`,T);return I==-1?nn:(T=Number(v.substring(T,I)),isNaN(T)?zt:(I+=1,I+T>v.length?nn:(v=v.slice(I,I+T),f.C=I+T,v)))}Ni.prototype.cancel=function(){this.K=!0,Yn(this)};function sr(f){f.T=Date.now()+f.H,ol(f,f.H)}function ol(f,v){if(f.D!=null)throw Error("WatchDog timer not null");f.D=nr(p(f.aa,f),v)}function ar(f){f.D&&(u.clearTimeout(f.D),f.D=null)}Ni.prototype.aa=function(){this.D=null;const f=Date.now();f-this.T>=0?(Ha(this.i,this.B),this.M!=2&&(er(),Bt(17)),Yn(this),this.m=2,ui(this)):ol(this,this.T-f)};function ui(f){f.j.I==0||f.K||fd(f.j,f)}function Yn(f){ar(f);var v=f.O;v&&typeof v.dispose=="function"&&v.dispose(),f.O=null,sc(f.V),f.g&&(v=f.g,f.g=null,v.abort(),v.dispose())}function or(f,v){try{var T=f.j;if(T.I!=0&&(T.g==f||ur(T.h,f))){if(!f.L&&ur(T.h,f)&&T.I==3){try{var I=T.Ba.g.parse(v)}catch{I=null}if(Array.isArray(I)&&I.length==3){var z=I;if(z[0]==0){e:if(!T.v){if(T.g)if(T.g.F+3e3<f.F)pl(T),xs(T);else break e;eo(T),Bt(18)}}else T.xa=z[1],0<T.xa-T.K&&z[2]<37500&&T.F&&T.A==0&&!T.C&&(T.C=nr(p(T.Va,T),6e3));lr(T.h)<=1&&T.ta&&(T.ta=void 0)}else pr(T,11)}else if((f.L||T.g==f)&&pl(T),!N(v))for(z=T.Ba.g.parse(v),v=0;v<z.length;v++){let Xe=z[v];const wt=Xe[0];if(!(wt<=T.K))if(T.K=wt,Xe=Xe[1],T.I==2)if(Xe[0]=="c"){T.M=Xe[1],T.ba=Xe[2];const fi=Xe[3];fi!=null&&(T.ka=fi,T.j.info("VER="+T.ka));const gr=Xe[4];gr!=null&&(T.za=gr,T.j.info("SVER="+T.za));const Mi=Xe[5];Mi!=null&&typeof Mi=="number"&&Mi>0&&(I=1.5*Mi,T.O=I,T.j.info("backChannelRequestTimeoutMs_="+I)),I=T;const ki=f.g;if(ki){const to=ki.g?ki.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(to){var K=I.h;K.g||to.indexOf("spdy")==-1&&to.indexOf("quic")==-1&&to.indexOf("h2")==-1||(K.j=K.l,K.g=new Set,K.h&&(cc(K,K.h),K.h=null))}if(I.G){const gl=ki.g?ki.g.getResponseHeader("X-HTTP-Session-Id"):null;gl&&(I.wa=gl,nt(I.J,I.G,gl))}}T.I=3,T.l&&T.l.ra(),T.aa&&(T.T=Date.now()-f.F,T.j.info("Handshake RTT: "+T.T+"ms")),I=T;var se=f;if(I.na=pd(I,I.L?I.ba:null,I.W),se.L){hc(I.h,se);var Ce=se,Pt=I.O;Pt&&(Ce.H=Pt),Ce.D&&(ar(Ce),sr(Ce)),I.g=se}else cd(I);T.i.length>0&&mr(T)}else Xe[0]!="stop"&&Xe[0]!="close"||pr(T,7);else T.I==3&&(Xe[0]=="stop"||Xe[0]=="close"?Xe[0]=="stop"?pr(T,7):Ec(T):Xe[0]!="noop"&&T.l&&T.l.qa(Xe),T.A=0)}}er(4)}catch{}}var qt=class{constructor(f,v){this.g=f,this.map=v}};function lc(f){this.l=f||10,u.PerformanceNavigationTiming?(f=u.performance.getEntriesByType("navigation"),f=f.length>0&&(f[0].nextHopProtocol=="hq"||f[0].nextHopProtocol=="h2")):f=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=f?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function uc(f){return f.h?!0:f.g?f.g.size>=f.j:!1}function lr(f){return f.h?1:f.g?f.g.size:0}function ur(f,v){return f.h?f.h==v:f.g?f.g.has(v):!1}function cc(f,v){f.g?f.g.add(v):f.h=v}function hc(f,v){f.h&&f.h==v?f.h=null:f.g&&f.g.has(v)&&f.g.delete(v)}lc.prototype.cancel=function(){if(this.i=fc(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const f of this.g.values())f.cancel();this.g.clear()}};function fc(f){if(f.h!=null)return f.i.concat(f.h.G);if(f.g!=null&&f.g.size!==0){let v=f.i;for(const T of f.g.values())v=v.concat(T.G);return v}return A(f.i)}var rd=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ll(f,v){if(f){f=f.split("&");for(let T=0;T<f.length;T++){const I=f[T].indexOf("=");let z,K=null;I>=0?(z=f[T].substring(0,I),K=f[T].substring(I+1)):z=f[T],v(z,K?decodeURIComponent(K.replace(/\+/g," ")):"")}}}function Wn(f){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let v;f instanceof Wn?(this.l=f.l,rn(this,f.j),this.o=f.o,this.g=f.g,As(this,f.u),this.h=f.h,dc(this,ld(f.i)),this.m=f.m):f&&(v=String(f).match(rd))?(this.l=!1,rn(this,v[1]||"",!0),this.o=cr(v[2]||""),this.g=cr(v[3]||"",!0),As(this,v[4]),this.h=cr(v[5]||"",!0),dc(this,v[6]||"",!0),this.m=cr(v[7]||"")):(this.l=!1,this.i=new Rs(null,this.l))}Wn.prototype.toString=function(){const f=[];var v=this.j;v&&f.push($a(v,ul,!0),":");var T=this.g;return(T||v=="file")&&(f.push("//"),(v=this.o)&&f.push($a(v,ul,!0),"@"),f.push(Ur(T).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),T=this.u,T!=null&&f.push(":",String(T))),(T=this.h)&&(this.g&&T.charAt(0)!="/"&&f.push("/"),f.push($a(T,T.charAt(0)=="/"?mc:sd,!0))),(T=this.i.toString())&&f.push("?",T),(T=this.m)&&f.push("#",$a(T,ad)),f.join("")},Wn.prototype.resolve=function(f){const v=jt(this);let T=!!f.j;T?rn(v,f.j):T=!!f.o,T?v.o=f.o:T=!!f.g,T?v.g=f.g:T=f.u!=null;var I=f.h;if(T)As(v,f.u);else if(T=!!f.h){if(I.charAt(0)!="/")if(this.g&&!this.h)I="/"+I;else{var z=v.h.lastIndexOf("/");z!=-1&&(I=v.h.slice(0,z+1)+I)}if(z=I,z==".."||z==".")I="";else if(z.indexOf("./")!=-1||z.indexOf("/.")!=-1){I=z.lastIndexOf("/",0)==0,z=z.split("/");const K=[];for(let se=0;se<z.length;){const Ce=z[se++];Ce=="."?I&&se==z.length&&K.push(""):Ce==".."?((K.length>1||K.length==1&&K[0]!="")&&K.pop(),I&&se==z.length&&K.push("")):(K.push(Ce),I=!0)}I=K.join("/")}else I=z}return T?v.h=I:T=f.i.toString()!=="",T?dc(v,ld(f.i)):T=!!f.m,T&&(v.m=f.m),v};function jt(f){return new Wn(f)}function rn(f,v,T){f.j=T?cr(v,!0):v,f.j&&(f.j=f.j.replace(/:$/,""))}function As(f,v){if(v){if(v=Number(v),isNaN(v)||v<0)throw Error("Bad port number "+v);f.u=v}else f.u=null}function dc(f,v,T){v instanceof Rs?(f.i=v,hl(f.i,f.l)):(T||(v=$a(v,bs)),f.i=new Rs(v,f.l))}function nt(f,v,T){f.i.set(v,T)}function Qa(f){return nt(f,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),f}function cr(f,v){return f?v?decodeURI(f.replace(/%25/g,"%2525")):decodeURIComponent(f):""}function $a(f,v,T){return typeof f=="string"?(f=encodeURI(f).replace(v,Un),T&&(f=f.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f):null}function Un(f){return f=f.charCodeAt(0),"%"+(f>>4&15).toString(16)+(f&15).toString(16)}var ul=/[#\/\?@]/g,sd=/[#\?:]/g,mc=/[#\?]/g,bs=/[#\?@]/g,ad=/#/g;function Rs(f,v){this.h=this.g=null,this.i=f||null,this.j=!!v}function Fn(f){f.g||(f.g=new Map,f.h=0,f.i&&ll(f.i,function(v,T){f.add(decodeURIComponent(v.replace(/\+/g," ")),T)}))}n=Rs.prototype,n.add=function(f,v){Fn(this),this.i=null,f=Cs(this,f);let T=this.g.get(f);return T||this.g.set(f,T=[]),T.push(v),this.h+=1,this};function od(f,v){Fn(f),v=Cs(f,v),f.g.has(v)&&(f.i=null,f.h-=f.g.get(v).length,f.g.delete(v))}function pc(f,v){return Fn(f),v=Cs(f,v),f.g.has(v)}n.forEach=function(f,v){Fn(this),this.g.forEach(function(T,I){T.forEach(function(z){f.call(v,z,I,this)},this)},this)};function gc(f,v){Fn(f);let T=[];if(typeof v=="string")pc(f,v)&&(T=T.concat(f.g.get(Cs(f,v))));else for(f=Array.from(f.g.values()),v=0;v<f.length;v++)T=T.concat(f[v]);return T}n.set=function(f,v){return Fn(this),this.i=null,f=Cs(this,f),pc(this,f)&&(this.h-=this.g.get(f).length),this.g.set(f,[v]),this.h+=1,this},n.get=function(f,v){return f?(f=gc(this,f),f.length>0?String(f[0]):v):v};function cl(f,v,T){od(f,v),T.length>0&&(f.i=null,f.g.set(Cs(f,v),A(T)),f.h+=T.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const f=[],v=Array.from(this.g.keys());for(let I=0;I<v.length;I++){var T=v[I];const z=Ur(T);T=gc(this,T);for(let K=0;K<T.length;K++){let se=z;T[K]!==""&&(se+="="+Ur(T[K])),f.push(se)}}return this.i=f.join("&")};function ld(f){const v=new Rs;return v.i=f.i,f.g&&(v.g=new Map(f.g),v.h=f.h),v}function Cs(f,v){return v=String(v),f.j&&(v=v.toLowerCase()),v}function hl(f,v){v&&!f.j&&(Fn(f),f.i=null,f.g.forEach(function(T,I){const z=I.toLowerCase();I!=z&&(od(this,I),cl(this,z,T))},f)),f.j=v}function Oi(f,v){const T=new Ci;if(u.Image){const I=new Image;I.onload=_(ci,T,"TestLoadImage: loaded",!0,v,I),I.onerror=_(ci,T,"TestLoadImage: error",!1,v,I),I.onabort=_(ci,T,"TestLoadImage: abort",!1,v,I),I.ontimeout=_(ci,T,"TestLoadImage: timeout",!1,v,I),u.setTimeout(function(){I.ontimeout&&I.ontimeout()},1e4),I.src=f}else v(!1)}function _c(f,v){const T=new Ci,I=new AbortController,z=setTimeout(()=>{I.abort(),ci(T,"TestPingServer: timeout",!1,v)},1e4);fetch(f,{signal:I.signal}).then(K=>{clearTimeout(z),K.ok?ci(T,"TestPingServer: ok",!0,v):ci(T,"TestPingServer: server error",!1,v)}).catch(()=>{clearTimeout(z),ci(T,"TestPingServer: error",!1,v)})}function ci(f,v,T,I,z){try{z&&(z.onload=null,z.onerror=null,z.onabort=null,z.ontimeout=null),I(T)}catch{}}function Ns(){this.g=new Yf}function hr(f){this.i=f.Sb||null,this.h=f.ab||!1}y(hr,Wf),hr.prototype.g=function(){return new Ya(this.i,this.h)};function Ya(f,v){Ft.call(this),this.H=f,this.o=v,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}y(Ya,Ft),n=Ya.prototype,n.open=function(f,v){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=f,this.D=v,this.readyState=1,xi(this)},n.send=function(f){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const v={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};f&&(v.body=f),(this.H||u).fetch(new Request(this.D,v)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Ds(this)),this.readyState=0},n.Pa=function(f){if(this.g&&(this.l=f,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=f.headers,this.readyState=2,xi(this)),this.g&&(this.readyState=3,xi(this),this.g)))if(this.responseType==="arraybuffer")f.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in f){if(this.j=f.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;fl(this)}else f.text().then(this.Oa.bind(this),this.ga.bind(this))};function fl(f){f.j.read().then(f.Ma.bind(f)).catch(f.ga.bind(f))}n.Ma=function(f){if(this.g){if(this.o&&f.value)this.response.push(f.value);else if(!this.o){var v=f.value?f.value:new Uint8Array(0);(v=this.B.decode(v,{stream:!f.done}))&&(this.response=this.responseText+=v)}f.done?Ds(this):xi(this),this.readyState==3&&fl(this)}},n.Oa=function(f){this.g&&(this.response=this.responseText=f,Ds(this))},n.Na=function(f){this.g&&(this.response=f,Ds(this))},n.ga=function(){this.g&&Ds(this)};function Ds(f){f.readyState=4,f.l=null,f.j=null,f.B=null,xi(f)}n.setRequestHeader=function(f,v){this.A.append(f,v)},n.getResponseHeader=function(f){return this.h&&this.h.get(f.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const f=[],v=this.h.entries();for(var T=v.next();!T.done;)T=T.value,f.push(T[0]+": "+T[1]),T=v.next();return f.join(`\r
`)};function xi(f){f.onreadystatechange&&f.onreadystatechange.call(f)}Object.defineProperty(Ya.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(f){this.m=f?"include":"same-origin"}});function hi(f){let v="";return Qe(f,function(T,I){v+=I,v+=":",v+=T,v+=`\r
`}),v}function Wa(f,v,T){e:{for(I in T){var I=!1;break e}I=!0}I||(T=hi(T),typeof f=="string"?T!=null&&Ur(T):nt(f,v,T))}function ot(f){Ft.call(this),this.headers=new Map,this.L=f||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}y(ot,Ft);var fr=/^https?$/i,yc=["POST","PUT"];n=ot.prototype,n.Fa=function(f){this.H=f},n.ea=function(f,v,T,I){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+f);v=v?v.toUpperCase():"GET",this.D=f,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():oc.g(),this.g.onreadystatechange=w(p(this.Ca,this));try{this.B=!0,this.g.open(v,String(f),!0),this.B=!1}catch(K){Xa(this,K);return}if(f=T||"",T=new Map(this.headers),I)if(Object.getPrototypeOf(I)===Object.prototype)for(var z in I)T.set(z,I[z]);else if(typeof I.keys=="function"&&typeof I.get=="function")for(const K of I.keys())T.set(K,I.get(K));else throw Error("Unknown input type for opt_headers: "+String(I));I=Array.from(T.keys()).find(K=>K.toLowerCase()=="content-type"),z=u.FormData&&f instanceof u.FormData,!(Array.prototype.indexOf.call(yc,v,void 0)>=0)||I||z||T.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[K,se]of T)this.g.setRequestHeader(K,se);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(f),this.v=!1}catch(K){Xa(this,K)}};function Xa(f,v){f.h=!1,f.g&&(f.j=!0,f.g.abort(),f.j=!1),f.l=v,f.o=5,vc(f),Fr(f)}function vc(f){f.A||(f.A=!0,Jt(f,"complete"),Jt(f,"error"))}n.abort=function(f){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=f||7,Jt(this,"complete"),Jt(this,"abort"),Fr(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Fr(this,!0)),ot.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?Ja(this):this.Xa())},n.Xa=function(){Ja(this)};function Ja(f){if(f.h&&typeof o<"u"){if(f.v&&Pi(f)==4)setTimeout(f.Ca.bind(f),0);else if(Jt(f,"readystatechange"),Pi(f)==4){f.h=!1;try{const K=f.ca();e:switch(K){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var v=!0;break e;default:v=!1}var T;if(!(T=v)){var I;if(I=K===0){let se=String(f.D).match(rd)[1]||null;!se&&u.self&&u.self.location&&(se=u.self.location.protocol.slice(0,-1)),I=!fr.test(se?se.toLowerCase():"")}T=I}if(T)Jt(f,"complete"),Jt(f,"success");else{f.o=6;try{var z=Pi(f)>2?f.g.statusText:""}catch{z=""}f.l=z+" ["+f.ca()+"]",vc(f)}}finally{Fr(f)}}}}function Fr(f,v){if(f.g){f.m&&(clearTimeout(f.m),f.m=null);const T=f.g;f.g=null,v||Jt(f,"ready");try{T.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function Pi(f){return f.g?f.g.readyState:0}n.ca=function(){try{return Pi(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(f){if(this.g){var v=this.g.responseText;return f&&v.indexOf(f)==0&&(v=v.substring(f.length)),Sg(v)}};function dn(f){try{if(!f.g)return null;if("response"in f.g)return f.g.response;switch(f.F){case"":case"text":return f.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in f.g)return f.g.mozResponseArrayBuffer}return null}catch{return null}}function Br(f){const v={};f=(f.g&&Pi(f)>=2&&f.g.getAllResponseHeaders()||"").split(`\r
`);for(let I=0;I<f.length;I++){if(N(f[I]))continue;var T=td(f[I]);const z=T[0];if(T=T[1],typeof T!="string")continue;T=T.trim();const K=v[z]||[];v[z]=K,K.push(T)}tt(v,function(I){return I.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function dr(f,v,T){return T&&T.internalChannelParams&&T.internalChannelParams[f]||v}function Os(f){this.za=0,this.i=[],this.j=new Ci,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=dr("failFast",!1,f),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=dr("baseRetryDelayMs",5e3,f),this.Za=dr("retryDelaySeedMs",1e4,f),this.Ta=dr("forwardChannelMaxRetries",2,f),this.va=dr("forwardChannelRequestTimeoutMs",2e4,f),this.ma=f&&f.xmlHttpFactory||void 0,this.Ua=f&&f.Rb||void 0,this.Aa=f&&f.useFetchStreams||!1,this.O=void 0,this.L=f&&f.supportsCrossDomainXhr||!1,this.M="",this.h=new lc(f&&f.concurrentRequestLimit),this.Ba=new Ns,this.S=f&&f.fastHandshake||!1,this.R=f&&f.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=f&&f.Pb||!1,f&&f.ua&&this.j.ua(),f&&f.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&f&&f.detectBufferingProxy||!1,this.ia=void 0,f&&f.longPollingTimeout&&f.longPollingTimeout>0&&(this.ia=f.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=Os.prototype,n.ka=8,n.I=1,n.connect=function(f,v,T,I){Bt(0),this.W=f,this.H=v||{},T&&I!==void 0&&(this.H.OSID=T,this.H.OAID=I),this.F=this.X,this.J=pd(this,null,this.W),mr(this)};function Ec(f){if(dl(f),f.I==3){var v=f.V++,T=jt(f.J);if(nt(T,"SID",f.M),nt(T,"RID",v),nt(T,"TYPE","terminate"),Za(f,T),v=new Ni(f,f.j,v),v.M=2,v.A=Qa(jt(T)),T=!1,u.navigator&&u.navigator.sendBeacon)try{T=u.navigator.sendBeacon(v.A.toString(),"")}catch{}!T&&u.Image&&(new Image().src=v.A,T=!0),T||(v.g=gd(v.j,null),v.g.ea(v.A)),v.F=Date.now(),sr(v)}md(f)}function xs(f){f.g&&(wc(f),f.g.cancel(),f.g=null)}function dl(f){xs(f),f.v&&(u.clearTimeout(f.v),f.v=null),pl(f),f.h.cancel(),f.m&&(typeof f.m=="number"&&u.clearTimeout(f.m),f.m=null)}function mr(f){if(!uc(f.h)&&!f.m){f.m=!0;var v=f.Ea;ye||b(),ve||(ye(),ve=!0),R.add(v,f),f.D=0}}function ml(f,v){return lr(f.h)>=f.h.j-(f.m?1:0)?!1:f.m?(f.i=v.G.concat(f.i),!0):f.I==1||f.I==2||f.D>=(f.Sa?0:f.Ta)?!1:(f.m=nr(p(f.Ea,f,v),dd(f,f.D)),f.D++,!0)}n.Ea=function(f){if(this.m)if(this.m=null,this.I==1){if(!f){this.V=Math.floor(Math.random()*1e5),f=this.V++;const z=new Ni(this,this.j,f);let K=this.o;if(this.U&&(K?(K=M(K),ue(K,this.U)):K=this.U),this.u!==null||this.R||(z.J=K,K=null),this.S)e:{for(var v=0,T=0;T<this.i.length;T++){t:{var I=this.i[T];if("__data__"in I.map&&(I=I.map.__data__,typeof I=="string")){I=I.length;break t}I=void 0}if(I===void 0)break;if(v+=I,v>4096){v=T;break e}if(v===4096||T===this.i.length-1){v=T+1;break e}}v=1e3}else v=1e3;v=ud(this,z,v),T=jt(this.J),nt(T,"RID",f),nt(T,"CVER",22),this.G&&nt(T,"X-HTTP-Session-Id",this.G),Za(this,T),K&&(this.R?v="headers="+Ur(hi(K))+"&"+v:this.u&&Wa(T,this.u,K)),cc(this.h,z),this.Ra&&nt(T,"TYPE","init"),this.S?(nt(T,"$req",v),nt(T,"SID","null"),z.U=!0,rr(z,T,null)):rr(z,T,v),this.I=2}}else this.I==3&&(f?Tc(this,f):this.i.length==0||uc(this.h)||Tc(this))};function Tc(f,v){var T;v?T=v.l:T=f.V++;const I=jt(f.J);nt(I,"SID",f.M),nt(I,"RID",T),nt(I,"AID",f.K),Za(f,I),f.u&&f.o&&Wa(I,f.u,f.o),T=new Ni(f,f.j,T,f.D+1),f.u===null&&(T.J=f.o),v&&(f.i=v.G.concat(f.i)),v=ud(f,T,1e3),T.H=Math.round(f.va*.5)+Math.round(f.va*.5*Math.random()),cc(f.h,T),rr(T,I,v)}function Za(f,v){f.H&&Qe(f.H,function(T,I){nt(v,I,T)}),f.l&&Qe({},function(T,I){nt(v,I,T)})}function ud(f,v,T){T=Math.min(f.i.length,T);const I=f.l?p(f.l.Ka,f.l,f):null;e:{var z=f.i;let Ce=-1;for(;;){const Pt=["count="+T];Ce==-1?T>0?(Ce=z[0].g,Pt.push("ofs="+Ce)):Ce=0:Pt.push("ofs="+Ce);let Xe=!0;for(let wt=0;wt<T;wt++){var K=z[wt].g;const fi=z[wt].map;if(K-=Ce,K<0)Ce=Math.max(0,z[wt].g-100),Xe=!1;else try{K="req"+K+"_"||"";try{var se=fi instanceof Map?fi:Object.entries(fi);for(const[gr,Mi]of se){let ki=Mi;h(Mi)&&(ki=Is(Mi)),Pt.push(K+gr+"="+encodeURIComponent(ki))}}catch(gr){throw Pt.push(K+"type="+encodeURIComponent("_badmap")),gr}}catch{I&&I(fi)}}if(Xe){se=Pt.join("&");break e}}se=void 0}return f=f.i.splice(0,T),v.G=f,se}function cd(f){if(!f.g&&!f.v){f.Y=1;var v=f.Da;ye||b(),ve||(ye(),ve=!0),R.add(v,f),f.A=0}}function eo(f){return f.g||f.v||f.A>=3?!1:(f.Y++,f.v=nr(p(f.Da,f),dd(f,f.A)),f.A++,!0)}n.Da=function(){if(this.v=null,hd(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var f=4*this.T;this.j.info("BP detection timer enabled: "+f),this.B=nr(p(this.Wa,this),f)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Bt(10),xs(this),hd(this))};function wc(f){f.B!=null&&(u.clearTimeout(f.B),f.B=null)}function hd(f){f.g=new Ni(f,f.j,"rpc",f.Y),f.u===null&&(f.g.J=f.o),f.g.P=0;var v=jt(f.na);nt(v,"RID","rpc"),nt(v,"SID",f.M),nt(v,"AID",f.K),nt(v,"CI",f.F?"0":"1"),!f.F&&f.ia&&nt(v,"TO",f.ia),nt(v,"TYPE","xmlhttp"),Za(f,v),f.u&&f.o&&Wa(v,f.u,f.o),f.O&&(f.g.H=f.O);var T=f.g;f=f.ba,T.M=1,T.A=Qa(jt(v)),T.u=null,T.R=!0,al(T,f)}n.Va=function(){this.C!=null&&(this.C=null,xs(this),eo(this),Bt(19))};function pl(f){f.C!=null&&(u.clearTimeout(f.C),f.C=null)}function fd(f,v){var T=null;if(f.g==v){pl(f),wc(f),f.g=null;var I=2}else if(ur(f.h,v))T=v.G,hc(f.h,v),I=1;else return;if(f.I!=0){if(v.o)if(I==1){T=v.u?v.u.length:0,v=Date.now()-v.F;var z=f.D;I=sl(),Jt(I,new tr(I,T)),mr(f)}else cd(f);else if(z=v.m,z==3||z==0&&v.X>0||!(I==1&&ml(f,v)||I==2&&eo(f)))switch(T&&T.length>0&&(v=f.h,v.i=v.i.concat(T)),z){case 1:pr(f,5);break;case 4:pr(f,10);break;case 3:pr(f,6);break;default:pr(f,2)}}}function dd(f,v){let T=f.Qa+Math.floor(Math.random()*f.Za);return f.isActive()||(T*=2),T*v}function pr(f,v){if(f.j.info("Error code "+v),v==2){var T=p(f.bb,f),I=f.Ua;const z=!I;I=new Wn(I||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||rn(I,"https"),Qa(I),z?Oi(I.toString(),T):_c(I.toString(),T)}else Bt(2);f.I=0,f.l&&f.l.pa(v),md(f),dl(f)}n.bb=function(f){f?(this.j.info("Successfully pinged google.com"),Bt(2)):(this.j.info("Failed to ping google.com"),Bt(1))};function md(f){if(f.I=0,f.ja=[],f.l){const v=fc(f.h);(v.length!=0||f.i.length!=0)&&(O(f.ja,v),O(f.ja,f.i),f.h.i.length=0,A(f.i),f.i.length=0),f.l.oa()}}function pd(f,v,T){var I=T instanceof Wn?jt(T):new Wn(T);if(I.g!="")v&&(I.g=v+"."+I.g),As(I,I.u);else{var z=u.location;I=z.protocol,v=v?v+"."+z.hostname:z.hostname,z=+z.port;const K=new Wn(null);I&&rn(K,I),v&&(K.g=v),z&&As(K,z),T&&(K.h=T),I=K}return T=f.G,v=f.wa,T&&v&&nt(I,T,v),nt(I,"VER",f.ka),Za(f,I),I}function gd(f,v,T){if(v&&!f.L)throw Error("Can't create secondary domain capable XhrIo object.");return v=f.Aa&&!f.ma?new ot(new hr({ab:T})):new ot(f.ma),v.Fa(f.L),v}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function _d(){}n=_d.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function Ps(){}Ps.prototype.g=function(f,v){return new xn(f,v)};function xn(f,v){Ft.call(this),this.g=new Os(v),this.l=f,this.h=v&&v.messageUrlParams||null,f=v&&v.messageHeaders||null,v&&v.clientProtocolHeaderRequired&&(f?f["X-Client-Protocol"]="webchannel":f={"X-Client-Protocol":"webchannel"}),this.g.o=f,f=v&&v.initMessageHeaders||null,v&&v.messageContentType&&(f?f["X-WebChannel-Content-Type"]=v.messageContentType:f={"X-WebChannel-Content-Type":v.messageContentType}),v&&v.sa&&(f?f["X-WebChannel-Client-Profile"]=v.sa:f={"X-WebChannel-Client-Profile":v.sa}),this.g.U=f,(f=v&&v.Qb)&&!N(f)&&(this.g.u=f),this.A=v&&v.supportsCrossDomainXhr||!1,this.v=v&&v.sendRawJson||!1,(v=v&&v.httpSessionIdParam)&&!N(v)&&(this.g.G=v,f=this.h,f!==null&&v in f&&(f=this.h,v in f&&delete f[v])),this.j=new zr(this)}y(xn,Ft),xn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},xn.prototype.close=function(){Ec(this.g)},xn.prototype.o=function(f){var v=this.g;if(typeof f=="string"){var T={};T.__data__=f,f=T}else this.v&&(T={},T.__data__=Is(f),f=T);v.i.push(new qt(v.Ya++,f)),v.I==3&&mr(v)},xn.prototype.N=function(){this.g.l=null,delete this.j,Ec(this.g),delete this.g,xn.Z.N.call(this)};function yd(f){fn.call(this),f.__headers__&&(this.headers=f.__headers__,this.statusCode=f.__status__,delete f.__headers__,delete f.__status__);var v=f.__sm__;if(v){e:{for(const T in v){f=T;break e}f=void 0}(this.i=f)&&(f=this.i,v=v!==null&&f in v?v[f]:void 0),this.data=v}else this.data=f}y(yd,fn);function vd(){li.call(this),this.status=1}y(vd,li);function zr(f){this.g=f}y(zr,_d),zr.prototype.ra=function(){Jt(this.g,"a")},zr.prototype.qa=function(f){Jt(this.g,new yd(f))},zr.prototype.pa=function(f){Jt(this.g,new vd)},zr.prototype.oa=function(){Jt(this.g,"b")},Ps.prototype.createWebChannel=Ps.prototype.g,xn.prototype.send=xn.prototype.o,xn.prototype.open=xn.prototype.m,xn.prototype.close=xn.prototype.close,IC=function(){return new Ps},SC=function(){return sl()},wC=xt,rv={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Ga.NO_ERROR=0,Ga.TIMEOUT=8,Ga.HTTP_ERROR=6,Lm=Ga,ac.COMPLETE="complete",TC=ac,Xf.EventType=Ri,Ri.OPEN="a",Ri.CLOSE="b",Ri.ERROR="c",Ri.MESSAGE="d",Ft.prototype.listen=Ft.prototype.J,Th=Xf,ot.prototype.listenOnce=ot.prototype.K,ot.prototype.getLastError=ot.prototype.Ha,ot.prototype.getLastErrorCode=ot.prototype.ya,ot.prototype.getStatus=ot.prototype.ca,ot.prototype.getResponseJson=ot.prototype.La,ot.prototype.getResponseText=ot.prototype.la,ot.prototype.send=ot.prototype.ea,ot.prototype.setWithCredentials=ot.prototype.Fa,EC=ot}).apply(typeof Im<"u"?Im:typeof self<"u"?self:typeof window<"u"?window:{});const ZA="@firebase/firestore",eb="4.9.2";class ln{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ln.UNAUTHENTICATED=new ln(null),ln.GOOGLE_CREDENTIALS=new ln("google-credentials-uid"),ln.FIRST_PARTY=new ln("first-party-uid"),ln.MOCK_USER=new ln("mock-user");let ju="12.3.0";const Ta=new wf("@firebase/firestore");function Zl(){return Ta.logLevel}function cV(n){Ta.setLogLevel(n)}function re(n,...e){if(Ta.logLevel<=Pe.DEBUG){const t=e.map(pE);Ta.debug(`Firestore (${ju}): ${n}`,...t)}}function Vt(n,...e){if(Ta.logLevel<=Pe.ERROR){const t=e.map(pE);Ta.error(`Firestore (${ju}): ${n}`,...t)}}function Or(n,...e){if(Ta.logLevel<=Pe.WARN){const t=e.map(pE);Ta.warn(`Firestore (${ju}): ${n}`,...t)}}function pE(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}function he(n,e,t){let i="Unexpected state";typeof e=="string"?i=e:t=e,AC(n,i,t)}function AC(n,e,t){let i=`FIRESTORE (${ju}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{i+=" CONTEXT: "+JSON.stringify(t)}catch{i+=" CONTEXT: "+t}throw Vt(i),new Error(i)}function ge(n,e,t,i){let s="Unexpected state";typeof t=="string"?s=t:i=t,n||AC(e,s,i)}function hV(n,e){n||he(57014,e)}function oe(n,e){return n}const G={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ie extends Ji{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Tn{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class bC{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class fV{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(ln.UNAUTHENTICATED)))}shutdown(){}}class dV{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class mV{constructor(e){this.t=e,this.currentUser=ln.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){ge(this.o===void 0,42304);let i=this.i;const s=d=>this.i!==i?(i=this.i,t(d)):Promise.resolve();let o=new Tn;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Tn,e.enqueueRetryable((()=>s(this.currentUser)))};const u=()=>{const d=o;e.enqueueRetryable((async()=>{await d.promise,await s(this.currentUser)}))},h=d=>{re("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit((d=>h(d))),setTimeout((()=>{if(!this.auth){const d=this.t.getImmediate({optional:!0});d?h(d):(re("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Tn)}}),0),u()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((i=>this.i!==e?(re("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(ge(typeof i.accessToken=="string",31837,{l:i}),new bC(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ge(e===null||typeof e=="string",2055,{h:e}),new ln(e)}}class pV{constructor(e,t,i){this.P=e,this.T=t,this.I=i,this.type="FirstParty",this.user=ln.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class gV{constructor(e,t,i){this.P=e,this.T=t,this.I=i}getToken(){return Promise.resolve(new pV(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(ln.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class tb{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class _V{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,vn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){ge(this.o===void 0,3512);const i=o=>{o.error!=null&&re("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const u=o.token!==this.m;return this.m=o.token,re("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable((()=>i(o)))};const s=o=>{re("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((o=>s(o))),setTimeout((()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?s(o):re("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new tb(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(ge(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new tb(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function yV(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}class gE{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const s=yV(40);for(let o=0;o<s.length;++o)i.length<20&&s[o]<t&&(i+=e.charAt(s[o]%62))}return i}}function be(n,e){return n<e?-1:n>e?1:0}function sv(n,e){const t=Math.min(n.length,e.length);for(let i=0;i<t;i++){const s=n.charAt(i),o=e.charAt(i);if(s!==o)return Py(s)===Py(o)?be(s,o):Py(s)?1:-1}return be(n.length,e.length)}const vV=55296,EV=57343;function Py(n){const e=n.charCodeAt(0);return e>=vV&&e<=EV}function gu(n,e,t){return n.length===e.length&&n.every(((i,s)=>t(i,e[s])))}function RC(n){return n+"\0"}const nb="__name__";class Tr{constructor(e,t,i){t===void 0?t=0:t>e.length&&he(637,{offset:t,range:e.length}),i===void 0?i=e.length-t:i>e.length-t&&he(1746,{length:i,range:e.length-t}),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return Tr.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Tr?e.forEach((i=>{t.push(i)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let s=0;s<i;s++){const o=Tr.compareSegments(e.get(s),t.get(s));if(o!==0)return o}return be(e.length,t.length)}static compareSegments(e,t){const i=Tr.isNumericId(e),s=Tr.isNumericId(t);return i&&!s?-1:!i&&s?1:i&&s?Tr.extractNumericId(e).compare(Tr.extractNumericId(t)):sv(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ma.fromString(e.substring(4,e.length-2))}}class Ve extends Tr{construct(e,t,i){return new Ve(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new ie(G.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter((s=>s.length>0)))}return new Ve(t)}static emptyPath(){return new Ve([])}}const TV=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class At extends Tr{construct(e,t,i){return new At(e,t,i)}static isValidIdentifier(e){return TV.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),At.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===nb}static keyField(){return new At([nb])}static fromServerFormat(e){const t=[];let i="",s=0;const o=()=>{if(i.length===0)throw new ie(G.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let u=!1;for(;s<e.length;){const h=e[s];if(h==="\\"){if(s+1===e.length)throw new ie(G.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const d=e[s+1];if(d!=="\\"&&d!=="."&&d!=="`")throw new ie(G.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=d,s+=2}else h==="`"?(u=!u,s++):h!=="."||u?(i+=h,s++):(o(),s++)}if(o(),u)throw new ie(G.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new At(t)}static emptyPath(){return new At([])}}class ae{constructor(e){this.path=e}static fromPath(e){return new ae(Ve.fromString(e))}static fromName(e){return new ae(Ve.fromString(e).popFirst(5))}static empty(){return new ae(Ve.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ve.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Ve.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ae(new Ve(e.slice()))}}function _E(n,e,t){if(!t)throw new ie(G.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function CC(n,e,t,i){if(e===!0&&i===!0)throw new ie(G.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function ib(n){if(!ae.isDocumentKey(n))throw new ie(G.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function rb(n){if(ae.isDocumentKey(n))throw new ie(G.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function NC(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function qp(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":he(12329,{type:typeof n})}function We(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ie(G.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=qp(n);throw new ie(G.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function DC(n,e){if(e<=0)throw new ie(G.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}function Yt(n,e){const t={typeString:n};return e&&(t.value=e),t}function Sf(n,e){if(!NC(n))throw new ie(G.INVALID_ARGUMENT,"JSON must be an object");let t;for(const i in e)if(e[i]){const s=e[i].typeString,o="value"in e[i]?{value:e[i].value}:void 0;if(!(i in n)){t=`JSON missing required field: '${i}'`;break}const u=n[i];if(s&&typeof u!==s){t=`JSON field '${i}' must be a ${s}.`;break}if(o!==void 0&&u!==o.value){t=`Expected '${i}' field to equal '${o.value}'`;break}}if(t)throw new ie(G.INVALID_ARGUMENT,t);return!0}const sb=-62135596800,ab=1e6;class Ze{static now(){return Ze.fromMillis(Date.now())}static fromDate(e){return Ze.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*ab);return new Ze(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ie(G.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ie(G.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<sb)throw new ie(G.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ie(G.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/ab}_compareTo(e){return this.seconds===e.seconds?be(this.nanoseconds,e.nanoseconds):be(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ze._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Sf(e,Ze._jsonSchema))return new Ze(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-sb;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ze._jsonSchemaVersion="firestore/timestamp/1.0",Ze._jsonSchema={type:Yt("string",Ze._jsonSchemaVersion),seconds:Yt("number"),nanoseconds:Yt("number")};class Ee{static fromTimestamp(e){return new Ee(e)}static min(){return new Ee(new Ze(0,0))}static max(){return new Ee(new Ze(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const _u=-1;class ip{constructor(e,t,i,s){this.indexId=e,this.collectionGroup=t,this.fields=i,this.indexState=s}}function av(n){return n.fields.find((e=>e.kind===2))}function Eo(n){return n.fields.filter((e=>e.kind!==2))}ip.UNKNOWN_ID=-1;class Um{constructor(e,t){this.fieldPath=e,this.kind=t}}class Qh{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Qh(0,oi.min())}}function OC(n,e){const t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,s=Ee.fromTimestamp(i===1e9?new Ze(t+1,0):new Ze(t,i));return new oi(s,ae.empty(),e)}function xC(n){return new oi(n.readTime,n.key,_u)}class oi{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new oi(Ee.min(),ae.empty(),_u)}static max(){return new oi(Ee.max(),ae.empty(),_u)}}function yE(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=ae.comparator(n.documentKey,e.documentKey),t!==0?t:be(n.largestBatchId,e.largestBatchId))}const PC="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class MC{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function xa(n){if(n.code!==G.FAILED_PRECONDITION||n.message!==PC)throw n;re("LocalStore","Unexpectedly lost primary lease")}class B{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&he(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new B(((i,s)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(i,s)},this.catchCallback=o=>{this.wrapFailure(t,o).next(i,s)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof B?t:B.resolve(t)}catch(t){return B.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):B.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):B.reject(t)}static resolve(e){return new B(((t,i)=>{t(e)}))}static reject(e){return new B(((t,i)=>{i(e)}))}static waitFor(e){return new B(((t,i)=>{let s=0,o=0,u=!1;e.forEach((h=>{++s,h.next((()=>{++o,u&&o===s&&t()}),(d=>i(d)))})),u=!0,o===s&&t()}))}static or(e){let t=B.resolve(!1);for(const i of e)t=t.next((s=>s?B.resolve(s):i()));return t}static forEach(e,t){const i=[];return e.forEach(((s,o)=>{i.push(t.call(this,s,o))})),this.waitFor(i)}static mapArray(e,t){return new B(((i,s)=>{const o=e.length,u=new Array(o);let h=0;for(let d=0;d<o;d++){const p=d;t(e[p]).next((_=>{u[p]=_,++h,h===o&&i(u)}),(_=>s(_)))}}))}static doWhile(e,t){return new B(((i,s)=>{const o=()=>{e()===!0?t().next((()=>{o()}),s):i()};o()}))}}const ri="SimpleDb";class jp{static open(e,t,i,s){try{return new jp(t,e.transaction(s,i))}catch(o){throw new Rh(t,o)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.S=new Tn,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{t.error?this.S.reject(new Rh(e,t.error)):this.S.resolve()},this.transaction.onerror=i=>{const s=vE(i.target.error);this.S.reject(new Rh(e,s))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(re(ri,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new SV(t)}}class br{static delete(e){return re(ri,"Removing database:",e),So(aE().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!rC())return!1;if(br.F())return!0;const e=en(),t=br.M(e),i=0<t&&t<10,s=kC(e),o=0<s&&s<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||i||o)}static F(){return typeof process<"u"&&process.__PRIVATE_env?.__PRIVATE_USE_MOCK_PERSISTENCE==="YES"}static O(e,t){return e.store(t)}static M(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),i=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(i)}constructor(e,t,i){this.name=e,this.version=t,this.N=i,this.B=null,br.M(en())===12.2&&Vt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(re(ri,"Opening database:",this.name),this.db=await new Promise(((t,i)=>{const s=indexedDB.open(this.name,this.version);s.onsuccess=o=>{const u=o.target.result;t(u)},s.onblocked=()=>{i(new Rh(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=o=>{const u=o.target.error;u.name==="VersionError"?i(new ie(G.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):u.name==="InvalidStateError"?i(new ie(G.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+u)):i(new Rh(e,u))},s.onupgradeneeded=o=>{re(ri,'Database "'+this.name+'" requires upgrade from version:',o.oldVersion);const u=o.target.result;this.N.k(u,s.transaction,o.oldVersion,this.version).next((()=>{re(ri,"Database upgrade to version "+this.version+" complete")}))}}))),this.q&&(this.db.onversionchange=t=>this.q(t)),this.db}$(e){this.q=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,i,s){const o=t==="readonly";let u=0;for(;;){++u;try{this.db=await this.L(e);const h=jp.open(this.db,e,o?"readonly":"readwrite",i),d=s(h).next((p=>(h.C(),p))).catch((p=>(h.abort(p),B.reject(p)))).toPromise();return d.catch((()=>{})),await h.D,d}catch(h){const d=h,p=d.name!=="FirebaseError"&&u<3;if(re(ri,"Transaction failed with error:",d.message,"Retrying:",p),this.close(),!p)return Promise.reject(d)}}}close(){this.db&&this.db.close(),this.db=void 0}}function kC(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class wV{constructor(e){this.U=e,this.K=!1,this.W=null}get isDone(){return this.K}get G(){return this.W}set cursor(e){this.U=e}done(){this.K=!0}j(e){this.W=e}delete(){return So(this.U.delete())}}class Rh extends ie{constructor(e,t){super(G.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Pa(n){return n.name==="IndexedDbTransactionError"}class SV{constructor(e){this.store=e}put(e,t){let i;return t!==void 0?(re(ri,"PUT",this.store.name,e,t),i=this.store.put(t,e)):(re(ri,"PUT",this.store.name,"<auto-key>",e),i=this.store.put(e)),So(i)}add(e){return re(ri,"ADD",this.store.name,e,e),So(this.store.add(e))}get(e){return So(this.store.get(e)).next((t=>(t===void 0&&(t=null),re(ri,"GET",this.store.name,e,t),t)))}delete(e){return re(ri,"DELETE",this.store.name,e),So(this.store.delete(e))}count(){return re(ri,"COUNT",this.store.name),So(this.store.count())}J(e,t){const i=this.options(e,t),s=i.index?this.store.index(i.index):this.store;if(typeof s.getAll=="function"){const o=s.getAll(i.range);return new B(((u,h)=>{o.onerror=d=>{h(d.target.error)},o.onsuccess=d=>{u(d.target.result)}}))}{const o=this.cursor(i),u=[];return this.H(o,((h,d)=>{u.push(d)})).next((()=>u))}}Y(e,t){const i=this.store.getAll(e,t===null?void 0:t);return new B(((s,o)=>{i.onerror=u=>{o(u.target.error)},i.onsuccess=u=>{s(u.target.result)}}))}Z(e,t){re(ri,"DELETE ALL",this.store.name);const i=this.options(e,t);i.X=!1;const s=this.cursor(i);return this.H(s,((o,u,h)=>h.delete()))}ee(e,t){let i;t?i=e:(i={},t=e);const s=this.cursor(i);return this.H(s,t)}te(e){const t=this.cursor({});return new B(((i,s)=>{t.onerror=o=>{const u=vE(o.target.error);s(u)},t.onsuccess=o=>{const u=o.target.result;u?e(u.primaryKey,u.value).next((h=>{h?u.continue():i()})):i()}}))}H(e,t){const i=[];return new B(((s,o)=>{e.onerror=u=>{o(u.target.error)},e.onsuccess=u=>{const h=u.target.result;if(!h)return void s();const d=new wV(h),p=t(h.primaryKey,h.value,d);if(p instanceof B){const _=p.catch((y=>(d.done(),B.reject(y))));i.push(_)}d.isDone?s():d.G===null?h.continue():h.continue(d.G)}})).next((()=>B.waitFor(i)))}options(e,t){let i;return e!==void 0&&(typeof e=="string"?i=e:t=e),{index:i,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const i=this.store.index(e.index);return e.X?i.openKeyCursor(e.range,t):i.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function So(n){return new B(((e,t)=>{n.onsuccess=i=>{const s=i.target.result;e(s)},n.onerror=i=>{const s=vE(i.target.error);t(s)}}))}let ob=!1;function vE(n){const e=br.M(en());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const i=new ie("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return ob||(ob=!0,setTimeout((()=>{throw i}),0)),i}}return n}const Ch="IndexBackfiller";class IV{constructor(e,t){this.asyncQueue=e,this.ne=t,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){re(Ch,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{const t=await this.ne.ie();re(Ch,`Documents written: ${t}`)}catch(t){Pa(t)?re(Ch,"Ignoring IndexedDB error during index backfill: ",t):await xa(t)}await this.re(6e4)}))}}class AV{constructor(e,t){this.localStore=e,this.persistence=t}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.se(t,e)))}se(e,t){const i=new Set;let s=t,o=!0;return B.doWhile((()=>o===!0&&s>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((u=>{if(u!==null&&!i.has(u))return re(Ch,`Processing collection: ${u}`),this.oe(e,u,s).next((h=>{s-=h,i.add(u)}));o=!1})))).next((()=>t-s))}oe(e,t,i){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((s=>this.localStore.localDocuments.getNextDocuments(e,t,s,i).next((o=>{const u=o.changes;return this.localStore.indexManager.updateIndexEntries(e,u).next((()=>this._e(s,o))).next((h=>(re(Ch,`Updating offset: ${h}`),this.localStore.indexManager.updateCollectionGroup(e,t,h)))).next((()=>u.size))}))))}_e(e,t){let i=e;return t.changes.forEach(((s,o)=>{const u=xC(o);yE(u,i)>0&&(i=u)})),new oi(i.readTime,i.documentKey,Math.max(t.batchId,e.largestBatchId))}}class Gn{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>t.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Gn.ce=-1;const pa=-1;function If(n){return n==null}function $h(n){return n===0&&1/n==-1/0}function VC(n){return typeof n=="number"&&Number.isInteger(n)&&!$h(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const rp="";function Nn(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=lb(e)),e=bV(n.get(t),e);return lb(e)}function bV(n,e){let t=e;const i=n.length;for(let s=0;s<i;s++){const o=n.charAt(s);switch(o){case"\0":t+="";break;case rp:t+="";break;default:t+=o}}return t}function lb(n){return n+rp+""}function Sr(n){const e=n.length;if(ge(e>=2,64408,{path:n}),e===2)return ge(n.charAt(0)===rp&&n.charAt(1)==="",56145,{path:n}),Ve.emptyPath();const t=e-2,i=[];let s="";for(let o=0;o<e;){const u=n.indexOf(rp,o);switch((u<0||u>t)&&he(50515,{path:n}),n.charAt(u+1)){case"":const h=n.substring(o,u);let d;s.length===0?d=h:(s+=h,d=s,s=""),i.push(d);break;case"":s+=n.substring(o,u),s+="\0";break;case"":s+=n.substring(o,u+1);break;default:he(61167,{path:n})}o=u+2}return new Ve(i)}const To="remoteDocuments",Af="owner",Kl="owner",Yh="mutationQueues",RV="userId",Fi="mutations",ub="batchId",Co="userMutationsIndex",cb=["userId","batchId"];function Fm(n,e){return[n,Nn(e)]}function LC(n,e,t){return[n,Nn(e),t]}const CV={},yu="documentMutations",sp="remoteDocumentsV14",NV=["prefixPath","collectionGroup","readTime","documentId"],Bm="documentKeyIndex",DV=["prefixPath","collectionGroup","documentId"],UC="collectionGroupIndex",OV=["collectionGroup","readTime","prefixPath","documentId"],Wh="remoteDocumentGlobal",ov="remoteDocumentGlobalKey",vu="targets",FC="queryTargetsIndex",xV=["canonicalId","targetId"],Eu="targetDocuments",PV=["targetId","path"],EE="documentTargetsIndex",MV=["path","targetId"],ap="targetGlobalKey",Po="targetGlobal",Xh="collectionParents",kV=["collectionId","parent"],Tu="clientMetadata",VV="clientId",Hp="bundles",LV="bundleId",Gp="namedQueries",UV="name",TE="indexConfiguration",FV="indexId",lv="collectionGroupIndex",BV="collectionGroup",Nh="indexState",zV=["indexId","uid"],BC="sequenceNumberIndex",qV=["uid","sequenceNumber"],Dh="indexEntries",jV=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],zC="documentKeyIndex",HV=["indexId","uid","orderedDocumentKey"],Kp="documentOverlays",GV=["userId","collectionPath","documentId"],uv="collectionPathOverlayIndex",KV=["userId","collectionPath","largestBatchId"],qC="collectionGroupOverlayIndex",QV=["userId","collectionGroup","largestBatchId"],wE="globals",$V="name",jC=[Yh,Fi,yu,To,vu,Af,Po,Eu,Tu,Wh,Xh,Hp,Gp],YV=[...jC,Kp],HC=[Yh,Fi,yu,sp,vu,Af,Po,Eu,Tu,Wh,Xh,Hp,Gp,Kp],GC=HC,SE=[...GC,TE,Nh,Dh],WV=SE,KC=[...SE,wE],XV=KC;class cv extends MC{constructor(e,t){super(),this.le=e,this.currentSequenceNumber=t}}function tn(n,e){const t=oe(n);return br.O(t.le,e)}function hb(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Ma(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function QC(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}let Ct=class hv{constructor(e,t){this.comparator=e,this.root=t||ga.EMPTY}insert(e,t){return new hv(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ga.BLACK,null,null))}remove(e){return new hv(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ga.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const s=this.comparator(e,i.key);if(s===0)return t+i.left.size;s<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,i)=>(e(t,i),!1)))}toString(){const e=[];return this.inorderTraversal(((t,i)=>(e.push(`${t}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Am(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Am(this.root,e,this.comparator,!1)}getReverseIterator(){return new Am(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Am(this.root,e,this.comparator,!0)}},Am=class{constructor(e,t,i,s){this.isReverse=s,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?i(e.key,t):1,t&&s&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},ga=class is{constructor(e,t,i,s,o){this.key=e,this.value=t,this.color=i??is.RED,this.left=s??is.EMPTY,this.right=o??is.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,s,o){return new is(e??this.key,t??this.value,i??this.color,s??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let s=this;const o=i(e,s.key);return s=o<0?s.copy(null,null,null,s.left.insert(e,t,i),null):o===0?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,i)),s.fixUp()}removeMin(){if(this.left.isEmpty())return is.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),t(e,s.key)===0){if(s.right.isEmpty())return is.EMPTY;i=s.right.min(),s=s.copy(i.key,i.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,is.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,is.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw he(43730,{key:this.key,value:this.value});if(this.right.isRed())throw he(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw he(27949);return e+(this.isRed()?0:1)}};ga.EMPTY=null,ga.RED=!0,ga.BLACK=!1;ga.EMPTY=new class{constructor(){this.size=0}get key(){throw he(57766)}get value(){throw he(16141)}get color(){throw he(16727)}get left(){throw he(29726)}get right(){throw he(36894)}copy(e,t,i,s,o){return this}insert(e,t,i){return new ga(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class at{constructor(e){this.comparator=e,this.data=new Ct(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,i)=>(e(t),!1)))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const s=i.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new fb(this.data.getIterator())}getIteratorFrom(e){return new fb(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((i=>{t=t.add(i)})),t}isEqual(e){if(!(e instanceof at)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,o=i.getNext().key;if(this.comparator(s,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new at(this.comparator);return t.data=e,t}}class fb{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Ql(n){return n.hasNext()?n.getNext():void 0}class Kn{constructor(e){this.fields=e,e.sort(At.comparator)}static empty(){return new Kn([])}unionWith(e){let t=new at(At.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new Kn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return gu(this.fields,e.fields,((t,i)=>t.isEqual(i)))}}class $C extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}function JV(){return typeof atob<"u"}class Ot{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(s){try{return atob(s)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new $C("Invalid base64 string: "+o):o}})(e);return new Ot(t)}static fromUint8Array(e){const t=(function(s){let o="";for(let u=0;u<s.length;++u)o+=String.fromCharCode(s[u]);return o})(e);return new Ot(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const i=new Uint8Array(t.length);for(let s=0;s<t.length;s++)i[s]=t.charCodeAt(s);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return be(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ot.EMPTY_BYTE_STRING=new Ot("");const ZV=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ms(n){if(ge(!!n,39018),typeof n=="string"){let e=0;const t=ZV.exec(n);if(ge(!!t,46558,{timestamp:n}),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:It(n.seconds),nanos:It(n.nanos)}}function It(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function ps(n){return typeof n=="string"?Ot.fromBase64String(n):Ot.fromUint8Array(n)}const YC="server_timestamp",WC="__type__",XC="__previous_value__",JC="__local_write_time__";function Qp(n){return(n?.mapValue?.fields||{})[WC]?.stringValue===YC}function $p(n){const e=n.mapValue.fields[XC];return Qp(e)?$p(e):e}function Jh(n){const e=ms(n.mapValue.fields[JC].timestampValue);return new Ze(e.seconds,e.nanos)}class eL{constructor(e,t,i,s,o,u,h,d,p,_){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=s,this.ssl=o,this.forceLongPolling=u,this.autoDetectLongPolling=h,this.longPollingOptions=d,this.useFetchStreams=p,this.isUsingEmulator=_}}const op="(default)";class wa{constructor(e,t){this.projectId=e,this.database=t||op}static empty(){return new wa("","")}get isDefaultDatabase(){return this.database===op}isEqual(e){return e instanceof wa&&e.projectId===this.projectId&&e.database===this.database}}const IE="__type__",ZC="__max__",ha={mapValue:{fields:{__type__:{stringValue:ZC}}}},AE="__vector__",wu="value",zm={nullValue:"NULL_VALUE"};function Sa(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Qp(n)?4:e1(n)?9007199254740991:Yp(n)?10:11:he(28295,{value:n})}function xr(n,e){if(n===e)return!0;const t=Sa(n);if(t!==Sa(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Jh(n).isEqual(Jh(e));case 3:return(function(s,o){if(typeof s.timestampValue=="string"&&typeof o.timestampValue=="string"&&s.timestampValue.length===o.timestampValue.length)return s.timestampValue===o.timestampValue;const u=ms(s.timestampValue),h=ms(o.timestampValue);return u.seconds===h.seconds&&u.nanos===h.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(s,o){return ps(s.bytesValue).isEqual(ps(o.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(s,o){return It(s.geoPointValue.latitude)===It(o.geoPointValue.latitude)&&It(s.geoPointValue.longitude)===It(o.geoPointValue.longitude)})(n,e);case 2:return(function(s,o){if("integerValue"in s&&"integerValue"in o)return It(s.integerValue)===It(o.integerValue);if("doubleValue"in s&&"doubleValue"in o){const u=It(s.doubleValue),h=It(o.doubleValue);return u===h?$h(u)===$h(h):isNaN(u)&&isNaN(h)}return!1})(n,e);case 9:return gu(n.arrayValue.values||[],e.arrayValue.values||[],xr);case 10:case 11:return(function(s,o){const u=s.mapValue.fields||{},h=o.mapValue.fields||{};if(hb(u)!==hb(h))return!1;for(const d in u)if(u.hasOwnProperty(d)&&(h[d]===void 0||!xr(u[d],h[d])))return!1;return!0})(n,e);default:return he(52216,{left:n})}}function Zh(n,e){return(n.values||[]).find((t=>xr(t,e)))!==void 0}function Ia(n,e){if(n===e)return 0;const t=Sa(n),i=Sa(e);if(t!==i)return be(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return be(n.booleanValue,e.booleanValue);case 2:return(function(o,u){const h=It(o.integerValue||o.doubleValue),d=It(u.integerValue||u.doubleValue);return h<d?-1:h>d?1:h===d?0:isNaN(h)?isNaN(d)?0:-1:1})(n,e);case 3:return db(n.timestampValue,e.timestampValue);case 4:return db(Jh(n),Jh(e));case 5:return sv(n.stringValue,e.stringValue);case 6:return(function(o,u){const h=ps(o),d=ps(u);return h.compareTo(d)})(n.bytesValue,e.bytesValue);case 7:return(function(o,u){const h=o.split("/"),d=u.split("/");for(let p=0;p<h.length&&p<d.length;p++){const _=be(h[p],d[p]);if(_!==0)return _}return be(h.length,d.length)})(n.referenceValue,e.referenceValue);case 8:return(function(o,u){const h=be(It(o.latitude),It(u.latitude));return h!==0?h:be(It(o.longitude),It(u.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return mb(n.arrayValue,e.arrayValue);case 10:return(function(o,u){const h=o.fields||{},d=u.fields||{},p=h[wu]?.arrayValue,_=d[wu]?.arrayValue,y=be(p?.values?.length||0,_?.values?.length||0);return y!==0?y:mb(p,_)})(n.mapValue,e.mapValue);case 11:return(function(o,u){if(o===ha.mapValue&&u===ha.mapValue)return 0;if(o===ha.mapValue)return 1;if(u===ha.mapValue)return-1;const h=o.fields||{},d=Object.keys(h),p=u.fields||{},_=Object.keys(p);d.sort(),_.sort();for(let y=0;y<d.length&&y<_.length;++y){const w=sv(d[y],_[y]);if(w!==0)return w;const A=Ia(h[d[y]],p[_[y]]);if(A!==0)return A}return be(d.length,_.length)})(n.mapValue,e.mapValue);default:throw he(23264,{he:t})}}function db(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return be(n,e);const t=ms(n),i=ms(e),s=be(t.seconds,i.seconds);return s!==0?s:be(t.nanos,i.nanos)}function mb(n,e){const t=n.values||[],i=e.values||[];for(let s=0;s<t.length&&s<i.length;++s){const o=Ia(t[s],i[s]);if(o)return o}return be(t.length,i.length)}function Su(n){return fv(n)}function fv(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const i=ms(t);return`time(${i.seconds},${i.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return ps(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return ae.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let i="[",s=!0;for(const o of t.values||[])s?s=!1:i+=",",i+=fv(o);return i+"]"})(n.arrayValue):"mapValue"in n?(function(t){const i=Object.keys(t.fields||{}).sort();let s="{",o=!0;for(const u of i)o?o=!1:s+=",",s+=`${u}:${fv(t.fields[u])}`;return s+"}"})(n.mapValue):he(61005,{value:n})}function qm(n){switch(Sa(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=$p(n);return e?16+qm(e):16;case 5:return 2*n.stringValue.length;case 6:return ps(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((s,o)=>s+qm(o)),0)})(n.arrayValue);case 10:case 11:return(function(i){let s=0;return Ma(i.fields,((o,u)=>{s+=o.length+qm(u)})),s})(n.mapValue);default:throw he(13486,{value:n})}}function Mo(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function dv(n){return!!n&&"integerValue"in n}function ef(n){return!!n&&"arrayValue"in n}function pb(n){return!!n&&"nullValue"in n}function gb(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function jm(n){return!!n&&"mapValue"in n}function Yp(n){return(n?.mapValue?.fields||{})[IE]?.stringValue===AE}function Oh(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return Ma(n.mapValue.fields,((t,i)=>e.mapValue.fields[t]=Oh(i))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Oh(n.arrayValue.values[t]);return e}return{...n}}function e1(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===ZC}const t1={mapValue:{fields:{[IE]:{stringValue:AE},[wu]:{arrayValue:{}}}}};function tL(n){return"nullValue"in n?zm:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Mo(wa.empty(),ae.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?Yp(n)?t1:{mapValue:{}}:he(35942,{value:n})}function nL(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Mo(wa.empty(),ae.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?t1:"mapValue"in n?Yp(n)?{mapValue:{}}:ha:he(61959,{value:n})}function _b(n,e){const t=Ia(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function yb(n,e){const t=Ia(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class En{constructor(e){this.value=e}static empty(){return new En({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!jm(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Oh(t)}setAll(e){let t=At.emptyPath(),i={},s=[];e.forEach(((u,h)=>{if(!t.isImmediateParentOf(h)){const d=this.getFieldsMap(t);this.applyChanges(d,i,s),i={},s=[],t=h.popLast()}u?i[h.lastSegment()]=Oh(u):s.push(h.lastSegment())}));const o=this.getFieldsMap(t);this.applyChanges(o,i,s)}delete(e){const t=this.field(e.popLast());jm(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return xr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let s=t.mapValue.fields[e.get(i)];jm(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,i){Ma(t,((s,o)=>e[s]=o));for(const s of i)delete e[s]}clone(){return new En(Oh(this.value))}}function n1(n){const e=[];return Ma(n.fields,((t,i)=>{const s=new At([t]);if(jm(i)){const o=n1(i.mapValue).fields;if(o.length===0)e.push(s);else for(const u of o)e.push(s.child(u))}else e.push(s)})),new Kn(e)}class yt{constructor(e,t,i,s,o,u,h){this.key=e,this.documentType=t,this.version=i,this.readTime=s,this.createTime=o,this.data=u,this.documentState=h}static newInvalidDocument(e){return new yt(e,0,Ee.min(),Ee.min(),Ee.min(),En.empty(),0)}static newFoundDocument(e,t,i,s){return new yt(e,1,t,Ee.min(),i,s,0)}static newNoDocument(e,t){return new yt(e,2,t,Ee.min(),Ee.min(),En.empty(),0)}static newUnknownDocument(e,t){return new yt(e,3,t,Ee.min(),Ee.min(),En.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ee.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=En.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=En.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ee.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof yt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new yt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Aa{constructor(e,t){this.position=e,this.inclusive=t}}function vb(n,e,t){let i=0;for(let s=0;s<n.position.length;s++){const o=e[s],u=n.position[s];if(o.field.isKeyField()?i=ae.comparator(ae.fromName(u.referenceValue),t.key):i=Ia(u,t.data.field(o.field)),o.dir==="desc"&&(i*=-1),i!==0)break}return i}function Eb(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!xr(n.position[t],e.position[t]))return!1;return!0}class tf{constructor(e,t="asc"){this.field=e,this.dir=t}}function iL(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class i1{}class Fe extends i1{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new rL(e,t,i):t==="array-contains"?new oL(e,i):t==="in"?new u1(e,i):t==="not-in"?new lL(e,i):t==="array-contains-any"?new uL(e,i):new Fe(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new sL(e,i):new aL(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Ia(t,this.value)):t!==null&&Sa(this.value)===Sa(t)&&this.matchesComparison(Ia(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return he(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class st extends i1{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new st(e,t)}matches(e){return Iu(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Iu(n){return n.op==="and"}function mv(n){return n.op==="or"}function bE(n){return r1(n)&&Iu(n)}function r1(n){for(const e of n.filters)if(e instanceof st)return!1;return!0}function pv(n){if(n instanceof Fe)return n.field.canonicalString()+n.op.toString()+Su(n.value);if(bE(n))return n.filters.map((e=>pv(e))).join(",");{const e=n.filters.map((t=>pv(t))).join(",");return`${n.op}(${e})`}}function s1(n,e){return n instanceof Fe?(function(i,s){return s instanceof Fe&&i.op===s.op&&i.field.isEqual(s.field)&&xr(i.value,s.value)})(n,e):n instanceof st?(function(i,s){return s instanceof st&&i.op===s.op&&i.filters.length===s.filters.length?i.filters.reduce(((o,u,h)=>o&&s1(u,s.filters[h])),!0):!1})(n,e):void he(19439)}function a1(n,e){const t=n.filters.concat(e);return st.create(t,n.op)}function o1(n){return n instanceof Fe?(function(t){return`${t.field.canonicalString()} ${t.op} ${Su(t.value)}`})(n):n instanceof st?(function(t){return t.op.toString()+" {"+t.getFilters().map(o1).join(" ,")+"}"})(n):"Filter"}class rL extends Fe{constructor(e,t,i){super(e,t,i),this.key=ae.fromName(i.referenceValue)}matches(e){const t=ae.comparator(e.key,this.key);return this.matchesComparison(t)}}class sL extends Fe{constructor(e,t){super(e,"in",t),this.keys=l1("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class aL extends Fe{constructor(e,t){super(e,"not-in",t),this.keys=l1("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function l1(n,e){return(e.arrayValue?.values||[]).map((t=>ae.fromName(t.referenceValue)))}class oL extends Fe{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return ef(t)&&Zh(t.arrayValue,this.value)}}class u1 extends Fe{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Zh(this.value.arrayValue,t)}}class lL extends Fe{constructor(e,t){super(e,"not-in",t)}matches(e){if(Zh(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Zh(this.value.arrayValue,t)}}class uL extends Fe{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!ef(t)||!t.arrayValue.values)&&t.arrayValue.values.some((i=>Zh(this.value.arrayValue,i)))}}class cL{constructor(e,t=null,i=[],s=[],o=null,u=null,h=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=s,this.limit=o,this.startAt=u,this.endAt=h,this.Te=null}}function gv(n,e=null,t=[],i=[],s=null,o=null,u=null){return new cL(n,e,t,i,s,o,u)}function ko(n){const e=oe(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((i=>pv(i))).join(","),t+="|ob:",t+=e.orderBy.map((i=>(function(o){return o.field.canonicalString()+o.dir})(i))).join(","),If(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((i=>Su(i))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((i=>Su(i))).join(",")),e.Te=t}return e.Te}function bf(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!iL(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!s1(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Eb(n.startAt,e.startAt)&&Eb(n.endAt,e.endAt)}function lp(n){return ae.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function up(n,e){return n.filters.filter((t=>t instanceof Fe&&t.field.isEqual(e)))}function Tb(n,e,t){let i=zm,s=!0;for(const o of up(n,e)){let u=zm,h=!0;switch(o.op){case"<":case"<=":u=tL(o.value);break;case"==":case"in":case">=":u=o.value;break;case">":u=o.value,h=!1;break;case"!=":case"not-in":u=zm}_b({value:i,inclusive:s},{value:u,inclusive:h})<0&&(i=u,s=h)}if(t!==null){for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){const u=t.position[o];_b({value:i,inclusive:s},{value:u,inclusive:t.inclusive})<0&&(i=u,s=t.inclusive);break}}return{value:i,inclusive:s}}function wb(n,e,t){let i=ha,s=!0;for(const o of up(n,e)){let u=ha,h=!0;switch(o.op){case">=":case">":u=nL(o.value),h=!1;break;case"==":case"in":case"<=":u=o.value;break;case"<":u=o.value,h=!1;break;case"!=":case"not-in":u=ha}yb({value:i,inclusive:s},{value:u,inclusive:h})>0&&(i=u,s=h)}if(t!==null){for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){const u=t.position[o];yb({value:i,inclusive:s},{value:u,inclusive:t.inclusive})>0&&(i=u,s=t.inclusive);break}}return{value:i,inclusive:s}}class vs{constructor(e,t=null,i=[],s=[],o=null,u="F",h=null,d=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=s,this.limit=o,this.limitType=u,this.startAt=h,this.endAt=d,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function c1(n,e,t,i,s,o,u,h){return new vs(n,e,t,i,s,o,u,h)}function Hu(n){return new vs(n)}function Sb(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function RE(n){return n.collectionGroup!==null}function au(n){const e=oe(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const o of e.explicitOrderBy)e.Ie.push(o),t.add(o.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let h=new at(At.comparator);return u.filters.forEach((d=>{d.getFlattenedFilters().forEach((p=>{p.isInequality()&&(h=h.add(p.field))}))})),h})(e).forEach((o=>{t.has(o.canonicalString())||o.isKeyField()||e.Ie.push(new tf(o,i))})),t.has(At.keyField().canonicalString())||e.Ie.push(new tf(At.keyField(),i))}return e.Ie}function Vn(n){const e=oe(n);return e.Ee||(e.Ee=hL(e,au(n))),e.Ee}function hL(n,e){if(n.limitType==="F")return gv(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((s=>{const o=s.dir==="desc"?"asc":"desc";return new tf(s.field,o)}));const t=n.endAt?new Aa(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new Aa(n.startAt.position,n.startAt.inclusive):null;return gv(n.path,n.collectionGroup,e,n.filters,n.limit,t,i)}}function _v(n,e){const t=n.filters.concat([e]);return new vs(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function cp(n,e,t){return new vs(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Rf(n,e){return bf(Vn(n),Vn(e))&&n.limitType===e.limitType}function h1(n){return`${ko(Vn(n))}|lt:${n.limitType}`}function eu(n){return`Query(target=${(function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map((s=>o1(s))).join(", ")}]`),If(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map((s=>(function(u){return`${u.field.canonicalString()} (${u.dir})`})(s))).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map((s=>Su(s))).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map((s=>Su(s))).join(",")),`Target(${i})`})(Vn(n))}; limitType=${n.limitType})`}function Cf(n,e){return e.isFoundDocument()&&(function(i,s){const o=s.key.path;return i.collectionGroup!==null?s.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(o):ae.isDocumentKey(i.path)?i.path.isEqual(o):i.path.isImmediateParentOf(o)})(n,e)&&(function(i,s){for(const o of au(i))if(!o.field.isKeyField()&&s.data.field(o.field)===null)return!1;return!0})(n,e)&&(function(i,s){for(const o of i.filters)if(!o.matches(s))return!1;return!0})(n,e)&&(function(i,s){return!(i.startAt&&!(function(u,h,d){const p=vb(u,h,d);return u.inclusive?p<=0:p<0})(i.startAt,au(i),s)||i.endAt&&!(function(u,h,d){const p=vb(u,h,d);return u.inclusive?p>=0:p>0})(i.endAt,au(i),s))})(n,e)}function f1(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function d1(n){return(e,t)=>{let i=!1;for(const s of au(n)){const o=fL(s,e,t);if(o!==0)return o;i=i||s.field.isKeyField()}return 0}}function fL(n,e,t){const i=n.field.isKeyField()?ae.comparator(e.key,t.key):(function(o,u,h){const d=u.data.field(o),p=h.data.field(o);return d!==null&&p!==null?Ia(d,p):he(42886)})(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return he(19790,{direction:n.dir})}}class Es{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[s,o]of i)if(this.equalsFn(s,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),s=this.inner[i];if(s===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return void(s[o]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return i.length===1?delete this.inner[t]:i.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Ma(this.inner,((t,i)=>{for(const[s,o]of i)e(s,o)}))}isEmpty(){return QC(this.inner)}size(){return this.innerSize}}const dL=new Ct(ae.comparator);function Qn(){return dL}const m1=new Ct(ae.comparator);function wh(...n){let e=m1;for(const t of n)e=e.insert(t.key,t);return e}function p1(n){let e=m1;return n.forEach(((t,i)=>e=e.insert(t,i.overlayedDocument))),e}function Ir(){return xh()}function g1(){return xh()}function xh(){return new Es((n=>n.toString()),((n,e)=>n.isEqual(e)))}const mL=new Ct(ae.comparator),pL=new at(ae.comparator);function De(...n){let e=pL;for(const t of n)e=e.add(t);return e}const gL=new at(be);function CE(){return gL}function NE(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:$h(e)?"-0":e}}function _1(n){return{integerValue:""+n}}function y1(n,e){return VC(e)?_1(e):NE(n,e)}class Wp{constructor(){this._=void 0}}function _L(n,e,t){return n instanceof Au?(function(s,o){const u={fields:{[WC]:{stringValue:YC},[JC]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return o&&Qp(o)&&(o=$p(o)),o&&(u.fields[XC]=o),{mapValue:u}})(t,e):n instanceof Vo?E1(n,e):n instanceof Lo?T1(n,e):(function(s,o){const u=v1(s,o),h=Ib(u)+Ib(s.Ae);return dv(u)&&dv(s.Ae)?_1(h):NE(s.serializer,h)})(n,e)}function yL(n,e,t){return n instanceof Vo?E1(n,e):n instanceof Lo?T1(n,e):t}function v1(n,e){return n instanceof bu?(function(i){return dv(i)||(function(o){return!!o&&"doubleValue"in o})(i)})(e)?e:{integerValue:0}:null}class Au extends Wp{}class Vo extends Wp{constructor(e){super(),this.elements=e}}function E1(n,e){const t=w1(e);for(const i of n.elements)t.some((s=>xr(s,i)))||t.push(i);return{arrayValue:{values:t}}}class Lo extends Wp{constructor(e){super(),this.elements=e}}function T1(n,e){let t=w1(e);for(const i of n.elements)t=t.filter((s=>!xr(s,i)));return{arrayValue:{values:t}}}class bu extends Wp{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function Ib(n){return It(n.integerValue||n.doubleValue)}function w1(n){return ef(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Nf{constructor(e,t){this.field=e,this.transform=t}}function vL(n,e){return n.field.isEqual(e.field)&&(function(i,s){return i instanceof Vo&&s instanceof Vo||i instanceof Lo&&s instanceof Lo?gu(i.elements,s.elements,xr):i instanceof bu&&s instanceof bu?xr(i.Ae,s.Ae):i instanceof Au&&s instanceof Au})(n.transform,e.transform)}class EL{constructor(e,t){this.version=e,this.transformResults=t}}class bt{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new bt}static exists(e){return new bt(void 0,e)}static updateTime(e){return new bt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Hm(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Xp{}function S1(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Ku(n.key,bt.none()):new Gu(n.key,n.data,bt.none());{const t=n.data,i=En.empty();let s=new at(At.comparator);for(let o of e.fields)if(!s.has(o)){let u=t.field(o);u===null&&o.length>1&&(o=o.popLast(),u=t.field(o)),u===null?i.delete(o):i.set(o,u),s=s.add(o)}return new Ts(n.key,i,new Kn(s.toArray()),bt.none())}}function TL(n,e,t){n instanceof Gu?(function(s,o,u){const h=s.value.clone(),d=bb(s.fieldTransforms,o,u.transformResults);h.setAll(d),o.convertToFoundDocument(u.version,h).setHasCommittedMutations()})(n,e,t):n instanceof Ts?(function(s,o,u){if(!Hm(s.precondition,o))return void o.convertToUnknownDocument(u.version);const h=bb(s.fieldTransforms,o,u.transformResults),d=o.data;d.setAll(I1(s)),d.setAll(h),o.convertToFoundDocument(u.version,d).setHasCommittedMutations()})(n,e,t):(function(s,o,u){o.convertToNoDocument(u.version).setHasCommittedMutations()})(0,e,t)}function Ph(n,e,t,i){return n instanceof Gu?(function(o,u,h,d){if(!Hm(o.precondition,u))return h;const p=o.value.clone(),_=Rb(o.fieldTransforms,d,u);return p.setAll(_),u.convertToFoundDocument(u.version,p).setHasLocalMutations(),null})(n,e,t,i):n instanceof Ts?(function(o,u,h,d){if(!Hm(o.precondition,u))return h;const p=Rb(o.fieldTransforms,d,u),_=u.data;return _.setAll(I1(o)),_.setAll(p),u.convertToFoundDocument(u.version,_).setHasLocalMutations(),h===null?null:h.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map((y=>y.field)))})(n,e,t,i):(function(o,u,h){return Hm(o.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):h})(n,e,t)}function wL(n,e){let t=null;for(const i of n.fieldTransforms){const s=e.data.field(i.field),o=v1(i.transform,s||null);o!=null&&(t===null&&(t=En.empty()),t.set(i.field,o))}return t||null}function Ab(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(i,s){return i===void 0&&s===void 0||!(!i||!s)&&gu(i,s,((o,u)=>vL(o,u)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Gu extends Xp{constructor(e,t,i,s=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Ts extends Xp{constructor(e,t,i,s,o=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=s,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function I1(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const i=n.data.field(t);e.set(t,i)}})),e}function bb(n,e,t){const i=new Map;ge(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let s=0;s<t.length;s++){const o=n[s],u=o.transform,h=e.data.field(o.field);i.set(o.field,yL(u,h,t[s]))}return i}function Rb(n,e,t){const i=new Map;for(const s of n){const o=s.transform,u=t.data.field(s.field);i.set(s.field,_L(o,u,e))}return i}class Ku extends Xp{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class DE extends Xp{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class OE{constructor(e,t,i,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=s}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const o=this.mutations[s];o.key.isEqual(e.key)&&TL(o,e,i[s])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=Ph(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=Ph(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=g1();return this.mutations.forEach((s=>{const o=e.get(s.key),u=o.overlayedDocument;let h=this.applyToLocalView(u,o.mutatedFields);h=t.has(s.key)?null:h;const d=S1(u,h);d!==null&&i.set(s.key,d),u.isValidDocument()||u.convertToNoDocument(Ee.min())})),i}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),De())}isEqual(e){return this.batchId===e.batchId&&gu(this.mutations,e.mutations,((t,i)=>Ab(t,i)))&&gu(this.baseMutations,e.baseMutations,((t,i)=>Ab(t,i)))}}class xE{constructor(e,t,i,s){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=s}static from(e,t,i){ge(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let s=(function(){return mL})();const o=e.mutations;for(let u=0;u<o.length;u++)s=s.insert(o[u].key,i[u].version);return new xE(e,t,i,s)}}class PE{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class SL{constructor(e,t){this.count=e,this.unchangedNames=t}}var $t,je;function A1(n){switch(n){case G.OK:return he(64938);case G.CANCELLED:case G.UNKNOWN:case G.DEADLINE_EXCEEDED:case G.RESOURCE_EXHAUSTED:case G.INTERNAL:case G.UNAVAILABLE:case G.UNAUTHENTICATED:return!1;case G.INVALID_ARGUMENT:case G.NOT_FOUND:case G.ALREADY_EXISTS:case G.PERMISSION_DENIED:case G.FAILED_PRECONDITION:case G.ABORTED:case G.OUT_OF_RANGE:case G.UNIMPLEMENTED:case G.DATA_LOSS:return!0;default:return he(15467,{code:n})}}function b1(n){if(n===void 0)return Vt("GRPC error has no .code"),G.UNKNOWN;switch(n){case $t.OK:return G.OK;case $t.CANCELLED:return G.CANCELLED;case $t.UNKNOWN:return G.UNKNOWN;case $t.DEADLINE_EXCEEDED:return G.DEADLINE_EXCEEDED;case $t.RESOURCE_EXHAUSTED:return G.RESOURCE_EXHAUSTED;case $t.INTERNAL:return G.INTERNAL;case $t.UNAVAILABLE:return G.UNAVAILABLE;case $t.UNAUTHENTICATED:return G.UNAUTHENTICATED;case $t.INVALID_ARGUMENT:return G.INVALID_ARGUMENT;case $t.NOT_FOUND:return G.NOT_FOUND;case $t.ALREADY_EXISTS:return G.ALREADY_EXISTS;case $t.PERMISSION_DENIED:return G.PERMISSION_DENIED;case $t.FAILED_PRECONDITION:return G.FAILED_PRECONDITION;case $t.ABORTED:return G.ABORTED;case $t.OUT_OF_RANGE:return G.OUT_OF_RANGE;case $t.UNIMPLEMENTED:return G.UNIMPLEMENTED;case $t.DATA_LOSS:return G.DATA_LOSS;default:return he(39323,{code:n})}}(je=$t||($t={}))[je.OK=0]="OK",je[je.CANCELLED=1]="CANCELLED",je[je.UNKNOWN=2]="UNKNOWN",je[je.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",je[je.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",je[je.NOT_FOUND=5]="NOT_FOUND",je[je.ALREADY_EXISTS=6]="ALREADY_EXISTS",je[je.PERMISSION_DENIED=7]="PERMISSION_DENIED",je[je.UNAUTHENTICATED=16]="UNAUTHENTICATED",je[je.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",je[je.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",je[je.ABORTED=10]="ABORTED",je[je.OUT_OF_RANGE=11]="OUT_OF_RANGE",je[je.UNIMPLEMENTED=12]="UNIMPLEMENTED",je[je.INTERNAL=13]="INTERNAL",je[je.UNAVAILABLE=14]="UNAVAILABLE",je[je.DATA_LOSS=15]="DATA_LOSS";function R1(){return new TextEncoder}const IL=new ma([4294967295,4294967295],0);function Cb(n){const e=R1().encode(n),t=new vC;return t.update(e),new Uint8Array(t.digest())}function Nb(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),s=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new ma([t,i],0),new ma([s,o],0)]}class ME{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new Sh(`Invalid padding: ${t}`);if(i<0)throw new Sh(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Sh(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new Sh(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=ma.fromNumber(this.ge)}ye(e,t,i){let s=e.add(t.multiply(ma.fromNumber(i)));return s.compare(IL)===1&&(s=new ma([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=Cb(e),[i,s]=Nb(t);for(let o=0;o<this.hashCount;o++){const u=this.ye(i,s,o);if(!this.we(u))return!1}return!0}static create(e,t,i){const s=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),u=new ME(o,s,t);return i.forEach((h=>u.insert(h))),u}insert(e){if(this.ge===0)return;const t=Cb(e),[i,s]=Nb(t);for(let o=0;o<this.hashCount;o++){const u=this.ye(i,s,o);this.Se(u)}}Se(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class Sh extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Df{constructor(e,t,i,s,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=s,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const s=new Map;return s.set(e,Of.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new Df(Ee.min(),s,new Ct(be),Qn(),De())}}class Of{constructor(e,t,i,s,o){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=s,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new Of(i,t,De(),De(),De())}}class Gm{constructor(e,t,i,s){this.be=e,this.removedTargetIds=t,this.key=i,this.De=s}}class C1{constructor(e,t){this.targetId=e,this.Ce=t}}class N1{constructor(e,t,i=Ot.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=s}}class Db{constructor(){this.ve=0,this.Fe=Ob(),this.Me=Ot.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=De(),t=De(),i=De();return this.Fe.forEach(((s,o)=>{switch(o){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:i=i.add(s);break;default:he(38017,{changeType:o})}})),new Of(this.Me,this.xe,e,t,i)}qe(){this.Oe=!1,this.Fe=Ob()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,ge(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class AL{constructor(e){this.Ge=e,this.ze=new Map,this.je=Qn(),this.Je=bm(),this.He=bm(),this.Ye=new Ct(be)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const i=this.nt(t);switch(e.state){case 0:this.rt(t)&&i.Le(e.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(e.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(i.We(),i.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),i.Le(e.resumeToken));break;default:he(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((i,s)=>{this.rt(s)&&t(s)}))}st(e){const t=e.targetId,i=e.Ce.count,s=this.ot(t);if(s){const o=s.target;if(lp(o))if(i===0){const u=new ae(o.path);this.et(t,u,yt.newNoDocument(u,Ee.min()))}else ge(i===1,20013,{expectedCount:i});else{const u=this._t(t);if(u!==i){const h=this.ut(e),d=h?this.ct(h,e,u):1;if(d!==0){this.it(t);const p=d===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,p)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:s=0},hashCount:o=0}=t;let u,h;try{u=ps(i).toUint8Array()}catch(d){if(d instanceof $C)return Or("Decoding the base64 bloom filter in existence filter failed ("+d.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw d}try{h=new ME(u,s,o)}catch(d){return Or(d instanceof Sh?"BloomFilter error: ":"Applying bloom filter failed: ",d),null}return h.ge===0?null:h}ct(e,t,i){return t.Ce.count===i-this.Pt(e,t.targetId)?0:2}Pt(e,t){const i=this.Ge.getRemoteKeysForTarget(t);let s=0;return i.forEach((o=>{const u=this.Ge.ht(),h=`projects/${u.projectId}/databases/${u.database}/documents/${o.path.canonicalString()}`;e.mightContain(h)||(this.et(t,o,null),s++)})),s}Tt(e){const t=new Map;this.ze.forEach(((o,u)=>{const h=this.ot(u);if(h){if(o.current&&lp(h.target)){const d=new ae(h.target.path);this.It(d).has(u)||this.Et(u,d)||this.et(u,d,yt.newNoDocument(d,e))}o.Be&&(t.set(u,o.ke()),o.qe())}}));let i=De();this.He.forEach(((o,u)=>{let h=!0;u.forEachWhile((d=>{const p=this.ot(d);return!p||p.purpose==="TargetPurposeLimboResolution"||(h=!1,!1)})),h&&(i=i.add(o))})),this.je.forEach(((o,u)=>u.setReadTime(e)));const s=new Df(e,t,this.Ye,this.je,i);return this.je=Qn(),this.Je=bm(),this.He=bm(),this.Ye=new Ct(be),s}Xe(e,t){if(!this.rt(e))return;const i=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,i),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,i){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,t)?s.Qe(t,1):s.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),i&&(this.je=this.je.insert(t,i))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new Db,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new at(be),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new at(be),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||re("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Db),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function bm(){return new Ct(ae.comparator)}function Ob(){return new Ct(ae.comparator)}const bL={asc:"ASCENDING",desc:"DESCENDING"},RL={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},CL={and:"AND",or:"OR"};class NL{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function yv(n,e){return n.useProto3Json||If(e)?e:{value:e}}function Ru(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function D1(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function DL(n,e){return Ru(n,e.toTimestamp())}function Lt(n){return ge(!!n,49232),Ee.fromTimestamp((function(t){const i=ms(t);return new Ze(i.seconds,i.nanos)})(n))}function kE(n,e){return vv(n,e).canonicalString()}function vv(n,e){const t=(function(s){return new Ve(["projects",s.projectId,"databases",s.database])})(n).child("documents");return e===void 0?t:t.child(e)}function O1(n){const e=Ve.fromString(n);return ge(z1(e),10190,{key:e.toString()}),e}function nf(n,e){return kE(n.databaseId,e.path)}function Rr(n,e){const t=O1(e);if(t.get(1)!==n.databaseId.projectId)throw new ie(G.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ie(G.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new ae(M1(t))}function x1(n,e){return kE(n.databaseId,e)}function P1(n){const e=O1(n);return e.length===4?Ve.emptyPath():M1(e)}function Ev(n){return new Ve(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function M1(n){return ge(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function xb(n,e,t){return{name:nf(n,e),fields:t.value.mapValue.fields}}function k1(n,e,t){const i=Rr(n,e.name),s=Lt(e.updateTime),o=e.createTime?Lt(e.createTime):Ee.min(),u=new En({mapValue:{fields:e.fields}}),h=yt.newFoundDocument(i,s,o,u);return t&&h.setHasCommittedMutations(),t?h.setHasCommittedMutations():h}function OL(n,e){return"found"in e?(function(i,s){ge(!!s.found,43571),s.found.name,s.found.updateTime;const o=Rr(i,s.found.name),u=Lt(s.found.updateTime),h=s.found.createTime?Lt(s.found.createTime):Ee.min(),d=new En({mapValue:{fields:s.found.fields}});return yt.newFoundDocument(o,u,h,d)})(n,e):"missing"in e?(function(i,s){ge(!!s.missing,3894),ge(!!s.readTime,22933);const o=Rr(i,s.missing),u=Lt(s.readTime);return yt.newNoDocument(o,u)})(n,e):he(7234,{result:e})}function xL(n,e){let t;if("targetChange"in e){e.targetChange;const i=(function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:he(39313,{state:p})})(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],o=(function(p,_){return p.useProto3Json?(ge(_===void 0||typeof _=="string",58123),Ot.fromBase64String(_||"")):(ge(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array,16193),Ot.fromUint8Array(_||new Uint8Array))})(n,e.targetChange.resumeToken),u=e.targetChange.cause,h=u&&(function(p){const _=p.code===void 0?G.UNKNOWN:b1(p.code);return new ie(_,p.message||"")})(u);t=new N1(i,s,o,h||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const s=Rr(n,i.document.name),o=Lt(i.document.updateTime),u=i.document.createTime?Lt(i.document.createTime):Ee.min(),h=new En({mapValue:{fields:i.document.fields}}),d=yt.newFoundDocument(s,o,u,h),p=i.targetIds||[],_=i.removedTargetIds||[];t=new Gm(p,_,d.key,d)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const s=Rr(n,i.document),o=i.readTime?Lt(i.readTime):Ee.min(),u=yt.newNoDocument(s,o),h=i.removedTargetIds||[];t=new Gm([],h,u.key,u)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const s=Rr(n,i.document),o=i.removedTargetIds||[];t=new Gm([],o,s,null)}else{if(!("filter"in e))return he(11601,{Rt:e});{e.filter;const i=e.filter;i.targetId;const{count:s=0,unchangedNames:o}=i,u=new SL(s,o),h=i.targetId;t=new C1(h,u)}}return t}function rf(n,e){let t;if(e instanceof Gu)t={update:xb(n,e.key,e.value)};else if(e instanceof Ku)t={delete:nf(n,e.key)};else if(e instanceof Ts)t={update:xb(n,e.key,e.data),updateMask:UL(e.fieldMask)};else{if(!(e instanceof DE))return he(16599,{Vt:e.type});t={verify:nf(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((i=>(function(o,u){const h=u.transform;if(h instanceof Au)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof Vo)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof Lo)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof bu)return{fieldPath:u.field.canonicalString(),increment:h.Ae};throw he(20930,{transform:u.transform})})(0,i)))),e.precondition.isNone||(t.currentDocument=(function(s,o){return o.updateTime!==void 0?{updateTime:DL(s,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:he(27497)})(n,e.precondition)),t}function Tv(n,e){const t=e.currentDocument?(function(o){return o.updateTime!==void 0?bt.updateTime(Lt(o.updateTime)):o.exists!==void 0?bt.exists(o.exists):bt.none()})(e.currentDocument):bt.none(),i=e.updateTransforms?e.updateTransforms.map((s=>(function(u,h){let d=null;if("setToServerValue"in h)ge(h.setToServerValue==="REQUEST_TIME",16630,{proto:h}),d=new Au;else if("appendMissingElements"in h){const _=h.appendMissingElements.values||[];d=new Vo(_)}else if("removeAllFromArray"in h){const _=h.removeAllFromArray.values||[];d=new Lo(_)}else"increment"in h?d=new bu(u,h.increment):he(16584,{proto:h});const p=At.fromServerFormat(h.fieldPath);return new Nf(p,d)})(n,s))):[];if(e.update){e.update.name;const s=Rr(n,e.update.name),o=new En({mapValue:{fields:e.update.fields}});if(e.updateMask){const u=(function(d){const p=d.fieldPaths||[];return new Kn(p.map((_=>At.fromServerFormat(_))))})(e.updateMask);return new Ts(s,o,u,t,i)}return new Gu(s,o,t,i)}if(e.delete){const s=Rr(n,e.delete);return new Ku(s,t)}if(e.verify){const s=Rr(n,e.verify);return new DE(s,t)}return he(1463,{proto:e})}function PL(n,e){return n&&n.length>0?(ge(e!==void 0,14353),n.map((t=>(function(s,o){let u=s.updateTime?Lt(s.updateTime):Lt(o);return u.isEqual(Ee.min())&&(u=Lt(o)),new EL(u,s.transformResults||[])})(t,e)))):[]}function V1(n,e){return{documents:[x1(n,e.path)]}}function L1(n,e){const t={structuredQuery:{}},i=e.path;let s;e.collectionGroup!==null?(s=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=x1(n,s);const o=(function(p){if(p.length!==0)return B1(st.create(p,"and"))})(e.filters);o&&(t.structuredQuery.where=o);const u=(function(p){if(p.length!==0)return p.map((_=>(function(w){return{field:tu(w.field),direction:kL(w.dir)}})(_)))})(e.orderBy);u&&(t.structuredQuery.orderBy=u);const h=yv(n,e.limit);return h!==null&&(t.structuredQuery.limit=h),e.startAt&&(t.structuredQuery.startAt=(function(p){return{before:p.inclusive,values:p.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(p){return{before:!p.inclusive,values:p.position}})(e.endAt)),{ft:t,parent:s}}function U1(n){let e=P1(n.parent);const t=n.structuredQuery,i=t.from?t.from.length:0;let s=null;if(i>0){ge(i===1,65062);const _=t.from[0];_.allDescendants?s=_.collectionId:e=e.child(_.collectionId)}let o=[];t.where&&(o=(function(y){const w=F1(y);return w instanceof st&&bE(w)?w.getFilters():[w]})(t.where));let u=[];t.orderBy&&(u=(function(y){return y.map((w=>(function(O){return new tf(nu(O.field),(function(V){switch(V){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(O.direction))})(w)))})(t.orderBy));let h=null;t.limit&&(h=(function(y){let w;return w=typeof y=="object"?y.value:y,If(w)?null:w})(t.limit));let d=null;t.startAt&&(d=(function(y){const w=!!y.before,A=y.values||[];return new Aa(A,w)})(t.startAt));let p=null;return t.endAt&&(p=(function(y){const w=!y.before,A=y.values||[];return new Aa(A,w)})(t.endAt)),c1(e,s,u,o,h,"F",d,p)}function ML(n,e){const t=(function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return he(28987,{purpose:s})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function F1(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=nu(t.unaryFilter.field);return Fe.create(i,"==",{doubleValue:NaN});case"IS_NULL":const s=nu(t.unaryFilter.field);return Fe.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=nu(t.unaryFilter.field);return Fe.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=nu(t.unaryFilter.field);return Fe.create(u,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return he(61313);default:return he(60726)}})(n):n.fieldFilter!==void 0?(function(t){return Fe.create(nu(t.fieldFilter.field),(function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return he(58110);default:return he(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return st.create(t.compositeFilter.filters.map((i=>F1(i))),(function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return he(1026)}})(t.compositeFilter.op))})(n):he(30097,{filter:n})}function kL(n){return bL[n]}function VL(n){return RL[n]}function LL(n){return CL[n]}function tu(n){return{fieldPath:n.canonicalString()}}function nu(n){return At.fromServerFormat(n.fieldPath)}function B1(n){return n instanceof Fe?(function(t){if(t.op==="=="){if(gb(t.value))return{unaryFilter:{field:tu(t.field),op:"IS_NAN"}};if(pb(t.value))return{unaryFilter:{field:tu(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(gb(t.value))return{unaryFilter:{field:tu(t.field),op:"IS_NOT_NAN"}};if(pb(t.value))return{unaryFilter:{field:tu(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:tu(t.field),op:VL(t.op),value:t.value}}})(n):n instanceof st?(function(t){const i=t.getFilters().map((s=>B1(s)));return i.length===1?i[0]:{compositeFilter:{op:LL(t.op),filters:i}}})(n):he(54877,{filter:n})}function UL(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function z1(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}class ss{constructor(e,t,i,s,o=Ee.min(),u=Ee.min(),h=Ot.EMPTY_BYTE_STRING,d=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=s,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=h,this.expectedCount=d}withSequenceNumber(e){return new ss(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new ss(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ss(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ss(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class q1{constructor(e){this.yt=e}}function FL(n,e){let t;if(e.document)t=k1(n.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const i=ae.fromSegments(e.noDocument.path),s=Fo(e.noDocument.readTime);t=yt.newNoDocument(i,s),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return he(56709);{const i=ae.fromSegments(e.unknownDocument.path),s=Fo(e.unknownDocument.version);t=yt.newUnknownDocument(i,s)}}return e.readTime&&t.setReadTime((function(s){const o=new Ze(s[0],s[1]);return Ee.fromTimestamp(o)})(e.readTime)),t}function Pb(n,e){const t=e.key,i={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:hp(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())i.document=(function(o,u){return{name:nf(o,u.key),fields:u.data.value.mapValue.fields,updateTime:Ru(o,u.version.toTimestamp()),createTime:Ru(o,u.createTime.toTimestamp())}})(n.yt,e);else if(e.isNoDocument())i.noDocument={path:t.path.toArray(),readTime:Uo(e.version)};else{if(!e.isUnknownDocument())return he(57904,{document:e});i.unknownDocument={path:t.path.toArray(),version:Uo(e.version)}}return i}function hp(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Uo(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Fo(n){const e=new Ze(n.seconds,n.nanoseconds);return Ee.fromTimestamp(e)}function Io(n,e){const t=(e.baseMutations||[]).map((o=>Tv(n.yt,o)));for(let o=0;o<e.mutations.length-1;++o){const u=e.mutations[o];if(o+1<e.mutations.length&&e.mutations[o+1].transform!==void 0){const h=e.mutations[o+1];u.updateTransforms=h.transform.fieldTransforms,e.mutations.splice(o+1,1),++o}}const i=e.mutations.map((o=>Tv(n.yt,o))),s=Ze.fromMillis(e.localWriteTimeMs);return new OE(e.batchId,s,t,i)}function Ih(n){const e=Fo(n.readTime),t=n.lastLimboFreeSnapshotVersion!==void 0?Fo(n.lastLimboFreeSnapshotVersion):Ee.min();let i;return i=(function(o){return o.documents!==void 0})(n.query)?(function(o){const u=o.documents.length;return ge(u===1,1966,{count:u}),Vn(Hu(P1(o.documents[0])))})(n.query):(function(o){return Vn(U1(o))})(n.query),new ss(i,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,Ot.fromBase64String(n.resumeToken))}function j1(n,e){const t=Uo(e.snapshotVersion),i=Uo(e.lastLimboFreeSnapshotVersion);let s;s=lp(e.target)?V1(n.yt,e.target):L1(n.yt,e.target).ft;const o=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:ko(e.target),readTime:t,resumeToken:o,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:s}}function VE(n){const e=U1({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?cp(e,e.limit,"L"):e}function My(n,e){return new PE(e.largestBatchId,Tv(n.yt,e.overlayMutation))}function Mb(n,e){const t=e.path.lastSegment();return[n,Nn(e.path.popLast()),t]}function kb(n,e,t,i){return{indexId:n,uid:e,sequenceNumber:t,readTime:Uo(i.readTime),documentKey:Nn(i.documentKey.path),largestBatchId:i.largestBatchId}}class BL{getBundleMetadata(e,t){return Vb(e).get(t).next((i=>{if(i)return(function(o){return{id:o.bundleId,createTime:Fo(o.createTime),version:o.version}})(i)}))}saveBundleMetadata(e,t){return Vb(e).put((function(s){return{bundleId:s.id,createTime:Uo(Lt(s.createTime)),version:s.version}})(t))}getNamedQuery(e,t){return Lb(e).get(t).next((i=>{if(i)return(function(o){return{name:o.name,query:VE(o.bundledQuery),readTime:Fo(o.readTime)}})(i)}))}saveNamedQuery(e,t){return Lb(e).put((function(s){return{name:s.name,readTime:Uo(Lt(s.readTime)),bundledQuery:s.bundledQuery}})(t))}}function Vb(n){return tn(n,Hp)}function Lb(n){return tn(n,Gp)}class Jp{constructor(e,t){this.serializer=e,this.userId=t}static wt(e,t){const i=t.uid||"";return new Jp(e,i)}getOverlay(e,t){return lh(e).get(Mb(this.userId,t)).next((i=>i?My(this.serializer,i):null))}getOverlays(e,t){const i=Ir();return B.forEach(t,(s=>this.getOverlay(e,s).next((o=>{o!==null&&i.set(s,o)})))).next((()=>i))}saveOverlays(e,t,i){const s=[];return i.forEach(((o,u)=>{const h=new PE(t,u);s.push(this.St(e,h))})),B.waitFor(s)}removeOverlaysForBatchId(e,t,i){const s=new Set;t.forEach((u=>s.add(Nn(u.getCollectionPath()))));const o=[];return s.forEach((u=>{const h=IDBKeyRange.bound([this.userId,u,i],[this.userId,u,i+1],!1,!0);o.push(lh(e).Z(uv,h))})),B.waitFor(o)}getOverlaysForCollection(e,t,i){const s=Ir(),o=Nn(t),u=IDBKeyRange.bound([this.userId,o,i],[this.userId,o,Number.POSITIVE_INFINITY],!0);return lh(e).J(uv,u).next((h=>{for(const d of h){const p=My(this.serializer,d);s.set(p.getKey(),p)}return s}))}getOverlaysForCollectionGroup(e,t,i,s){const o=Ir();let u;const h=IDBKeyRange.bound([this.userId,t,i],[this.userId,t,Number.POSITIVE_INFINITY],!0);return lh(e).ee({index:qC,range:h},((d,p,_)=>{const y=My(this.serializer,p);o.size()<s||y.largestBatchId===u?(o.set(y.getKey(),y),u=y.largestBatchId):_.done()})).next((()=>o))}St(e,t){return lh(e).put((function(s,o,u){const[h,d,p]=Mb(o,u.mutation.key);return{userId:o,collectionPath:d,documentId:p,collectionGroup:u.mutation.key.getCollectionGroup(),largestBatchId:u.largestBatchId,overlayMutation:rf(s.yt,u.mutation)}})(this.serializer,this.userId,t))}}function lh(n){return tn(n,Kp)}class zL{bt(e){return tn(e,wE)}getSessionToken(e){return this.bt(e).get("sessionToken").next((t=>{const i=t?.value;return i?Ot.fromUint8Array(i):Ot.EMPTY_BYTE_STRING}))}setSessionToken(e,t){return this.bt(e).put({name:"sessionToken",value:t.toUint8Array()})}}class Ao{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(It(e.integerValue));else if("doubleValue"in e){const i=It(e.doubleValue);isNaN(i)?this.Ft(t,13):(this.Ft(t,15),$h(i)?t.Mt(0):t.Mt(i))}else if("timestampValue"in e){let i=e.timestampValue;this.Ft(t,20),typeof i=="string"&&(i=ms(i)),t.xt(`${i.seconds||""}`),t.Mt(i.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(ps(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){const i=e.geoPointValue;this.Ft(t,45),t.Mt(i.latitude||0),t.Mt(i.longitude||0)}else"mapValue"in e?e1(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):Yp(e)?this.kt(e.mapValue,t):(this.qt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.Qt(e.arrayValue,t),this.Nt(t)):he(19022,{$t:e})}Ot(e,t){this.Ft(t,25),this.Ut(e,t)}Ut(e,t){t.xt(e)}qt(e,t){const i=e.fields||{};this.Ft(t,55);for(const s of Object.keys(i))this.Ot(s,t),this.Ct(i[s],t)}kt(e,t){const i=e.fields||{};this.Ft(t,53);const s=wu,o=i[s].arrayValue?.values?.length||0;this.Ft(t,15),t.Mt(It(o)),this.Ot(s,t),this.Ct(i[s],t)}Qt(e,t){const i=e.values||[];this.Ft(t,50);for(const s of i)this.Ct(s,t)}Lt(e,t){this.Ft(t,37),ae.fromName(e).path.forEach((i=>{this.Ft(t,60),this.Ut(i,t)}))}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}}Ao.Kt=new Ao;const $l=255;function qL(n){if(n===0)return 8;let e=0;return n>>4||(e+=4,n<<=4),n>>6||(e+=2,n<<=2),n>>7||(e+=1),e}function Ub(n){const e=64-(function(i){let s=0;for(let o=0;o<8;++o){const u=qL(255&i[o]);if(s+=u,u!==8)break}return s})(n);return Math.ceil(e/8)}class jL{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Wt(e){const t=e[Symbol.iterator]();let i=t.next();for(;!i.done;)this.Gt(i.value),i=t.next();this.zt()}jt(e){const t=e[Symbol.iterator]();let i=t.next();for(;!i.done;)this.Jt(i.value),i=t.next();this.Ht()}Yt(e){for(const t of e){const i=t.charCodeAt(0);if(i<128)this.Gt(i);else if(i<2048)this.Gt(960|i>>>6),this.Gt(128|63&i);else if(t<"\uD800"||"\uDBFF"<t)this.Gt(480|i>>>12),this.Gt(128|63&i>>>6),this.Gt(128|63&i);else{const s=t.codePointAt(0);this.Gt(240|s>>>18),this.Gt(128|63&s>>>12),this.Gt(128|63&s>>>6),this.Gt(128|63&s)}}this.zt()}Zt(e){for(const t of e){const i=t.charCodeAt(0);if(i<128)this.Jt(i);else if(i<2048)this.Jt(960|i>>>6),this.Jt(128|63&i);else if(t<"\uD800"||"\uDBFF"<t)this.Jt(480|i>>>12),this.Jt(128|63&i>>>6),this.Jt(128|63&i);else{const s=t.codePointAt(0);this.Jt(240|s>>>18),this.Jt(128|63&s>>>12),this.Jt(128|63&s>>>6),this.Jt(128|63&s)}}this.Ht()}Xt(e){const t=this.en(e),i=Ub(t);this.tn(1+i),this.buffer[this.position++]=255&i;for(let s=t.length-i;s<t.length;++s)this.buffer[this.position++]=255&t[s]}nn(e){const t=this.en(e),i=Ub(t);this.tn(1+i),this.buffer[this.position++]=~(255&i);for(let s=t.length-i;s<t.length;++s)this.buffer[this.position++]=~(255&t[s])}rn(){this.sn($l),this.sn(255)}_n(){this.an($l),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const t=(function(o){const u=new DataView(new ArrayBuffer(8));return u.setFloat64(0,o,!1),new Uint8Array(u.buffer)})(e),i=!!(128&t[0]);t[0]^=i?255:128;for(let s=1;s<t.length;++s)t[s]^=i?255:0;return t}Gt(e){const t=255&e;t===0?(this.sn(0),this.sn(255)):t===$l?(this.sn($l),this.sn(0)):this.sn(t)}Jt(e){const t=255&e;t===0?(this.an(0),this.an(255)):t===$l?(this.an($l),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Ht(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const t=e+this.position;if(t<=this.buffer.length)return;let i=2*this.buffer.length;i<t&&(i=t);const s=new Uint8Array(i);s.set(this.buffer),this.buffer=s}}class HL{constructor(e){this.cn=e}Bt(e){this.cn.Wt(e)}xt(e){this.cn.Yt(e)}Mt(e){this.cn.Xt(e)}vt(){this.cn.rn()}}class GL{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class uh{constructor(){this.cn=new jL,this.ln=new HL(this.cn),this.hn=new GL(this.cn)}seed(e){this.cn.seed(e)}Pn(e){return e===0?this.ln:this.hn}un(){return this.cn.un()}reset(){this.cn.reset()}}class bo{constructor(e,t,i,s){this.Tn=e,this.In=t,this.En=i,this.dn=s}An(){const e=this.dn.length,t=e===0||this.dn[e-1]===255?e+1:e,i=new Uint8Array(t);return i.set(this.dn,0),t!==e?i.set([0],this.dn.length):++i[i.length-1],new bo(this.Tn,this.In,this.En,i)}Rn(e,t,i){return{indexId:this.Tn,uid:e,arrayValue:Km(this.En),directionalValue:Km(this.dn),orderedDocumentKey:Km(t),documentKey:i.path.toArray()}}Vn(e,t,i){const s=this.Rn(e,t,i);return[s.indexId,s.uid,s.arrayValue,s.directionalValue,s.orderedDocumentKey,s.documentKey]}}function na(n,e){let t=n.Tn-e.Tn;return t!==0?t:(t=Fb(n.En,e.En),t!==0?t:(t=Fb(n.dn,e.dn),t!==0?t:ae.comparator(n.In,e.In)))}function Fb(n,e){for(let t=0;t<n.length&&t<e.length;++t){const i=n[t]-e[t];if(i!==0)return i}return n.length-e.length}function Km(n){return iC()?(function(t){let i="";for(let s=0;s<t.length;s++)i+=String.fromCharCode(t[s]);return i})(n):n}function Bb(n){return typeof n!="string"?n:(function(t){const i=new Uint8Array(t.length);for(let s=0;s<t.length;s++)i[s]=t.charCodeAt(s);return i})(n)}class zb{constructor(e){this.mn=new at(((t,i)=>At.comparator(t.field,i.field))),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.fn=e.orderBy,this.gn=[];for(const t of e.filters){const i=t;i.isInequality()?this.mn=this.mn.add(i):this.gn.push(i)}}get pn(){return this.mn.size>1}yn(e){if(ge(e.collectionGroup===this.collectionId,49279),this.pn)return!1;const t=av(e);if(t!==void 0&&!this.wn(t))return!1;const i=Eo(e);let s=new Set,o=0,u=0;for(;o<i.length&&this.wn(i[o]);++o)s=s.add(i[o].fieldPath.canonicalString());if(o===i.length)return!0;if(this.mn.size>0){const h=this.mn.getIterator().getNext();if(!s.has(h.field.canonicalString())){const d=i[o];if(!this.Sn(h,d)||!this.bn(this.fn[u++],d))return!1}++o}for(;o<i.length;++o){const h=i[o];if(u>=this.fn.length||!this.bn(this.fn[u++],h))return!1}return!0}Dn(){if(this.pn)return null;let e=new at(At.comparator);const t=[];for(const i of this.gn)if(!i.field.isKeyField())if(i.op==="array-contains"||i.op==="array-contains-any")t.push(new Um(i.field,2));else{if(e.has(i.field))continue;e=e.add(i.field),t.push(new Um(i.field,0))}for(const i of this.fn)i.field.isKeyField()||e.has(i.field)||(e=e.add(i.field),t.push(new Um(i.field,i.dir==="asc"?0:1)));return new ip(ip.UNKNOWN_ID,this.collectionId,t,Qh.empty())}wn(e){for(const t of this.gn)if(this.Sn(t,e))return!0;return!1}Sn(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const i=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===i}bn(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}function H1(n){if(ge(n instanceof Fe||n instanceof st,20012),n instanceof Fe){if(n instanceof u1){const t=n.value.arrayValue?.values?.map((i=>Fe.create(n.field,"==",i)))||[];return st.create(t,"or")}return n}const e=n.filters.map((t=>H1(t)));return st.create(e,n.op)}function KL(n){if(n.getFilters().length===0)return[];const e=Iv(H1(n));return ge(G1(e),7391),wv(e)||Sv(e)?[e]:e.getFilters()}function wv(n){return n instanceof Fe}function Sv(n){return n instanceof st&&bE(n)}function G1(n){return wv(n)||Sv(n)||(function(t){if(t instanceof st&&mv(t)){for(const i of t.getFilters())if(!wv(i)&&!Sv(i))return!1;return!0}return!1})(n)}function Iv(n){if(ge(n instanceof Fe||n instanceof st,34018),n instanceof Fe)return n;if(n.filters.length===1)return Iv(n.filters[0]);const e=n.filters.map((i=>Iv(i)));let t=st.create(e,n.op);return t=fp(t),G1(t)?t:(ge(t instanceof st,64498),ge(Iu(t),40251),ge(t.filters.length>1,57927),t.filters.reduce(((i,s)=>LE(i,s))))}function LE(n,e){let t;return ge(n instanceof Fe||n instanceof st,38388),ge(e instanceof Fe||e instanceof st,25473),t=n instanceof Fe?e instanceof Fe?(function(s,o){return st.create([s,o],"and")})(n,e):qb(n,e):e instanceof Fe?qb(e,n):(function(s,o){if(ge(s.filters.length>0&&o.filters.length>0,48005),Iu(s)&&Iu(o))return a1(s,o.getFilters());const u=mv(s)?s:o,h=mv(s)?o:s,d=u.filters.map((p=>LE(p,h)));return st.create(d,"or")})(n,e),fp(t)}function qb(n,e){if(Iu(e))return a1(e,n.getFilters());{const t=e.filters.map((i=>LE(n,i)));return st.create(t,"or")}}function fp(n){if(ge(n instanceof Fe||n instanceof st,11850),n instanceof Fe)return n;const e=n.getFilters();if(e.length===1)return fp(e[0]);if(r1(n))return n;const t=e.map((s=>fp(s))),i=[];return t.forEach((s=>{s instanceof Fe?i.push(s):s instanceof st&&(s.op===n.op?i.push(...s.filters):i.push(s))})),i.length===1?i[0]:st.create(i,n.op)}class QL{constructor(){this.Cn=new UE}addToCollectionParentIndex(e,t){return this.Cn.add(t),B.resolve()}getCollectionParents(e,t){return B.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return B.resolve()}deleteFieldIndex(e,t){return B.resolve()}deleteAllFieldIndexes(e){return B.resolve()}createTargetIndexes(e,t){return B.resolve()}getDocumentsMatchingTarget(e,t){return B.resolve(null)}getIndexType(e,t){return B.resolve(0)}getFieldIndexes(e,t){return B.resolve([])}getNextCollectionGroupToUpdate(e){return B.resolve(null)}getMinOffset(e,t){return B.resolve(oi.min())}getMinOffsetFromCollectionGroup(e,t){return B.resolve(oi.min())}updateCollectionGroup(e,t,i){return B.resolve()}updateIndexEntries(e,t){return B.resolve()}}class UE{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),s=this.index[t]||new at(Ve.comparator),o=!s.has(i);return this.index[t]=s.add(i),o}has(e){const t=e.lastSegment(),i=e.popLast(),s=this.index[t];return s&&s.has(i)}getEntries(e){return(this.index[e]||new at(Ve.comparator)).toArray()}}const jb="IndexedDbIndexManager",Rm=new Uint8Array(0);class $L{constructor(e,t){this.databaseId=t,this.vn=new UE,this.Fn=new Es((i=>ko(i)),((i,s)=>bf(i,s))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.vn.has(t)){const i=t.lastSegment(),s=t.popLast();e.addOnCommittedListener((()=>{this.vn.add(t)}));const o={collectionId:i,parent:Nn(s)};return Hb(e).put(o)}return B.resolve()}getCollectionParents(e,t){const i=[],s=IDBKeyRange.bound([t,""],[RC(t),""],!1,!0);return Hb(e).J(s).next((o=>{for(const u of o){if(u.collectionId!==t)break;i.push(Sr(u.parent))}return i}))}addFieldIndex(e,t){const i=ch(e),s=(function(h){return{indexId:h.indexId,collectionGroup:h.collectionGroup,fields:h.fields.map((d=>[d.fieldPath.canonicalString(),d.kind]))}})(t);delete s.indexId;const o=i.add(s);if(t.indexState){const u=Wl(e);return o.next((h=>{u.put(kb(h,this.uid,t.indexState.sequenceNumber,t.indexState.offset))}))}return o.next()}deleteFieldIndex(e,t){const i=ch(e),s=Wl(e),o=Yl(e);return i.delete(t.indexId).next((()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const t=ch(e),i=Yl(e),s=Wl(e);return t.Z().next((()=>i.Z())).next((()=>s.Z()))}createTargetIndexes(e,t){return B.forEach(this.Mn(t),(i=>this.getIndexType(e,i).next((s=>{if(s===0||s===1){const o=new zb(i).Dn();if(o!=null)return this.addFieldIndex(e,o)}}))))}getDocumentsMatchingTarget(e,t){const i=Yl(e);let s=!0;const o=new Map;return B.forEach(this.Mn(t),(u=>this.xn(e,u).next((h=>{s&&(s=!!h),o.set(u,h)})))).next((()=>{if(s){let u=De();const h=[];return B.forEach(o,((d,p)=>{re(jb,`Using index ${(function(te){return`id=${te.indexId}|cg=${te.collectionGroup}|f=${te.fields.map((fe=>`${fe.fieldPath}:${fe.kind}`)).join(",")}`})(d)} to execute ${ko(t)}`);const _=(function(te,fe){const ye=av(fe);if(ye===void 0)return null;for(const ve of up(te,ye.fieldPath))switch(ve.op){case"array-contains-any":return ve.value.arrayValue.values||[];case"array-contains":return[ve.value]}return null})(p,d),y=(function(te,fe){const ye=new Map;for(const ve of Eo(fe))for(const R of up(te,ve.fieldPath))switch(R.op){case"==":case"in":ye.set(ve.fieldPath.canonicalString(),R.value);break;case"not-in":case"!=":return ye.set(ve.fieldPath.canonicalString(),R.value),Array.from(ye.values())}return null})(p,d),w=(function(te,fe){const ye=[];let ve=!0;for(const R of Eo(fe)){const b=R.kind===0?Tb(te,R.fieldPath,te.startAt):wb(te,R.fieldPath,te.startAt);ye.push(b.value),ve&&(ve=b.inclusive)}return new Aa(ye,ve)})(p,d),A=(function(te,fe){const ye=[];let ve=!0;for(const R of Eo(fe)){const b=R.kind===0?wb(te,R.fieldPath,te.endAt):Tb(te,R.fieldPath,te.endAt);ye.push(b.value),ve&&(ve=b.inclusive)}return new Aa(ye,ve)})(p,d),O=this.On(d,p,w),F=this.On(d,p,A),V=this.Nn(d,p,y),X=this.Bn(d.indexId,_,O,w.inclusive,F,A.inclusive,V);return B.forEach(X,(ne=>i.Y(ne,t.limit).next((te=>{te.forEach((fe=>{const ye=ae.fromSegments(fe.documentKey);u.has(ye)||(u=u.add(ye),h.push(ye))}))}))))})).next((()=>h))}return B.resolve(null)}))}Mn(e){let t=this.Fn.get(e);return t||(e.filters.length===0?t=[e]:t=KL(st.create(e.filters,"and")).map((i=>gv(e.path,e.collectionGroup,e.orderBy,i.getFilters(),e.limit,e.startAt,e.endAt))),this.Fn.set(e,t),t)}Bn(e,t,i,s,o,u,h){const d=(t!=null?t.length:1)*Math.max(i.length,o.length),p=d/(t!=null?t.length:1),_=[];for(let y=0;y<d;++y){const w=t?this.Ln(t[y/p]):Rm,A=this.kn(e,w,i[y%p],s),O=this.qn(e,w,o[y%p],u),F=h.map((V=>this.kn(e,w,V,!0)));_.push(...this.createRange(A,O,F))}return _}kn(e,t,i,s){const o=new bo(e,ae.empty(),t,i);return s?o:o.An()}qn(e,t,i,s){const o=new bo(e,ae.empty(),t,i);return s?o.An():o}xn(e,t){const i=new zb(t),s=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,s).next((o=>{let u=null;for(const h of o)i.yn(h)&&(!u||h.fields.length>u.fields.length)&&(u=h);return u}))}getIndexType(e,t){let i=2;const s=this.Mn(t);return B.forEach(s,(o=>this.xn(e,o).next((u=>{u?i!==0&&u.fields.length<(function(d){let p=new at(At.comparator),_=!1;for(const y of d.filters)for(const w of y.getFlattenedFilters())w.field.isKeyField()||(w.op==="array-contains"||w.op==="array-contains-any"?_=!0:p=p.add(w.field));for(const y of d.orderBy)y.field.isKeyField()||(p=p.add(y.field));return p.size+(_?1:0)})(o)&&(i=1):i=0})))).next((()=>(function(u){return u.limit!==null})(t)&&s.length>1&&i===2?1:i))}Qn(e,t){const i=new uh;for(const s of Eo(e)){const o=t.data.field(s.fieldPath);if(o==null)return null;const u=i.Pn(s.kind);Ao.Kt.Dt(o,u)}return i.un()}Ln(e){const t=new uh;return Ao.Kt.Dt(e,t.Pn(0)),t.un()}$n(e,t){const i=new uh;return Ao.Kt.Dt(Mo(this.databaseId,t),i.Pn((function(o){const u=Eo(o);return u.length===0?0:u[u.length-1].kind})(e))),i.un()}Nn(e,t,i){if(i===null)return[];let s=[];s.push(new uh);let o=0;for(const u of Eo(e)){const h=i[o++];for(const d of s)if(this.Un(t,u.fieldPath)&&ef(h))s=this.Kn(s,u,h);else{const p=d.Pn(u.kind);Ao.Kt.Dt(h,p)}}return this.Wn(s)}On(e,t,i){return this.Nn(e,t,i.position)}Wn(e){const t=[];for(let i=0;i<e.length;++i)t[i]=e[i].un();return t}Kn(e,t,i){const s=[...e],o=[];for(const u of i.arrayValue.values||[])for(const h of s){const d=new uh;d.seed(h.un()),Ao.Kt.Dt(u,d.Pn(t.kind)),o.push(d)}return o}Un(e,t){return!!e.filters.find((i=>i instanceof Fe&&i.field.isEqual(t)&&(i.op==="in"||i.op==="not-in")))}getFieldIndexes(e,t){const i=ch(e),s=Wl(e);return(t?i.J(lv,IDBKeyRange.bound(t,t)):i.J()).next((o=>{const u=[];return B.forEach(o,(h=>s.get([h.indexId,this.uid]).next((d=>{u.push((function(_,y){const w=y?new Qh(y.sequenceNumber,new oi(Fo(y.readTime),new ae(Sr(y.documentKey)),y.largestBatchId)):Qh.empty(),A=_.fields.map((([O,F])=>new Um(At.fromServerFormat(O),F)));return new ip(_.indexId,_.collectionGroup,A,w)})(h,d))})))).next((()=>u))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((t=>t.length===0?null:(t.sort(((i,s)=>{const o=i.indexState.sequenceNumber-s.indexState.sequenceNumber;return o!==0?o:be(i.collectionGroup,s.collectionGroup)})),t[0].collectionGroup)))}updateCollectionGroup(e,t,i){const s=ch(e),o=Wl(e);return this.Gn(e).next((u=>s.J(lv,IDBKeyRange.bound(t,t)).next((h=>B.forEach(h,(d=>o.put(kb(d.indexId,this.uid,u,i))))))))}updateIndexEntries(e,t){const i=new Map;return B.forEach(t,((s,o)=>{const u=i.get(s.collectionGroup);return(u?B.resolve(u):this.getFieldIndexes(e,s.collectionGroup)).next((h=>(i.set(s.collectionGroup,h),B.forEach(h,(d=>this.zn(e,s,d).next((p=>{const _=this.jn(o,d);return p.isEqual(_)?B.resolve():this.Jn(e,o,d,p,_)})))))))}))}Hn(e,t,i,s){return Yl(e).put(s.Rn(this.uid,this.$n(i,t.key),t.key))}Yn(e,t,i,s){return Yl(e).delete(s.Vn(this.uid,this.$n(i,t.key),t.key))}zn(e,t,i){const s=Yl(e);let o=new at(na);return s.ee({index:zC,range:IDBKeyRange.only([i.indexId,this.uid,Km(this.$n(i,t))])},((u,h)=>{o=o.add(new bo(i.indexId,t,Bb(h.arrayValue),Bb(h.directionalValue)))})).next((()=>o))}jn(e,t){let i=new at(na);const s=this.Qn(t,e);if(s==null)return i;const o=av(t);if(o!=null){const u=e.data.field(o.fieldPath);if(ef(u))for(const h of u.arrayValue.values||[])i=i.add(new bo(t.indexId,e.key,this.Ln(h),s))}else i=i.add(new bo(t.indexId,e.key,Rm,s));return i}Jn(e,t,i,s,o){re(jb,"Updating index entries for document '%s'",t.key);const u=[];return(function(d,p,_,y,w){const A=d.getIterator(),O=p.getIterator();let F=Ql(A),V=Ql(O);for(;F||V;){let X=!1,ne=!1;if(F&&V){const te=_(F,V);te<0?ne=!0:te>0&&(X=!0)}else F!=null?ne=!0:X=!0;X?(y(V),V=Ql(O)):ne?(w(F),F=Ql(A)):(F=Ql(A),V=Ql(O))}})(s,o,na,(h=>{u.push(this.Hn(e,t,i,h))}),(h=>{u.push(this.Yn(e,t,i,h))})),B.waitFor(u)}Gn(e){let t=1;return Wl(e).ee({index:BC,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((i,s,o)=>{o.done(),t=s.sequenceNumber+1})).next((()=>t))}createRange(e,t,i){i=i.sort(((u,h)=>na(u,h))).filter(((u,h,d)=>!h||na(u,d[h-1])!==0));const s=[];s.push(e);for(const u of i){const h=na(u,e),d=na(u,t);if(h===0)s[0]=e.An();else if(h>0&&d<0)s.push(u),s.push(u.An());else if(d>0)break}s.push(t);const o=[];for(let u=0;u<s.length;u+=2){if(this.Zn(s[u],s[u+1]))return[];const h=s[u].Vn(this.uid,Rm,ae.empty()),d=s[u+1].Vn(this.uid,Rm,ae.empty());o.push(IDBKeyRange.bound(h,d))}return o}Zn(e,t){return na(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(Gb)}getMinOffset(e,t){return B.mapArray(this.Mn(t),(i=>this.xn(e,i).next((s=>s||he(44426))))).next(Gb)}}function Hb(n){return tn(n,Xh)}function Yl(n){return tn(n,Dh)}function ch(n){return tn(n,TE)}function Wl(n){return tn(n,Nh)}function Gb(n){ge(n.length!==0,28825);let e=n[0].indexState.offset,t=e.largestBatchId;for(let i=1;i<n.length;i++){const s=n[i].indexState.offset;yE(s,e)<0&&(e=s),t<s.largestBatchId&&(t=s.largestBatchId)}return new oi(e.readTime,e.documentKey,t)}const Kb={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},K1=41943040;class In{static withCacheSize(e){return new In(e,In.DEFAULT_COLLECTION_PERCENTILE,In.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}function Q1(n,e,t){const i=n.store(Fi),s=n.store(yu),o=[],u=IDBKeyRange.only(t.batchId);let h=0;const d=i.ee({range:u},((_,y,w)=>(h++,w.delete())));o.push(d.next((()=>{ge(h===1,47070,{batchId:t.batchId})})));const p=[];for(const _ of t.mutations){const y=LC(e,_.key.path,t.batchId);o.push(s.delete(y)),p.push(_.key)}return B.waitFor(o).next((()=>p))}function dp(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw he(14731);e=n.noDocument}return JSON.stringify(e).length}In.DEFAULT_COLLECTION_PERCENTILE=10,In.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,In.DEFAULT=new In(K1,In.DEFAULT_COLLECTION_PERCENTILE,In.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),In.DISABLED=new In(-1,0,0);class Zp{constructor(e,t,i,s){this.userId=e,this.serializer=t,this.indexManager=i,this.referenceDelegate=s,this.Xn={}}static wt(e,t,i,s){ge(e.uid!=="",64387);const o=e.isAuthenticated()?e.uid:"";return new Zp(o,t,i,s)}checkEmpty(e){let t=!0;const i=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ia(e).ee({index:Co,range:i},((s,o,u)=>{t=!1,u.done()})).next((()=>t))}addMutationBatch(e,t,i,s){const o=iu(e),u=ia(e);return u.add({}).next((h=>{ge(typeof h=="number",49019);const d=new OE(h,t,i,s),p=(function(A,O,F){const V=F.baseMutations.map((ne=>rf(A.yt,ne))),X=F.mutations.map((ne=>rf(A.yt,ne)));return{userId:O,batchId:F.batchId,localWriteTimeMs:F.localWriteTime.toMillis(),baseMutations:V,mutations:X}})(this.serializer,this.userId,d),_=[];let y=new at(((w,A)=>be(w.canonicalString(),A.canonicalString())));for(const w of s){const A=LC(this.userId,w.key.path,h);y=y.add(w.key.path.popLast()),_.push(u.put(p)),_.push(o.put(A,CV))}return y.forEach((w=>{_.push(this.indexManager.addToCollectionParentIndex(e,w))})),e.addOnCommittedListener((()=>{this.Xn[h]=d.keys()})),B.waitFor(_).next((()=>d))}))}lookupMutationBatch(e,t){return ia(e).get(t).next((i=>i?(ge(i.userId===this.userId,48,"Unexpected user for mutation batch",{userId:i.userId,batchId:t}),Io(this.serializer,i)):null))}er(e,t){return this.Xn[t]?B.resolve(this.Xn[t]):this.lookupMutationBatch(e,t).next((i=>{if(i){const s=i.keys();return this.Xn[t]=s,s}return null}))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,s=IDBKeyRange.lowerBound([this.userId,i]);let o=null;return ia(e).ee({index:Co,range:s},((u,h,d)=>{h.userId===this.userId&&(ge(h.batchId>=i,47524,{tr:i}),o=Io(this.serializer,h)),d.done()})).next((()=>o))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let i=pa;return ia(e).ee({index:Co,range:t,reverse:!0},((s,o,u)=>{i=o.batchId,u.done()})).next((()=>i))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,pa],[this.userId,Number.POSITIVE_INFINITY]);return ia(e).J(Co,t).next((i=>i.map((s=>Io(this.serializer,s)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const i=Fm(this.userId,t.path),s=IDBKeyRange.lowerBound(i),o=[];return iu(e).ee({range:s},((u,h,d)=>{const[p,_,y]=u,w=Sr(_);if(p===this.userId&&t.path.isEqual(w))return ia(e).get(y).next((A=>{if(!A)throw he(61480,{nr:u,batchId:y});ge(A.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:A.userId,batchId:y}),o.push(Io(this.serializer,A))}));d.done()})).next((()=>o))}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new at(be);const s=[];return t.forEach((o=>{const u=Fm(this.userId,o.path),h=IDBKeyRange.lowerBound(u),d=iu(e).ee({range:h},((p,_,y)=>{const[w,A,O]=p,F=Sr(A);w===this.userId&&o.path.isEqual(F)?i=i.add(O):y.done()}));s.push(d)})),B.waitFor(s).next((()=>this.rr(e,i)))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,s=i.length+1,o=Fm(this.userId,i),u=IDBKeyRange.lowerBound(o);let h=new at(be);return iu(e).ee({range:u},((d,p,_)=>{const[y,w,A]=d,O=Sr(w);y===this.userId&&i.isPrefixOf(O)?O.length===s&&(h=h.add(A)):_.done()})).next((()=>this.rr(e,h)))}rr(e,t){const i=[],s=[];return t.forEach((o=>{s.push(ia(e).get(o).next((u=>{if(u===null)throw he(35274,{batchId:o});ge(u.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:u.userId,batchId:o}),i.push(Io(this.serializer,u))})))})),B.waitFor(s).next((()=>i))}removeMutationBatch(e,t){return Q1(e.le,this.userId,t).next((i=>(e.addOnCommittedListener((()=>{this.ir(t.batchId)})),B.forEach(i,(s=>this.referenceDelegate.markPotentiallyOrphaned(e,s))))))}ir(e){delete this.Xn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return B.resolve();const i=IDBKeyRange.lowerBound((function(u){return[u]})(this.userId)),s=[];return iu(e).ee({range:i},((o,u,h)=>{if(o[0]===this.userId){const d=Sr(o[1]);s.push(d)}else h.done()})).next((()=>{ge(s.length===0,56720,{sr:s.map((o=>o.canonicalString()))})}))}))}containsKey(e,t){return $1(e,this.userId,t)}_r(e){return Y1(e).get(this.userId).next((t=>t||{userId:this.userId,lastAcknowledgedBatchId:pa,lastStreamToken:""}))}}function $1(n,e,t){const i=Fm(e,t.path),s=i[1],o=IDBKeyRange.lowerBound(i);let u=!1;return iu(n).ee({range:o,X:!0},((h,d,p)=>{const[_,y,w]=h;_===e&&y===s&&(u=!0),p.done()})).next((()=>u))}function ia(n){return tn(n,Fi)}function iu(n){return tn(n,yu)}function Y1(n){return tn(n,Yh)}class Bo{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Bo(0)}static cr(){return new Bo(-1)}}class YL{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.lr(e).next((t=>{const i=new Bo(t.highestTargetId);return t.highestTargetId=i.next(),this.hr(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.lr(e).next((t=>Ee.fromTimestamp(new Ze(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.lr(e).next((t=>t.highestListenSequenceNumber))}setTargetsMetadata(e,t,i){return this.lr(e).next((s=>(s.highestListenSequenceNumber=t,i&&(s.lastRemoteSnapshotVersion=i.toTimestamp()),t>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=t),this.hr(e,s))))}addTargetData(e,t){return this.Pr(e,t).next((()=>this.lr(e).next((i=>(i.targetCount+=1,this.Tr(t,i),this.hr(e,i))))))}updateTargetData(e,t){return this.Pr(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>Xl(e).delete(t.targetId))).next((()=>this.lr(e))).next((i=>(ge(i.targetCount>0,8065),i.targetCount-=1,this.hr(e,i))))}removeTargets(e,t,i){let s=0;const o=[];return Xl(e).ee(((u,h)=>{const d=Ih(h);d.sequenceNumber<=t&&i.get(d.targetId)===null&&(s++,o.push(this.removeTargetData(e,d)))})).next((()=>B.waitFor(o))).next((()=>s))}forEachTarget(e,t){return Xl(e).ee(((i,s)=>{const o=Ih(s);t(o)}))}lr(e){return Qb(e).get(ap).next((t=>(ge(t!==null,2888),t)))}hr(e,t){return Qb(e).put(ap,t)}Pr(e,t){return Xl(e).put(j1(this.serializer,t))}Tr(e,t){let i=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,i=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,i=!0),i}getTargetCount(e){return this.lr(e).next((t=>t.targetCount))}getTargetData(e,t){const i=ko(t),s=IDBKeyRange.bound([i,Number.NEGATIVE_INFINITY],[i,Number.POSITIVE_INFINITY]);let o=null;return Xl(e).ee({range:s,index:FC},((u,h,d)=>{const p=Ih(h);bf(t,p.target)&&(o=p,d.done())})).next((()=>o))}addMatchingKeys(e,t,i){const s=[],o=oa(e);return t.forEach((u=>{const h=Nn(u.path);s.push(o.put({targetId:i,path:h})),s.push(this.referenceDelegate.addReference(e,i,u))})),B.waitFor(s)}removeMatchingKeys(e,t,i){const s=oa(e);return B.forEach(t,(o=>{const u=Nn(o.path);return B.waitFor([s.delete([i,u]),this.referenceDelegate.removeReference(e,i,o)])}))}removeMatchingKeysForTargetId(e,t){const i=oa(e),s=IDBKeyRange.bound([t],[t+1],!1,!0);return i.delete(s)}getMatchingKeysForTargetId(e,t){const i=IDBKeyRange.bound([t],[t+1],!1,!0),s=oa(e);let o=De();return s.ee({range:i,X:!0},((u,h,d)=>{const p=Sr(u[1]),_=new ae(p);o=o.add(_)})).next((()=>o))}containsKey(e,t){const i=Nn(t.path),s=IDBKeyRange.bound([i],[RC(i)],!1,!0);let o=0;return oa(e).ee({index:EE,X:!0,range:s},(([u,h],d,p)=>{u!==0&&(o++,p.done())})).next((()=>o>0))}At(e,t){return Xl(e).get(t).next((i=>i?Ih(i):null))}}function Xl(n){return tn(n,vu)}function Qb(n){return tn(n,Po)}function oa(n){return tn(n,Eu)}const $b="LruGarbageCollector",WL=1048576;function Yb([n,e],[t,i]){const s=be(n,t);return s===0?be(e,i):s}class XL{constructor(e){this.Ir=e,this.buffer=new at(Yb),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();Yb(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class W1{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){re($b,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Pa(t)?re($b,"Ignoring IndexedDB error during garbage collection: ",t):await xa(t)}await this.Vr(3e5)}))}}class JL{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((i=>Math.floor(t/100*i)))}nthSequenceNumber(e,t){if(t===0)return B.resolve(Gn.ce);const i=new XL(t);return this.mr.forEachTarget(e,(s=>i.Ar(s.sequenceNumber))).next((()=>this.mr.pr(e,(s=>i.Ar(s))))).next((()=>i.maxValue))}removeTargets(e,t,i){return this.mr.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(re("LruGarbageCollector","Garbage collection skipped; disabled"),B.resolve(Kb)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(re("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Kb):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let i,s,o,u,h,d,p;const _=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((y=>(y>this.params.maximumSequenceNumbersToCollect?(re("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${y}`),s=this.params.maximumSequenceNumbersToCollect):s=y,u=Date.now(),this.nthSequenceNumber(e,s)))).next((y=>(i=y,h=Date.now(),this.removeTargets(e,i,t)))).next((y=>(o=y,d=Date.now(),this.removeOrphanedDocuments(e,i)))).next((y=>(p=Date.now(),Zl()<=Pe.DEBUG&&re("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${u-_}ms
	Determined least recently used ${s} in `+(h-u)+`ms
	Removed ${o} targets in `+(d-h)+`ms
	Removed ${y} documents in `+(p-d)+`ms
Total Duration: ${p-_}ms`),B.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:o,documentsRemoved:y}))))}}function X1(n,e){return new JL(n,e)}class ZL{constructor(e,t){this.db=e,this.garbageCollector=X1(this,t)}gr(e){const t=this.wr(e);return this.db.getTargetCache().getTargetCount(e).next((i=>t.next((s=>i+s))))}wr(e){let t=0;return this.pr(e,(i=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}pr(e,t){return this.Sr(e,((i,s)=>t(s)))}addReference(e,t,i){return Cm(e,i)}removeReference(e,t,i){return Cm(e,i)}removeTargets(e,t,i){return this.db.getTargetCache().removeTargets(e,t,i)}markPotentiallyOrphaned(e,t){return Cm(e,t)}br(e,t){return(function(s,o){let u=!1;return Y1(s).te((h=>$1(s,h,o).next((d=>(d&&(u=!0),B.resolve(!d)))))).next((()=>u))})(e,t)}removeOrphanedDocuments(e,t){const i=this.db.getRemoteDocumentCache().newChangeBuffer(),s=[];let o=0;return this.Sr(e,((u,h)=>{if(h<=t){const d=this.br(e,u).next((p=>{if(!p)return o++,i.getEntry(e,u).next((()=>(i.removeEntry(u,Ee.min()),oa(e).delete((function(y){return[0,Nn(y.path)]})(u)))))}));s.push(d)}})).next((()=>B.waitFor(s))).next((()=>i.apply(e))).next((()=>o))}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,i)}updateLimboDocument(e,t){return Cm(e,t)}Sr(e,t){const i=oa(e);let s,o=Gn.ce;return i.ee({index:EE},(([u,h],{path:d,sequenceNumber:p})=>{u===0?(o!==Gn.ce&&t(new ae(Sr(s)),o),o=p,s=d):o=Gn.ce})).next((()=>{o!==Gn.ce&&t(new ae(Sr(s)),o)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Cm(n,e){return oa(n).put((function(i,s){return{targetId:0,path:Nn(i.path),sequenceNumber:s}})(e,n.currentSequenceNumber))}class J1{constructor(){this.changes=new Es((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,yt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?B.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class e4{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,i){return yo(e).put(i)}removeEntry(e,t,i){return yo(e).delete((function(o,u){const h=o.path.toArray();return[h.slice(0,h.length-2),h[h.length-2],hp(u),h[h.length-1]]})(t,i))}updateMetadata(e,t){return this.getMetadata(e).next((i=>(i.byteSize+=t,this.Dr(e,i))))}getEntry(e,t){let i=yt.newInvalidDocument(t);return yo(e).ee({index:Bm,range:IDBKeyRange.only(hh(t))},((s,o)=>{i=this.Cr(t,o)})).next((()=>i))}vr(e,t){let i={size:0,document:yt.newInvalidDocument(t)};return yo(e).ee({index:Bm,range:IDBKeyRange.only(hh(t))},((s,o)=>{i={document:this.Cr(t,o),size:dp(o)}})).next((()=>i))}getEntries(e,t){let i=Qn();return this.Fr(e,t,((s,o)=>{const u=this.Cr(s,o);i=i.insert(s,u)})).next((()=>i))}Mr(e,t){let i=Qn(),s=new Ct(ae.comparator);return this.Fr(e,t,((o,u)=>{const h=this.Cr(o,u);i=i.insert(o,h),s=s.insert(o,dp(u))})).next((()=>({documents:i,Or:s})))}Fr(e,t,i){if(t.isEmpty())return B.resolve();let s=new at(Jb);t.forEach((d=>s=s.add(d)));const o=IDBKeyRange.bound(hh(s.first()),hh(s.last())),u=s.getIterator();let h=u.getNext();return yo(e).ee({index:Bm,range:o},((d,p,_)=>{const y=ae.fromSegments([...p.prefixPath,p.collectionGroup,p.documentId]);for(;h&&Jb(h,y)<0;)i(h,null),h=u.getNext();h&&h.isEqual(y)&&(i(h,p),h=u.hasNext()?u.getNext():null),h?_.j(hh(h)):_.done()})).next((()=>{for(;h;)i(h,null),h=u.hasNext()?u.getNext():null}))}getDocumentsMatchingQuery(e,t,i,s,o){const u=t.path,h=[u.popLast().toArray(),u.lastSegment(),hp(i.readTime),i.documentKey.path.isEmpty()?"":i.documentKey.path.lastSegment()],d=[u.popLast().toArray(),u.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return yo(e).J(IDBKeyRange.bound(h,d,!0)).next((p=>{o?.incrementDocumentReadCount(p.length);let _=Qn();for(const y of p){const w=this.Cr(ae.fromSegments(y.prefixPath.concat(y.collectionGroup,y.documentId)),y);w.isFoundDocument()&&(Cf(t,w)||s.has(w.key))&&(_=_.insert(w.key,w))}return _}))}getAllFromCollectionGroup(e,t,i,s){let o=Qn();const u=Xb(t,i),h=Xb(t,oi.max());return yo(e).ee({index:UC,range:IDBKeyRange.bound(u,h,!0)},((d,p,_)=>{const y=this.Cr(ae.fromSegments(p.prefixPath.concat(p.collectionGroup,p.documentId)),p);o=o.insert(y.key,y),o.size===s&&_.done()})).next((()=>o))}newChangeBuffer(e){return new t4(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((t=>t.byteSize))}getMetadata(e){return Wb(e).get(ov).next((t=>(ge(!!t,20021),t)))}Dr(e,t){return Wb(e).put(ov,t)}Cr(e,t){if(t){const i=FL(this.serializer,t);if(!(i.isNoDocument()&&i.version.isEqual(Ee.min())))return i}return yt.newInvalidDocument(e)}}function Z1(n){return new e4(n)}class t4 extends J1{constructor(e,t){super(),this.Nr=e,this.trackRemovals=t,this.Br=new Es((i=>i.toString()),((i,s)=>i.isEqual(s)))}applyChanges(e){const t=[];let i=0,s=new at(((o,u)=>be(o.canonicalString(),u.canonicalString())));return this.changes.forEach(((o,u)=>{const h=this.Br.get(o);if(t.push(this.Nr.removeEntry(e,o,h.readTime)),u.isValidDocument()){const d=Pb(this.Nr.serializer,u);s=s.add(o.path.popLast());const p=dp(d);i+=p-h.size,t.push(this.Nr.addEntry(e,o,d))}else if(i-=h.size,this.trackRemovals){const d=Pb(this.Nr.serializer,u.convertToNoDocument(Ee.min()));t.push(this.Nr.addEntry(e,o,d))}})),s.forEach((o=>{t.push(this.Nr.indexManager.addToCollectionParentIndex(e,o))})),t.push(this.Nr.updateMetadata(e,i)),B.waitFor(t)}getFromCache(e,t){return this.Nr.vr(e,t).next((i=>(this.Br.set(t,{size:i.size,readTime:i.document.readTime}),i.document)))}getAllFromCache(e,t){return this.Nr.Mr(e,t).next((({documents:i,Or:s})=>(s.forEach(((o,u)=>{this.Br.set(o,{size:u,readTime:i.get(o).readTime})})),i)))}}function Wb(n){return tn(n,Wh)}function yo(n){return tn(n,sp)}function hh(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Xb(n,e){const t=e.documentKey.path.toArray();return[n,hp(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function Jb(n,e){const t=n.path.toArray(),i=e.path.toArray();let s=0;for(let o=0;o<t.length-2&&o<i.length-2;++o)if(s=be(t[o],i[o]),s)return s;return s=be(t.length,i.length),s||(s=be(t[t.length-2],i[i.length-2]),s||be(t[t.length-1],i[i.length-1]))}class n4{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class eN{constructor(e,t,i,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=s}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next((s=>(i=s,this.remoteDocumentCache.getEntry(e,t)))).next((s=>(i!==null&&Ph(i.mutation,s,Kn.empty(),Ze.now()),s)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.getLocalViewOfDocuments(e,i,De()).next((()=>i))))}getLocalViewOfDocuments(e,t,i=De()){const s=Ir();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,i).next((o=>{let u=wh();return o.forEach(((h,d)=>{u=u.insert(h,d.overlayedDocument)})),u}))))}getOverlayedDocuments(e,t){const i=Ir();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,De())))}populateOverlays(e,t,i){const s=[];return i.forEach((o=>{t.has(o)||s.push(o)})),this.documentOverlayCache.getOverlays(e,s).next((o=>{o.forEach(((u,h)=>{t.set(u,h)}))}))}computeViews(e,t,i,s){let o=Qn();const u=xh(),h=(function(){return xh()})();return t.forEach(((d,p)=>{const _=i.get(p.key);s.has(p.key)&&(_===void 0||_.mutation instanceof Ts)?o=o.insert(p.key,p):_!==void 0?(u.set(p.key,_.mutation.getFieldMask()),Ph(_.mutation,p,_.mutation.getFieldMask(),Ze.now())):u.set(p.key,Kn.empty())})),this.recalculateAndSaveOverlays(e,o).next((d=>(d.forEach(((p,_)=>u.set(p,_))),t.forEach(((p,_)=>h.set(p,new n4(_,u.get(p)??null)))),h)))}recalculateAndSaveOverlays(e,t){const i=xh();let s=new Ct(((u,h)=>u-h)),o=De();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((u=>{for(const h of u)h.keys().forEach((d=>{const p=t.get(d);if(p===null)return;let _=i.get(d)||Kn.empty();_=h.applyToLocalView(p,_),i.set(d,_);const y=(s.get(h.batchId)||De()).add(d);s=s.insert(h.batchId,y)}))})).next((()=>{const u=[],h=s.getReverseIterator();for(;h.hasNext();){const d=h.getNext(),p=d.key,_=d.value,y=g1();_.forEach((w=>{if(!o.has(w)){const A=S1(t.get(w),i.get(w));A!==null&&y.set(w,A),o=o.add(w)}})),u.push(this.documentOverlayCache.saveOverlays(e,p,y))}return B.waitFor(u)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,t,i,s){return(function(u){return ae.isDocumentKey(u.path)&&u.collectionGroup===null&&u.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):RE(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,s):this.getDocumentsMatchingCollectionQuery(e,t,i,s)}getNextDocuments(e,t,i,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,s).next((o=>{const u=s-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,s-o.size):B.resolve(Ir());let h=_u,d=o;return u.next((p=>B.forEach(p,((_,y)=>(h<y.largestBatchId&&(h=y.largestBatchId),o.get(_)?B.resolve():this.remoteDocumentCache.getEntry(e,_).next((w=>{d=d.insert(_,w)}))))).next((()=>this.populateOverlays(e,p,o))).next((()=>this.computeViews(e,d,p,De()))).next((_=>({batchId:h,changes:p1(_)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ae(t)).next((i=>{let s=wh();return i.isFoundDocument()&&(s=s.insert(i.key,i)),s}))}getDocumentsMatchingCollectionGroupQuery(e,t,i,s){const o=t.collectionGroup;let u=wh();return this.indexManager.getCollectionParents(e,o).next((h=>B.forEach(h,(d=>{const p=(function(y,w){return new vs(w,null,y.explicitOrderBy.slice(),y.filters.slice(),y.limit,y.limitType,y.startAt,y.endAt)})(t,d.child(o));return this.getDocumentsMatchingCollectionQuery(e,p,i,s).next((_=>{_.forEach(((y,w)=>{u=u.insert(y,w)}))}))})).next((()=>u))))}getDocumentsMatchingCollectionQuery(e,t,i,s){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next((u=>(o=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,o,s)))).next((u=>{o.forEach(((d,p)=>{const _=p.getKey();u.get(_)===null&&(u=u.insert(_,yt.newInvalidDocument(_)))}));let h=wh();return u.forEach(((d,p)=>{const _=o.get(d);_!==void 0&&Ph(_.mutation,p,Kn.empty(),Ze.now()),Cf(t,p)&&(h=h.insert(d,p))})),h}))}}class i4{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return B.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(s){return{id:s.id,version:s.version,createTime:Lt(s.createTime)}})(t)),B.resolve()}getNamedQuery(e,t){return B.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(s){return{name:s.name,query:VE(s.bundledQuery),readTime:Lt(s.readTime)}})(t)),B.resolve()}}class r4{constructor(){this.overlays=new Ct(ae.comparator),this.qr=new Map}getOverlay(e,t){return B.resolve(this.overlays.get(t))}getOverlays(e,t){const i=Ir();return B.forEach(t,(s=>this.getOverlay(e,s).next((o=>{o!==null&&i.set(s,o)})))).next((()=>i))}saveOverlays(e,t,i){return i.forEach(((s,o)=>{this.St(e,t,o)})),B.resolve()}removeOverlaysForBatchId(e,t,i){const s=this.qr.get(i);return s!==void 0&&(s.forEach((o=>this.overlays=this.overlays.remove(o))),this.qr.delete(i)),B.resolve()}getOverlaysForCollection(e,t,i){const s=Ir(),o=t.length+1,u=new ae(t.child("")),h=this.overlays.getIteratorFrom(u);for(;h.hasNext();){const d=h.getNext().value,p=d.getKey();if(!t.isPrefixOf(p.path))break;p.path.length===o&&d.largestBatchId>i&&s.set(d.getKey(),d)}return B.resolve(s)}getOverlaysForCollectionGroup(e,t,i,s){let o=new Ct(((p,_)=>p-_));const u=this.overlays.getIterator();for(;u.hasNext();){const p=u.getNext().value;if(p.getKey().getCollectionGroup()===t&&p.largestBatchId>i){let _=o.get(p.largestBatchId);_===null&&(_=Ir(),o=o.insert(p.largestBatchId,_)),_.set(p.getKey(),p)}}const h=Ir(),d=o.getIterator();for(;d.hasNext()&&(d.getNext().value.forEach(((p,_)=>h.set(p,_))),!(h.size()>=s)););return B.resolve(h)}St(e,t,i){const s=this.overlays.get(i.key);if(s!==null){const u=this.qr.get(s.largestBatchId).delete(i.key);this.qr.set(s.largestBatchId,u)}this.overlays=this.overlays.insert(i.key,new PE(t,i));let o=this.qr.get(t);o===void 0&&(o=De(),this.qr.set(t,o)),this.qr.set(t,o.add(i.key))}}class s4{constructor(){this.sessionToken=Ot.EMPTY_BYTE_STRING}getSessionToken(e){return B.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,B.resolve()}}class FE{constructor(){this.Qr=new at(on.$r),this.Ur=new at(on.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const i=new on(e,t);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(e,t){e.forEach((i=>this.addReference(i,t)))}removeReference(e,t){this.Gr(new on(e,t))}zr(e,t){e.forEach((i=>this.removeReference(i,t)))}jr(e){const t=new ae(new Ve([])),i=new on(t,e),s=new on(t,e+1),o=[];return this.Ur.forEachInRange([i,s],(u=>{this.Gr(u),o.push(u.key)})),o}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new ae(new Ve([])),i=new on(t,e),s=new on(t,e+1);let o=De();return this.Ur.forEachInRange([i,s],(u=>{o=o.add(u.key)})),o}containsKey(e){const t=new on(e,0),i=this.Qr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class on{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return ae.comparator(e.key,t.key)||be(e.Yr,t.Yr)}static Kr(e,t){return be(e.Yr,t.Yr)||ae.comparator(e.key,t.key)}}class a4{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new at(on.$r)}checkEmpty(e){return B.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,s){const o=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new OE(o,t,i,s);this.mutationQueue.push(u);for(const h of s)this.Zr=this.Zr.add(new on(h.key,o)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return B.resolve(u)}lookupMutationBatch(e,t){return B.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,s=this.ei(i),o=s<0?0:s;return B.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return B.resolve(this.mutationQueue.length===0?pa:this.tr-1)}getAllMutationBatches(e){return B.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new on(t,0),s=new on(t,Number.POSITIVE_INFINITY),o=[];return this.Zr.forEachInRange([i,s],(u=>{const h=this.Xr(u.Yr);o.push(h)})),B.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new at(be);return t.forEach((s=>{const o=new on(s,0),u=new on(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([o,u],(h=>{i=i.add(h.Yr)}))})),B.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,s=i.length+1;let o=i;ae.isDocumentKey(o)||(o=o.child(""));const u=new on(new ae(o),0);let h=new at(be);return this.Zr.forEachWhile((d=>{const p=d.key.path;return!!i.isPrefixOf(p)&&(p.length===s&&(h=h.add(d.Yr)),!0)}),u),B.resolve(this.ti(h))}ti(e){const t=[];return e.forEach((i=>{const s=this.Xr(i);s!==null&&t.push(s)})),t}removeMutationBatch(e,t){ge(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return B.forEach(t.mutations,(s=>{const o=new on(s.key,t.batchId);return i=i.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)})).next((()=>{this.Zr=i}))}ir(e){}containsKey(e,t){const i=new on(t,0),s=this.Zr.firstAfterOrEqual(i);return B.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,B.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class o4{constructor(e){this.ri=e,this.docs=(function(){return new Ct(ae.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,s=this.docs.get(i),o=s?s.size:0,u=this.ri(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:u}),this.size+=u-o,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return B.resolve(i?i.document.mutableCopy():yt.newInvalidDocument(t))}getEntries(e,t){let i=Qn();return t.forEach((s=>{const o=this.docs.get(s);i=i.insert(s,o?o.document.mutableCopy():yt.newInvalidDocument(s))})),B.resolve(i)}getDocumentsMatchingQuery(e,t,i,s){let o=Qn();const u=t.path,h=new ae(u.child("__id-9223372036854775808__")),d=this.docs.getIteratorFrom(h);for(;d.hasNext();){const{key:p,value:{document:_}}=d.getNext();if(!u.isPrefixOf(p.path))break;p.path.length>u.length+1||yE(xC(_),i)<=0||(s.has(_.key)||Cf(t,_))&&(o=o.insert(_.key,_.mutableCopy()))}return B.resolve(o)}getAllFromCollectionGroup(e,t,i,s){he(9500)}ii(e,t){return B.forEach(this.docs,(i=>t(i)))}newChangeBuffer(e){return new l4(this)}getSize(e){return B.resolve(this.size)}}class l4 extends J1{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((i,s)=>{s.isValidDocument()?t.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(i)})),B.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}class u4{constructor(e){this.persistence=e,this.si=new Es((t=>ko(t)),bf),this.lastRemoteSnapshotVersion=Ee.min(),this.highestTargetId=0,this.oi=0,this._i=new FE,this.targetCount=0,this.ai=Bo.ur()}forEachTarget(e,t){return this.si.forEach(((i,s)=>t(s))),B.resolve()}getLastRemoteSnapshotVersion(e){return B.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return B.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),B.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.oi&&(this.oi=t),B.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Bo(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,B.resolve()}updateTargetData(e,t){return this.Pr(t),B.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,B.resolve()}removeTargets(e,t,i){let s=0;const o=[];return this.si.forEach(((u,h)=>{h.sequenceNumber<=t&&i.get(h.targetId)===null&&(this.si.delete(u),o.push(this.removeMatchingKeysForTargetId(e,h.targetId)),s++)})),B.waitFor(o).next((()=>s))}getTargetCount(e){return B.resolve(this.targetCount)}getTargetData(e,t){const i=this.si.get(t)||null;return B.resolve(i)}addMatchingKeys(e,t,i){return this._i.Wr(t,i),B.resolve()}removeMatchingKeys(e,t,i){this._i.zr(t,i);const s=this.persistence.referenceDelegate,o=[];return s&&t.forEach((u=>{o.push(s.markPotentiallyOrphaned(e,u))})),B.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),B.resolve()}getMatchingKeysForTargetId(e,t){const i=this._i.Hr(t);return B.resolve(i)}containsKey(e,t){return B.resolve(this._i.containsKey(t))}}class BE{constructor(e,t){this.ui={},this.overlays={},this.ci=new Gn(0),this.li=!1,this.li=!0,this.hi=new s4,this.referenceDelegate=e(this),this.Pi=new u4(this),this.indexManager=new QL,this.remoteDocumentCache=(function(s){return new o4(s)})((i=>this.referenceDelegate.Ti(i))),this.serializer=new q1(t),this.Ii=new i4(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new r4,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.ui[e.toKey()];return i||(i=new a4(t,this.referenceDelegate),this.ui[e.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,i){re("MemoryPersistence","Starting transaction:",e);const s=new c4(this.ci.next());return this.referenceDelegate.Ei(),i(s).next((o=>this.referenceDelegate.di(s).next((()=>o)))).toPromise().then((o=>(s.raiseOnCommittedEvent(),o)))}Ai(e,t){return B.or(Object.values(this.ui).map((i=>()=>i.containsKey(e,t))))}}class c4 extends MC{constructor(e){super(),this.currentSequenceNumber=e}}class eg{constructor(e){this.persistence=e,this.Ri=new FE,this.Vi=null}static mi(e){return new eg(e)}get fi(){if(this.Vi)return this.Vi;throw he(60996)}addReference(e,t,i){return this.Ri.addReference(i,t),this.fi.delete(i.toString()),B.resolve()}removeReference(e,t,i){return this.Ri.removeReference(i,t),this.fi.add(i.toString()),B.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),B.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((s=>this.fi.add(s.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next((s=>{s.forEach((o=>this.fi.add(o.toString())))})).next((()=>i.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return B.forEach(this.fi,(i=>{const s=ae.fromPath(i);return this.gi(e,s).next((o=>{o||t.removeEntry(s,Ee.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((i=>{i?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return B.or([()=>B.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class mp{constructor(e,t){this.persistence=e,this.pi=new Es((i=>Nn(i.path)),((i,s)=>i.isEqual(s))),this.garbageCollector=X1(this,t)}static mi(e,t){return new mp(e,t)}Ei(){}di(e){return B.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>t.next((s=>i+s))))}wr(e){let t=0;return this.pr(e,(i=>{t++})).next((()=>t))}pr(e,t){return B.forEach(this.pi,((i,s)=>this.br(e,i,s).next((o=>o?B.resolve():t(s)))))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const s=this.persistence.getRemoteDocumentCache(),o=s.newChangeBuffer();return s.ii(e,(u=>this.br(e,u,t).next((h=>{h||(i++,o.removeEntry(u,Ee.min()))})))).next((()=>o.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),B.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.pi.set(i,e.currentSequenceNumber),B.resolve()}removeReference(e,t,i){return this.pi.set(i,e.currentSequenceNumber),B.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),B.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=qm(e.data.value)),t}br(e,t,i){return B.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const s=this.pi.get(t);return B.resolve(s!==void 0&&s>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class h4{constructor(e){this.serializer=e}k(e,t,i,s){const o=new jp("createOrUpgrade",t);i<1&&s>=1&&((function(d){d.createObjectStore(Af)})(e),(function(d){d.createObjectStore(Yh,{keyPath:RV}),d.createObjectStore(Fi,{keyPath:ub,autoIncrement:!0}).createIndex(Co,cb,{unique:!0}),d.createObjectStore(yu)})(e),Zb(e),(function(d){d.createObjectStore(To)})(e));let u=B.resolve();return i<3&&s>=3&&(i!==0&&((function(d){d.deleteObjectStore(Eu),d.deleteObjectStore(vu),d.deleteObjectStore(Po)})(e),Zb(e)),u=u.next((()=>(function(d){const p=d.store(Po),_={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Ee.min().toTimestamp(),targetCount:0};return p.put(ap,_)})(o)))),i<4&&s>=4&&(i!==0&&(u=u.next((()=>(function(d,p){return p.store(Fi).J().next((y=>{d.deleteObjectStore(Fi),d.createObjectStore(Fi,{keyPath:ub,autoIncrement:!0}).createIndex(Co,cb,{unique:!0});const w=p.store(Fi),A=y.map((O=>w.put(O)));return B.waitFor(A)}))})(e,o)))),u=u.next((()=>{(function(d){d.createObjectStore(Tu,{keyPath:VV})})(e)}))),i<5&&s>=5&&(u=u.next((()=>this.yi(o)))),i<6&&s>=6&&(u=u.next((()=>((function(d){d.createObjectStore(Wh)})(e),this.wi(o))))),i<7&&s>=7&&(u=u.next((()=>this.Si(o)))),i<8&&s>=8&&(u=u.next((()=>this.bi(e,o)))),i<9&&s>=9&&(u=u.next((()=>{(function(d){d.objectStoreNames.contains("remoteDocumentChanges")&&d.deleteObjectStore("remoteDocumentChanges")})(e)}))),i<10&&s>=10&&(u=u.next((()=>this.Di(o)))),i<11&&s>=11&&(u=u.next((()=>{(function(d){d.createObjectStore(Hp,{keyPath:LV})})(e),(function(d){d.createObjectStore(Gp,{keyPath:UV})})(e)}))),i<12&&s>=12&&(u=u.next((()=>{(function(d){const p=d.createObjectStore(Kp,{keyPath:GV});p.createIndex(uv,KV,{unique:!1}),p.createIndex(qC,QV,{unique:!1})})(e)}))),i<13&&s>=13&&(u=u.next((()=>(function(d){const p=d.createObjectStore(sp,{keyPath:NV});p.createIndex(Bm,DV),p.createIndex(UC,OV)})(e))).next((()=>this.Ci(e,o))).next((()=>e.deleteObjectStore(To)))),i<14&&s>=14&&(u=u.next((()=>this.Fi(e,o)))),i<15&&s>=15&&(u=u.next((()=>(function(d){d.createObjectStore(TE,{keyPath:FV,autoIncrement:!0}).createIndex(lv,BV,{unique:!1}),d.createObjectStore(Nh,{keyPath:zV}).createIndex(BC,qV,{unique:!1}),d.createObjectStore(Dh,{keyPath:jV}).createIndex(zC,HV,{unique:!1})})(e)))),i<16&&s>=16&&(u=u.next((()=>{t.objectStore(Nh).clear()})).next((()=>{t.objectStore(Dh).clear()}))),i<17&&s>=17&&(u=u.next((()=>{(function(d){d.createObjectStore(wE,{keyPath:$V})})(e)}))),i<18&&s>=18&&iC()&&(u=u.next((()=>{t.objectStore(Nh).clear()})).next((()=>{t.objectStore(Dh).clear()}))),u}wi(e){let t=0;return e.store(To).ee(((i,s)=>{t+=dp(s)})).next((()=>{const i={byteSize:t};return e.store(Wh).put(ov,i)}))}yi(e){const t=e.store(Yh),i=e.store(Fi);return t.J().next((s=>B.forEach(s,(o=>{const u=IDBKeyRange.bound([o.userId,pa],[o.userId,o.lastAcknowledgedBatchId]);return i.J(Co,u).next((h=>B.forEach(h,(d=>{ge(d.userId===o.userId,18650,"Cannot process batch from unexpected user",{batchId:d.batchId});const p=Io(this.serializer,d);return Q1(e,o.userId,p).next((()=>{}))}))))}))))}Si(e){const t=e.store(Eu),i=e.store(To);return e.store(Po).get(ap).next((s=>{const o=[];return i.ee(((u,h)=>{const d=new Ve(u),p=(function(y){return[0,Nn(y)]})(d);o.push(t.get(p).next((_=>_?B.resolve():(y=>t.put({targetId:0,path:Nn(y),sequenceNumber:s.highestListenSequenceNumber}))(d))))})).next((()=>B.waitFor(o)))}))}bi(e,t){e.createObjectStore(Xh,{keyPath:kV});const i=t.store(Xh),s=new UE,o=u=>{if(s.add(u)){const h=u.lastSegment(),d=u.popLast();return i.put({collectionId:h,parent:Nn(d)})}};return t.store(To).ee({X:!0},((u,h)=>{const d=new Ve(u);return o(d.popLast())})).next((()=>t.store(yu).ee({X:!0},(([u,h,d],p)=>{const _=Sr(h);return o(_.popLast())}))))}Di(e){const t=e.store(vu);return t.ee(((i,s)=>{const o=Ih(s),u=j1(this.serializer,o);return t.put(u)}))}Ci(e,t){const i=t.store(To),s=[];return i.ee(((o,u)=>{const h=t.store(sp),d=(function(y){return y.document?new ae(Ve.fromString(y.document.name).popFirst(5)):y.noDocument?ae.fromSegments(y.noDocument.path):y.unknownDocument?ae.fromSegments(y.unknownDocument.path):he(36783)})(u).path.toArray(),p={prefixPath:d.slice(0,d.length-2),collectionGroup:d[d.length-2],documentId:d[d.length-1],readTime:u.readTime||[0,0],unknownDocument:u.unknownDocument,noDocument:u.noDocument,document:u.document,hasCommittedMutations:!!u.hasCommittedMutations};s.push(h.put(p))})).next((()=>B.waitFor(s)))}Fi(e,t){const i=t.store(Fi),s=Z1(this.serializer),o=new BE(eg.mi,this.serializer.yt);return i.J().next((u=>{const h=new Map;return u.forEach((d=>{let p=h.get(d.userId)??De();Io(this.serializer,d).keys().forEach((_=>p=p.add(_))),h.set(d.userId,p)})),B.forEach(h,((d,p)=>{const _=new ln(p),y=Jp.wt(this.serializer,_),w=o.getIndexManager(_),A=Zp.wt(_,this.serializer,w,o.referenceDelegate);return new eN(s,A,y,w).recalculateAndSaveOverlaysForDocumentKeys(new cv(t,Gn.ce),d).next()}))}))}}function Zb(n){n.createObjectStore(Eu,{keyPath:PV}).createIndex(EE,MV,{unique:!0}),n.createObjectStore(vu,{keyPath:"targetId"}).createIndex(FC,xV,{unique:!0}),n.createObjectStore(Po)}const ra="IndexedDbPersistence",ky=18e5,Vy=5e3,Ly="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",tN="main";class zE{constructor(e,t,i,s,o,u,h,d,p,_,y=18){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=i,this.Mi=o,this.window=u,this.document=h,this.xi=p,this.Oi=_,this.Ni=y,this.ci=null,this.li=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Bi=null,this.inForeground=!1,this.Li=null,this.ki=null,this.qi=Number.NEGATIVE_INFINITY,this.Qi=w=>Promise.resolve(),!zE.v())throw new ie(G.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new ZL(this,s),this.$i=t+tN,this.serializer=new q1(d),this.Ui=new br(this.$i,this.Ni,new h4(this.serializer)),this.hi=new zL,this.Pi=new YL(this.referenceDelegate,this.serializer),this.remoteDocumentCache=Z1(this.serializer),this.Ii=new BL,this.window&&this.window.localStorage?this.Ki=this.window.localStorage:(this.Ki=null,_===!1&&Vt(ra,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Wi().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new ie(G.FAILED_PRECONDITION,Ly);return this.Gi(),this.zi(),this.ji(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.Pi.getHighestSequenceNumber(e)))})).then((e=>{this.ci=new Gn(e,this.xi)})).then((()=>{this.li=!0})).catch((e=>(this.Ui&&this.Ui.close(),Promise.reject(e))))}Ji(e){return this.Qi=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ui.$((async t=>{t.newVersion===null&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Mi.enqueueAndForget((async()=>{this.started&&await this.Wi()})))}Wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>Nm(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.Hi(e).next((t=>{t||(this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))))}))})).next((()=>this.Yi(e))).next((t=>this.isPrimary&&!t?this.Zi(e).next((()=>!1)):!!t&&this.Xi(e).next((()=>!0)))))).catch((e=>{if(Pa(e))return re(ra,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return re(ra,"Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.Mi.enqueueRetryable((()=>this.Qi(e))),this.isPrimary=e}))}Hi(e){return fh(e).get(Kl).next((t=>B.resolve(this.es(t))))}ts(e){return Nm(e).delete(this.clientId)}async ns(){if(this.isPrimary&&!this.rs(this.qi,ky)){this.qi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(t=>{const i=tn(t,Tu);return i.J().next((s=>{const o=this.ss(s,ky),u=s.filter((h=>o.indexOf(h)===-1));return B.forEach(u,(h=>i.delete(h.clientId))).next((()=>u))}))})).catch((()=>[]));if(this.Ki)for(const t of e)this.Ki.removeItem(this._s(t.clientId))}}ji(){this.ki=this.Mi.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.Wi().then((()=>this.ns())).then((()=>this.ji()))))}es(e){return!!e&&e.ownerId===this.clientId}Yi(e){return this.Oi?B.resolve(!0):fh(e).get(Kl).next((t=>{if(t!==null&&this.rs(t.leaseTimestampMs,Vy)&&!this.us(t.ownerId)){if(this.es(t)&&this.networkEnabled)return!0;if(!this.es(t)){if(!t.allowTabSynchronization)throw new ie(G.FAILED_PRECONDITION,Ly);return!1}}return!(!this.networkEnabled||!this.inForeground)||Nm(e).J().next((i=>this.ss(i,Vy).find((s=>{if(this.clientId!==s.clientId){const o=!this.networkEnabled&&s.networkEnabled,u=!this.inForeground&&s.inForeground,h=this.networkEnabled===s.networkEnabled;if(o||u&&h)return!0}return!1}))===void 0))})).next((t=>(this.isPrimary!==t&&re(ra,`Client ${t?"is":"is not"} eligible for a primary lease.`),t)))}async shutdown(){this.li=!1,this.cs(),this.ki&&(this.ki.cancel(),this.ki=null),this.ls(),this.hs(),await this.Ui.runTransaction("shutdown","readwrite",[Af,Tu],(e=>{const t=new cv(e,Gn.ce);return this.Zi(t).next((()=>this.ts(t)))})),this.Ui.close(),this.Ps()}ss(e,t){return e.filter((i=>this.rs(i.updateTimeMs,t)&&!this.us(i.clientId)))}Ts(){return this.runTransaction("getActiveClients","readonly",(e=>Nm(e).J().next((t=>this.ss(t,ky).map((i=>i.clientId))))))}get started(){return this.li}getGlobalsCache(){return this.hi}getMutationQueue(e,t){return Zp.wt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new $L(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return Jp.wt(this.serializer,e)}getBundleCache(){return this.Ii}runTransaction(e,t,i){re(ra,"Starting transaction:",e);const s=t==="readonly"?"readonly":"readwrite",o=(function(d){return d===18?XV:d===17?KC:d===16?WV:d===15?SE:d===14?GC:d===13?HC:d===12?YV:d===11?jC:void he(60245)})(this.Ni);let u;return this.Ui.runTransaction(e,s,o,(h=>(u=new cv(h,this.ci?this.ci.next():Gn.ce),t==="readwrite-primary"?this.Hi(u).next((d=>!!d||this.Yi(u))).next((d=>{if(!d)throw Vt(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))),new ie(G.FAILED_PRECONDITION,PC);return i(u)})).next((d=>this.Xi(u).next((()=>d)))):this.Is(u).next((()=>i(u)))))).then((h=>(u.raiseOnCommittedEvent(),h)))}Is(e){return fh(e).get(Kl).next((t=>{if(t!==null&&this.rs(t.leaseTimestampMs,Vy)&&!this.us(t.ownerId)&&!this.es(t)&&!(this.Oi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new ie(G.FAILED_PRECONDITION,Ly)}))}Xi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return fh(e).put(Kl,t)}static v(){return br.v()}Zi(e){const t=fh(e);return t.get(Kl).next((i=>this.es(i)?(re(ra,"Releasing primary lease."),t.delete(Kl)):B.resolve()))}rs(e,t){const i=Date.now();return!(e<i-t)&&(!(e>i)||(Vt(`Detected an update time that is in the future: ${e} > ${i}`),!1))}Gi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Li=()=>{this.Mi.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.Wi())))},this.document.addEventListener("visibilitychange",this.Li),this.inForeground=this.document.visibilityState==="visible")}ls(){this.Li&&(this.document.removeEventListener("visibilitychange",this.Li),this.Li=null)}zi(){typeof this.window?.addEventListener=="function"&&(this.Bi=()=>{this.cs();const e=/(?:Version|Mobile)\/1[456]/;nC()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.Mi.enterRestrictedMode(!0),this.Mi.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Bi))}hs(){this.Bi&&(this.window.removeEventListener("pagehide",this.Bi),this.Bi=null)}us(e){try{const t=this.Ki?.getItem(this._s(e))!==null;return re(ra,`Client '${e}' ${t?"is":"is not"} zombied in LocalStorage`),t}catch(t){return Vt(ra,"Failed to get zombied client id.",t),!1}}cs(){if(this.Ki)try{this.Ki.setItem(this._s(this.clientId),String(Date.now()))}catch(e){Vt("Failed to set zombie client id.",e)}}Ps(){if(this.Ki)try{this.Ki.removeItem(this._s(this.clientId))}catch{}}_s(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function fh(n){return tn(n,Af)}function Nm(n){return tn(n,Tu)}function qE(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class jE{constructor(e,t,i,s){this.targetId=e,this.fromCache=t,this.Es=i,this.ds=s}static As(e,t){let i=De(),s=De();for(const o of t.docChanges)switch(o.type){case 0:i=i.add(o.doc.key);break;case 1:s=s.add(o.doc.key)}return new jE(e,t.fromCache,i,s)}}class f4{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class nN{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return nC()?8:kC(en())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,i,s){const o={result:null};return this.ys(e,t).next((u=>{o.result=u})).next((()=>{if(!o.result)return this.ws(e,t,s,i).next((u=>{o.result=u}))})).next((()=>{if(o.result)return;const u=new f4;return this.Ss(e,t,u).next((h=>{if(o.result=h,this.Vs)return this.bs(e,t,u,h.size)}))})).next((()=>o.result))}bs(e,t,i,s){return i.documentReadCount<this.fs?(Zl()<=Pe.DEBUG&&re("QueryEngine","SDK will not create cache indexes for query:",eu(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),B.resolve()):(Zl()<=Pe.DEBUG&&re("QueryEngine","Query:",eu(t),"scans",i.documentReadCount,"local documents and returns",s,"documents as results."),i.documentReadCount>this.gs*s?(Zl()<=Pe.DEBUG&&re("QueryEngine","The SDK decides to create cache indexes for query:",eu(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Vn(t))):B.resolve())}ys(e,t){if(Sb(t))return B.resolve(null);let i=Vn(t);return this.indexManager.getIndexType(e,i).next((s=>s===0?null:(t.limit!==null&&s===1&&(t=cp(t,null,"F"),i=Vn(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next((o=>{const u=De(...o);return this.ps.getDocuments(e,u).next((h=>this.indexManager.getMinOffset(e,i).next((d=>{const p=this.Ds(t,h);return this.Cs(t,p,u,d.readTime)?this.ys(e,cp(t,null,"F")):this.vs(e,p,t,d)}))))})))))}ws(e,t,i,s){return Sb(t)||s.isEqual(Ee.min())?B.resolve(null):this.ps.getDocuments(e,i).next((o=>{const u=this.Ds(t,o);return this.Cs(t,u,i,s)?B.resolve(null):(Zl()<=Pe.DEBUG&&re("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),eu(t)),this.vs(e,u,t,OC(s,_u)).next((h=>h)))}))}Ds(e,t){let i=new at(d1(e));return t.forEach(((s,o)=>{Cf(e,o)&&(i=i.add(o))})),i}Cs(e,t,i,s){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(s)>0)}Ss(e,t,i){return Zl()<=Pe.DEBUG&&re("QueryEngine","Using full collection scan to execute query:",eu(t)),this.ps.getDocumentsMatchingQuery(e,t,oi.min(),i)}vs(e,t,i,s){return this.ps.getDocumentsMatchingQuery(e,i,s).next((o=>(t.forEach((u=>{o=o.insert(u.key,u)})),o)))}}const HE="LocalStore",d4=3e8;class m4{constructor(e,t,i,s){this.persistence=e,this.Fs=t,this.serializer=s,this.Ms=new Ct(be),this.xs=new Es((o=>ko(o)),bf),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(i)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new eN(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function iN(n,e,t,i){return new m4(n,e,t,i)}async function rN(n,e){const t=oe(n);return await t.persistence.runTransaction("Handle user change","readonly",(i=>{let s;return t.mutationQueue.getAllMutationBatches(i).next((o=>(s=o,t.Bs(e),t.mutationQueue.getAllMutationBatches(i)))).next((o=>{const u=[],h=[];let d=De();for(const p of s){u.push(p.batchId);for(const _ of p.mutations)d=d.add(_.key)}for(const p of o){h.push(p.batchId);for(const _ of p.mutations)d=d.add(_.key)}return t.localDocuments.getDocuments(i,d).next((p=>({Ls:p,removedBatchIds:u,addedBatchIds:h})))}))}))}function p4(n,e){const t=oe(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const s=e.batch.keys(),o=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(h,d,p,_){const y=p.batch,w=y.keys();let A=B.resolve();return w.forEach((O=>{A=A.next((()=>_.getEntry(d,O))).next((F=>{const V=p.docVersions.get(O);ge(V!==null,48541),F.version.compareTo(V)<0&&(y.applyToRemoteDocument(F,p),F.isValidDocument()&&(F.setReadTime(p.commitVersion),_.addEntry(F)))}))})),A.next((()=>h.mutationQueue.removeMutationBatch(d,y)))})(t,i,e,o).next((()=>o.apply(i))).next((()=>t.mutationQueue.performConsistencyCheck(i))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(i,s,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(h){let d=De();for(let p=0;p<h.mutationResults.length;++p)h.mutationResults[p].transformResults.length>0&&(d=d.add(h.batch.mutations[p].key));return d})(e)))).next((()=>t.localDocuments.getDocuments(i,s)))}))}function sN(n){const e=oe(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function g4(n,e){const t=oe(n),i=e.snapshotVersion;let s=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(o=>{const u=t.Ns.newChangeBuffer({trackRemovals:!0});s=t.Ms;const h=[];e.targetChanges.forEach(((_,y)=>{const w=s.get(y);if(!w)return;h.push(t.Pi.removeMatchingKeys(o,_.removedDocuments,y).next((()=>t.Pi.addMatchingKeys(o,_.addedDocuments,y))));let A=w.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(y)!==null?A=A.withResumeToken(Ot.EMPTY_BYTE_STRING,Ee.min()).withLastLimboFreeSnapshotVersion(Ee.min()):_.resumeToken.approximateByteSize()>0&&(A=A.withResumeToken(_.resumeToken,i)),s=s.insert(y,A),(function(F,V,X){return F.resumeToken.approximateByteSize()===0||V.snapshotVersion.toMicroseconds()-F.snapshotVersion.toMicroseconds()>=d4?!0:X.addedDocuments.size+X.modifiedDocuments.size+X.removedDocuments.size>0})(w,A,_)&&h.push(t.Pi.updateTargetData(o,A))}));let d=Qn(),p=De();if(e.documentUpdates.forEach((_=>{e.resolvedLimboDocuments.has(_)&&h.push(t.persistence.referenceDelegate.updateLimboDocument(o,_))})),h.push(aN(o,u,e.documentUpdates).next((_=>{d=_.ks,p=_.qs}))),!i.isEqual(Ee.min())){const _=t.Pi.getLastRemoteSnapshotVersion(o).next((y=>t.Pi.setTargetsMetadata(o,o.currentSequenceNumber,i)));h.push(_)}return B.waitFor(h).next((()=>u.apply(o))).next((()=>t.localDocuments.getLocalViewOfDocuments(o,d,p))).next((()=>d))})).then((o=>(t.Ms=s,o)))}function aN(n,e,t){let i=De(),s=De();return t.forEach((o=>i=i.add(o))),e.getEntries(n,i).next((o=>{let u=Qn();return t.forEach(((h,d)=>{const p=o.get(h);d.isFoundDocument()!==p.isFoundDocument()&&(s=s.add(h)),d.isNoDocument()&&d.version.isEqual(Ee.min())?(e.removeEntry(h,d.readTime),u=u.insert(h,d)):!p.isValidDocument()||d.version.compareTo(p.version)>0||d.version.compareTo(p.version)===0&&p.hasPendingWrites?(e.addEntry(d),u=u.insert(h,d)):re(HE,"Ignoring outdated watch update for ",h,". Current version:",p.version," Watch version:",d.version)})),{ks:u,qs:s}}))}function _4(n,e){const t=oe(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=pa),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function Cu(n,e){const t=oe(n);return t.persistence.runTransaction("Allocate target","readwrite",(i=>{let s;return t.Pi.getTargetData(i,e).next((o=>o?(s=o,B.resolve(s)):t.Pi.allocateTargetId(i).next((u=>(s=new ss(e,u,"TargetPurposeListen",i.currentSequenceNumber),t.Pi.addTargetData(i,s).next((()=>s)))))))})).then((i=>{const s=t.Ms.get(i.targetId);return(s===null||i.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(i.targetId,i),t.xs.set(e,i.targetId)),i}))}async function Nu(n,e,t){const i=oe(n),s=i.Ms.get(e),o=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",o,(u=>i.persistence.referenceDelegate.removeTarget(u,s)))}catch(u){if(!Pa(u))throw u;re(HE,`Failed to update sequence numbers for target ${e}: ${u}`)}i.Ms=i.Ms.remove(e),i.xs.delete(s.target)}function pp(n,e,t){const i=oe(n);let s=Ee.min(),o=De();return i.persistence.runTransaction("Execute query","readwrite",(u=>(function(d,p,_){const y=oe(d),w=y.xs.get(_);return w!==void 0?B.resolve(y.Ms.get(w)):y.Pi.getTargetData(p,_)})(i,u,Vn(e)).next((h=>{if(h)return s=h.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(u,h.targetId).next((d=>{o=d}))})).next((()=>i.Fs.getDocumentsMatchingQuery(u,e,t?s:Ee.min(),t?o:De()))).next((h=>(uN(i,f1(e),h),{documents:h,Qs:o})))))}function oN(n,e){const t=oe(n),i=oe(t.Pi),s=t.Ms.get(e);return s?Promise.resolve(s.target):t.persistence.runTransaction("Get target data","readonly",(o=>i.At(o,e).next((u=>u?u.target:null))))}function lN(n,e){const t=oe(n),i=t.Os.get(e)||Ee.min();return t.persistence.runTransaction("Get new document changes","readonly",(s=>t.Ns.getAllFromCollectionGroup(s,e,OC(i,_u),Number.MAX_SAFE_INTEGER))).then((s=>(uN(t,e,s),s)))}function uN(n,e,t){let i=n.Os.get(e)||Ee.min();t.forEach(((s,o)=>{o.readTime.compareTo(i)>0&&(i=o.readTime)})),n.Os.set(e,i)}async function y4(n,e,t,i){const s=oe(n);let o=De(),u=Qn();for(const p of t){const _=e.$s(p.metadata.name);p.document&&(o=o.add(_));const y=e.Us(p);y.setReadTime(e.Ks(p.metadata.readTime)),u=u.insert(_,y)}const h=s.Ns.newChangeBuffer({trackRemovals:!0}),d=await Cu(s,(function(_){return Vn(Hu(Ve.fromString(`__bundle__/docs/${_}`)))})(i));return s.persistence.runTransaction("Apply bundle documents","readwrite",(p=>aN(p,h,u).next((_=>(h.apply(p),_))).next((_=>s.Pi.removeMatchingKeysForTargetId(p,d.targetId).next((()=>s.Pi.addMatchingKeys(p,o,d.targetId))).next((()=>s.localDocuments.getLocalViewOfDocuments(p,_.ks,_.qs))).next((()=>_.ks))))))}async function v4(n,e,t=De()){const i=await Cu(n,Vn(VE(e.bundledQuery))),s=oe(n);return s.persistence.runTransaction("Save named query","readwrite",(o=>{const u=Lt(e.readTime);if(i.snapshotVersion.compareTo(u)>=0)return s.Ii.saveNamedQuery(o,e);const h=i.withResumeToken(Ot.EMPTY_BYTE_STRING,u);return s.Ms=s.Ms.insert(h.targetId,h),s.Pi.updateTargetData(o,h).next((()=>s.Pi.removeMatchingKeysForTargetId(o,i.targetId))).next((()=>s.Pi.addMatchingKeys(o,t,i.targetId))).next((()=>s.Ii.saveNamedQuery(o,e)))}))}const cN="firestore_clients";function e0(n,e){return`${cN}_${n}_${e}`}const hN="firestore_mutations";function t0(n,e,t){let i=`${hN}_${n}_${t}`;return e.isAuthenticated()&&(i+=`_${e.uid}`),i}const fN="firestore_targets";function Uy(n,e){return`${fN}_${n}_${e}`}const wr="SharedClientState";class gp{constructor(e,t,i,s){this.user=e,this.batchId=t,this.state=i,this.error=s}static Ws(e,t,i){const s=JSON.parse(i);let o,u=typeof s=="object"&&["pending","acknowledged","rejected"].indexOf(s.state)!==-1&&(s.error===void 0||typeof s.error=="object");return u&&s.error&&(u=typeof s.error.message=="string"&&typeof s.error.code=="string",u&&(o=new ie(s.error.code,s.error.message))),u?new gp(e,t,s.state,o):(Vt(wr,`Failed to parse mutation state for ID '${t}': ${i}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Mh{constructor(e,t,i){this.targetId=e,this.state=t,this.error=i}static Ws(e,t){const i=JSON.parse(t);let s,o=typeof i=="object"&&["not-current","current","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return o&&i.error&&(o=typeof i.error.message=="string"&&typeof i.error.code=="string",o&&(s=new ie(i.error.code,i.error.message))),o?new Mh(e,i.state,s):(Vt(wr,`Failed to parse target state for ID '${e}': ${t}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class _p{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Ws(e,t){const i=JSON.parse(t);let s=typeof i=="object"&&i.activeTargetIds instanceof Array,o=CE();for(let u=0;s&&u<i.activeTargetIds.length;++u)s=VC(i.activeTargetIds[u]),o=o.add(i.activeTargetIds[u]);return s?new _p(e,o):(Vt(wr,`Failed to parse client data for instance '${e}': ${t}`),null)}}class GE{constructor(e,t){this.clientId=e,this.onlineState=t}static Ws(e){const t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new GE(t.clientId,t.onlineState):(Vt(wr,`Failed to parse online state: ${e}`),null)}}class Av{constructor(){this.activeTargetIds=CE()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Fy{constructor(e,t,i,s,o){this.window=e,this.Mi=t,this.persistenceKey=i,this.Js=s,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Hs=this.Ys.bind(this),this.Zs=new Ct(be),this.started=!1,this.Xs=[];const u=i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.eo=e0(this.persistenceKey,this.Js),this.no=(function(d){return`firestore_sequence_number_${d}`})(this.persistenceKey),this.Zs=this.Zs.insert(this.Js,new Av),this.ro=new RegExp(`^${cN}_${u}_([^_]*)$`),this.io=new RegExp(`^${hN}_${u}_(\\d+)(?:_(.*))?$`),this.so=new RegExp(`^${fN}_${u}_(\\d+)$`),this.oo=(function(d){return`firestore_online_state_${d}`})(this.persistenceKey),this._o=(function(d){return`firestore_bundle_loaded_v2_${d}`})(this.persistenceKey),this.window.addEventListener("storage",this.Hs)}static v(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Ts();for(const i of e){if(i===this.Js)continue;const s=this.getItem(e0(this.persistenceKey,i));if(s){const o=_p.Ws(i,s);o&&(this.Zs=this.Zs.insert(o.clientId,o))}}this.ao();const t=this.storage.getItem(this.oo);if(t){const i=this.uo(t);i&&this.co(i)}for(const i of this.Xs)this.Ys(i);this.Xs=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(e){this.setItem(this.no,JSON.stringify(e))}getAllActiveQueryTargets(){return this.lo(this.Zs)}isActiveQueryTarget(e){let t=!1;return this.Zs.forEach(((i,s)=>{s.activeTargetIds.has(e)&&(t=!0)})),t}addPendingMutation(e){this.ho(e,"pending")}updateMutationState(e,t,i){this.ho(e,t,i),this.Po(e)}addLocalQueryTarget(e,t=!0){let i="not-current";if(this.isActiveQueryTarget(e)){const s=this.storage.getItem(Uy(this.persistenceKey,e));if(s){const o=Mh.Ws(e,s);o&&(i=o.state)}}return t&&this.To.zs(e),this.ao(),i}removeLocalQueryTarget(e){this.To.js(e),this.ao()}isLocalQueryTarget(e){return this.To.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Uy(this.persistenceKey,e))}updateQueryState(e,t,i){this.Io(e,t,i)}handleUserChange(e,t,i){t.forEach((s=>{this.Po(s)})),this.currentUser=e,i.forEach((s=>{this.addPendingMutation(s)}))}setOnlineState(e){this.Eo(e)}notifyBundleLoaded(e){this.Ao(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Hs),this.removeItem(this.eo),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return re(wr,"READ",e,t),t}setItem(e,t){re(wr,"SET",e,t),this.storage.setItem(e,t)}removeItem(e){re(wr,"REMOVE",e),this.storage.removeItem(e)}Ys(e){const t=e;if(t.storageArea===this.storage){if(re(wr,"EVENT",t.key,t.newValue),t.key===this.eo)return void Vt("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Mi.enqueueRetryable((async()=>{if(this.started){if(t.key!==null){if(this.ro.test(t.key)){if(t.newValue==null){const i=this.Ro(t.key);return this.Vo(i,null)}{const i=this.mo(t.key,t.newValue);if(i)return this.Vo(i.clientId,i)}}else if(this.io.test(t.key)){if(t.newValue!==null){const i=this.fo(t.key,t.newValue);if(i)return this.po(i)}}else if(this.so.test(t.key)){if(t.newValue!==null){const i=this.yo(t.key,t.newValue);if(i)return this.wo(i)}}else if(t.key===this.oo){if(t.newValue!==null){const i=this.uo(t.newValue);if(i)return this.co(i)}}else if(t.key===this.no){const i=(function(o){let u=Gn.ce;if(o!=null)try{const h=JSON.parse(o);ge(typeof h=="number",30636,{So:o}),u=h}catch(h){Vt(wr,"Failed to read sequence number from WebStorage",h)}return u})(t.newValue);i!==Gn.ce&&this.sequenceNumberHandler(i)}else if(t.key===this._o){const i=this.bo(t.newValue);await Promise.all(i.map((s=>this.syncEngine.Do(s))))}}}else this.Xs.push(t)}))}}get To(){return this.Zs.get(this.Js)}ao(){this.setItem(this.eo,this.To.Gs())}ho(e,t,i){const s=new gp(this.currentUser,e,t,i),o=t0(this.persistenceKey,this.currentUser,e);this.setItem(o,s.Gs())}Po(e){const t=t0(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Eo(e){const t={clientId:this.Js,onlineState:e};this.storage.setItem(this.oo,JSON.stringify(t))}Io(e,t,i){const s=Uy(this.persistenceKey,e),o=new Mh(e,t,i);this.setItem(s,o.Gs())}Ao(e){const t=JSON.stringify(Array.from(e));this.setItem(this._o,t)}Ro(e){const t=this.ro.exec(e);return t?t[1]:null}mo(e,t){const i=this.Ro(e);return _p.Ws(i,t)}fo(e,t){const i=this.io.exec(e),s=Number(i[1]),o=i[2]!==void 0?i[2]:null;return gp.Ws(new ln(o),s,t)}yo(e,t){const i=this.so.exec(e),s=Number(i[1]);return Mh.Ws(s,t)}uo(e){return GE.Ws(e)}bo(e){return JSON.parse(e)}async po(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Co(e.batchId,e.state,e.error);re(wr,`Ignoring mutation for non-active user ${e.user.uid}`)}wo(e){return this.syncEngine.vo(e.targetId,e.state,e.error)}Vo(e,t){const i=t?this.Zs.insert(e,t):this.Zs.remove(e),s=this.lo(this.Zs),o=this.lo(i),u=[],h=[];return o.forEach((d=>{s.has(d)||u.push(d)})),s.forEach((d=>{o.has(d)||h.push(d)})),this.syncEngine.Fo(u,h).then((()=>{this.Zs=i}))}co(e){this.Zs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}lo(e){let t=CE();return e.forEach(((i,s)=>{t=t.unionWith(s.activeTargetIds)})),t}}class dN{constructor(){this.Mo=new Av,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,i){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Av,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class E4{Oo(e){}shutdown(){}}const n0="ConnectivityMonitor";class i0{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){re(n0,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){re(n0,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let Dm=null;function bv(){return Dm===null?Dm=(function(){return 268435456+Math.round(2147483648*Math.random())})():Dm++,"0x"+Dm.toString(16)}const By="RestConnection",T4={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class w4{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${i}/databases/${s}`,this.Wo=this.databaseId.database===op?`project_id=${i}`:`project_id=${i}&database_id=${s}`}Go(e,t,i,s,o){const u=bv(),h=this.zo(e,t.toUriEncodedString());re(By,`Sending RPC '${e}' ${u}:`,h,i);const d={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(d,s,o);const{host:p}=new URL(h),_=kr(p);return this.Jo(e,h,d,i,_).then((y=>(re(By,`Received RPC '${e}' ${u}: `,y),y)),(y=>{throw Or(By,`RPC '${e}' ${u} failed with error: `,y,"url: ",h,"request:",i),y}))}Ho(e,t,i,s,o,u){return this.Go(e,t,i,s,o)}jo(e,t,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+ju})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((s,o)=>e[o]=s)),i&&i.headers.forEach(((s,o)=>e[o]=s))}zo(e,t){const i=T4[e];return`${this.Uo}/v1/${t}:${i}`}terminate(){}}class S4{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const Sn="WebChannelConnection";class I4 extends w4{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,i,s,o){const u=bv();return new Promise(((h,d)=>{const p=new EC;p.setWithCredentials(!0),p.listenOnce(TC.COMPLETE,(()=>{try{switch(p.getLastErrorCode()){case Lm.NO_ERROR:const y=p.getResponseJson();re(Sn,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(y)),h(y);break;case Lm.TIMEOUT:re(Sn,`RPC '${e}' ${u} timed out`),d(new ie(G.DEADLINE_EXCEEDED,"Request time out"));break;case Lm.HTTP_ERROR:const w=p.getStatus();if(re(Sn,`RPC '${e}' ${u} failed with status:`,w,"response text:",p.getResponseText()),w>0){let A=p.getResponseJson();Array.isArray(A)&&(A=A[0]);const O=A?.error;if(O&&O.status&&O.message){const F=(function(X){const ne=X.toLowerCase().replace(/_/g,"-");return Object.values(G).indexOf(ne)>=0?ne:G.UNKNOWN})(O.status);d(new ie(F,O.message))}else d(new ie(G.UNKNOWN,"Server responded with status "+p.getStatus()))}else d(new ie(G.UNAVAILABLE,"Connection failed."));break;default:he(9055,{l_:e,streamId:u,h_:p.getLastErrorCode(),P_:p.getLastError()})}}finally{re(Sn,`RPC '${e}' ${u} completed.`)}}));const _=JSON.stringify(s);re(Sn,`RPC '${e}' ${u} sending request:`,s),p.send(t,"POST",_,i,15)}))}T_(e,t,i){const s=bv(),o=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=IC(),h=SC(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(d.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(d.useFetchStreams=!0),this.jo(d.initMessageHeaders,t,i),d.encodeInitMessageHeaders=!0;const _=o.join("");re(Sn,`Creating RPC '${e}' stream ${s}: ${_}`,d);const y=u.createWebChannel(_,d);this.I_(y);let w=!1,A=!1;const O=new S4({Yo:V=>{A?re(Sn,`Not sending because RPC '${e}' stream ${s} is closed:`,V):(w||(re(Sn,`Opening RPC '${e}' stream ${s} transport.`),y.open(),w=!0),re(Sn,`RPC '${e}' stream ${s} sending:`,V),y.send(V))},Zo:()=>y.close()}),F=(V,X,ne)=>{V.listen(X,(te=>{try{ne(te)}catch(fe){setTimeout((()=>{throw fe}),0)}}))};return F(y,Th.EventType.OPEN,(()=>{A||(re(Sn,`RPC '${e}' stream ${s} transport opened.`),O.o_())})),F(y,Th.EventType.CLOSE,(()=>{A||(A=!0,re(Sn,`RPC '${e}' stream ${s} transport closed`),O.a_(),this.E_(y))})),F(y,Th.EventType.ERROR,(V=>{A||(A=!0,Or(Sn,`RPC '${e}' stream ${s} transport errored. Name:`,V.name,"Message:",V.message),O.a_(new ie(G.UNAVAILABLE,"The operation could not be completed")))})),F(y,Th.EventType.MESSAGE,(V=>{if(!A){const X=V.data[0];ge(!!X,16349);const ne=X,te=ne?.error||ne[0]?.error;if(te){re(Sn,`RPC '${e}' stream ${s} received error:`,te);const fe=te.status;let ye=(function(b){const C=$t[b];if(C!==void 0)return b1(C)})(fe),ve=te.message;ye===void 0&&(ye=G.INTERNAL,ve="Unknown error status: "+fe+" with message "+te.message),A=!0,O.a_(new ie(ye,ve)),y.close()}else re(Sn,`RPC '${e}' stream ${s} received:`,X),O.u_(X)}})),F(h,wC.STAT_EVENT,(V=>{V.stat===rv.PROXY?re(Sn,`RPC '${e}' stream ${s} detected buffering proxy`):V.stat===rv.NOPROXY&&re(Sn,`RPC '${e}' stream ${s} detected no buffering proxy`)})),setTimeout((()=>{O.__()}),0),O}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function mN(){return typeof window<"u"?window:null}function Qm(){return typeof document<"u"?document:null}function xf(n){return new NL(n,!0)}class KE{constructor(e,t,i=1e3,s=1.5,o=6e4){this.Mi=e,this.timerId=t,this.d_=i,this.A_=s,this.R_=o,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),s=Math.max(0,t-i);s>0&&re("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const r0="PersistentStream";class pN{constructor(e,t,i,s,o,u,h,d){this.Mi=e,this.S_=i,this.b_=s,this.connection=o,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=h,this.listener=d,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new KE(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===G.RESOURCE_EXHAUSTED?(Vt(t.toString()),Vt("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===G.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,s])=>{this.D_===t&&this.G_(i,s)}),(i=>{e((()=>{const s=new ie(G.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(s)}))}))}G_(e,t){const i=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{i((()=>this.listener.Xo()))})),this.stream.t_((()=>{i((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((s=>{i((()=>this.z_(s)))})),this.stream.onMessage((s=>{i((()=>++this.F_==1?this.J_(s):this.onNext(s)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return re(r0,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(re(r0,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class A4 extends pN{constructor(e,t,i,s,o,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,s,u),this.serializer=o}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=xL(this.serializer,e),i=(function(o){if(!("targetChange"in o))return Ee.min();const u=o.targetChange;return u.targetIds&&u.targetIds.length?Ee.min():u.readTime?Lt(u.readTime):Ee.min()})(e);return this.listener.H_(t,i)}Y_(e){const t={};t.database=Ev(this.serializer),t.addTarget=(function(o,u){let h;const d=u.target;if(h=lp(d)?{documents:V1(o,d)}:{query:L1(o,d).ft},h.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){h.resumeToken=D1(o,u.resumeToken);const p=yv(o,u.expectedCount);p!==null&&(h.expectedCount=p)}else if(u.snapshotVersion.compareTo(Ee.min())>0){h.readTime=Ru(o,u.snapshotVersion.toTimestamp());const p=yv(o,u.expectedCount);p!==null&&(h.expectedCount=p)}return h})(this.serializer,e);const i=ML(this.serializer,e);i&&(t.labels=i),this.q_(t)}Z_(e){const t={};t.database=Ev(this.serializer),t.removeTarget=e,this.q_(t)}}class b4 extends pN{constructor(e,t,i,s,o,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,s,u),this.serializer=o}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return ge(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ge(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){ge(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=PL(e.writeResults,e.commitTime),i=Lt(e.commitTime);return this.listener.na(i,t)}ra(){const e={};e.database=Ev(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((i=>rf(this.serializer,i)))};this.q_(t)}}class R4{}class C4 extends R4{constructor(e,t,i,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new ie(G.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,i,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,u])=>this.connection.Go(e,vv(t,i),s,o,u))).catch((o=>{throw o.name==="FirebaseError"?(o.code===G.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ie(G.UNKNOWN,o.toString())}))}Ho(e,t,i,s,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,h])=>this.connection.Ho(e,vv(t,i),s,u,h,o))).catch((u=>{throw u.name==="FirebaseError"?(u.code===G.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new ie(G.UNKNOWN,u.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class N4{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Vt(t),this.aa=!1):re("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const zo="RemoteStore";class D4{constructor(e,t,i,s,o){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=o,this.Aa.Oo((u=>{i.enqueueAndForget((async()=>{ka(this)&&(re(zo,"Restarting streams for network reachability change."),await(async function(d){const p=oe(d);p.Ea.add(4),await Qu(p),p.Ra.set("Unknown"),p.Ea.delete(4),await Pf(p)})(this))}))})),this.Ra=new N4(i,s)}}async function Pf(n){if(ka(n))for(const e of n.da)await e(!0)}async function Qu(n){for(const e of n.da)await e(!1)}function tg(n,e){const t=oe(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),YE(t)?$E(t):Yu(t).O_()&&QE(t,e))}function Du(n,e){const t=oe(n),i=Yu(t);t.Ia.delete(e),i.O_()&&gN(t,e),t.Ia.size===0&&(i.O_()?i.L_():ka(t)&&t.Ra.set("Unknown"))}function QE(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ee.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Yu(n).Y_(e)}function gN(n,e){n.Va.Ue(e),Yu(n).Z_(e)}function $E(n){n.Va=new AL({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),Yu(n).start(),n.Ra.ua()}function YE(n){return ka(n)&&!Yu(n).x_()&&n.Ia.size>0}function ka(n){return oe(n).Ea.size===0}function _N(n){n.Va=void 0}async function O4(n){n.Ra.set("Online")}async function x4(n){n.Ia.forEach(((e,t)=>{QE(n,e)}))}async function P4(n,e){_N(n),YE(n)?(n.Ra.ha(e),$E(n)):n.Ra.set("Unknown")}async function M4(n,e,t){if(n.Ra.set("Online"),e instanceof N1&&e.state===2&&e.cause)try{await(async function(s,o){const u=o.cause;for(const h of o.targetIds)s.Ia.has(h)&&(await s.remoteSyncer.rejectListen(h,u),s.Ia.delete(h),s.Va.removeTarget(h))})(n,e)}catch(i){re(zo,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await yp(n,i)}else if(e instanceof Gm?n.Va.Ze(e):e instanceof C1?n.Va.st(e):n.Va.tt(e),!t.isEqual(Ee.min()))try{const i=await sN(n.localStore);t.compareTo(i)>=0&&await(function(o,u){const h=o.Va.Tt(u);return h.targetChanges.forEach(((d,p)=>{if(d.resumeToken.approximateByteSize()>0){const _=o.Ia.get(p);_&&o.Ia.set(p,_.withResumeToken(d.resumeToken,u))}})),h.targetMismatches.forEach(((d,p)=>{const _=o.Ia.get(d);if(!_)return;o.Ia.set(d,_.withResumeToken(Ot.EMPTY_BYTE_STRING,_.snapshotVersion)),gN(o,d);const y=new ss(_.target,d,p,_.sequenceNumber);QE(o,y)})),o.remoteSyncer.applyRemoteEvent(h)})(n,t)}catch(i){re(zo,"Failed to raise snapshot:",i),await yp(n,i)}}async function yp(n,e,t){if(!Pa(e))throw e;n.Ea.add(1),await Qu(n),n.Ra.set("Offline"),t||(t=()=>sN(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{re(zo,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await Pf(n)}))}function yN(n,e){return e().catch((t=>yp(n,t,e)))}async function $u(n){const e=oe(n),t=ba(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:pa;for(;k4(e);)try{const s=await _4(e.localStore,i);if(s===null){e.Ta.length===0&&t.L_();break}i=s.batchId,V4(e,s)}catch(s){await yp(e,s)}vN(e)&&EN(e)}function k4(n){return ka(n)&&n.Ta.length<10}function V4(n,e){n.Ta.push(e);const t=ba(n);t.O_()&&t.X_&&t.ea(e.mutations)}function vN(n){return ka(n)&&!ba(n).x_()&&n.Ta.length>0}function EN(n){ba(n).start()}async function L4(n){ba(n).ra()}async function U4(n){const e=ba(n);for(const t of n.Ta)e.ea(t.mutations)}async function F4(n,e,t){const i=n.Ta.shift(),s=xE.from(i,e,t);await yN(n,(()=>n.remoteSyncer.applySuccessfulWrite(s))),await $u(n)}async function B4(n,e){e&&ba(n).X_&&await(async function(i,s){if((function(u){return A1(u)&&u!==G.ABORTED})(s.code)){const o=i.Ta.shift();ba(i).B_(),await yN(i,(()=>i.remoteSyncer.rejectFailedWrite(o.batchId,s))),await $u(i)}})(n,e),vN(n)&&EN(n)}async function s0(n,e){const t=oe(n);t.asyncQueue.verifyOperationInProgress(),re(zo,"RemoteStore received new credentials");const i=ka(t);t.Ea.add(3),await Qu(t),i&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Pf(t)}async function Rv(n,e){const t=oe(n);e?(t.Ea.delete(2),await Pf(t)):e||(t.Ea.add(2),await Qu(t),t.Ra.set("Unknown"))}function Yu(n){return n.ma||(n.ma=(function(t,i,s){const o=oe(t);return o.sa(),new A4(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)})(n.datastore,n.asyncQueue,{Xo:O4.bind(null,n),t_:x4.bind(null,n),r_:P4.bind(null,n),H_:M4.bind(null,n)}),n.da.push((async e=>{e?(n.ma.B_(),YE(n)?$E(n):n.Ra.set("Unknown")):(await n.ma.stop(),_N(n))}))),n.ma}function ba(n){return n.fa||(n.fa=(function(t,i,s){const o=oe(t);return o.sa(),new b4(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:L4.bind(null,n),r_:B4.bind(null,n),ta:U4.bind(null,n),na:F4.bind(null,n)}),n.da.push((async e=>{e?(n.fa.B_(),await $u(n)):(await n.fa.stop(),n.Ta.length>0&&(re(zo,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}class WE{constructor(e,t,i,s,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=s,this.removalCallback=o,this.deferred=new Tn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((u=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,s,o){const u=Date.now()+i,h=new WE(e,t,u,s,o);return h.start(i),h}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ie(G.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Wu(n,e){if(Vt("AsyncQueue",`${e}: ${n}`),Pa(n))return new ie(G.UNAVAILABLE,`${e}: ${n}`);throw n}class ou{static emptySet(e){return new ou(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||ae.comparator(t.key,i.key):(t,i)=>ae.comparator(t.key,i.key),this.keyedMap=wh(),this.sortedSet=new Ct(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,i)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof ou)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,o=i.getNext().key;if(!s.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new ou;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}class a0{constructor(){this.ga=new Ct(ae.comparator)}track(e){const t=e.doc.key,i=this.ga.get(t);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(t,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(t):e.type===1&&i.type===2?this.ga=this.ga.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):he(63341,{Rt:e,pa:i}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,i)=>{e.push(i)})),e}}class Ou{constructor(e,t,i,s,o,u,h,d,p){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=s,this.mutatedKeys=o,this.fromCache=u,this.syncStateChanged=h,this.excludesMetadataChanges=d,this.hasCachedResults=p}static fromInitialDocuments(e,t,i,s,o){const u=[];return t.forEach((h=>{u.push({type:0,doc:h})})),new Ou(e,t,ou.emptySet(t),u,i,s,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Rf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==i[s].type||!t[s].doc.isEqual(i[s].doc))return!1;return!0}}class z4{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class q4{constructor(){this.queries=o0(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,i){const s=oe(t),o=s.queries;s.queries=o0(),o.forEach(((u,h)=>{for(const d of h.Sa)d.onError(i)}))})(this,new ie(G.ABORTED,"Firestore shutting down"))}}function o0(){return new Es((n=>h1(n)),Rf)}async function XE(n,e){const t=oe(n);let i=3;const s=e.query;let o=t.queries.get(s);o?!o.ba()&&e.Da()&&(i=2):(o=new z4,i=e.Da()?0:1);try{switch(i){case 0:o.wa=await t.onListen(s,!0);break;case 1:o.wa=await t.onListen(s,!1);break;case 2:await t.onFirstRemoteStoreListen(s)}}catch(u){const h=Wu(u,`Initialization of query '${eu(e.query)}' failed`);return void e.onError(h)}t.queries.set(s,o),o.Sa.push(e),e.va(t.onlineState),o.wa&&e.Fa(o.wa)&&ZE(t)}async function JE(n,e){const t=oe(n),i=e.query;let s=3;const o=t.queries.get(i);if(o){const u=o.Sa.indexOf(e);u>=0&&(o.Sa.splice(u,1),o.Sa.length===0?s=e.Da()?0:1:!o.ba()&&e.Da()&&(s=2))}switch(s){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function j4(n,e){const t=oe(n);let i=!1;for(const s of e){const o=s.query,u=t.queries.get(o);if(u){for(const h of u.Sa)h.Fa(s)&&(i=!0);u.wa=s}}i&&ZE(t)}function H4(n,e,t){const i=oe(n),s=i.queries.get(e);if(s)for(const o of s.Sa)o.onError(t);i.queries.delete(e)}function ZE(n){n.Ca.forEach((e=>{e.next()}))}var Cv,l0;(l0=Cv||(Cv={})).Ma="default",l0.Cache="cache";class eT{constructor(e,t,i){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const s of e.docChanges)s.type!==3&&i.push(s);e=new Ou(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const i=t!=="Offline";return(!this.options.qa||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Ou.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Cv.Cache}}class G4{constructor(e,t){this.Qa=e,this.byteLength=t}$a(){return"metadata"in this.Qa}}class u0{constructor(e){this.serializer=e}$s(e){return Rr(this.serializer,e)}Us(e){return e.metadata.exists?k1(this.serializer,e.document,!1):yt.newNoDocument(this.$s(e.metadata.name),this.Ks(e.metadata.readTime))}Ks(e){return Lt(e)}}class K4{constructor(e,t){this.Ua=e,this.serializer=t,this.Ka=[],this.Wa=[],this.collectionGroups=new Set,this.progress=TN(e)}get queries(){return this.Ka}get documents(){return this.Wa}Ga(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Qa.namedQuery)this.Ka.push(e.Qa.namedQuery);else if(e.Qa.documentMetadata){this.Wa.push({metadata:e.Qa.documentMetadata}),e.Qa.documentMetadata.exists||++t;const i=Ve.fromString(e.Qa.documentMetadata.name);this.collectionGroups.add(i.get(i.length-2))}else e.Qa.document&&(this.Wa[this.Wa.length-1].document=e.Qa.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,{...this.progress}):null}za(e){const t=new Map,i=new u0(this.serializer);for(const s of e)if(s.metadata.queries){const o=i.$s(s.metadata.name);for(const u of s.metadata.queries){const h=(t.get(u)||De()).add(o);t.set(u,h)}}return t}async ja(e){const t=await y4(e,new u0(this.serializer),this.Wa,this.Ua.id),i=this.za(this.documents);for(const s of this.Ka)await v4(e,s,i.get(s.name));return this.progress.taskState="Success",{progress:this.progress,Ja:this.collectionGroups,Ha:t}}}function TN(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class wN{constructor(e){this.key=e}}class SN{constructor(e){this.key=e}}class IN{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=De(),this.mutatedKeys=De(),this.eu=d1(e),this.tu=new ou(this.eu)}get nu(){return this.Ya}ru(e,t){const i=t?t.iu:new a0,s=t?t.tu:this.tu;let o=t?t.mutatedKeys:this.mutatedKeys,u=s,h=!1;const d=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,p=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal(((_,y)=>{const w=s.get(_),A=Cf(this.query,y)?y:null,O=!!w&&this.mutatedKeys.has(w.key),F=!!A&&(A.hasLocalMutations||this.mutatedKeys.has(A.key)&&A.hasCommittedMutations);let V=!1;w&&A?w.data.isEqual(A.data)?O!==F&&(i.track({type:3,doc:A}),V=!0):this.su(w,A)||(i.track({type:2,doc:A}),V=!0,(d&&this.eu(A,d)>0||p&&this.eu(A,p)<0)&&(h=!0)):!w&&A?(i.track({type:0,doc:A}),V=!0):w&&!A&&(i.track({type:1,doc:w}),V=!0,(d||p)&&(h=!0)),V&&(A?(u=u.add(A),o=F?o.add(_):o.delete(_)):(u=u.delete(_),o=o.delete(_)))})),this.query.limit!==null)for(;u.size>this.query.limit;){const _=this.query.limitType==="F"?u.last():u.first();u=u.delete(_.key),o=o.delete(_.key),i.track({type:1,doc:_})}return{tu:u,iu:i,Cs:h,mutatedKeys:o}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,s){const o=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const u=e.iu.ya();u.sort(((_,y)=>(function(A,O){const F=V=>{switch(V){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return he(20277,{Rt:V})}};return F(A)-F(O)})(_.type,y.type)||this.eu(_.doc,y.doc))),this.ou(i),s=s??!1;const h=t&&!s?this._u():[],d=this.Xa.size===0&&this.current&&!s?1:0,p=d!==this.Za;return this.Za=d,u.length!==0||p?{snapshot:new Ou(this.query,e.tu,o,u,e.mutatedKeys,d===0,p,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:h}:{au:h}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new a0,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=De(),this.tu.forEach((i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))}));const t=[];return e.forEach((i=>{this.Xa.has(i)||t.push(new SN(i))})),this.Xa.forEach((i=>{e.has(i)||t.push(new wN(i))})),t}cu(e){this.Ya=e.Qs,this.Xa=De();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Ou.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Va="SyncEngine";class Q4{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class $4{constructor(e){this.key=e,this.hu=!1}}class Y4{constructor(e,t,i,s,o,u){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=s,this.currentUser=o,this.maxConcurrentLimboResolutions=u,this.Pu={},this.Tu=new Es((h=>h1(h)),Rf),this.Iu=new Map,this.Eu=new Set,this.du=new Ct(ae.comparator),this.Au=new Map,this.Ru=new FE,this.Vu={},this.mu=new Map,this.fu=Bo.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function W4(n,e,t=!0){const i=ng(n);let s;const o=i.Tu.get(e);return o?(i.sharedClientState.addLocalQueryTarget(o.targetId),s=o.view.lu()):s=await AN(i,e,t,!0),s}async function X4(n,e){const t=ng(n);await AN(t,e,!0,!1)}async function AN(n,e,t,i){const s=await Cu(n.localStore,Vn(e)),o=s.targetId,u=n.sharedClientState.addLocalQueryTarget(o,t);let h;return i&&(h=await tT(n,e,o,u==="current",s.resumeToken)),n.isPrimaryClient&&t&&tg(n.remoteStore,s),h}async function tT(n,e,t,i,s){n.pu=(y,w,A)=>(async function(F,V,X,ne){let te=V.view.ru(X);te.Cs&&(te=await pp(F.localStore,V.query,!1).then((({documents:R})=>V.view.ru(R,te))));const fe=ne&&ne.targetChanges.get(V.targetId),ye=ne&&ne.targetMismatches.get(V.targetId)!=null,ve=V.view.applyChanges(te,F.isPrimaryClient,fe,ye);return Nv(F,V.targetId,ve.au),ve.snapshot})(n,y,w,A);const o=await pp(n.localStore,e,!0),u=new IN(e,o.Qs),h=u.ru(o.documents),d=Of.createSynthesizedTargetChangeForCurrentChange(t,i&&n.onlineState!=="Offline",s),p=u.applyChanges(h,n.isPrimaryClient,d);Nv(n,t,p.au);const _=new Q4(e,t,u);return n.Tu.set(e,_),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),p.snapshot}async function J4(n,e,t){const i=oe(n),s=i.Tu.get(e),o=i.Iu.get(s.targetId);if(o.length>1)return i.Iu.set(s.targetId,o.filter((u=>!Rf(u,e)))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(s.targetId),i.sharedClientState.isActiveQueryTarget(s.targetId)||await Nu(i.localStore,s.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(s.targetId),t&&Du(i.remoteStore,s.targetId),xu(i,s.targetId)})).catch(xa)):(xu(i,s.targetId),await Nu(i.localStore,s.targetId,!0))}async function Z4(n,e){const t=oe(n),i=t.Tu.get(e),s=t.Iu.get(i.targetId);t.isPrimaryClient&&s.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),Du(t.remoteStore,i.targetId))}async function eU(n,e,t){const i=sT(n);try{const s=await(function(u,h){const d=oe(u),p=Ze.now(),_=h.reduce(((A,O)=>A.add(O.key)),De());let y,w;return d.persistence.runTransaction("Locally write mutations","readwrite",(A=>{let O=Qn(),F=De();return d.Ns.getEntries(A,_).next((V=>{O=V,O.forEach(((X,ne)=>{ne.isValidDocument()||(F=F.add(X))}))})).next((()=>d.localDocuments.getOverlayedDocuments(A,O))).next((V=>{y=V;const X=[];for(const ne of h){const te=wL(ne,y.get(ne.key).overlayedDocument);te!=null&&X.push(new Ts(ne.key,te,n1(te.value.mapValue),bt.exists(!0)))}return d.mutationQueue.addMutationBatch(A,p,X,h)})).next((V=>{w=V;const X=V.applyToLocalDocumentSet(y,F);return d.documentOverlayCache.saveOverlays(A,V.batchId,X)}))})).then((()=>({batchId:w.batchId,changes:p1(y)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(s.batchId),(function(u,h,d){let p=u.Vu[u.currentUser.toKey()];p||(p=new Ct(be)),p=p.insert(h,d),u.Vu[u.currentUser.toKey()]=p})(i,s.batchId,t),await ws(i,s.changes),await $u(i.remoteStore)}catch(s){const o=Wu(s,"Failed to persist write");t.reject(o)}}async function bN(n,e){const t=oe(n);try{const i=await g4(t.localStore,e);e.targetChanges.forEach(((s,o)=>{const u=t.Au.get(o);u&&(ge(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?u.hu=!0:s.modifiedDocuments.size>0?ge(u.hu,14607):s.removedDocuments.size>0&&(ge(u.hu,42227),u.hu=!1))})),await ws(t,i,e)}catch(i){await xa(i)}}function c0(n,e,t){const i=oe(n);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const s=[];i.Tu.forEach(((o,u)=>{const h=u.view.va(e);h.snapshot&&s.push(h.snapshot)})),(function(u,h){const d=oe(u);d.onlineState=h;let p=!1;d.queries.forEach(((_,y)=>{for(const w of y.Sa)w.va(h)&&(p=!0)})),p&&ZE(d)})(i.eventManager,e),s.length&&i.Pu.H_(s),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function tU(n,e,t){const i=oe(n);i.sharedClientState.updateQueryState(e,"rejected",t);const s=i.Au.get(e),o=s&&s.key;if(o){let u=new Ct(ae.comparator);u=u.insert(o,yt.newNoDocument(o,Ee.min()));const h=De().add(o),d=new Df(Ee.min(),new Map,new Ct(be),u,h);await bN(i,d),i.du=i.du.remove(o),i.Au.delete(e),rT(i)}else await Nu(i.localStore,e,!1).then((()=>xu(i,e,t))).catch(xa)}async function nU(n,e){const t=oe(n),i=e.batch.batchId;try{const s=await p4(t.localStore,e);iT(t,i,null),nT(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await ws(t,s)}catch(s){await xa(s)}}async function iU(n,e,t){const i=oe(n);try{const s=await(function(u,h){const d=oe(u);return d.persistence.runTransaction("Reject batch","readwrite-primary",(p=>{let _;return d.mutationQueue.lookupMutationBatch(p,h).next((y=>(ge(y!==null,37113),_=y.keys(),d.mutationQueue.removeMutationBatch(p,y)))).next((()=>d.mutationQueue.performConsistencyCheck(p))).next((()=>d.documentOverlayCache.removeOverlaysForBatchId(p,_,h))).next((()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,_))).next((()=>d.localDocuments.getDocuments(p,_)))}))})(i.localStore,e);iT(i,e,t),nT(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await ws(i,s)}catch(s){await xa(s)}}async function rU(n,e){const t=oe(n);ka(t.remoteStore)||re(Va,"The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const i=await(function(u){const h=oe(u);return h.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(d=>h.mutationQueue.getHighestUnacknowledgedBatchId(d)))})(t.localStore);if(i===pa)return void e.resolve();const s=t.mu.get(i)||[];s.push(e),t.mu.set(i,s)}catch(i){const s=Wu(i,"Initialization of waitForPendingWrites() operation failed");e.reject(s)}}function nT(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function iT(n,e,t){const i=oe(n);let s=i.Vu[i.currentUser.toKey()];if(s){const o=s.get(e);o&&(t?o.reject(t):o.resolve(),s=s.remove(e)),i.Vu[i.currentUser.toKey()]=s}}function xu(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const i of n.Iu.get(e))n.Tu.delete(i),t&&n.Pu.yu(i,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach((i=>{n.Ru.containsKey(i)||RN(n,i)}))}function RN(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(Du(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),rT(n))}function Nv(n,e,t){for(const i of t)i instanceof wN?(n.Ru.addReference(i.key,e),sU(n,i)):i instanceof SN?(re(Va,"Document no longer in limbo: "+i.key),n.Ru.removeReference(i.key,e),n.Ru.containsKey(i.key)||RN(n,i.key)):he(19791,{wu:i})}function sU(n,e){const t=e.key,i=t.path.canonicalString();n.du.get(t)||n.Eu.has(i)||(re(Va,"New document in limbo: "+t),n.Eu.add(i),rT(n))}function rT(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new ae(Ve.fromString(e)),i=n.fu.next();n.Au.set(i,new $4(t)),n.du=n.du.insert(t,i),tg(n.remoteStore,new ss(Vn(Hu(t.path)),i,"TargetPurposeLimboResolution",Gn.ce))}}async function ws(n,e,t){const i=oe(n),s=[],o=[],u=[];i.Tu.isEmpty()||(i.Tu.forEach(((h,d)=>{u.push(i.pu(d,e,t).then((p=>{if((p||t)&&i.isPrimaryClient){const _=p?!p.fromCache:t?.targetChanges.get(d.targetId)?.current;i.sharedClientState.updateQueryState(d.targetId,_?"current":"not-current")}if(p){s.push(p);const _=jE.As(d.targetId,p);o.push(_)}})))})),await Promise.all(u),i.Pu.H_(s),await(async function(d,p){const _=oe(d);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",(y=>B.forEach(p,(w=>B.forEach(w.Es,(A=>_.persistence.referenceDelegate.addReference(y,w.targetId,A))).next((()=>B.forEach(w.ds,(A=>_.persistence.referenceDelegate.removeReference(y,w.targetId,A)))))))))}catch(y){if(!Pa(y))throw y;re(HE,"Failed to update sequence numbers: "+y)}for(const y of p){const w=y.targetId;if(!y.fromCache){const A=_.Ms.get(w),O=A.snapshotVersion,F=A.withLastLimboFreeSnapshotVersion(O);_.Ms=_.Ms.insert(w,F)}}})(i.localStore,o))}async function aU(n,e){const t=oe(n);if(!t.currentUser.isEqual(e)){re(Va,"User change. New user:",e.toKey());const i=await rN(t.localStore,e);t.currentUser=e,(function(o,u){o.mu.forEach((h=>{h.forEach((d=>{d.reject(new ie(G.CANCELLED,u))}))})),o.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await ws(t,i.Ls)}}function oU(n,e){const t=oe(n),i=t.Au.get(e);if(i&&i.hu)return De().add(i.key);{let s=De();const o=t.Iu.get(e);if(!o)return s;for(const u of o){const h=t.Tu.get(u);s=s.unionWith(h.view.nu)}return s}}async function lU(n,e){const t=oe(n),i=await pp(t.localStore,e.query,!0),s=e.view.cu(i);return t.isPrimaryClient&&Nv(t,e.targetId,s.au),s}async function uU(n,e){const t=oe(n);return lN(t.localStore,e).then((i=>ws(t,i)))}async function cU(n,e,t,i){const s=oe(n),o=await(function(h,d){const p=oe(h),_=oe(p.mutationQueue);return p.persistence.runTransaction("Lookup mutation documents","readonly",(y=>_.er(y,d).next((w=>w?p.localDocuments.getDocuments(y,w):B.resolve(null)))))})(s.localStore,e);o!==null?(t==="pending"?await $u(s.remoteStore):t==="acknowledged"||t==="rejected"?(iT(s,e,i||null),nT(s,e),(function(h,d){oe(oe(h).mutationQueue).ir(d)})(s.localStore,e)):he(6720,"Unknown batchState",{Su:t}),await ws(s,o)):re(Va,"Cannot apply mutation batch with id: "+e)}async function hU(n,e){const t=oe(n);if(ng(t),sT(t),e===!0&&t.gu!==!0){const i=t.sharedClientState.getAllActiveQueryTargets(),s=await h0(t,i.toArray());t.gu=!0,await Rv(t.remoteStore,!0);for(const o of s)tg(t.remoteStore,o)}else if(e===!1&&t.gu!==!1){const i=[];let s=Promise.resolve();t.Iu.forEach(((o,u)=>{t.sharedClientState.isLocalQueryTarget(u)?i.push(u):s=s.then((()=>(xu(t,u),Nu(t.localStore,u,!0)))),Du(t.remoteStore,u)})),await s,await h0(t,i),(function(u){const h=oe(u);h.Au.forEach(((d,p)=>{Du(h.remoteStore,p)})),h.Ru.Jr(),h.Au=new Map,h.du=new Ct(ae.comparator)})(t),t.gu=!1,await Rv(t.remoteStore,!1)}}async function h0(n,e,t){const i=oe(n),s=[],o=[];for(const u of e){let h;const d=i.Iu.get(u);if(d&&d.length!==0){h=await Cu(i.localStore,Vn(d[0]));for(const p of d){const _=i.Tu.get(p),y=await lU(i,_);y.snapshot&&o.push(y.snapshot)}}else{const p=await oN(i.localStore,u);h=await Cu(i.localStore,p),await tT(i,CN(p),u,!1,h.resumeToken)}s.push(h)}return i.Pu.H_(o),s}function CN(n){return c1(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function fU(n){return(function(t){return oe(oe(t).persistence).Ts()})(oe(n).localStore)}async function dU(n,e,t,i){const s=oe(n);if(s.gu)return void re(Va,"Ignoring unexpected query state notification.");const o=s.Iu.get(e);if(o&&o.length>0)switch(t){case"current":case"not-current":{const u=await lN(s.localStore,f1(o[0])),h=Df.createSynthesizedRemoteEventForCurrentChange(e,t==="current",Ot.EMPTY_BYTE_STRING);await ws(s,u,h);break}case"rejected":await Nu(s.localStore,e,!0),xu(s,e,i);break;default:he(64155,t)}}async function mU(n,e,t){const i=ng(n);if(i.gu){for(const s of e){if(i.Iu.has(s)&&i.sharedClientState.isActiveQueryTarget(s)){re(Va,"Adding an already active target "+s);continue}const o=await oN(i.localStore,s),u=await Cu(i.localStore,o);await tT(i,CN(o),u.targetId,!1,u.resumeToken),tg(i.remoteStore,u)}for(const s of t)i.Iu.has(s)&&await Nu(i.localStore,s,!1).then((()=>{Du(i.remoteStore,s),xu(i,s)})).catch(xa)}}function ng(n){const e=oe(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=bN.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=oU.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=tU.bind(null,e),e.Pu.H_=j4.bind(null,e.eventManager),e.Pu.yu=H4.bind(null,e.eventManager),e}function sT(n){const e=oe(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=nU.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=iU.bind(null,e),e}function pU(n,e,t){const i=oe(n);(async function(o,u,h){try{const d=await u.getMetadata();if(await(function(A,O){const F=oe(A),V=Lt(O.createTime);return F.persistence.runTransaction("hasNewerBundle","readonly",(X=>F.Ii.getBundleMetadata(X,O.id))).then((X=>!!X&&X.createTime.compareTo(V)>=0))})(o.localStore,d))return await u.close(),h._completeWith((function(A){return{taskState:"Success",documentsLoaded:A.totalDocuments,bytesLoaded:A.totalBytes,totalDocuments:A.totalDocuments,totalBytes:A.totalBytes}})(d)),Promise.resolve(new Set);h._updateProgress(TN(d));const p=new K4(d,u.serializer);let _=await u.bu();for(;_;){const w=await p.Ga(_);w&&h._updateProgress(w),_=await u.bu()}const y=await p.ja(o.localStore);return await ws(o,y.Ha,void 0),await(function(A,O){const F=oe(A);return F.persistence.runTransaction("Save bundle","readwrite",(V=>F.Ii.saveBundleMetadata(V,O)))})(o.localStore,d),h._completeWith(y.progress),Promise.resolve(y.Ja)}catch(d){return Or(Va,`Loading bundle failed with ${d}`),h._failWith(d),Promise.resolve(new Set)}})(i,e,t).then((s=>{i.sharedClientState.notifyBundleLoaded(s)}))}class sf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=xf(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return iN(this.persistence,new nN,e.initialUser,this.serializer)}Cu(e){return new BE(eg.mi,this.serializer)}Du(e){return new dN}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}sf.provider={build:()=>new sf};class gU extends sf{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){ge(this.persistence.referenceDelegate instanceof mp,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new W1(i,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?In.withCacheSize(this.cacheSizeBytes):In.DEFAULT;return new BE((i=>mp.mi(i,t)),this.serializer)}}class NN extends sf{constructor(e,t,i){super(),this.xu=e,this.cacheSizeBytes=t,this.forceOwnership=i,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await sT(this.xu.syncEngine),await $u(this.xu.remoteStore),await this.persistence.Ji((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}vu(e){return iN(this.persistence,new nN,e.initialUser,this.serializer)}Fu(e,t){const i=this.persistence.referenceDelegate.garbageCollector;return new W1(i,e.asyncQueue,t)}Mu(e,t){const i=new AV(t,this.persistence);return new IV(e.asyncQueue,i)}Cu(e){const t=qE(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),i=this.cacheSizeBytes!==void 0?In.withCacheSize(this.cacheSizeBytes):In.DEFAULT;return new zE(this.synchronizeTabs,t,e.clientId,i,e.asyncQueue,mN(),Qm(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new dN}}class _U extends NN{constructor(e,t){super(e,t,!1),this.xu=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.xu.syncEngine;this.sharedClientState instanceof Fy&&(this.sharedClientState.syncEngine={Co:cU.bind(null,t),vo:dU.bind(null,t),Fo:mU.bind(null,t),Ts:fU.bind(null,t),Do:uU.bind(null,t)},await this.sharedClientState.start()),await this.persistence.Ji((async i=>{await hU(this.xu.syncEngine,i),this.gcScheduler&&(i&&!this.gcScheduler.started?this.gcScheduler.start():i||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(i&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():i||this.indexBackfillerScheduler.stop())}))}Du(e){const t=mN();if(!Fy.v(t))throw new ie(G.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const i=qE(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Fy(t,e.asyncQueue,i,e.clientId,e.initialUser)}}class af{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>c0(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=aU.bind(null,this.syncEngine),await Rv(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new q4})()}createDatastore(e){const t=xf(e.databaseInfo.databaseId),i=(function(o){return new I4(o)})(e.databaseInfo);return(function(o,u,h,d){return new C4(o,u,h,d)})(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return(function(i,s,o,u,h){return new D4(i,s,o,u,h)})(this.localStore,this.datastore,e.asyncQueue,(t=>c0(this.syncEngine,t,0)),(function(){return i0.v()?new i0:new E4})())}createSyncEngine(e,t){return(function(s,o,u,h,d,p,_){const y=new Y4(s,o,u,h,d,p);return _&&(y.gu=!0),y})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const i=oe(t);re(zo,"RemoteStore shutting down."),i.Ea.add(5),await Qu(i),i.Aa.shutdown(),i.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}af.provider={build:()=>new af};function f0(n,e=10240){let t=0;return{async read(){if(t<n.byteLength){const i={value:n.slice(t,t+e),done:!1};return t+=e,i}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}class ig{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Vt("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}class yU{constructor(e,t){this.Bu=e,this.serializer=t,this.metadata=new Tn,this.buffer=new Uint8Array,this.Lu=(function(){return new TextDecoder("utf-8")})(),this.ku().then((i=>{i&&i.$a()?this.metadata.resolve(i.Qa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(i?.Qa)}`))}),(i=>this.metadata.reject(i)))}close(){return this.Bu.cancel()}async getMetadata(){return this.metadata.promise}async bu(){return await this.getMetadata(),this.ku()}async ku(){const e=await this.qu();if(e===null)return null;const t=this.Lu.decode(e),i=Number(t);isNaN(i)&&this.Qu(`length string (${t}) is not valid number`);const s=await this.$u(i);return new G4(JSON.parse(s),e.length+i)}Uu(){return this.buffer.findIndex((e=>e===123))}async qu(){for(;this.Uu()<0&&!await this.Ku(););if(this.buffer.length===0)return null;const e=this.Uu();e<0&&this.Qu("Reached the end of bundle when a length string is expected.");const t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t}async $u(e){for(;this.buffer.length<e;)await this.Ku()&&this.Qu("Reached the end of bundle when more is expected.");const t=this.Lu.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t}Qu(e){throw this.Bu.cancel(),new Error(`Invalid bundle format: ${e}`)}async Ku(){const e=await this.Bu.read();if(!e.done){const t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done}}class vU{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new ie(G.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const t=await(async function(s,o){const u=oe(s),h={documents:o.map((y=>nf(u.serializer,y)))},d=await u.Ho("BatchGetDocuments",u.serializer.databaseId,Ve.emptyPath(),h,o.length),p=new Map;d.forEach((y=>{const w=OL(u.serializer,y);p.set(w.key.toString(),w)}));const _=[];return o.forEach((y=>{const w=p.get(y.toString());ge(!!w,55234,{key:y}),_.push(w)})),_})(this.datastore,e);return t.forEach((i=>this.recordVersion(i))),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(i){this.lastTransactionError=i}this.writtenDocs.add(e.toString())}delete(e){this.write(new Ku(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach((t=>{e.delete(t.key.toString())})),e.forEach(((t,i)=>{const s=ae.fromPath(i);this.mutations.push(new DE(s,this.precondition(s)))})),await(async function(i,s){const o=oe(i),u={writes:s.map((h=>rf(o.serializer,h)))};await o.Go("Commit",o.serializer.databaseId,Ve.emptyPath(),u)})(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw he(50498,{Gu:e.constructor.name});t=Ee.min()}const i=this.readVersions.get(e.key.toString());if(i){if(!t.isEqual(i))throw new ie(G.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Ee.min())?bt.exists(!1):bt.updateTime(t):bt.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Ee.min()))throw new ie(G.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return bt.updateTime(t)}return bt.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class EU{constructor(e,t,i,s,o){this.asyncQueue=e,this.datastore=t,this.options=i,this.updateFunction=s,this.deferred=o,this.zu=i.maxAttempts,this.M_=new KE(this.asyncQueue,"transaction_retry")}ju(){this.zu-=1,this.Ju()}Ju(){this.M_.p_((async()=>{const e=new vU(this.datastore),t=this.Hu(e);t&&t.then((i=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(i)})).catch((s=>{this.Yu(s)}))))})).catch((i=>{this.Yu(i)}))}))}Hu(e){try{const t=this.updateFunction(e);return!If(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Yu(e){this.zu>0&&this.Zu(e)?(this.zu-=1,this.asyncQueue.enqueueAndForget((()=>(this.Ju(),Promise.resolve())))):this.deferred.reject(e)}Zu(e){if(e?.name==="FirebaseError"){const t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!A1(t)}return!1}}const Ra="FirestoreClient";class TU{constructor(e,t,i,s,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=s,this.user=ln.UNAUTHENTICATED,this.clientId=gE.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(i,(async u=>{re(Ra,"Received user=",u.uid),await this.authCredentialListener(u),this.user=u})),this.appCheckCredentials.start(i,(u=>(re(Ra,"Received new app check token=",u),this.appCheckCredentialListener(u,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Tn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=Wu(t,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function zy(n,e){n.asyncQueue.verifyOperationInProgress(),re(Ra,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener((async s=>{i.isEqual(s)||(await rN(e.localStore,s),i=s)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function d0(n,e){n.asyncQueue.verifyOperationInProgress();const t=await aT(n);re(Ra,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((i=>s0(e.remoteStore,i))),n.setAppCheckTokenChangeListener(((i,s)=>s0(e.remoteStore,s))),n._onlineComponents=e}async function aT(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){re(Ra,"Using user provided OfflineComponentProvider");try{await zy(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(s){return s.name==="FirebaseError"?s.code===G.FAILED_PRECONDITION||s.code===G.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11})(t))throw t;Or("Error using user provided cache. Falling back to memory cache: "+t),await zy(n,new sf)}}else re(Ra,"Using default OfflineComponentProvider"),await zy(n,new gU(void 0));return n._offlineComponents}async function rg(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(re(Ra,"Using user provided OnlineComponentProvider"),await d0(n,n._uninitializedComponentsProvider._online)):(re(Ra,"Using default OnlineComponentProvider"),await d0(n,new af))),n._onlineComponents}function DN(n){return aT(n).then((e=>e.persistence))}function oT(n){return aT(n).then((e=>e.localStore))}function ON(n){return rg(n).then((e=>e.remoteStore))}function lT(n){return rg(n).then((e=>e.syncEngine))}function wU(n){return rg(n).then((e=>e.datastore))}async function Pu(n){const e=await rg(n),t=e.eventManager;return t.onListen=W4.bind(null,e.syncEngine),t.onUnlisten=J4.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=X4.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=Z4.bind(null,e.syncEngine),t}function SU(n){return n.asyncQueue.enqueue((async()=>{const e=await DN(n),t=await ON(n);return e.setNetworkEnabled(!0),(function(s){const o=oe(s);return o.Ea.delete(0),Pf(o)})(t)}))}function IU(n){return n.asyncQueue.enqueue((async()=>{const e=await DN(n),t=await ON(n);return e.setNetworkEnabled(!1),(async function(s){const o=oe(s);o.Ea.add(0),await Qu(o),o.Ra.set("Offline")})(t)}))}function AU(n,e){const t=new Tn;return n.asyncQueue.enqueueAndForget((async()=>(async function(s,o,u){try{const h=await(function(p,_){const y=oe(p);return y.persistence.runTransaction("read document","readonly",(w=>y.localDocuments.getDocument(w,_)))})(s,o);h.isFoundDocument()?u.resolve(h):h.isNoDocument()?u.resolve(null):u.reject(new ie(G.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(h){const d=Wu(h,`Failed to get document '${o} from cache`);u.reject(d)}})(await oT(n),e,t))),t.promise}function xN(n,e,t={}){const i=new Tn;return n.asyncQueue.enqueueAndForget((async()=>(function(o,u,h,d,p){const _=new ig({next:w=>{_.Nu(),u.enqueueAndForget((()=>JE(o,y)));const A=w.docs.has(h);!A&&w.fromCache?p.reject(new ie(G.UNAVAILABLE,"Failed to get document because the client is offline.")):A&&w.fromCache&&d&&d.source==="server"?p.reject(new ie(G.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):p.resolve(w)},error:w=>p.reject(w)}),y=new eT(Hu(h.path),_,{includeMetadataChanges:!0,qa:!0});return XE(o,y)})(await Pu(n),n.asyncQueue,e,t,i))),i.promise}function bU(n,e){const t=new Tn;return n.asyncQueue.enqueueAndForget((async()=>(async function(s,o,u){try{const h=await pp(s,o,!0),d=new IN(o,h.Qs),p=d.ru(h.documents),_=d.applyChanges(p,!1);u.resolve(_.snapshot)}catch(h){const d=Wu(h,`Failed to execute query '${o} against cache`);u.reject(d)}})(await oT(n),e,t))),t.promise}function PN(n,e,t={}){const i=new Tn;return n.asyncQueue.enqueueAndForget((async()=>(function(o,u,h,d,p){const _=new ig({next:w=>{_.Nu(),u.enqueueAndForget((()=>JE(o,y))),w.fromCache&&d.source==="server"?p.reject(new ie(G.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(w)},error:w=>p.reject(w)}),y=new eT(h,_,{includeMetadataChanges:!0,qa:!0});return XE(o,y)})(await Pu(n),n.asyncQueue,e,t,i))),i.promise}function RU(n,e){const t=new ig(e);return n.asyncQueue.enqueueAndForget((async()=>(function(s,o){oe(s).Ca.add(o),o.next()})(await Pu(n),t))),()=>{t.Nu(),n.asyncQueue.enqueueAndForget((async()=>(function(s,o){oe(s).Ca.delete(o)})(await Pu(n),t)))}}function CU(n,e,t,i){const s=(function(u,h){let d;return d=typeof u=="string"?R1().encode(u):u,(function(_,y){return new yU(_,y)})((function(_,y){if(_ instanceof Uint8Array)return f0(_,y);if(_ instanceof ArrayBuffer)return f0(new Uint8Array(_),y);if(_ instanceof ReadableStream)return _.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")})(d),h)})(t,xf(e));n.asyncQueue.enqueueAndForget((async()=>{pU(await lT(n),s,i)}))}function NU(n,e){return n.asyncQueue.enqueue((async()=>(function(i,s){const o=oe(i);return o.persistence.runTransaction("Get named query","readonly",(u=>o.Ii.getNamedQuery(u,s)))})(await oT(n),e)))}function MN(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}const m0=new Map;const kN="firestore.googleapis.com",p0=!0;class g0{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ie(G.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=kN,this.ssl=p0}else this.host=e.host,this.ssl=e.ssl??p0;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=K1;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<WL)throw new ie(G.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}CC("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=MN(e.experimentalLongPollingOptions??{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new ie(G.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new ie(G.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new ie(G.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,s){return i.timeoutSeconds===s.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Mf{constructor(e,t,i,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new g0({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ie(G.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ie(G.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new g0(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new fV;switch(i.type){case"firstParty":return new gV(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new ie(G.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const i=m0.get(t);i&&(re("ComponentProvider","Removing Datastore"),m0.delete(t),i.terminate())})(this),Promise.resolve()}}function uT(n,e,t,i={}){n=We(n,Mf);const s=kr(e),o=n._getSettings(),u={...o,emulatorOptions:n._getEmulatorOptions()},h=`${e}:${t}`;s&&(Ef(`https://${h}`),Tf("Firestore",!0)),o.host!==kN&&o.host!==h&&Or("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const d={...o,host:h,ssl:s,emulatorOptions:i};if(!Dr(d,u)&&(n._setSettings(d),i.mockUserToken)){let p,_;if(typeof i.mockUserToken=="string")p=i.mockUserToken,_=ln.MOCK_USER;else{p=uE(i.mockUserToken,n._app?.options.projectId);const y=i.mockUserToken.sub||i.mockUserToken.user_id;if(!y)throw new ie(G.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");_=new ln(y)}n._authCredentials=new dV(new bC(p,_))}}let Ln=class VN{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new VN(this.firestore,e,this._query)}},dt=class Ah{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new _a(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ah(this.firestore,e,this._key)}toJSON(){return{type:Ah._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,i){if(Sf(t,Ah._jsonSchema))return new Ah(e,i||null,new ae(Ve.fromString(t.referencePath)))}};dt._jsonSchemaVersion="firestore/documentReference/1.0",dt._jsonSchema={type:Yt("string",dt._jsonSchemaVersion),referencePath:Yt("string")};let _a=class LN extends Ln{constructor(e,t,i){super(e,t,Hu(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new dt(this.firestore,null,new ae(e))}withConverter(e){return new LN(this.firestore,e,this._path)}};function UN(n,e,...t){if(n=Ke(n),_E("collection","path",e),n instanceof Mf){const i=Ve.fromString(e,...t);return rb(i),new _a(n,null,i)}{if(!(n instanceof dt||n instanceof _a))throw new ie(G.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(Ve.fromString(e,...t));return rb(i),new _a(n.firestore,null,i)}}function DU(n,e){if(n=We(n,Mf),_E("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new ie(G.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Ln(n,null,(function(i){return new vs(Ve.emptyPath(),i)})(e))}function Ca(n,e,...t){if(n=Ke(n),arguments.length===1&&(e=gE.newId()),_E("doc","path",e),n instanceof Mf){const i=Ve.fromString(e,...t);return ib(i),new dt(n,null,new ae(i))}{if(!(n instanceof dt||n instanceof _a))throw new ie(G.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(Ve.fromString(e,...t));return ib(i),new dt(n.firestore,n instanceof _a?n.converter:null,new ae(i))}}function FN(n,e){return n=Ke(n),e=Ke(e),(n instanceof dt||n instanceof _a)&&(e instanceof dt||e instanceof _a)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function BN(n,e){return n=Ke(n),e=Ke(e),n instanceof Ln&&e instanceof Ln&&n.firestore===e.firestore&&Rf(n._query,e._query)&&n.converter===e.converter}const _0="AsyncQueue";class y0{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new KE(this,"async_queue_retry"),this._c=()=>{const i=Qm();i&&re(_0,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const t=Qm();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Qm();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new Tn;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Pa(e))throw e;re(_0,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((i=>{throw this.nc=i,this.rc=!1,Vt("INTERNAL UNHANDLED ERROR: ",v0(i)),i})).then((i=>(this.rc=!1,i))))));return this.ac=t,t}enqueueAfterDelay(e,t,i){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const s=WE.createAndSchedule(this,e,t,i,(o=>this.hc(o)));return this.tc.push(s),s}uc(){this.nc&&he(47125,{Pc:v0(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,i)=>t.targetTimeMs-i.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function v0(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}function Dv(n){return(function(t,i){if(typeof t!="object"||t===null)return!1;const s=t;for(const o of i)if(o in s&&typeof s[o]=="function")return!0;return!1})(n,["next","error","complete"])}class OU{constructor(){this._progressObserver={},this._taskCompletionResolver=new Tn,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,i){this._progressObserver={next:e,error:t,complete:i}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}const xU=-1;let Ut=class extends Mf{constructor(e,t,i,s){super(e,t,i,s),this.type="firestore",this._queue=new y0,this._persistenceKey=s?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new y0(e),this._firestoreClient=void 0,await e}}};function PU(n,e){const t=typeof n=="object"?n:qu(),i=typeof n=="string"?n:op,s=Oa(t,"firestore").getImmediate({identifier:i});if(!s._initialized){const o=Fp("firestore");o&&uT(s,...o)}return s}function Dn(n){if(n._terminated)throw new ie(G.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||zN(n),n._firestoreClient}function zN(n){const e=n._freezeSettings(),t=(function(s,o,u,h){return new eL(s,o,u,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,MN(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)})(n._databaseId,n._app?.options.appId||"",n._persistenceKey,e);n._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new TU(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(s){const o=s?._online.build();return{_offline:s?._offline.build(o),_online:o}})(n._componentsProvider))}function MU(n,e){Or("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings();return qN(n,af.provider,{build:i=>new NN(i,t.cacheSizeBytes,e?.forceOwnership)}),Promise.resolve()}async function kU(n){Or("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=n._freezeSettings();qN(n,af.provider,{build:t=>new _U(t,e.cacheSizeBytes)})}function qN(n,e,t){if((n=We(n,Ut))._firestoreClient||n._terminated)throw new ie(G.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(n._componentsProvider||n._getSettings().localCache)throw new ie(G.FAILED_PRECONDITION,"SDK cache is already specified.");n._componentsProvider={_online:e,_offline:t},zN(n)}function VU(n){if(n._initialized&&!n._terminated)throw new ie(G.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Tn;return n._queue.enqueueAndForgetEvenWhileRestricted((async()=>{try{await(async function(i){if(!br.v())return Promise.resolve();const s=i+tN;await br.delete(s)})(qE(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}})),e.promise}function LU(n){return(function(t){const i=new Tn;return t.asyncQueue.enqueueAndForget((async()=>rU(await lT(t),i))),i.promise})(Dn(n=We(n,Ut)))}function UU(n){return SU(Dn(n=We(n,Ut)))}function FU(n){return IU(Dn(n=We(n,Ut)))}function BU(n,e){const t=Dn(n=We(n,Ut)),i=new OU;return CU(t,n._databaseId,e,i),i}function zU(n,e){return NU(Dn(n=We(n,Ut)),e).then((t=>t?new Ln(n,null,t.query):null))}class Rn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Rn(Ot.fromBase64String(e))}catch(t){throw new ie(G.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Rn(Ot.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Rn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Sf(e,Rn._jsonSchema))return Rn.fromBase64String(e.bytes)}}Rn._jsonSchemaVersion="firestore/bytes/1.0",Rn._jsonSchema={type:Yt("string",Rn._jsonSchemaVersion),bytes:Yt("string")};let Na=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ie(G.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new At(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};let Wo=class{constructor(e){this._methodName=e}};class Hi{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ie(G.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ie(G.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return be(this._lat,e._lat)||be(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Hi._jsonSchemaVersion}}static fromJSON(e){if(Sf(e,Hi._jsonSchema))return new Hi(e.latitude,e.longitude)}}Hi._jsonSchemaVersion="firestore/geoPoint/1.0",Hi._jsonSchema={type:Yt("string",Hi._jsonSchemaVersion),latitude:Yt("number"),longitude:Yt("number")};class Cr{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,s){if(i.length!==s.length)return!1;for(let o=0;o<i.length;++o)if(i[o]!==s[o])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Cr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Sf(e,Cr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Cr(e.vectorValues);throw new ie(G.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Cr._jsonSchemaVersion="firestore/vectorValue/1.0",Cr._jsonSchema={type:Yt("string",Cr._jsonSchemaVersion),vectorValues:Yt("object")};const qU=/^__.*__$/;class jU{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new Ts(e,this.data,this.fieldMask,t,this.fieldTransforms):new Gu(e,this.data,t,this.fieldTransforms)}}class jN{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new Ts(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function HN(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw he(40011,{Ac:n})}}class sg{constructor(e,t,i,s,o,u){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=s,o===void 0&&this.Rc(),this.fieldTransforms=o||[],this.fieldMask=u||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new sg({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const t=this.path?.child(e),i=this.Vc({path:t,fc:!1});return i.gc(e),i}yc(e){const t=this.path?.child(e),i=this.Vc({path:t,fc:!1});return i.Rc(),i}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return vp(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(HN(this.Ac)&&qU.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class HU{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||xf(e)}Cc(e,t,i,s=!1){return new sg({Ac:e,methodName:t,Dc:i,path:At.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Xo(n){const e=n._freezeSettings(),t=xf(n._databaseId);return new HU(n._databaseId,!!e.ignoreUndefinedProperties,t)}function ag(n,e,t,i,s,o={}){const u=n.Cc(o.merge||o.mergeFields?2:0,e,t,s);gT("Data must be an object, but it was:",u,i);const h=QN(i,u);let d,p;if(o.merge)d=new Kn(u.fieldMask),p=u.fieldTransforms;else if(o.mergeFields){const _=[];for(const y of o.mergeFields){const w=Ov(e,y,t);if(!u.contains(w))throw new ie(G.INVALID_ARGUMENT,`Field '${w}' is specified in your field mask but missing from your input data.`);YN(_,w)||_.push(w)}d=new Kn(_),p=u.fieldTransforms.filter((y=>d.covers(y.field)))}else d=null,p=u.fieldTransforms;return new jU(new En(h),d,p)}class kf extends Wo{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof kf}}function GN(n,e,t){return new sg({Ac:3,Dc:e.settings.Dc,methodName:n._methodName,fc:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class cT extends Wo{_toFieldTransform(e){return new Nf(e.path,new Au)}isEqual(e){return e instanceof cT}}class hT extends Wo{constructor(e,t){super(e),this.vc=t}_toFieldTransform(e){const t=GN(this,e,!0),i=this.vc.map((o=>Jo(o,t))),s=new Vo(i);return new Nf(e.path,s)}isEqual(e){return e instanceof hT&&Dr(this.vc,e.vc)}}class fT extends Wo{constructor(e,t){super(e),this.vc=t}_toFieldTransform(e){const t=GN(this,e,!0),i=this.vc.map((o=>Jo(o,t))),s=new Lo(i);return new Nf(e.path,s)}isEqual(e){return e instanceof fT&&Dr(this.vc,e.vc)}}class dT extends Wo{constructor(e,t){super(e),this.Fc=t}_toFieldTransform(e){const t=new bu(e.serializer,y1(e.serializer,this.Fc));return new Nf(e.path,t)}isEqual(e){return e instanceof dT&&this.Fc===e.Fc}}function mT(n,e,t,i){const s=n.Cc(1,e,t);gT("Data must be an object, but it was:",s,i);const o=[],u=En.empty();Ma(i,((d,p)=>{const _=_T(e,d,t);p=Ke(p);const y=s.yc(_);if(p instanceof kf)o.push(_);else{const w=Jo(p,y);w!=null&&(o.push(_),u.set(_,w))}}));const h=new Kn(o);return new jN(u,h,s.fieldTransforms)}function pT(n,e,t,i,s,o){const u=n.Cc(1,e,t),h=[Ov(e,i,t)],d=[s];if(o.length%2!=0)throw new ie(G.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let w=0;w<o.length;w+=2)h.push(Ov(e,o[w])),d.push(o[w+1]);const p=[],_=En.empty();for(let w=h.length-1;w>=0;--w)if(!YN(p,h[w])){const A=h[w];let O=d[w];O=Ke(O);const F=u.yc(A);if(O instanceof kf)p.push(A);else{const V=Jo(O,F);V!=null&&(p.push(A),_.set(A,V))}}const y=new Kn(p);return new jN(_,y,u.fieldTransforms)}function KN(n,e,t,i=!1){return Jo(t,n.Cc(i?4:3,e))}function Jo(n,e){if($N(n=Ke(n)))return gT("Unsupported field value:",e,n),QN(n,e);if(n instanceof Wo)return(function(i,s){if(!HN(s.Ac))throw s.Sc(`${i._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${i._methodName}() is not currently supported inside arrays`);const o=i._toFieldTransform(s);o&&s.fieldTransforms.push(o)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(i,s){const o=[];let u=0;for(const h of i){let d=Jo(h,s.wc(u));d==null&&(d={nullValue:"NULL_VALUE"}),o.push(d),u++}return{arrayValue:{values:o}}})(n,e)}return(function(i,s){if((i=Ke(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return y1(s.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const o=Ze.fromDate(i);return{timestampValue:Ru(s.serializer,o)}}if(i instanceof Ze){const o=new Ze(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Ru(s.serializer,o)}}if(i instanceof Hi)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Rn)return{bytesValue:D1(s.serializer,i._byteString)};if(i instanceof dt){const o=s.databaseId,u=i.firestore._databaseId;if(!u.isEqual(o))throw s.Sc(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:kE(i.firestore._databaseId||s.databaseId,i._key.path)}}if(i instanceof Cr)return(function(u,h){return{mapValue:{fields:{[IE]:{stringValue:AE},[wu]:{arrayValue:{values:u.toArray().map((p=>{if(typeof p!="number")throw h.Sc("VectorValues must only contain numeric values.");return NE(h.serializer,p)}))}}}}}})(i,s);throw s.Sc(`Unsupported field value: ${qp(i)}`)})(n,e)}function QN(n,e){const t={};return QC(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ma(n,((i,s)=>{const o=Jo(s,e.mc(i));o!=null&&(t[i]=o)})),{mapValue:{fields:t}}}function $N(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Ze||n instanceof Hi||n instanceof Rn||n instanceof dt||n instanceof Wo||n instanceof Cr)}function gT(n,e,t){if(!$N(t)||!NC(t)){const i=qp(t);throw i==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+i)}}function Ov(n,e,t){if((e=Ke(e))instanceof Na)return e._internalPath;if(typeof e=="string")return _T(n,e);throw vp("Field path arguments must be of type string or ",n,!1,void 0,t)}const GU=new RegExp("[~\\*/\\[\\]]");function _T(n,e,t){if(e.search(GU)>=0)throw vp(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Na(...e.split("."))._internalPath}catch{throw vp(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function vp(n,e,t,i,s){const o=i&&!i.isEmpty(),u=s!==void 0;let h=`Function ${e}() called with invalid data`;t&&(h+=" (via `toFirestore()`)"),h+=". ";let d="";return(o||u)&&(d+=" (found",o&&(d+=` in field ${i}`),u&&(d+=` in document ${s}`),d+=")"),new ie(G.INVALID_ARGUMENT,h+n+d)}function YN(n,e){return n.some((t=>t.isEqual(e)))}class of{constructor(e,t,i,s,o){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=s,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new dt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new KU(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(og("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class KU extends of{data(){return super.data()}}function og(n,e){return typeof e=="string"?_T(n,e):e instanceof Na?e._internalPath:e._delegate._internalPath}function WN(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new ie(G.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class yT{}class Vf extends yT{}function sa(n,e,...t){let i=[];e instanceof yT&&i.push(e),i=i.concat(t),(function(o){const u=o.filter((d=>d instanceof vT)).length,h=o.filter((d=>d instanceof lg)).length;if(u>1||u>0&&h>0)throw new ie(G.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(i);for(const s of i)n=s._apply(n);return n}class lg extends Vf{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new lg(e,t,i)}_apply(e){const t=this._parse(e);return JN(e._query,t),new Ln(e.firestore,e.converter,_v(e._query,t))}_parse(e){const t=Xo(e.firestore);return(function(o,u,h,d,p,_,y){let w;if(p.isKeyField()){if(_==="array-contains"||_==="array-contains-any")throw new ie(G.INVALID_ARGUMENT,`Invalid Query. You can't perform '${_}' queries on documentId().`);if(_==="in"||_==="not-in"){T0(y,_);const O=[];for(const F of y)O.push(E0(d,o,F));w={arrayValue:{values:O}}}else w=E0(d,o,y)}else _!=="in"&&_!=="not-in"&&_!=="array-contains-any"||T0(y,_),w=KN(h,u,y,_==="in"||_==="not-in");return Fe.create(p,_,w)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function QU(n,e,t){const i=e,s=og("where",n);return lg._create(s,i,t)}class vT extends yT{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new vT(e,t)}_parse(e){const t=this._queryConstraints.map((i=>i._parse(e))).filter((i=>i.getFilters().length>0));return t.length===1?t[0]:st.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(s,o){let u=s;const h=o.getFlattenedFilters();for(const d of h)JN(u,d),u=_v(u,d)})(e._query,t),new Ln(e.firestore,e.converter,_v(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class ET extends Vf{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new ET(e,t)}_apply(e){const t=(function(s,o,u){if(s.startAt!==null)throw new ie(G.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new ie(G.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new tf(o,u)})(e._query,this._field,this._direction);return new Ln(e.firestore,e.converter,(function(s,o){const u=s.explicitOrderBy.concat([o]);return new vs(s.path,s.collectionGroup,u,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)})(e._query,t))}}function $U(n,e="asc"){const t=e,i=og("orderBy",n);return ET._create(i,t)}class ug extends Vf{constructor(e,t,i){super(),this.type=e,this._limit=t,this._limitType=i}static _create(e,t,i){return new ug(e,t,i)}_apply(e){return new Ln(e.firestore,e.converter,cp(e._query,this._limit,this._limitType))}}function YU(n){return DC("limit",n),ug._create("limit",n,"F")}function WU(n){return DC("limitToLast",n),ug._create("limitToLast",n,"L")}class cg extends Vf{constructor(e,t,i){super(),this.type=e,this._docOrFields=t,this._inclusive=i}static _create(e,t,i){return new cg(e,t,i)}_apply(e){const t=XN(e,this.type,this._docOrFields,this._inclusive);return new Ln(e.firestore,e.converter,(function(s,o){return new vs(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,o,s.endAt)})(e._query,t))}}function XU(...n){return cg._create("startAt",n,!0)}function JU(...n){return cg._create("startAfter",n,!1)}class hg extends Vf{constructor(e,t,i){super(),this.type=e,this._docOrFields=t,this._inclusive=i}static _create(e,t,i){return new hg(e,t,i)}_apply(e){const t=XN(e,this.type,this._docOrFields,this._inclusive);return new Ln(e.firestore,e.converter,(function(s,o){return new vs(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,s.startAt,o)})(e._query,t))}}function ZU(...n){return hg._create("endBefore",n,!1)}function e6(...n){return hg._create("endAt",n,!0)}function XN(n,e,t,i){if(t[0]=Ke(t[0]),t[0]instanceof of)return(function(o,u,h,d,p){if(!d)throw new ie(G.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${h}().`);const _=[];for(const y of au(o))if(y.field.isKeyField())_.push(Mo(u,d.key));else{const w=d.data.field(y.field);if(Qp(w))throw new ie(G.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+y.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(w===null){const A=y.field.canonicalString();throw new ie(G.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${A}' (used as the orderBy) does not exist.`)}_.push(w)}return new Aa(_,p)})(n._query,n.firestore._databaseId,e,t[0]._document,i);{const s=Xo(n.firestore);return(function(u,h,d,p,_,y){const w=u.explicitOrderBy;if(_.length>w.length)throw new ie(G.INVALID_ARGUMENT,`Too many arguments provided to ${p}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const A=[];for(let O=0;O<_.length;O++){const F=_[O];if(w[O].field.isKeyField()){if(typeof F!="string")throw new ie(G.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${p}(), but got a ${typeof F}`);if(!RE(u)&&F.indexOf("/")!==-1)throw new ie(G.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${p}() must be a plain document ID, but '${F}' contains a slash.`);const V=u.path.child(Ve.fromString(F));if(!ae.isDocumentKey(V))throw new ie(G.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${p}() must result in a valid document path, but '${V}' is not because it contains an odd number of segments.`);const X=new ae(V);A.push(Mo(h,X))}else{const V=KN(d,p,F);A.push(V)}}return new Aa(A,y)})(n._query,n.firestore._databaseId,s,e,t,i)}}function E0(n,e,t){if(typeof(t=Ke(t))=="string"){if(t==="")throw new ie(G.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!RE(e)&&t.indexOf("/")!==-1)throw new ie(G.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const i=e.path.child(Ve.fromString(t));if(!ae.isDocumentKey(i))throw new ie(G.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return Mo(n,new ae(i))}if(t instanceof dt)return Mo(n,t._key);throw new ie(G.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${qp(t)}.`)}function T0(n,e){if(!Array.isArray(n)||n.length===0)throw new ie(G.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function JN(n,e){const t=(function(s,o){for(const u of s)for(const h of u.getFlattenedFilters())if(o.indexOf(h.op)>=0)return h.op;return null})(n.filters,(function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new ie(G.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ie(G.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class TT{convertValue(e,t="none"){switch(Sa(e)){case 0:return null;case 1:return e.booleanValue;case 2:return It(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ps(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw he(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return Ma(e,((s,o)=>{i[s]=this.convertValue(o,t)})),i}convertVectorValue(e){const t=e.fields?.[wu].arrayValue?.values?.map((i=>It(i.doubleValue)));return new Cr(t)}convertGeoPoint(e){return new Hi(It(e.latitude),It(e.longitude))}convertArray(e,t){return(e.values||[]).map((i=>this.convertValue(i,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const i=$p(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(Jh(e));default:return null}}convertTimestamp(e){const t=ms(e);return new Ze(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=Ve.fromString(e);ge(z1(i),9688,{name:e});const s=new wa(i.get(1),i.get(3)),o=new ae(i.popFirst(5));return s.isEqual(t)||Vt(`Document ${o} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}}function fg(n,e,t){let i;return i=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,i}class t6 extends TT{constructor(e){super(),this.firestore=e}convertBytes(e){return new Rn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new dt(this.firestore,null,t)}}class No{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}let Si=class ZN extends of{constructor(e,t,i,s,o,u){super(e,t,i,s,u),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new kh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(og("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ie(G.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=ZN._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}};Si._jsonSchemaVersion="firestore/documentSnapshot/1.0",Si._jsonSchema={type:Yt("string",Si._jsonSchemaVersion),bundleSource:Yt("string","DocumentSnapshot"),bundleName:Yt("string"),bundle:Yt("string")};let kh=class extends Si{data(e={}){return super.data(e)}},Gi=class eD{constructor(e,t,i,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new No(s.hasPendingWrites,s.fromCache),this.query=i}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((i=>{e.call(t,new kh(this._firestore,this._userDataWriter,i.key,i,new No(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ie(G.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(s,o){if(s._snapshot.oldDocs.isEmpty()){let u=0;return s._snapshot.docChanges.map((h=>{const d=new kh(s._firestore,s._userDataWriter,h.doc.key,h.doc,new No(s._snapshot.mutatedKeys.has(h.doc.key),s._snapshot.fromCache),s.query.converter);return h.doc,{type:"added",doc:d,oldIndex:-1,newIndex:u++}}))}{let u=s._snapshot.oldDocs;return s._snapshot.docChanges.filter((h=>o||h.type!==3)).map((h=>{const d=new kh(s._firestore,s._userDataWriter,h.doc.key,h.doc,new No(s._snapshot.mutatedKeys.has(h.doc.key),s._snapshot.fromCache),s.query.converter);let p=-1,_=-1;return h.type!==0&&(p=u.indexOf(h.doc.key),u=u.delete(h.doc.key)),h.type!==1&&(u=u.add(h.doc),_=u.indexOf(h.doc.key)),{type:n6(h.type),doc:d,oldIndex:p,newIndex:_}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ie(G.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=eD._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=gE.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],i=[],s=[];return this.docs.forEach((o=>{o._document!==null&&(t.push(o._document),i.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),s.push(o.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function n6(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return he(61501,{type:n})}}function tD(n,e){return n instanceof Si&&e instanceof Si?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(n._document===null?e._document===null:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Gi&&e instanceof Gi&&n._firestore===e._firestore&&BN(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function wT(n){n=We(n,dt);const e=We(n.firestore,Ut);return xN(Dn(e),n._key).then((t=>ST(e,n,t)))}Gi._jsonSchemaVersion="firestore/querySnapshot/1.0",Gi._jsonSchema={type:Yt("string",Gi._jsonSchemaVersion),bundleSource:Yt("string","QuerySnapshot"),bundleName:Yt("string"),bundle:Yt("string")};class Zo extends TT{constructor(e){super(),this.firestore=e}convertBytes(e){return new Rn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new dt(this.firestore,null,t)}}function i6(n){n=We(n,dt);const e=We(n.firestore,Ut),t=Dn(e),i=new Zo(e);return AU(t,n._key).then((s=>new Si(e,i,n._key,s,new No(s!==null&&s.hasLocalMutations,!0),n.converter)))}function r6(n){n=We(n,dt);const e=We(n.firestore,Ut);return xN(Dn(e),n._key,{source:"server"}).then((t=>ST(e,n,t)))}function s6(n){n=We(n,Ln);const e=We(n.firestore,Ut),t=Dn(e),i=new Zo(e);return WN(n._query),PN(t,n._query).then((s=>new Gi(e,i,n,s)))}function a6(n){n=We(n,Ln);const e=We(n.firestore,Ut),t=Dn(e),i=new Zo(e);return bU(t,n._query).then((s=>new Gi(e,i,n,s)))}function o6(n){n=We(n,Ln);const e=We(n.firestore,Ut),t=Dn(e),i=new Zo(e);return PN(t,n._query,{source:"server"}).then((s=>new Gi(e,i,n,s)))}function xv(n,e,t){n=We(n,dt);const i=We(n.firestore,Ut),s=fg(n.converter,e,t);return Lf(i,[ag(Xo(i),"setDoc",n._key,s,n.converter!==null,t).toMutation(n._key,bt.none())])}function Pv(n,e,t,...i){n=We(n,dt);const s=We(n.firestore,Ut),o=Xo(s);let u;return u=typeof(e=Ke(e))=="string"||e instanceof Na?pT(o,"updateDoc",n._key,e,t,i):mT(o,"updateDoc",n._key,e),Lf(s,[u.toMutation(n._key,bt.exists(!0))])}function l6(n){return Lf(We(n.firestore,Ut),[new Ku(n._key,bt.none())])}function u6(n,e){const t=We(n.firestore,Ut),i=Ca(n),s=fg(n.converter,e);return Lf(t,[ag(Xo(n.firestore),"addDoc",i._key,s,n.converter!==null,{}).toMutation(i._key,bt.exists(!1))]).then((()=>i))}function nD(n,...e){n=Ke(n);let t={includeMetadataChanges:!1,source:"default"},i=0;typeof e[i]!="object"||Dv(e[i])||(t=e[i++]);const s={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(Dv(e[i])){const d=e[i];e[i]=d.next?.bind(d),e[i+1]=d.error?.bind(d),e[i+2]=d.complete?.bind(d)}let o,u,h;if(n instanceof dt)u=We(n.firestore,Ut),h=Hu(n._key.path),o={next:d=>{e[i]&&e[i](ST(u,n,d))},error:e[i+1],complete:e[i+2]};else{const d=We(n,Ln);u=We(d.firestore,Ut),h=d._query;const p=new Zo(u);o={next:_=>{e[i]&&e[i](new Gi(u,p,d,_))},error:e[i+1],complete:e[i+2]},WN(n._query)}return(function(p,_,y,w){const A=new ig(w),O=new eT(_,A,y);return p.asyncQueue.enqueueAndForget((async()=>XE(await Pu(p),O))),()=>{A.Nu(),p.asyncQueue.enqueueAndForget((async()=>JE(await Pu(p),O)))}})(Dn(u),h,s,o)}function c6(n,e){return RU(Dn(n=We(n,Ut)),Dv(e)?e:{next:e})}function Lf(n,e){return(function(i,s){const o=new Tn;return i.asyncQueue.enqueueAndForget((async()=>eU(await lT(i),s,o))),o.promise})(Dn(n),e)}function ST(n,e,t){const i=t.docs.get(e._key),s=new Zo(n);return new Si(n,s,e._key,i,new No(t.hasPendingWrites,t.fromCache),e.converter)}const h6={maxAttempts:5};let f6=class{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Xo(e)}set(e,t,i){this._verifyNotCommitted();const s=fa(e,this._firestore),o=fg(s.converter,t,i),u=ag(this._dataReader,"WriteBatch.set",s._key,o,s.converter!==null,i);return this._mutations.push(u.toMutation(s._key,bt.none())),this}update(e,t,i,...s){this._verifyNotCommitted();const o=fa(e,this._firestore);let u;return u=typeof(t=Ke(t))=="string"||t instanceof Na?pT(this._dataReader,"WriteBatch.update",o._key,t,i,s):mT(this._dataReader,"WriteBatch.update",o._key,t),this._mutations.push(u.toMutation(o._key,bt.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=fa(e,this._firestore);return this._mutations=this._mutations.concat(new Ku(t._key,bt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ie(G.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function fa(n,e){if((n=Ke(n)).firestore!==e)throw new ie(G.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class d6{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Xo(e)}get(e){const t=fa(e,this._firestore),i=new t6(this._firestore);return this._transaction.lookup([t._key]).then((s=>{if(!s||s.length!==1)return he(24041);const o=s[0];if(o.isFoundDocument())return new of(this._firestore,i,o.key,o,t.converter);if(o.isNoDocument())return new of(this._firestore,i,t._key,null,t.converter);throw he(18433,{doc:o})}))}set(e,t,i){const s=fa(e,this._firestore),o=fg(s.converter,t,i),u=ag(this._dataReader,"Transaction.set",s._key,o,s.converter!==null,i);return this._transaction.set(s._key,u),this}update(e,t,i,...s){const o=fa(e,this._firestore);let u;return u=typeof(t=Ke(t))=="string"||t instanceof Na?pT(this._dataReader,"Transaction.update",o._key,t,i,s):mT(this._dataReader,"Transaction.update",o._key,t),this._transaction.update(o._key,u),this}delete(e){const t=fa(e,this._firestore);return this._transaction.delete(t._key),this}}let m6=class extends d6{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=fa(e,this._firestore),i=new Zo(this._firestore);return super.get(e).then((s=>new Si(this._firestore,i,t._key,s._document,new No(!1,!1),t.converter)))}};function p6(n,e,t){n=We(n,Ut);const i={...h6,...t};return(function(o){if(o.maxAttempts<1)throw new ie(G.INVALID_ARGUMENT,"Max attempts must be at least 1")})(i),(function(o,u,h){const d=new Tn;return o.asyncQueue.enqueueAndForget((async()=>{const p=await wU(o);new EU(o.asyncQueue,p,h,u,d).ju()})),d.promise})(Dn(n),(s=>e(new m6(n,s))),i)}function g6(){return new kf("deleteField")}function _6(){return new cT("serverTimestamp")}function y6(...n){return new hT("arrayUnion",n)}function v6(...n){return new fT("arrayRemove",n)}function E6(n){return new dT("increment",n)}(function(e,t=!0){(function(s){ju=s})(Vr),Wi(new Ii("firestore",((i,{instanceIdentifier:s,options:o})=>{const u=i.getProvider("app").getImmediate(),h=new Ut(new mV(i.getProvider("auth-internal")),new _V(u,i.getProvider("app-check-internal")),(function(p,_){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new ie(G.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new wa(p.options.projectId,_)})(u,s),u);return o={useFetchStreams:t,...o},h._setSettings(o),h}),"PUBLIC").setMultipleInstances(!0)),hn(ZA,eb,e),hn(ZA,eb,"esm2020")})();const T6="@firebase/firestore-compat",w6="0.4.2";function IT(n,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new ie("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function w0(){if(typeof Uint8Array>"u")throw new ie("unimplemented","Uint8Arrays are not available in this environment.")}function S0(){if(!JV())throw new ie("unimplemented","Blobs are unavailable in Firestore in this environment.")}class lf{constructor(e){this._delegate=e}static fromBase64String(e){return S0(),new lf(Rn.fromBase64String(e))}static fromUint8Array(e){return w0(),new lf(Rn.fromUint8Array(e))}toBase64(){return S0(),this._delegate.toBase64()}toUint8Array(){return w0(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function Mv(n){return S6(n,["next","error","complete"])}function S6(n,e){if(typeof n!="object"||n===null)return!1;const t=n;for(const i of e)if(i in t&&typeof t[i]=="function")return!0;return!1}class I6{enableIndexedDbPersistence(e,t){return MU(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return kU(e._delegate)}clearIndexedDbPersistence(e){return VU(e._delegate)}}class iD{constructor(e,t,i){this._delegate=t,this._persistenceProvider=i,this.INTERNAL={delete:()=>this.terminate()},e instanceof wa||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Or("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e={...t,...e},delete e.merge),this._delegate._setSettings(e)}useEmulator(e,t,i={}){uT(this._delegate,e,t,i)}enableNetwork(){return UU(this._delegate)}disableNetwork(){return FU(this._delegate)}enablePersistence(e){let t=!1,i=!1;return e&&(t=!!e.synchronizeTabs,i=!!e.experimentalForceOwningTab,CC("synchronizeTabs",t,"experimentalForceOwningTab",i)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,i)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return LU(this._delegate)}onSnapshotsInSync(e){return c6(this._delegate,e)}get app(){if(!this._appCompat)throw new ie("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Mu(this,UN(this._delegate,e))}catch(t){throw kn(t,"collection()","Firestore.collection()")}}doc(e){try{return new Ti(this,Ca(this._delegate,e))}catch(t){throw kn(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Mn(this,DU(this._delegate,e))}catch(t){throw kn(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return p6(this._delegate,t=>e(new rD(this,t)))}batch(){return Dn(this._delegate),new sD(new f6(this._delegate,e=>Lf(this._delegate,e)))}loadBundle(e){return BU(this._delegate,e)}namedQuery(e){return zU(this._delegate,e).then(t=>t?new Mn(this,t):null)}}class dg extends TT{constructor(e){super(),this.firestore=e}convertBytes(e){return new lf(new Rn(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Ti.forKey(t,this.firestore,null)}}function A6(n){cV(n)}class rD{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new dg(e)}get(e){const t=Do(e);return this._delegate.get(t).then(i=>new uf(this._firestore,new Si(this._firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,t.converter)))}set(e,t,i){const s=Do(e);return i?(IT("Transaction.set",i),this._delegate.set(s,t,i)):this._delegate.set(s,t),this}update(e,t,i,...s){const o=Do(e);return arguments.length===2?this._delegate.update(o,t):this._delegate.update(o,t,i,...s),this}delete(e){const t=Do(e);return this._delegate.delete(t),this}}class sD{constructor(e){this._delegate=e}set(e,t,i){const s=Do(e);return i?(IT("WriteBatch.set",i),this._delegate.set(s,t,i)):this._delegate.set(s,t),this}update(e,t,i,...s){const o=Do(e);return arguments.length===2?this._delegate.update(o,t):this._delegate.update(o,t,i,...s),this}delete(e){const t=Do(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class qo{constructor(e,t,i){this._firestore=e,this._userDataWriter=t,this._delegate=i}fromFirestore(e,t){const i=new kh(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new cf(this._firestore,i),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const i=qo.INSTANCES;let s=i.get(e);s||(s=new WeakMap,i.set(e,s));let o=s.get(t);return o||(o=new qo(e,new dg(e),t),s.set(t,o)),o}}qo.INSTANCES=new WeakMap;class Ti{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new dg(e)}static forPath(e,t,i){if(e.length%2!==0)throw new ie("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Ti(t,new dt(t._delegate,i,new ae(e)))}static forKey(e,t,i){return new Ti(t,new dt(t._delegate,i,e))}get id(){return this._delegate.id}get parent(){return new Mu(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Mu(this.firestore,UN(this._delegate,e))}catch(t){throw kn(t,"collection()","DocumentReference.collection()")}}isEqual(e){return e=Ke(e),e instanceof dt?FN(this._delegate,e):!1}set(e,t){t=IT("DocumentReference.set",t);try{return t?xv(this._delegate,e,t):xv(this._delegate,e)}catch(i){throw kn(i,"setDoc()","DocumentReference.set()")}}update(e,t,...i){try{return arguments.length===1?Pv(this._delegate,e):Pv(this._delegate,e,t,...i)}catch(s){throw kn(s,"updateDoc()","DocumentReference.update()")}}delete(){return l6(this._delegate)}onSnapshot(...e){const t=aD(e),i=oD(e,s=>new uf(this.firestore,new Si(this.firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,this._delegate.converter)));return nD(this._delegate,t,i)}get(e){let t;return e?.source==="cache"?t=i6(this._delegate):e?.source==="server"?t=r6(this._delegate):t=wT(this._delegate),t.then(i=>new uf(this.firestore,new Si(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)))}withConverter(e){return new Ti(this.firestore,e?this._delegate.withConverter(qo.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function kn(n,e,t){return n.message=n.message.replace(e,t),n}function aD(n){for(const e of n)if(typeof e=="object"&&!Mv(e))return e;return{}}function oD(n,e){let t;return Mv(n[0])?t=n[0]:Mv(n[1])?t=n[1]:typeof n[0]=="function"?t={next:n[0],error:n[1],complete:n[2]}:t={next:n[1],error:n[2],complete:n[3]},{next:i=>{t.next&&t.next(e(i))},error:t.error?.bind(t),complete:t.complete?.bind(t)}}class uf{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Ti(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return tD(this._delegate,e._delegate)}}class cf extends uf{data(e){const t=this._delegate.data(e);return this._delegate._converter||hV(t!==void 0,"Document in a QueryDocumentSnapshot should exist"),t}}class Mn{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new dg(e)}where(e,t,i){try{return new Mn(this.firestore,sa(this._delegate,QU(e,t,i)))}catch(s){throw kn(s,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Mn(this.firestore,sa(this._delegate,$U(e,t)))}catch(i){throw kn(i,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Mn(this.firestore,sa(this._delegate,YU(e)))}catch(t){throw kn(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Mn(this.firestore,sa(this._delegate,WU(e)))}catch(t){throw kn(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Mn(this.firestore,sa(this._delegate,XU(...e)))}catch(t){throw kn(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Mn(this.firestore,sa(this._delegate,JU(...e)))}catch(t){throw kn(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Mn(this.firestore,sa(this._delegate,ZU(...e)))}catch(t){throw kn(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Mn(this.firestore,sa(this._delegate,e6(...e)))}catch(t){throw kn(t,"endAt()","Query.endAt()")}}isEqual(e){return BN(this._delegate,e._delegate)}get(e){let t;return e?.source==="cache"?t=a6(this._delegate):e?.source==="server"?t=o6(this._delegate):t=s6(this._delegate),t.then(i=>new kv(this.firestore,new Gi(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)))}onSnapshot(...e){const t=aD(e),i=oD(e,s=>new kv(this.firestore,new Gi(this.firestore._delegate,this._userDataWriter,this._delegate,s._snapshot)));return nD(this._delegate,t,i)}withConverter(e){return new Mn(this.firestore,e?this._delegate.withConverter(qo.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class b6{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new cf(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class kv{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Mn(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new cf(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new b6(this._firestore,t))}forEach(e,t){this._delegate.forEach(i=>{e.call(t,new cf(this._firestore,i))})}isEqual(e){return tD(this._delegate,e._delegate)}}class Mu extends Mn{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Ti(this.firestore,e):null}doc(e){try{return e===void 0?new Ti(this.firestore,Ca(this._delegate)):new Ti(this.firestore,Ca(this._delegate,e))}catch(t){throw kn(t,"doc()","CollectionReference.doc()")}}add(e){return u6(this._delegate,e).then(t=>new Ti(this.firestore,t))}isEqual(e){return FN(this._delegate,e._delegate)}withConverter(e){return new Mu(this.firestore,e?this._delegate.withConverter(qo.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function Do(n){return We(n,dt)}class AT{constructor(...e){this._delegate=new Na(...e)}static documentId(){return new AT(At.keyField().canonicalString())}isEqual(e){return e=Ke(e),e instanceof Na?this._delegate._internalPath.isEqual(e._internalPath):!1}}class Ro{static serverTimestamp(){const e=_6();return e._methodName="FieldValue.serverTimestamp",new Ro(e)}static delete(){const e=g6();return e._methodName="FieldValue.delete",new Ro(e)}static arrayUnion(...e){const t=y6(...e);return t._methodName="FieldValue.arrayUnion",new Ro(t)}static arrayRemove(...e){const t=v6(...e);return t._methodName="FieldValue.arrayRemove",new Ro(t)}static increment(e){const t=E6(e);return t._methodName="FieldValue.increment",new Ro(t)}constructor(e){this._delegate=e}isEqual(e){return this._delegate.isEqual(e._delegate)}}const R6={Firestore:iD,GeoPoint:Hi,Timestamp:Ze,Blob:lf,Transaction:rD,WriteBatch:sD,DocumentReference:Ti,DocumentSnapshot:uf,Query:Mn,QueryDocumentSnapshot:cf,QuerySnapshot:kv,CollectionReference:Mu,FieldPath:AT,FieldValue:Ro,setLogLevel:A6,CACHE_SIZE_UNLIMITED:xU};function C6(n,e){n.INTERNAL.registerComponent(new Ii("firestore-compat",t=>{const i=t.getProvider("app-compat").getImmediate(),s=t.getProvider("firestore").getImmediate();return e(i,s)},"PUBLIC").setServiceProps({...R6}))}function N6(n){C6(n,(e,t)=>new iD(e,t,new I6)),n.registerVersion(T6,w6)}N6(uV);var D6="firebase",O6="12.6.0";hn(D6,O6,"app");const x6={auth:{port:8200},functions:{port:8300},firestore:{port:8100},database:{port:8400},storage:{port:8700}},P6={emulators:x6};function lD(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const M6=lD,uD=new Yo("auth","Firebase",lD());const Ep=new wf("@firebase/auth");function k6(n,...e){Ep.logLevel<=Pe.WARN&&Ep.warn(`Auth (${Vr}): ${n}`,...e)}function $m(n,...e){Ep.logLevel<=Pe.ERROR&&Ep.error(`Auth (${Vr}): ${n}`,...e)}function Ai(n,...e){throw RT(n,...e)}function Ki(n,...e){return RT(n,...e)}function bT(n,e,t){const i={...M6(),[e]:t};return new Yo("auth","Firebase",i).create(e,{appName:n.name})}function cs(n){return bT(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function V6(n,e,t){const i=t;if(!(e instanceof i))throw i.name!==e.constructor.name&&Ai(n,"argument-error"),bT(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function RT(n,...e){if(typeof n!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(t,...i)}return uD.create(n,...e)}function Ie(n,e,...t){if(!n)throw RT(e,...t)}function as(n){const e="INTERNAL ASSERTION FAILED: "+n;throw $m(e),new Error(e)}function gs(n,e){n||as(e)}function Vv(){return typeof self<"u"&&self.location?.href||""}function L6(){return I0()==="http:"||I0()==="https:"}function I0(){return typeof self<"u"&&self.location?.protocol||null}function U6(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(L6()||Dk()||"connection"in navigator)?navigator.onLine:!0}function F6(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}class Uf{constructor(e,t){this.shortDelay=e,this.longDelay=t,gs(t>e,"Short delay should be less than long delay!"),this.isMobile=cE()||tC()}get(){return U6()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function CT(n,e){gs(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class cD{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;as("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;as("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;as("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const B6={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const z6=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],q6=new Uf(3e4,6e4);function La(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function Ua(n,e,t,i,s={}){return hD(n,s,async()=>{let o={},u={};i&&(e==="GET"?u=i:o={body:JSON.stringify(i)});const h=zu({key:n.config.apiKey,...u}).slice(1),d=await n._getAdditionalHeaders();d["Content-Type"]="application/json",n.languageCode&&(d["X-Firebase-Locale"]=n.languageCode);const p={method:e,headers:d,...o};return Nk()||(p.referrerPolicy="no-referrer"),n.emulatorConfig&&kr(n.emulatorConfig.host)&&(p.credentials="include"),cD.fetch()(await fD(n,n.config.apiHost,t,h),p)})}async function hD(n,e,t){n._canInitEmulator=!1;const i={...B6,...e};try{const s=new H6(n),o=await Promise.race([t(),s.promise]);s.clearNetworkTimeout();const u=await o.json();if("needConfirmation"in u)throw Om(n,"account-exists-with-different-credential",u);if(o.ok&&!("errorMessage"in u))return u;{const h=o.ok?u.errorMessage:u.error.message,[d,p]=h.split(" : ");if(d==="FEDERATED_USER_ID_ALREADY_LINKED")throw Om(n,"credential-already-in-use",u);if(d==="EMAIL_EXISTS")throw Om(n,"email-already-in-use",u);if(d==="USER_DISABLED")throw Om(n,"user-disabled",u);const _=i[d]||d.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw bT(n,_,p);Ai(n,_)}}catch(s){if(s instanceof Ji)throw s;Ai(n,"network-request-failed",{message:String(s)})}}async function Ff(n,e,t,i,s={}){const o=await Ua(n,e,t,i,s);return"mfaPendingCredential"in o&&Ai(n,"multi-factor-auth-required",{_serverResponse:o}),o}async function fD(n,e,t,i){const s=`${e}${t}?${i}`,o=n,u=o.config.emulator?CT(n.config,s):`${n.config.apiScheme}://${s}`;return z6.includes(t)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(u).toString():u}function j6(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class H6{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(Ki(this.auth,"network-request-failed")),q6.get())})}}function Om(n,e,t){const i={appName:n.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const s=Ki(n,e,i);return s.customData._tokenResponse=t,s}function A0(n){return n!==void 0&&n.enterprise!==void 0}class G6{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return j6(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function K6(n,e){return Ua(n,"GET","/v2/recaptchaConfig",La(n,e))}async function Q6(n,e){return Ua(n,"POST","/v1/accounts:delete",e)}async function Tp(n,e){return Ua(n,"POST","/v1/accounts:lookup",e)}function Vh(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function $6(n,e=!1){const t=Ke(n),i=await t.getIdToken(e),s=NT(i);Ie(s&&s.exp&&s.auth_time&&s.iat,t.auth,"internal-error");const o=typeof s.firebase=="object"?s.firebase:void 0,u=o?.sign_in_provider;return{claims:s,token:i,authTime:Vh(qy(s.auth_time)),issuedAtTime:Vh(qy(s.iat)),expirationTime:Vh(qy(s.exp)),signInProvider:u||null,signInSecondFactor:o?.sign_in_second_factor||null}}function qy(n){return Number(n)*1e3}function NT(n){const[e,t,i]=n.split(".");if(e===void 0||t===void 0||i===void 0)return $m("JWT malformed, contained fewer than 3 sections"),null;try{const s=qh(t);return s?JSON.parse(s):($m("Failed to decode base64 JWT payload"),null)}catch(s){return $m("Caught error parsing JWT payload as JSON",s?.toString()),null}}function b0(n){const e=NT(n);return Ie(e,"internal-error"),Ie(typeof e.exp<"u","internal-error"),Ie(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function hf(n,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof Ji&&Y6(i)&&n.auth.currentUser===n&&await n.auth.signOut(),i}}function Y6({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}class W6{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class Lv{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Vh(this.lastLoginAt),this.creationTime=Vh(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function wp(n){const e=n.auth,t=await n.getIdToken(),i=await hf(n,Tp(e,{idToken:t}));Ie(i?.users.length,e,"internal-error");const s=i.users[0];n._notifyReloadListener(s);const o=s.providerUserInfo?.length?dD(s.providerUserInfo):[],u=J6(n.providerData,o),h=n.isAnonymous,d=!(n.email&&s.passwordHash)&&!u?.length,p=h?d:!1,_={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:u,metadata:new Lv(s.createdAt,s.lastLoginAt),isAnonymous:p};Object.assign(n,_)}async function X6(n){const e=Ke(n);await wp(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function J6(n,e){return[...n.filter(i=>!e.some(s=>s.providerId===i.providerId)),...e]}function dD(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}async function Z6(n,e){const t=await hD(n,{},async()=>{const i=zu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:o}=n.config,u=await fD(n,s,"/v1/token",`key=${o}`),h=await n._getAdditionalHeaders();h["Content-Type"]="application/x-www-form-urlencoded";const d={method:"POST",headers:h,body:i};return n.emulatorConfig&&kr(n.emulatorConfig.host)&&(d.credentials="include"),cD.fetch()(u,d)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function e3(n,e){return Ua(n,"POST","/v2/accounts:revokeToken",La(n,e))}class lu{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ie(e.idToken,"internal-error"),Ie(typeof e.idToken<"u","internal-error"),Ie(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):b0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ie(e.length!==0,"internal-error");const t=b0(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ie(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:s,expiresIn:o}=await Z6(e,t);this.updateTokensAndExpiration(i,s,Number(o))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:s,expirationTime:o}=t,u=new lu;return i&&(Ie(typeof i=="string","internal-error",{appName:e}),u.refreshToken=i),s&&(Ie(typeof s=="string","internal-error",{appName:e}),u.accessToken=s),o&&(Ie(typeof o=="number","internal-error",{appName:e}),u.expirationTime=o),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new lu,this.toJSON())}_performRefresh(){return as("not implemented")}}function aa(n,e){Ie(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class zi{constructor({uid:e,auth:t,stsTokenManager:i,...s}){this.providerId="firebase",this.proactiveRefresh=new W6(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Lv(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const t=await hf(this,this.stsTokenManager.getToken(this.auth,e));return Ie(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return $6(this,e)}reload(){return X6(this)}_assign(e){this!==e&&(Ie(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new zi({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Ie(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await wp(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(vn(this.auth.app))return Promise.reject(cs(this.auth));const e=await this.getIdToken();return await hf(this,Q6(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const i=t.displayName??void 0,s=t.email??void 0,o=t.phoneNumber??void 0,u=t.photoURL??void 0,h=t.tenantId??void 0,d=t._redirectEventId??void 0,p=t.createdAt??void 0,_=t.lastLoginAt??void 0,{uid:y,emailVerified:w,isAnonymous:A,providerData:O,stsTokenManager:F}=t;Ie(y&&F,e,"internal-error");const V=lu.fromJSON(this.name,F);Ie(typeof y=="string",e,"internal-error"),aa(i,e.name),aa(s,e.name),Ie(typeof w=="boolean",e,"internal-error"),Ie(typeof A=="boolean",e,"internal-error"),aa(o,e.name),aa(u,e.name),aa(h,e.name),aa(d,e.name),aa(p,e.name),aa(_,e.name);const X=new zi({uid:y,auth:e,email:s,emailVerified:w,displayName:i,isAnonymous:A,photoURL:u,phoneNumber:o,tenantId:h,stsTokenManager:V,createdAt:p,lastLoginAt:_});return O&&Array.isArray(O)&&(X.providerData=O.map(ne=>({...ne}))),d&&(X._redirectEventId=d),X}static async _fromIdTokenResponse(e,t,i=!1){const s=new lu;s.updateFromServerResponse(t);const o=new zi({uid:t.localId,auth:e,stsTokenManager:s,isAnonymous:i});return await wp(o),o}static async _fromGetAccountInfoResponse(e,t,i){const s=t.users[0];Ie(s.localId!==void 0,"internal-error");const o=s.providerUserInfo!==void 0?dD(s.providerUserInfo):[],u=!(s.email&&s.passwordHash)&&!o?.length,h=new lu;h.updateFromIdToken(i);const d=new zi({uid:s.localId,auth:e,stsTokenManager:h,isAnonymous:u}),p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new Lv(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!o?.length};return Object.assign(d,p),d}}const R0=new Map;function os(n){gs(n instanceof Function,"Expected a class definition");let e=R0.get(n);return e?(gs(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,R0.set(n,e),e)}class mD{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}mD.type="NONE";const C0=mD;function Ym(n,e,t){return`firebase:${n}:${e}:${t}`}class uu{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:s,name:o}=this.auth;this.fullUserKey=Ym(this.userKey,s.apiKey,o),this.fullPersistenceKey=Ym("persistence",s.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Tp(this.auth,{idToken:e}).catch(()=>{});return t?zi._fromGetAccountInfoResponse(this.auth,t,e):null}return zi._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new uu(os(C0),e,i);const s=(await Promise.all(t.map(async p=>{if(await p._isAvailable())return p}))).filter(p=>p);let o=s[0]||os(C0);const u=Ym(i,e.config.apiKey,e.name);let h=null;for(const p of t)try{const _=await p._get(u);if(_){let y;if(typeof _=="string"){const w=await Tp(e,{idToken:_}).catch(()=>{});if(!w)break;y=await zi._fromGetAccountInfoResponse(e,w,_)}else y=zi._fromJSON(e,_);p!==o&&(h=y),o=p;break}}catch{}const d=s.filter(p=>p._shouldAllowMigration);return!o._shouldAllowMigration||!d.length?new uu(o,e,i):(o=d[0],h&&await o._set(u,h.toJSON()),await Promise.all(t.map(async p=>{if(p!==o)try{await p._remove(u)}catch{}})),new uu(o,e,i))}}function N0(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(yD(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(pD(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(ED(e))return"Blackberry";if(TD(e))return"Webos";if(gD(e))return"Safari";if((e.includes("chrome/")||_D(e))&&!e.includes("edge/"))return"Chrome";if(vD(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(t);if(i?.length===2)return i[1]}return"Other"}function pD(n=en()){return/firefox\//i.test(n)}function gD(n=en()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function _D(n=en()){return/crios\//i.test(n)}function yD(n=en()){return/iemobile/i.test(n)}function vD(n=en()){return/android/i.test(n)}function ED(n=en()){return/blackberry/i.test(n)}function TD(n=en()){return/webos/i.test(n)}function DT(n=en()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function t3(n=en()){return DT(n)&&!!window.navigator?.standalone}function n3(){return Ok()&&document.documentMode===10}function wD(n=en()){return DT(n)||vD(n)||TD(n)||ED(n)||/windows phone/i.test(n)||yD(n)}function SD(n,e=[]){let t;switch(n){case"Browser":t=N0(en());break;case"Worker":t=`${N0(en())}-${n}`;break;default:t=n}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Vr}/${i}`}class i3{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=o=>new Promise((u,h)=>{try{const d=e(o);u(d)}catch(d){h(d)}});i.onAbort=t,this.queue.push(i);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const s of t)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}}}async function r3(n,e={}){return Ua(n,"GET","/v2/passwordPolicy",La(n,e))}const s3=6;class a3{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??s3,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),s&&(t.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let s=0;s<e.length;s++)i=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,s,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}class o3{constructor(e,t,i,s){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new D0(this),this.idTokenSubscription=new D0(this),this.beforeStateQueue=new i3(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=uD,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=os(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await uu.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Tp(this,{idToken:e}),i=await zi._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(vn(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(u=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(u,u))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let i=t,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=this.redirectUser?._redirectEventId,u=i?._redirectEventId,h=await this.tryRedirectSignIn(e);(!o||o===u)&&h?.user&&(i=h.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Ie(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await wp(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=F6()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(vn(this.app))return Promise.reject(cs(this));const t=e?Ke(e):null;return t&&Ie(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Ie(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return vn(this.app)?Promise.reject(cs(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return vn(this.app)?Promise.reject(cs(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(os(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await r3(this),t=new a3(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Yo("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await e3(this,i)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&os(e)||this._popupRedirectResolver;Ie(t,this,"argument-error"),this.redirectPersistenceManager=await uu.create(this,[os(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,s){if(this._deleted)return()=>{};const o=typeof t=="function"?t:t.next.bind(t);let u=!1;const h=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ie(h,this,"internal-error"),h.then(()=>{u||o(this.currentUser)}),typeof t=="function"){const d=e.addObserver(t,i,s);return()=>{u=!0,d()}}else{const d=e.addObserver(t);return()=>{u=!0,d()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ie(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=SD(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){if(vn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&k6(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Fa(n){return Ke(n)}class D0{constructor(e){this.auth=e,this.observer=null,this.addObserver=aC(t=>this.observer=t)}get next(){return Ie(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let mg={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function l3(n){mg=n}function ID(n){return mg.loadJS(n)}function u3(){return mg.recaptchaEnterpriseScript}function c3(){return mg.gapiScript}function h3(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class f3{constructor(){this.enterprise=new d3}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class d3{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const m3="recaptcha-enterprise",AD="NO_RECAPTCHA";class p3{constructor(e){this.type=m3,this.auth=Fa(e)}async verify(e="verify",t=!1){async function i(o){if(!t){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(u,h)=>{K6(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(d=>{if(d.recaptchaKey===void 0)h(new Error("recaptcha Enterprise site key undefined"));else{const p=new G6(d);return o.tenantId==null?o._agentRecaptchaConfig=p:o._tenantRecaptchaConfigs[o.tenantId]=p,u(p.siteKey)}}).catch(d=>{h(d)})})}function s(o,u,h){const d=window.grecaptcha;A0(d)?d.enterprise.ready(()=>{d.enterprise.execute(o,{action:e}).then(p=>{u(p)}).catch(()=>{u(AD)})}):h(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new f3().execute("siteKey",{action:"verify"}):new Promise((o,u)=>{i(this.auth).then(h=>{if(!t&&A0(window.grecaptcha))s(h,o,u);else{if(typeof window>"u"){u(new Error("RecaptchaVerifier is only supported in browser"));return}let d=u3();d.length!==0&&(d+=h),ID(d).then(()=>{s(h,o,u)}).catch(p=>{u(p)})}}).catch(h=>{u(h)})})}}async function O0(n,e,t,i=!1,s=!1){const o=new p3(n);let u;if(s)u=AD;else try{u=await o.verify(t)}catch{u=await o.verify(t,!0)}const h={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in h){const d=h.phoneEnrollmentInfo.phoneNumber,p=h.phoneEnrollmentInfo.recaptchaToken;Object.assign(h,{phoneEnrollmentInfo:{phoneNumber:d,recaptchaToken:p,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in h){const d=h.phoneSignInInfo.recaptchaToken;Object.assign(h,{phoneSignInInfo:{recaptchaToken:d,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return h}return i?Object.assign(h,{captchaResp:u}):Object.assign(h,{captchaResponse:u}),Object.assign(h,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(h,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),h}async function Uv(n,e,t,i,s){if(n._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await O0(n,e,t,t==="getOobCode");return i(n,o)}else return i(n,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const u=await O0(n,e,t,t==="getOobCode");return i(n,u)}else return Promise.reject(o)})}function g3(n,e){const t=Oa(n,"auth");if(t.isInitialized()){const s=t.getImmediate(),o=t.getOptions();if(Dr(o,e??{}))return s;Ai(s,"already-initialized")}return t.initialize({options:e})}function _3(n,e){const t=e?.persistence||[],i=(Array.isArray(t)?t:[t]).map(os);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(i,e?.popupRedirectResolver)}function bD(n,e,t){const i=Fa(n);Ie(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const s=!1,o=RD(e),{host:u,port:h}=y3(e),d=h===null?"":`:${h}`,p={url:`${o}//${u}${d}/`},_=Object.freeze({host:u,port:h,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!i._canInitEmulator){Ie(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),Ie(Dr(p,i.config.emulator)&&Dr(_,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=p,i.emulatorConfig=_,i.settings.appVerificationDisabledForTesting=!0,kr(u)?(Ef(`${o}//${u}${d}`),Tf("Auth",!0)):v3()}function RD(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function y3(n){const e=RD(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(i);if(s){const o=s[1];return{host:o,port:x0(i.substr(o.length+1))}}else{const[o,u]=i.split(":");return{host:o,port:x0(u)}}}function x0(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function v3(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}class OT{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return as("not implemented")}_getIdTokenResponse(e){return as("not implemented")}_linkToIdToken(e,t){return as("not implemented")}_getReauthenticationResolver(e){return as("not implemented")}}async function E3(n,e){return Ua(n,"POST","/v1/accounts:signUp",e)}async function T3(n,e){return Ff(n,"POST","/v1/accounts:signInWithPassword",La(n,e))}async function w3(n,e){return Ff(n,"POST","/v1/accounts:signInWithEmailLink",La(n,e))}async function S3(n,e){return Ff(n,"POST","/v1/accounts:signInWithEmailLink",La(n,e))}class ff extends OT{constructor(e,t,i,s=null){super("password",i),this._email=e,this._password=t,this._tenantId=s}static _fromEmailAndPassword(e,t){return new ff(e,t,"password")}static _fromEmailAndCode(e,t,i=null){return new ff(e,t,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Uv(e,t,"signInWithPassword",T3);case"emailLink":return w3(e,{email:this._email,oobCode:this._password});default:Ai(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const i={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Uv(e,i,"signUpPassword",E3);case"emailLink":return S3(e,{idToken:t,email:this._email,oobCode:this._password});default:Ai(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function cu(n,e){return Ff(n,"POST","/v1/accounts:signInWithIdp",La(n,e))}const I3="http://localhost";class jo extends OT{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new jo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Ai("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:s,...o}=t;if(!i||!s)return null;const u=new jo(i,s);return u.idToken=o.idToken||void 0,u.accessToken=o.accessToken||void 0,u.secret=o.secret,u.nonce=o.nonce,u.pendingToken=o.pendingToken||null,u}_getIdTokenResponse(e){const t=this.buildRequest();return cu(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,cu(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,cu(e,t)}buildRequest(){const e={requestUri:I3,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=zu(t)}return e}}function A3(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function b3(n){const e=vh(Eh(n)).link,t=e?vh(Eh(e)).deep_link_id:null,i=vh(Eh(n)).deep_link_id;return(i?vh(Eh(i)).link:null)||i||t||e||n}class xT{constructor(e){const t=vh(Eh(e)),i=t.apiKey??null,s=t.oobCode??null,o=A3(t.mode??null);Ie(i&&s&&o,"argument-error"),this.apiKey=i,this.operation=o,this.code=s,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=b3(e);try{return new xT(t)}catch{return null}}}class Xu{constructor(){this.providerId=Xu.PROVIDER_ID}static credential(e,t){return ff._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const i=xT.parseLink(t);return Ie(i,"argument-error"),ff._fromEmailAndCode(e,i.code,i.tenantId)}}Xu.PROVIDER_ID="password";Xu.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Xu.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class PT{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Bf extends PT{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class la extends Bf{constructor(){super("facebook.com")}static credential(e){return jo._fromParams({providerId:la.PROVIDER_ID,signInMethod:la.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return la.credentialFromTaggedObject(e)}static credentialFromError(e){return la.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return la.credential(e.oauthAccessToken)}catch{return null}}}la.FACEBOOK_SIGN_IN_METHOD="facebook.com";la.PROVIDER_ID="facebook.com";class rs extends Bf{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return jo._fromParams({providerId:rs.PROVIDER_ID,signInMethod:rs.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return rs.credentialFromTaggedObject(e)}static credentialFromError(e){return rs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return rs.credential(t,i)}catch{return null}}}rs.GOOGLE_SIGN_IN_METHOD="google.com";rs.PROVIDER_ID="google.com";class ua extends Bf{constructor(){super("github.com")}static credential(e){return jo._fromParams({providerId:ua.PROVIDER_ID,signInMethod:ua.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ua.credentialFromTaggedObject(e)}static credentialFromError(e){return ua.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ua.credential(e.oauthAccessToken)}catch{return null}}}ua.GITHUB_SIGN_IN_METHOD="github.com";ua.PROVIDER_ID="github.com";class ca extends Bf{constructor(){super("twitter.com")}static credential(e,t){return jo._fromParams({providerId:ca.PROVIDER_ID,signInMethod:ca.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return ca.credentialFromTaggedObject(e)}static credentialFromError(e){return ca.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return ca.credential(t,i)}catch{return null}}}ca.TWITTER_SIGN_IN_METHOD="twitter.com";ca.PROVIDER_ID="twitter.com";async function R3(n,e){return Ff(n,"POST","/v1/accounts:signUp",La(n,e))}class Ho{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,s=!1){const o=await zi._fromIdTokenResponse(e,i,s),u=P0(i);return new Ho({user:o,providerId:u,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const s=P0(i);return new Ho({user:e,providerId:s,_tokenResponse:i,operationType:t})}}function P0(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}class Sp extends Ji{constructor(e,t,i,s){super(t.code,t.message),this.operationType=i,this.user=s,Object.setPrototypeOf(this,Sp.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,s){return new Sp(e,t,i,s)}}function CD(n,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?Sp._fromErrorAndOperation(n,o,e,i):o})}async function C3(n,e,t=!1){const i=await hf(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Ho._forOperation(n,"link",i)}async function N3(n,e,t=!1){const{auth:i}=n;if(vn(i.app))return Promise.reject(cs(i));const s="reauthenticate";try{const o=await hf(n,CD(i,s,e,n),t);Ie(o.idToken,i,"internal-error");const u=NT(o.idToken);Ie(u,i,"internal-error");const{sub:h}=u;return Ie(n.uid===h,i,"user-mismatch"),Ho._forOperation(n,s,o)}catch(o){throw o?.code==="auth/user-not-found"&&Ai(i,"user-mismatch"),o}}async function ND(n,e,t=!1){if(vn(n.app))return Promise.reject(cs(n));const i="signIn",s=await CD(n,i,e),o=await Ho._fromIdTokenResponse(n,i,s);return t||await n._updateCurrentUser(o.user),o}async function D3(n,e){return ND(Fa(n),e)}async function DD(n){const e=Fa(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function O3(n,e,t){if(vn(n.app))return Promise.reject(cs(n));const i=Fa(n),u=await Uv(i,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",R3).catch(d=>{throw d.code==="auth/password-does-not-meet-requirements"&&DD(n),d}),h=await Ho._fromIdTokenResponse(i,"signIn",u);return await i._updateCurrentUser(h.user),h}function x3(n,e,t){return vn(n.app)?Promise.reject(cs(n)):D3(Ke(n),Xu.credential(e,t)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&DD(n),i})}function P3(n,e,t,i){return Ke(n).onIdTokenChanged(e,t,i)}function M3(n,e,t){return Ke(n).beforeAuthStateChanged(e,t)}function MT(n,e,t,i){return Ke(n).onAuthStateChanged(e,t,i)}function k3(n){return Ke(n).signOut()}const Ip="__sak";class OD{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Ip,"1"),this.storage.removeItem(Ip),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const V3=1e3,L3=10;class xD extends OD{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=wD(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),s=this.localCache[t];i!==s&&e(t,s,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((u,h,d)=>{this.notifyListeners(u,d)});return}const i=e.key;t?this.detachListener():this.stopPolling();const s=()=>{const u=this.storage.getItem(i);!t&&this.localCache[i]===u||this.notifyListeners(i,u)},o=this.storage.getItem(i);n3()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,L3):s()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const s of Array.from(i))s(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},V3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}xD.type="LOCAL";const U3=xD;class PD extends OD{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}PD.type="SESSION";const MD=PD;function F3(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}class pg{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(s=>s.isListeningto(e));if(t)return t;const i=new pg(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:s,data:o}=t.data,u=this.handlersMap[s];if(!u?.size)return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:s});const h=Array.from(u).map(async p=>p(t.origin,o)),d=await F3(h);t.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:d})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}pg.receivers=[];function kT(n="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return n+t}class B3{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let o,u;return new Promise((h,d)=>{const p=kT("",20);s.port1.start();const _=setTimeout(()=>{d(new Error("unsupported_event"))},i);u={messageChannel:s,onMessage(y){const w=y;if(w.data.eventId===p)switch(w.data.status){case"ack":clearTimeout(_),o=setTimeout(()=>{d(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),h(w.data.response);break;default:clearTimeout(_),clearTimeout(o),d(new Error("invalid_response"));break}}},this.handlers.add(u),s.port1.addEventListener("message",u.onMessage),this.target.postMessage({eventType:e,eventId:p,data:t},[s.port2])}).finally(()=>{u&&this.removeMessageHandler(u)})}}function Nr(){return window}function z3(n){Nr().location.href=n}function kD(){return typeof Nr().WorkerGlobalScope<"u"&&typeof Nr().importScripts=="function"}async function q3(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function j3(){return navigator?.serviceWorker?.controller||null}function H3(){return kD()?self:null}const VD="firebaseLocalStorageDb",G3=1,Ap="firebaseLocalStorage",LD="fbase_key";class zf{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function gg(n,e){return n.transaction([Ap],e?"readwrite":"readonly").objectStore(Ap)}function K3(){const n=indexedDB.deleteDatabase(VD);return new zf(n).toPromise()}function Fv(){const n=indexedDB.open(VD,G3);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const i=n.result;try{i.createObjectStore(Ap,{keyPath:LD})}catch(s){t(s)}}),n.addEventListener("success",async()=>{const i=n.result;i.objectStoreNames.contains(Ap)?e(i):(i.close(),await K3(),e(await Fv()))})})}async function M0(n,e,t){const i=gg(n,!0).put({[LD]:e,value:t});return new zf(i).toPromise()}async function Q3(n,e){const t=gg(n,!1).get(e),i=await new zf(t).toPromise();return i===void 0?null:i.value}function k0(n,e){const t=gg(n,!0).delete(e);return new zf(t).toPromise()}const $3=800,Y3=3;class UD{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Fv(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>Y3)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return kD()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=pg._getInstance(H3()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await q3(),!this.activeServiceWorker)return;this.sender=new B3(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||j3()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Fv();return await M0(e,Ip,"1"),await k0(e,Ip),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>M0(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>Q3(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>k0(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const o=gg(s,!1).getAll();return new zf(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:s,value:o}of e)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),t.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),t.push(s));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const s of Array.from(i))s(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),$3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}UD.type="LOCAL";const W3=UD;new Uf(3e4,6e4);function FD(n,e){return e?os(e):(Ie(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}class VT extends OT{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return cu(e,this._buildIdpRequest())}_linkToIdToken(e,t){return cu(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return cu(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function X3(n){return ND(n.auth,new VT(n),n.bypassAuthState)}function J3(n){const{auth:e,user:t}=n;return Ie(t,e,"internal-error"),N3(t,new VT(n),n.bypassAuthState)}async function Z3(n){const{auth:e,user:t}=n;return Ie(t,e,"internal-error"),C3(t,new VT(n),n.bypassAuthState)}class BD{constructor(e,t,i,s,o=!1){this.auth=e,this.resolver=i,this.user=s,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:s,tenantId:o,error:u,type:h}=e;if(u){this.reject(u);return}const d={auth:this.auth,requestUri:t,sessionId:i,tenantId:o||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(h)(d))}catch(p){this.reject(p)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return X3;case"linkViaPopup":case"linkViaRedirect":return Z3;case"reauthViaPopup":case"reauthViaRedirect":return J3;default:Ai(this.auth,"internal-error")}}resolve(e){gs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){gs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const eF=new Uf(2e3,1e4);async function tF(n,e,t){if(vn(n.app))return Promise.reject(Ki(n,"operation-not-supported-in-this-environment"));const i=Fa(n);V6(n,e,PT);const s=FD(i,t);return new Oo(i,"signInViaPopup",e,s).executeNotNull()}class Oo extends BD{constructor(e,t,i,s,o){super(e,t,s,o),this.provider=i,this.authWindow=null,this.pollId=null,Oo.currentPopupAction&&Oo.currentPopupAction.cancel(),Oo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ie(e,this.auth,"internal-error"),e}async onExecution(){gs(this.filter.length===1,"Popup operations only handle one event");const e=kT();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Ki(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Ki(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Oo.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ki(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,eF.get())};e()}}Oo.currentPopupAction=null;const nF="pendingRedirect",Wm=new Map;class iF extends BD{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=Wm.get(this.auth._key());if(!e){try{const i=await rF(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}Wm.set(this.auth._key(),e)}return this.bypassAuthState||Wm.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function rF(n,e){const t=oF(e),i=aF(n);if(!await i._isAvailable())return!1;const s=await i._get(t)==="true";return await i._remove(t),s}function sF(n,e){Wm.set(n._key(),e)}function aF(n){return os(n._redirectPersistence)}function oF(n){return Ym(nF,n.config.apiKey,n.name)}async function lF(n,e,t=!1){if(vn(n.app))return Promise.reject(cs(n));const i=Fa(n),s=FD(i,e),u=await new iF(i,s,t).execute();return u&&!t&&(delete u.user._redirectEventId,await i._persistUserIfCurrent(u.user),await i._setRedirectUser(null,e)),u}const uF=600*1e3;class cF{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!hF(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!zD(e)){const i=e.error.code?.split("auth/")[1]||"internal-error";t.onError(Ki(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=uF&&this.cachedEventUids.clear(),this.cachedEventUids.has(V0(e))}saveEventToCache(e){this.cachedEventUids.add(V0(e)),this.lastProcessedEventTime=Date.now()}}function V0(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function zD({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function hF(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return zD(n);default:return!1}}async function fF(n,e={}){return Ua(n,"GET","/v1/projects",e)}const dF=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,mF=/^https?/;async function pF(n){if(n.config.emulator)return;const{authorizedDomains:e}=await fF(n);for(const t of e)try{if(gF(t))return}catch{}Ai(n,"unauthorized-domain")}function gF(n){const e=Vv(),{protocol:t,hostname:i}=new URL(e);if(n.startsWith("chrome-extension://")){const u=new URL(n);return u.hostname===""&&i===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&u.hostname===i}if(!mF.test(t))return!1;if(dF.test(n))return i===n;const s=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(i)}const _F=new Uf(3e4,6e4);function L0(){const n=Nr().___jsl;if(n?.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function yF(n){return new Promise((e,t)=>{function i(){L0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{L0(),t(Ki(n,"network-request-failed"))},timeout:_F.get()})}if(Nr().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Nr().gapi?.load)i();else{const s=h3("iframefcb");return Nr()[s]=()=>{gapi.load?i():t(Ki(n,"network-request-failed"))},ID(`${c3()}?onload=${s}`).catch(o=>t(o))}}).catch(e=>{throw Xm=null,e})}let Xm=null;function vF(n){return Xm=Xm||yF(n),Xm}const EF=new Uf(5e3,15e3),TF="__/auth/iframe",wF="emulator/auth/iframe",SF={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},IF=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function AF(n){const e=n.config;Ie(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?CT(e,wF):`https://${n.config.authDomain}/${TF}`,i={apiKey:e.apiKey,appName:n.name,v:Vr},s=IF.get(n.config.apiHost);s&&(i.eid=s);const o=n._getFrameworks();return o.length&&(i.fw=o.join(",")),`${t}?${zu(i).slice(1)}`}async function bF(n){const e=await vF(n),t=Nr().gapi;return Ie(t,n,"internal-error"),e.open({where:document.body,url:AF(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:SF,dontclear:!0},i=>new Promise(async(s,o)=>{await i.restyle({setHideOnLeave:!1});const u=Ki(n,"network-request-failed"),h=Nr().setTimeout(()=>{o(u)},EF.get());function d(){Nr().clearTimeout(h),s(i)}i.ping(d).then(d,()=>{o(u)})}))}const RF={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},CF=500,NF=600,DF="_blank",OF="http://localhost";class U0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function xF(n,e,t,i=CF,s=NF){const o=Math.max((window.screen.availHeight-s)/2,0).toString(),u=Math.max((window.screen.availWidth-i)/2,0).toString();let h="";const d={...RF,width:i.toString(),height:s.toString(),top:o,left:u},p=en().toLowerCase();t&&(h=_D(p)?DF:t),pD(p)&&(e=e||OF,d.scrollbars="yes");const _=Object.entries(d).reduce((w,[A,O])=>`${w}${A}=${O},`,"");if(t3(p)&&h!=="_self")return PF(e||"",h),new U0(null);const y=window.open(e||"",h,_);Ie(y,n,"popup-blocked");try{y.focus()}catch{}return new U0(y)}function PF(n,e){const t=document.createElement("a");t.href=n,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}const MF="__/auth/handler",kF="emulator/auth/handler",VF=encodeURIComponent("fac");async function F0(n,e,t,i,s,o){Ie(n.config.authDomain,n,"auth-domain-config-required"),Ie(n.config.apiKey,n,"invalid-api-key");const u={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:i,v:Vr,eventId:s};if(e instanceof PT){e.setDefaultLanguage(n.languageCode),u.providerId=e.providerId||"",ev(e.getCustomParameters())||(u.customParameters=JSON.stringify(e.getCustomParameters()));for(const[_,y]of Object.entries({}))u[_]=y}if(e instanceof Bf){const _=e.getScopes().filter(y=>y!=="");_.length>0&&(u.scopes=_.join(","))}n.tenantId&&(u.tid=n.tenantId);const h=u;for(const _ of Object.keys(h))h[_]===void 0&&delete h[_];const d=await n._getAppCheckToken(),p=d?`#${VF}=${encodeURIComponent(d)}`:"";return`${LF(n)}?${zu(h).slice(1)}${p}`}function LF({config:n}){return n.emulator?CT(n,kF):`https://${n.authDomain}/${MF}`}const jy="webStorageSupport";class UF{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=MD,this._completeRedirectFn=lF,this._overrideRedirectResult=sF}async _openPopup(e,t,i,s){gs(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const o=await F0(e,t,i,Vv(),s);return xF(e,o,kT())}async _openRedirect(e,t,i,s){await this._originValidation(e);const o=await F0(e,t,i,Vv(),s);return z3(o),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:s,promise:o}=this.eventManagers[t];return s?Promise.resolve(s):(gs(o,"If manager is not set, promise should be"),o)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await bF(e),i=new cF(e);return t.register("authEvent",s=>(Ie(s?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(jy,{type:jy},s=>{const o=s?.[0]?.[jy];o!==void 0&&t(!!o),Ai(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=pF(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return wD()||gD()||DT()}}const FF=UF;var B0="@firebase/auth",z0="1.11.1";class BF{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ie(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function zF(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function qF(n){Wi(new Ii("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:u,authDomain:h}=i.options;Ie(u&&!u.includes(":"),"invalid-api-key",{appName:i.name});const d={apiKey:u,authDomain:h,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:SD(n)},p=new o3(i,s,o,d);return _3(p,t),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),Wi(new Ii("auth-internal",e=>{const t=Fa(e.getProvider("auth").getImmediate());return(i=>new BF(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),hn(B0,z0,zF(n)),hn(B0,z0,"esm2020")}const jF=300,HF=JR("authIdTokenMaxAge")||jF;let q0=null;const GF=n=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>HF)return;const s=t?.token;q0!==s&&(q0=s,await fetch(n,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function KF(n=qu()){const e=Oa(n,"auth");if(e.isInitialized())return e.getImmediate();const t=g3(n,{popupRedirectResolver:FF,persistence:[W3,U3,MD]}),i=JR("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(i,location.origin);if(location.origin===o.origin){const u=GF(o.toString());M3(t,u,()=>u(t.currentUser)),P3(t,h=>u(h))}}const s=XR("auth");return s&&bD(t,`http://${s}`),t}function QF(){return document.getElementsByTagName("head")?.[0]??document}l3({loadJS(n){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",n),i.onload=e,i.onerror=s=>{const o=Ki("internal-error");o.customData=s,t(o)},i.type="text/javascript",i.charset="UTF-8",QF().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});qF("Browser");const qD="firebasestorage.googleapis.com",$F="storageBucket",YF=120*1e3,WF=600*1e3;class Lr extends Ji{constructor(e,t,i=0){super(Hy(e),`Firebase Storage: ${t} (${Hy(e)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Lr.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Hy(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Pr;(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Pr||(Pr={}));function Hy(n){return"storage/"+n}function XF(){const n="An unknown error occurred, please check the error payload for server response.";return new Lr(Pr.UNKNOWN,n)}function JF(){return new Lr(Pr.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function ZF(){return new Lr(Pr.CANCELED,"User canceled the upload/download.")}function eB(n){return new Lr(Pr.INVALID_URL,"Invalid URL '"+n+"'.")}function tB(n){return new Lr(Pr.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function j0(n){return new Lr(Pr.INVALID_ARGUMENT,n)}function jD(){return new Lr(Pr.APP_DELETED,"The Firebase app was deleted.")}function nB(n){return new Lr(Pr.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}class qi{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let i;try{i=qi.makeFromUrl(e,t)}catch{return new qi(e,"")}if(i.path==="")return i;throw tB(e)}static makeFromUrl(e,t){let i=null;const s="([A-Za-z0-9.\\-_]+)";function o(fe){fe.path.charAt(fe.path.length-1)==="/"&&(fe.path_=fe.path_.slice(0,-1))}const u="(/(.*))?$",h=new RegExp("^gs://"+s+u,"i"),d={bucket:1,path:3};function p(fe){fe.path_=decodeURIComponent(fe.path)}const _="v[A-Za-z0-9_]+",y=t.replace(/[.]/g,"\\."),w="(/([^?#]*).*)?$",A=new RegExp(`^https?://${y}/${_}/b/${s}/o${w}`,"i"),O={bucket:1,path:3},F=t===qD?"(?:storage.googleapis.com|storage.cloud.google.com)":t,V="([^?#]*)",X=new RegExp(`^https?://${F}/${s}/${V}`,"i"),te=[{regex:h,indices:d,postModify:o},{regex:A,indices:O,postModify:p},{regex:X,indices:{bucket:1,path:2},postModify:p}];for(let fe=0;fe<te.length;fe++){const ye=te[fe],ve=ye.regex.exec(e);if(ve){const R=ve[ye.indices.bucket];let b=ve[ye.indices.path];b||(b=""),i=new qi(R,b),ye.postModify(i);break}}if(i==null)throw eB(e);return i}}class iB{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function rB(n,e,t){let i=1,s=null,o=null,u=!1,h=0;function d(){return h===2}let p=!1;function _(...V){p||(p=!0,e.apply(null,V))}function y(V){s=setTimeout(()=>{s=null,n(A,d())},V)}function w(){o&&clearTimeout(o)}function A(V,...X){if(p){w();return}if(V){w(),_.call(null,V,...X);return}if(d()||u){w(),_.call(null,V,...X);return}i<64&&(i*=2);let te;h===1?(h=2,te=0):te=(i+Math.random())*1e3,y(te)}let O=!1;function F(V){O||(O=!0,w(),!p&&(s!==null?(V||(h=2),clearTimeout(s),y(0)):V||(h=1)))}return y(0),o=setTimeout(()=>{u=!0,F(!0)},t),F}function sB(n){n(!1)}function aB(n){return n!==void 0}function H0(n,e,t,i){if(i<e)throw j0(`Invalid value for '${n}'. Expected ${e} or greater.`);if(i>t)throw j0(`Invalid value for '${n}'. Expected ${t} or less.`)}function oB(n){const e=encodeURIComponent;let t="?";for(const i in n)if(n.hasOwnProperty(i)){const s=e(i)+"="+e(n[i]);t=t+s+"&"}return t=t.slice(0,-1),t}var bp;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})(bp||(bp={}));function lB(n,e){const t=n>=500&&n<600,s=[408,429].indexOf(n)!==-1,o=e.indexOf(n)!==-1;return t||s||o}class uB{constructor(e,t,i,s,o,u,h,d,p,_,y,w=!0,A=!1){this.url_=e,this.method_=t,this.headers_=i,this.body_=s,this.successCodes_=o,this.additionalRetryCodes_=u,this.callback_=h,this.errorCallback_=d,this.timeout_=p,this.progressCallback_=_,this.connectionFactory_=y,this.retry=w,this.isUsingEmulator=A,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((O,F)=>{this.resolve_=O,this.reject_=F,this.start_()})}start_(){const e=(i,s)=>{if(s){i(!1,new xm(!1,null,!0));return}const o=this.connectionFactory_();this.pendingConnection_=o;const u=h=>{const d=h.loaded,p=h.lengthComputable?h.total:-1;this.progressCallback_!==null&&this.progressCallback_(d,p)};this.progressCallback_!==null&&o.addUploadProgressListener(u),o.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&o.removeUploadProgressListener(u),this.pendingConnection_=null;const h=o.getErrorCode()===bp.NO_ERROR,d=o.getStatus();if(!h||lB(d,this.additionalRetryCodes_)&&this.retry){const _=o.getErrorCode()===bp.ABORT;i(!1,new xm(!1,null,_));return}const p=this.successCodes_.indexOf(d)!==-1;i(!0,new xm(p,o))})},t=(i,s)=>{const o=this.resolve_,u=this.reject_,h=s.connection;if(s.wasSuccessCode)try{const d=this.callback_(h,h.getResponse());aB(d)?o(d):o()}catch(d){u(d)}else if(h!==null){const d=XF();d.serverResponse=h.getErrorText(),this.errorCallback_?u(this.errorCallback_(h,d)):u(d)}else if(s.canceled){const d=this.appDelete_?jD():ZF();u(d)}else{const d=JF();u(d)}};this.canceled_?t(!1,new xm(!1,null,!0)):this.backoffId_=rB(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&sB(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class xm{constructor(e,t,i){this.wasSuccessCode=e,this.connection=t,this.canceled=!!i}}function cB(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function hB(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function fB(n,e){e&&(n["X-Firebase-GMPID"]=e)}function dB(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function mB(n,e,t,i,s,o,u=!0,h=!1){const d=oB(n.urlParams),p=n.url+d,_=Object.assign({},n.headers);return fB(_,e),cB(_,t),hB(_,o),dB(_,i),new uB(p,n.method,_,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,s,u,h)}function pB(n){if(n.length===0)return null;const e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function gB(n){const e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}class Rp{constructor(e,t){this._service=e,t instanceof qi?this._location=t:this._location=qi.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Rp(e,t)}get root(){const e=new qi(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return gB(this._location.path)}get storage(){return this._service}get parent(){const e=pB(this._location.path);if(e===null)return null;const t=new qi(this._location.bucket,e);return new Rp(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw nB(e)}}function G0(n,e){const t=e?.[$F];return t==null?null:qi.makeFromBucketSpec(t,n)}function _B(n,e,t,i={}){n.host=`${e}:${t}`;const s=kr(e);s&&(Ef(`https://${n.host}/b`),Tf("Storage",!0)),n._isUsingEmulator=!0,n._protocol=s?"https":"http";const{mockUserToken:o}=i;o&&(n._overrideAuthToken=typeof o=="string"?o:uE(o,n.app.options.projectId))}class yB{constructor(e,t,i,s,o,u=!1){this.app=e,this._authProvider=t,this._appCheckProvider=i,this._url=s,this._firebaseVersion=o,this._isUsingEmulator=u,this._bucket=null,this._host=qD,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=YF,this._maxUploadRetryTime=WF,this._requests=new Set,s!=null?this._bucket=qi.makeFromBucketSpec(s,this._host):this._bucket=G0(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=qi.makeFromBucketSpec(this._url,e):this._bucket=G0(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){H0("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){H0("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(vn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Rp(this,e)}_makeRequest(e,t,i,s,o=!0){if(this._deleted)return new iB(jD());{const u=mB(e,this._appId,i,s,t,this._firebaseVersion,o,this._isUsingEmulator);return this._requests.add(u),u.getPromise().then(()=>this._requests.delete(u),()=>this._requests.delete(u)),u}}async makeRequestWithTokens(e,t){const[i,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,i,s).getPromise()}}const K0="@firebase/storage",Q0="0.14.0";const HD="storage";function vB(n=qu(),e){n=Ke(n);const i=Oa(n,HD).getImmediate({identifier:e}),s=Fp("storage");return s&&GD(i,...s),i}function GD(n,e,t,i={}){_B(n,e,t,i)}function EB(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),i=n.getProvider("auth-internal"),s=n.getProvider("app-check-internal");return new yB(t,i,s,e,Vr)}function TB(){Wi(new Ii(HD,EB,"PUBLIC").setMultipleInstances(!0)),hn(K0,Q0,""),hn(K0,Q0,"esm2020")}TB();var $0={};const Y0="@firebase/database",W0="1.1.0";let KD="";function wB(n){KD=n}class SB{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){t==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),yn(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return t==null?null:Hh(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class IB{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){t==null?delete this.cache_[e]:this.cache_[e]=t}get(e){return Yi(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const QD=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new SB(e)}}catch{}return new IB},xo=QD("localStorage"),AB=QD("sessionStorage");const hu=new wf("@firebase/database"),bB=(function(){let n=1;return function(){return n++}})(),$D=function(n){const e=jk(n),t=new Fk;t.update(e);const i=t.digest();return sE.encodeByteArray(i)},qf=function(...n){let e="";for(let t=0;t<n.length;t++){const i=n[t];Array.isArray(i)||i&&typeof i=="object"&&typeof i.length=="number"?e+=qf.apply(null,i):typeof i=="object"?e+=yn(i):e+=i,e+=" "}return e};let Lh=null,X0=!0;const RB=function(n,e){ce(!0,"Can't turn on custom loggers persistently."),hu.logLevel=Pe.VERBOSE,Lh=hu.log.bind(hu)},An=function(...n){if(X0===!0&&(X0=!1,Lh===null&&AB.get("logging_enabled")===!0&&RB()),Lh){const e=qf.apply(null,n);Lh(e)}},jf=function(n){return function(...e){An(n,...e)}},Bv=function(...n){const e="FIREBASE INTERNAL ERROR: "+qf(...n);hu.error(e)},_s=function(...n){const e=`FIREBASE FATAL ERROR: ${qf(...n)}`;throw hu.error(e),new Error(e)},ai=function(...n){const e="FIREBASE WARNING: "+qf(...n);hu.warn(e)},CB=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&ai("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},YD=function(n){return typeof n=="number"&&(n!==n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},NB=function(n){if(document.readyState==="complete")n();else{let e=!1;const t=function(){if(!document.body){setTimeout(t,Math.floor(10));return}e||(e=!0,n())};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&t()}),window.attachEvent("onload",t))}},ku="[MIN_NAME]",Go="[MAX_NAME]",Ju=function(n,e){if(n===e)return 0;if(n===ku||e===Go)return-1;if(e===ku||n===Go)return 1;{const t=J0(n),i=J0(e);return t!==null?i!==null?t-i===0?n.length-e.length:t-i:-1:i!==null?1:n<e?-1:1}},DB=function(n,e){return n===e?0:n<e?-1:1},dh=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+yn(e))},LT=function(n){if(typeof n!="object"||n===null)return yn(n);const e=[];for(const i in n)e.push(i);e.sort();let t="{";for(let i=0;i<e.length;i++)i!==0&&(t+=","),t+=yn(e[i]),t+=":",t+=LT(n[e[i]]);return t+="}",t},WD=function(n,e){const t=n.length;if(t<=e)return[n];const i=[];for(let s=0;s<t;s+=e)s+e>t?i.push(n.substring(s,t)):i.push(n.substring(s,s+e));return i};function bi(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const XD=function(n){ce(!YD(n),"Invalid JSON number");const e=11,t=52,i=(1<<e-1)-1;let s,o,u,h,d;n===0?(o=0,u=0,s=1/n===-1/0?1:0):(s=n<0,n=Math.abs(n),n>=Math.pow(2,1-i)?(h=Math.min(Math.floor(Math.log(n)/Math.LN2),i),o=h+i,u=Math.round(n*Math.pow(2,t-h)-Math.pow(2,t))):(o=0,u=Math.round(n/Math.pow(2,1-i-t))));const p=[];for(d=t;d;d-=1)p.push(u%2?1:0),u=Math.floor(u/2);for(d=e;d;d-=1)p.push(o%2?1:0),o=Math.floor(o/2);p.push(s?1:0),p.reverse();const _=p.join("");let y="";for(d=0;d<64;d+=8){let w=parseInt(_.substr(d,8),2).toString(16);w.length===1&&(w="0"+w),y=y+w}return y.toLowerCase()},OB=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},xB=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"},PB=new RegExp("^-?(0*)\\d{1,10}$"),MB=-2147483648,kB=2147483647,J0=function(n){if(PB.test(n)){const e=Number(n);if(e>=MB&&e<=kB)return e}return null},Hf=function(n){try{n()}catch(e){setTimeout(()=>{const t=e.stack||"";throw ai("Exception was thrown by user callback.",t),e},Math.floor(0))}},VB=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Uh=function(n,e){const t=setTimeout(n,e);return typeof t=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):typeof t=="object"&&t.unref&&t.unref(),t};class LB{constructor(e,t){this.appCheckProvider=t,this.appName=e.name,vn(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(i=>this.appCheck=i)}getToken(e){if(this.serverAppAppCheckToken){if(e)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(e):new Promise((t,i)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,i):t(null)},0)})}addTokenChangeListener(e){this.appCheckProvider?.get().then(t=>t.addTokenListener(e))}notifyForInvalidToken(){ai(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}}class UB{constructor(e,t,i){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=i,this.auth_=null,this.auth_=i.getImmediate({optional:!0}),this.auth_||i.onInit(s=>this.auth_=s)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&t.code==="auth/token-not-initialized"?(An("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,i)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,i):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',ai(e)}}class Jm{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}Jm.OWNER="owner";const UT="5",JD="v",ZD="s",eO="r",tO="f",nO=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,iO="ls",rO="p",zv="ac",sO="websocket",aO="long_polling";class oO{constructor(e,t,i,s,o=!1,u="",h=!1,d=!1,p=null){this.secure=t,this.namespace=i,this.webSocketOnly=s,this.nodeAdmin=o,this.persistenceKey=u,this.includeNamespaceInQueryParams=h,this.isUsingEmulator=d,this.emulatorOptions=p,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=xo.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&xo.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${t}`}}function FB(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams}function lO(n,e,t){ce(typeof e=="string","typeof type must == string"),ce(typeof t=="object","typeof params must == object");let i;if(e===sO)i=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else if(e===aO)i=(n.secure?"https://":"http://")+n.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);FB(n)&&(t.ns=n.namespace);const s=[];return bi(t,(o,u)=>{s.push(o+"="+u)}),i+s.join("&")}class BB{constructor(){this.counters_={}}incrementCounter(e,t=1){Yi(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return Tk(this.counters_)}}const Gy={},Ky={};function FT(n){const e=n.toString();return Gy[e]||(Gy[e]=new BB),Gy[e]}function zB(n,e){const t=n.toString();return Ky[t]||(Ky[t]=e()),Ky[t]}class qB{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const i=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let s=0;s<i.length;++s)i[s]&&Hf(()=>{this.onMessage_(i[s])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}const Z0="start",jB="close",HB="pLPCommand",GB="pRTLPCB",uO="id",cO="pw",hO="ser",KB="cb",QB="seg",$B="ts",YB="d",WB="dframe",fO=1870,dO=30,XB=fO-dO,JB=25e3,ZB=3e4;class ru{constructor(e,t,i,s,o,u,h){this.connId=e,this.repoInfo=t,this.applicationId=i,this.appCheckToken=s,this.authToken=o,this.transportSessionId=u,this.lastSessionId=h,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=jf(e),this.stats_=FT(t),this.urlFn=d=>(this.appCheckToken&&(d[zv]=this.appCheckToken),lO(t,aO,d))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new qB(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(ZB)),NB(()=>{if(this.isClosed_)return;this.scriptTagHolder=new BT((...o)=>{const[u,h,d,p,_]=o;if(this.incrementIncomingBytes_(o),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,u===Z0)this.id=h,this.password=d;else if(u===jB)h?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(h,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+u)},(...o)=>{const[u,h]=o;this.incrementIncomingBytes_(o),this.myPacketOrderer.handleResponse(u,h)},()=>{this.onClosed_()},this.urlFn);const i={};i[Z0]="t",i[hO]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(i[KB]=this.scriptTagHolder.uniqueCallbackIdentifier),i[JD]=UT,this.transportSessionId&&(i[ZD]=this.transportSessionId),this.lastSessionId&&(i[iO]=this.lastSessionId),this.applicationId&&(i[rO]=this.applicationId),this.appCheckToken&&(i[zv]=this.appCheckToken),typeof location<"u"&&location.hostname&&nO.test(location.hostname)&&(i[eO]=tO);const s=this.urlFn(i);this.log_("Connecting via long-poll to "+s),this.scriptTagHolder.addTag(s,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){ru.forceAllow_=!0}static forceDisallow(){ru.forceDisallow_=!0}static isAvailable(){return ru.forceAllow_?!0:!ru.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!OB()&&!xB()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=yn(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const i=WR(t),s=WD(i,XB);for(let o=0;o<s.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,s.length,s[o]),this.curSegmentNum++}addDisconnectPingFrame(e,t){this.myDisconnFrame=document.createElement("iframe");const i={};i[WB]="t",i[uO]=e,i[cO]=t,this.myDisconnFrame.src=this.urlFn(i),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=yn(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class BT{constructor(e,t,i,s){this.onDisconnect=i,this.urlFn=s,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=bB(),window[HB+this.uniqueCallbackIdentifier]=e,window[GB+this.uniqueCallbackIdentifier]=t,this.myIFrame=BT.createIFrame_();let o="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(o='<script>document.domain="'+document.domain+'";<\/script>');const u="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(u),this.myIFrame.doc.close()}catch(h){An("frame writing exception"),h.stack&&An(h.stack),An(h)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||An("No IE domain setting required")}catch{const i=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+i+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[uO]=this.myID,e[cO]=this.myPW,e[hO]=this.currentSerial;let t=this.urlFn(e),i="",s=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+dO+i.length<=fO;){const u=this.pendingSegs.shift();i=i+"&"+QB+s+"="+u.seg+"&"+$B+s+"="+u.ts+"&"+YB+s+"="+u.d,s++}return t=t+i,this.addLongPollTag_(t,this.currentSerial),!0}else return!1}enqueueSegment(e,t,i){this.pendingSegs.push({seg:e,ts:t,d:i}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const i=()=>{this.outstandingRequests.delete(t),this.newRequest_()},s=setTimeout(i,Math.floor(JB)),o=()=>{clearTimeout(s),i()};this.addTag(e,o)}addTag(e,t){setTimeout(()=>{try{if(!this.sendNewPolls)return;const i=this.myIFrame.doc.createElement("script");i.type="text/javascript",i.async=!0,i.src=e,i.onload=i.onreadystatechange=function(){const s=i.readyState;(!s||s==="loaded"||s==="complete")&&(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),t())},i.onerror=()=>{An("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(i)}catch{}},Math.floor(1))}}const e9=16384,t9=45e3;let Cp=null;typeof MozWebSocket<"u"?Cp=MozWebSocket:typeof WebSocket<"u"&&(Cp=WebSocket);class Bi{constructor(e,t,i,s,o,u,h){this.connId=e,this.applicationId=i,this.appCheckToken=s,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=jf(this.connId),this.stats_=FT(t),this.connURL=Bi.connectionURL_(t,u,h,s,i),this.nodeAdmin=t.nodeAdmin}static connectionURL_(e,t,i,s,o){const u={};return u[JD]=UT,typeof location<"u"&&location.hostname&&nO.test(location.hostname)&&(u[eO]=tO),t&&(u[ZD]=t),i&&(u[iO]=i),s&&(u[zv]=s),o&&(u[rO]=o),lO(e,sO,u)}open(e,t){this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,xo.set("previous_websocket_failure",!0);try{let i;xk(),this.mySock=new Cp(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const s=i.message||i.data;s&&this.log_(s),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const s=i.message||i.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){Bi.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const t=/Android ([0-9]{0,}\.[0-9]{0,})/,i=navigator.userAgent.match(t);i&&i.length>1&&parseFloat(i[1])<4.4&&(e=!0)}return!e&&Cp!==null&&!Bi.forceDisallow_}static previouslyFailed(){return xo.isInMemoryStorage||xo.get("previous_websocket_failure")===!0}markConnectionHealthy(){xo.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const t=this.frames.join("");this.frames=null;const i=Hh(t);this.onMessage(i)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(ce(this.frames===null,"We already have a frame buffer"),e.length<=6){const t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(t);else{const i=this.extractFrameCount_(t);i!==null&&this.appendFrame_(i)}}send(e){this.resetKeepAlive();const t=yn(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const i=WD(t,e9);i.length>1&&this.sendString_(String(i.length));for(let s=0;s<i.length;s++)this.sendString_(i[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(t9))}sendString_(e){try{this.mySock.send(e)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}Bi.responsesRequiredToBeHealthy=2;Bi.healthyTimeout=3e4;class df{static get ALL_TRANSPORTS(){return[ru,Bi]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(e){this.initTransports_(e)}initTransports_(e){const t=Bi&&Bi.isAvailable();let i=t&&!Bi.previouslyFailed();if(e.webSocketOnly&&(t||ai("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[Bi];else{const s=this.transports_=[];for(const o of df.ALL_TRANSPORTS)o&&o.isAvailable()&&s.push(o);df.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}df.globalTransportInitialized_=!1;const n9=6e4,i9=5e3,r9=10*1024,s9=100*1024,Qy="t",eR="d",a9="s",tR="r",o9="e",nR="o",iR="a",rR="n",sR="p",l9="h";class u9{constructor(e,t,i,s,o,u,h,d,p,_){this.id=e,this.repoInfo_=t,this.applicationId_=i,this.appCheckToken_=s,this.authToken_=o,this.onMessage_=u,this.onReady_=h,this.onDisconnect_=d,this.onKill_=p,this.lastSessionId=_,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=jf("c:"+this.id+":"),this.transportManager_=new df(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),i=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,i)},Math.floor(0));const s=e.healthyTimeout||0;s>0&&(this.healthyTimeout_=Uh(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>s9?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>r9?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(s)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){const t={t:"d",d:e};this.sendData_(t)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(Qy in e){const t=e[Qy];t===iR?this.upgradeIfSecondaryHealthy_():t===tR?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):t===nR&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=dh("t",e),i=dh("d",e);if(t==="c")this.onSecondaryControl_(i);else if(t==="d")this.pendingDataMessages.push(i);else throw new Error("Unknown protocol layer: "+t)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:sR,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:iR,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:rR,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=dh("t",e),i=dh("d",e);t==="c"?this.onControl_(i):t==="d"&&this.onDataMessage_(i)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=dh(Qy,e);if(eR in e){const i=e[eR];if(t===l9){const s={...i};this.repoInfo_.isUsingEmulator&&(s.h=this.repoInfo_.host),this.onHandshake_(s)}else if(t===rR){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let s=0;s<this.pendingDataMessages.length;++s)this.onDataMessage_(this.pendingDataMessages[s]);this.pendingDataMessages=[],this.tryCleanupConnection()}else t===a9?this.onConnectionShutdown_(i):t===tR?this.onReset_(i):t===o9?Bv("Server Error: "+i):t===nR?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Bv("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,i=e.v,s=e.h;this.sessionId=e.s,this.repoInfo_.host=s,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),UT!==i&&ai("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),i=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,i),Uh(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(n9))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Uh(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(i9))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:sR,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(xo.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class mO{put(e,t,i,s){}merge(e,t,i,s){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,i){}onDisconnectMerge(e,t,i){}onDisconnectCancel(e,t){}reportStats(e){}}class pO{constructor(e){this.allowedEvents_=e,this.listeners_={},ce(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const i=[...this.listeners_[e]];for(let s=0;s<i.length;s++)i[s].callback.apply(i[s].context,t)}}on(e,t,i){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:i});const s=this.getInitialEvent(e);s&&t.apply(i,s)}off(e,t,i){this.validateEventType_(e);const s=this.listeners_[e]||[];for(let o=0;o<s.length;o++)if(s[o].callback===t&&(!i||i===s[o].context)){s.splice(o,1);return}}validateEventType_(e){ce(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class Np extends pO{static getInstance(){return new Np}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!cE()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(e){return ce(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}const aR=32,oR=768;class vt{constructor(e,t){if(t===void 0){this.pieces_=e.split("/");let i=0;for(let s=0;s<this.pieces_.length;s++)this.pieces_[s].length>0&&(this.pieces_[i]=this.pieces_[s],i++);this.pieces_.length=i,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)this.pieces_[t]!==""&&(e+="/"+this.pieces_[t]);return e||"/"}}function ht(){return new vt("")}function He(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function Da(n){return n.pieces_.length-n.pieceNum_}function _t(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new vt(n.pieces_,e)}function gO(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function c9(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)n.pieces_[t]!==""&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}function _O(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function yO(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new vt(e,0)}function cn(n,e){const t=[];for(let i=n.pieceNum_;i<n.pieces_.length;i++)t.push(n.pieces_[i]);if(e instanceof vt)for(let i=e.pieceNum_;i<e.pieces_.length;i++)t.push(e.pieces_[i]);else{const i=e.split("/");for(let s=0;s<i.length;s++)i[s].length>0&&t.push(i[s])}return new vt(t,0)}function ze(n){return n.pieceNum_>=n.pieces_.length}function wi(n,e){const t=He(n),i=He(e);if(t===null)return e;if(t===i)return wi(_t(n),_t(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function vO(n,e){if(Da(n)!==Da(e))return!1;for(let t=n.pieceNum_,i=e.pieceNum_;t<=n.pieces_.length;t++,i++)if(n.pieces_[t]!==e.pieces_[i])return!1;return!0}function ji(n,e){let t=n.pieceNum_,i=e.pieceNum_;if(Da(n)>Da(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[i])return!1;++t,++i}return!0}class h9{constructor(e,t){this.errorPrefix_=t,this.parts_=_O(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let i=0;i<this.parts_.length;i++)this.byteLength_+=Bp(this.parts_[i]);EO(this)}}function f9(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=Bp(e),EO(n)}function d9(n){const e=n.parts_.pop();n.byteLength_-=Bp(e),n.parts_.length>0&&(n.byteLength_-=1)}function EO(n){if(n.byteLength_>oR)throw new Error(n.errorPrefix_+"has a key path longer than "+oR+" bytes ("+n.byteLength_+").");if(n.parts_.length>aR)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+aR+") or object contains a cycle "+wo(n))}function wo(n){return n.parts_.length===0?"":"in property '"+n.parts_.join(".")+"'"}class zT extends pO{static getInstance(){return new zT}constructor(){super(["visible"]);let e,t;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const i=!document[e];i!==this.visible_&&(this.visible_=i,this.trigger("visible",i))},!1)}getInitialEvent(e){return ce(e==="visible","Unknown event type: "+e),[this.visible_]}}const mh=1e3,m9=300*1e3,lR=30*1e3,p9=1.3,g9=3e4,_9="server_kill",uR=3;class hs extends mO{constructor(e,t,i,s,o,u,h,d){if(super(),this.repoInfo_=e,this.applicationId_=t,this.onDataUpdate_=i,this.onConnectStatus_=s,this.onServerInfoUpdate_=o,this.authTokenProvider_=u,this.appCheckTokenProvider_=h,this.authOverride_=d,this.id=hs.nextPersistentConnectionId_++,this.log_=jf("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=mh,this.maxReconnectDelay_=m9,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,d)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");zT.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&Np.getInstance().on("online",this.onOnline_,this)}sendRequest(e,t,i){const s=++this.requestNumber_,o={r:s,a:e,b:t};this.log_(yn(o)),ce(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(o),i&&(this.requestCBHash_[s]=i)}get(e){this.initConnection_();const t=new lE,s={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:u=>{const h=u.d;u.s==="ok"?t.resolve(h):t.reject(h)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;const o=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(o),t.promise}listen(e,t,i,s){this.initConnection_();const o=e._queryIdentifier,u=e._path.toString();this.log_("Listen called for "+u+" "+o),this.listens.has(u)||this.listens.set(u,new Map),ce(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),ce(!this.listens.get(u).has(o),"listen() called twice for same path/queryId.");const h={onComplete:s,hashFn:t,query:e,tag:i};this.listens.get(u).set(o,h),this.connected_&&this.sendListen_(h)}sendGet_(e){const t=this.outstandingGets_[e];this.sendRequest("g",t.request,i=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),t.onComplete&&t.onComplete(i)})}sendListen_(e){const t=e.query,i=t._path.toString(),s=t._queryIdentifier;this.log_("Listen on "+i+" for "+s);const o={p:i},u="q";e.tag&&(o.q=t._queryObject,o.t=e.tag),o.h=e.hashFn(),this.sendRequest(u,o,h=>{const d=h.d,p=h.s;hs.warnOnListenWarnings_(d,t),(this.listens.get(i)&&this.listens.get(i).get(s))===e&&(this.log_("listen response",h),p!=="ok"&&this.removeListen_(i,s),e.onComplete&&e.onComplete(p,d))})}static warnOnListenWarnings_(e,t){if(e&&typeof e=="object"&&Yi(e,"w")){const i=du(e,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const s='".indexOn": "'+t._queryParams.getIndex().toString()+'"',o=t._path.toString();ai(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${o} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||Uk(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=lR)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,t=Lk(e)?"auth":"gauth",i={cred:e};this.authOverride_===null?i.noauth=!0:typeof this.authOverride_=="object"&&(i.authvar=this.authOverride_),this.sendRequest(t,i,s=>{const o=s.s,u=s.d||"error";this.authToken_===e&&(o==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(o,u))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const t=e.s,i=e.d||"error";t==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(t,i)})}unlisten(e,t){const i=e._path.toString(),s=e._queryIdentifier;this.log_("Unlisten called for "+i+" "+s),ce(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,s)&&this.connected_&&this.sendUnlisten_(i,s,e._queryObject,t)}sendUnlisten_(e,t,i,s){this.log_("Unlisten on "+e+" for "+t);const o={p:e},u="n";s&&(o.q=i,o.t=s),this.sendRequest(u,o)}onDisconnectPut(e,t,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:i})}onDisconnectMerge(e,t,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:i})}onDisconnectCancel(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})}sendOnDisconnect_(e,t,i,s){const o={p:t,d:i};this.log_("onDisconnect "+e,o),this.sendRequest(e,o,u=>{s&&setTimeout(()=>{s(u.s,u.d)},Math.floor(0))})}put(e,t,i,s){this.putInternal("p",e,t,i,s)}merge(e,t,i,s){this.putInternal("m",e,t,i,s)}putInternal(e,t,i,s,o){this.initConnection_();const u={p:t,d:i};o!==void 0&&(u.h=o),this.outstandingPuts_.push({action:e,request:u,onComplete:s}),this.outstandingPutCount_++;const h=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(h):this.log_("Buffering put: "+t)}sendPut_(e){const t=this.outstandingPuts_[e].action,i=this.outstandingPuts_[e].request,s=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(t,i,o=>{this.log_(t+" response",o),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),s&&s(o.s,o.d)})}reportStats(e){if(this.connected_){const t={c:e};this.log_("reportStats",t),this.sendRequest("s",t,i=>{if(i.s!=="ok"){const o=i.d;this.log_("reportStats","Error sending stats: "+o)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+yn(e));const t=e.r,i=this.requestCBHash_[t];i&&(delete this.requestCBHash_[t],i(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,t){this.log_("handleServerMessage",e,t),e==="d"?this.onDataUpdate_(t.p,t.d,!1,t.t):e==="m"?this.onDataUpdate_(t.p,t.d,!0,t.t):e==="c"?this.onListenRevoked_(t.p,t.q):e==="ac"?this.onAuthRevoked_(t.s,t.d):e==="apc"?this.onAppCheckRevoked_(t.s,t.d):e==="sd"?this.onSecurityDebugPacket_(t):Bv("Unrecognized action received from server: "+yn(e)+`
Are you using the latest client?`)}onReady_(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){ce(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=mh,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=mh,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>g9&&(this.reconnectDelay_=mh),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_);let t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*p9)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),t=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+hs.nextConnectionId_++,o=this.lastSessionId;let u=!1,h=null;const d=function(){h?h.close():(u=!0,i())},p=function(y){ce(h,"sendRequest call when we're not connected not allowed."),h.sendRequest(y)};this.realtime_={close:d,sendRequest:p};const _=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[y,w]=await Promise.all([this.authTokenProvider_.getToken(_),this.appCheckTokenProvider_.getToken(_)]);u?An("getToken() completed but was canceled"):(An("getToken() completed. Creating connection."),this.authToken_=y&&y.accessToken,this.appCheckToken_=w&&w.token,h=new u9(s,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,t,i,A=>{ai(A+" ("+this.repoInfo_.toString()+")"),this.interrupt(_9)},o))}catch(y){this.log_("Failed to get token: "+y),u||(this.repoInfo_.nodeAdmin&&ai(y),d())}}}interrupt(e){An("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){An("Resuming connection for reason: "+e),delete this.interruptReasons_[e],ev(this.interruptReasons_)&&(this.reconnectDelay_=mh,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const t=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:t})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,t){let i;t?i=t.map(o=>LT(o)).join("$"):i="default";const s=this.removeListen_(e,i);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(e,t){const i=new vt(e).toString();let s;if(this.listens.has(i)){const o=this.listens.get(i);s=o.get(t),o.delete(t),o.size===0&&this.listens.delete(i)}else s=void 0;return s}onAuthRevoked_(e,t){An("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=uR&&(this.reconnectDelay_=lR,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,t){An("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=uR&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const t of e.values())this.sendListen_(t);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let t="js";e["sdk."+t+"."+KD.replace(/\./g,"-")]=1,cE()?e["framework.cordova"]=1:tC()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=Np.getInstance().currentlyOnline();return ev(this.interruptReasons_)&&e}}hs.nextPersistentConnectionId_=0;hs.nextConnectionId_=0;class Ge{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new Ge(e,t)}}class _g{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const i=new Ge(ku,e),s=new Ge(ku,t);return this.compare(i,s)!==0}minPost(){return Ge.MIN}}let Pm;class TO extends _g{static get __EMPTY_NODE(){return Pm}static set __EMPTY_NODE(e){Pm=e}compare(e,t){return Ju(e.name,t.name)}isDefinedOn(e){throw Bu("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return Ge.MIN}maxPost(){return new Ge(Go,Pm)}makePost(e,t){return ce(typeof e=="string","KeyIndex indexValue must always be a string."),new Ge(e,Pm)}toString(){return".key"}}const fu=new TO;class Mm{constructor(e,t,i,s,o=null){this.isReverse_=s,this.resultGenerator_=o,this.nodeStack_=[];let u=1;for(;!e.isEmpty();)if(e=e,u=t?i(e.key,t):1,s&&(u*=-1),u<0)this.isReverse_?e=e.left:e=e.right;else if(u===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),t;if(this.resultGenerator_?t=this.resultGenerator_(e.key,e.value):t={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class un{constructor(e,t,i,s,o){this.key=e,this.value=t,this.color=i??un.RED,this.left=s??$n.EMPTY_NODE,this.right=o??$n.EMPTY_NODE}copy(e,t,i,s,o){return new un(e??this.key,t??this.value,i??this.color,s??this.left,o??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let s=this;const o=i(e,s.key);return o<0?s=s.copy(null,null,null,s.left.insert(e,t,i),null):o===0?s=s.copy(null,t,null,null,null):s=s.copy(null,null,null,null,s.right.insert(e,t,i)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return $n.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,t){let i,s;if(i=this,t(e,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),t(e,i.key)===0){if(i.right.isEmpty())return $n.EMPTY_NODE;s=i.right.min_(),i=i.copy(s.key,s.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,un.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,un.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}un.RED=!0;un.BLACK=!1;class y9{copy(e,t,i,s,o){return this}insert(e,t,i){return new un(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class $n{constructor(e,t=$n.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new $n(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,un.BLACK,null,null))}remove(e){return new $n(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,un.BLACK,null,null))}get(e){let t,i=this.root_;for(;!i.isEmpty();){if(t=this.comparator_(e,i.key),t===0)return i.value;t<0?i=i.left:t>0&&(i=i.right)}return null}getPredecessorKey(e){let t,i=this.root_,s=null;for(;!i.isEmpty();)if(t=this.comparator_(e,i.key),t===0){if(i.left.isEmpty())return s?s.key:null;for(i=i.left;!i.right.isEmpty();)i=i.right;return i.key}else t<0?i=i.left:t>0&&(s=i,i=i.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Mm(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new Mm(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new Mm(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new Mm(this.root_,null,this.comparator_,!0,e)}}$n.EMPTY_NODE=new y9;function v9(n,e){return Ju(n.name,e.name)}function qT(n,e){return Ju(n,e)}let qv;function E9(n){qv=n}const wO=function(n){return typeof n=="number"?"number:"+XD(n):"string:"+n},SO=function(n){if(n.isLeafNode()){const e=n.val();ce(typeof e=="string"||typeof e=="number"||typeof e=="object"&&Yi(e,".sv"),"Priority must be a string or number.")}else ce(n===qv||n.isEmpty(),"priority of unexpected type.");ce(n===qv||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let cR;class an{static set __childrenNodeConstructor(e){cR=e}static get __childrenNodeConstructor(){return cR}constructor(e,t=an.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=t,this.lazyHash_=null,ce(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),SO(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new an(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:an.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return ze(e)?this:He(e)===".priority"?this.priorityNode_:an.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,t){return null}updateImmediateChild(e,t){return e===".priority"?this.updatePriority(t):t.isEmpty()&&e!==".priority"?this:an.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,t).updatePriority(this.priorityNode_)}updateChild(e,t){const i=He(e);return i===null?t:t.isEmpty()&&i!==".priority"?this:(ce(i!==".priority"||Da(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(i,an.__childrenNodeConstructor.EMPTY_NODE.updateChild(_t(e),t)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,t){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+wO(this.priorityNode_.val())+":");const t=typeof this.value_;e+=t+":",t==="number"?e+=XD(this.value_):e+=this.value_,this.lazyHash_=$D(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===an.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof an.__childrenNodeConstructor?-1:(ce(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const t=typeof e.value_,i=typeof this.value_,s=an.VALUE_TYPE_ORDER.indexOf(t),o=an.VALUE_TYPE_ORDER.indexOf(i);return ce(s>=0,"Unknown leaf type: "+t),ce(o>=0,"Unknown leaf type: "+i),s===o?i==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:o-s}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}else return!1}}an.VALUE_TYPE_ORDER=["object","boolean","number","string"];let IO,AO;function T9(n){IO=n}function w9(n){AO=n}class S9 extends _g{compare(e,t){const i=e.node.getPriority(),s=t.node.getPriority(),o=i.compareTo(s);return o===0?Ju(e.name,t.name):o}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return Ge.MIN}maxPost(){return new Ge(Go,new an("[PRIORITY-POST]",AO))}makePost(e,t){const i=IO(e);return new Ge(t,new an("[PRIORITY-POST]",i))}toString(){return".priority"}}const Cn=new S9;const I9=Math.log(2);class A9{constructor(e){const t=o=>parseInt(Math.log(o)/I9,10),i=o=>parseInt(Array(o+1).join("1"),2);this.count=t(e+1),this.current_=this.count-1;const s=i(this.count);this.bits_=e+1&s}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const Dp=function(n,e,t,i){n.sort(e);const s=function(d,p){const _=p-d;let y,w;if(_===0)return null;if(_===1)return y=n[d],w=t?t(y):y,new un(w,y.node,un.BLACK,null,null);{const A=parseInt(_/2,10)+d,O=s(d,A),F=s(A+1,p);return y=n[A],w=t?t(y):y,new un(w,y.node,un.BLACK,O,F)}},o=function(d){let p=null,_=null,y=n.length;const w=function(O,F){const V=y-O,X=y;y-=O;const ne=s(V+1,X),te=n[V],fe=t?t(te):te;A(new un(fe,te.node,F,null,ne))},A=function(O){p?(p.left=O,p=O):(_=O,p=O)};for(let O=0;O<d.count;++O){const F=d.nextBitIsOne(),V=Math.pow(2,d.count-(O+1));F?w(V,un.BLACK):(w(V,un.BLACK),w(V,un.RED))}return _},u=new A9(n.length),h=o(u);return new $n(i||e,h)};let $y;const Jl={};class ls{static get Default(){return ce(Jl&&Cn,"ChildrenNode.ts has not been loaded"),$y=$y||new ls({".priority":Jl},{".priority":Cn}),$y}constructor(e,t){this.indexes_=e,this.indexSet_=t}get(e){const t=du(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof $n?t:null}hasIndex(e){return Yi(this.indexSet_,e.toString())}addIndex(e,t){ce(e!==fu,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const i=[];let s=!1;const o=t.getIterator(Ge.Wrap);let u=o.getNext();for(;u;)s=s||e.isDefinedOn(u.node),i.push(u),u=o.getNext();let h;s?h=Dp(i,e.getCompare()):h=Jl;const d=e.toString(),p={...this.indexSet_};p[d]=e;const _={...this.indexes_};return _[d]=h,new ls(_,p)}addToIndexes(e,t){const i=tp(this.indexes_,(s,o)=>{const u=du(this.indexSet_,o);if(ce(u,"Missing index implementation for "+o),s===Jl)if(u.isDefinedOn(e.node)){const h=[],d=t.getIterator(Ge.Wrap);let p=d.getNext();for(;p;)p.name!==e.name&&h.push(p),p=d.getNext();return h.push(e),Dp(h,u.getCompare())}else return Jl;else{const h=t.get(e.name);let d=s;return h&&(d=d.remove(new Ge(e.name,h))),d.insert(e,e.node)}});return new ls(i,this.indexSet_)}removeFromIndexes(e,t){const i=tp(this.indexes_,s=>{if(s===Jl)return s;{const o=t.get(e.name);return o?s.remove(new Ge(e.name,o)):s}});return new ls(i,this.indexSet_)}}let ph;class et{static get EMPTY_NODE(){return ph||(ph=new et(new $n(qT),null,ls.Default))}constructor(e,t,i){this.children_=e,this.priorityNode_=t,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&SO(this.priorityNode_),this.children_.isEmpty()&&ce(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||ph}updatePriority(e){return this.children_.isEmpty()?this:new et(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const t=this.children_.get(e);return t===null?ph:t}}getChild(e){const t=He(e);return t===null?this:this.getImmediateChild(t).getChild(_t(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,t){if(ce(t,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(t);{const i=new Ge(e,t);let s,o;t.isEmpty()?(s=this.children_.remove(e),o=this.indexMap_.removeFromIndexes(i,this.children_)):(s=this.children_.insert(e,t),o=this.indexMap_.addToIndexes(i,this.children_));const u=s.isEmpty()?ph:this.priorityNode_;return new et(s,u,o)}}updateChild(e,t){const i=He(e);if(i===null)return t;{ce(He(e)!==".priority"||Da(e)===1,".priority must be the last token in a path");const s=this.getImmediateChild(i).updateChild(_t(e),t);return this.updateImmediateChild(i,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const t={};let i=0,s=0,o=!0;if(this.forEachChild(Cn,(u,h)=>{t[u]=h.val(e),i++,o&&et.INTEGER_REGEXP_.test(u)?s=Math.max(s,Number(u)):o=!1}),!e&&o&&s<2*i){const u=[];for(const h in t)u[h]=t[h];return u}else return e&&!this.getPriority().isEmpty()&&(t[".priority"]=this.getPriority().val()),t}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+wO(this.getPriority().val())+":"),this.forEachChild(Cn,(t,i)=>{const s=i.hash();s!==""&&(e+=":"+t+":"+s)}),this.lazyHash_=e===""?"":$D(e)}return this.lazyHash_}getPredecessorChildName(e,t,i){const s=this.resolveIndex_(i);if(s){const o=s.getPredecessorKey(new Ge(e,t));return o?o.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const t=this.resolveIndex_(e);if(t){const i=t.minKey();return i&&i.name}else return this.children_.minKey()}getFirstChild(e){const t=this.getFirstChildName(e);return t?new Ge(t,this.children_.get(t)):null}getLastChildName(e){const t=this.resolveIndex_(e);if(t){const i=t.maxKey();return i&&i.name}else return this.children_.maxKey()}getLastChild(e){const t=this.getLastChildName(e);return t?new Ge(t,this.children_.get(t)):null}forEachChild(e,t){const i=this.resolveIndex_(e);return i?i.inorderTraversal(s=>t(s.name,s.node)):this.children_.inorderTraversal(t)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,t){const i=this.resolveIndex_(t);if(i)return i.getIteratorFrom(e,s=>s);{const s=this.children_.getIteratorFrom(e.name,Ge.Wrap);let o=s.peek();for(;o!=null&&t.compare(o,e)<0;)s.getNext(),o=s.peek();return s}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,t){const i=this.resolveIndex_(t);if(i)return i.getReverseIteratorFrom(e,s=>s);{const s=this.children_.getReverseIteratorFrom(e.name,Ge.Wrap);let o=s.peek();for(;o!=null&&t.compare(o,e)>0;)s.getNext(),o=s.peek();return s}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===Gf?-1:0}withIndex(e){if(e===fu||this.indexMap_.hasIndex(e))return this;{const t=this.indexMap_.addIndex(e,this.children_);return new et(this.children_,this.priorityNode_,t)}}isIndexed(e){return e===fu||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const t=e;if(this.getPriority().equals(t.getPriority()))if(this.children_.count()===t.children_.count()){const i=this.getIterator(Cn),s=t.getIterator(Cn);let o=i.getNext(),u=s.getNext();for(;o&&u;){if(o.name!==u.name||!o.node.equals(u.node))return!1;o=i.getNext(),u=s.getNext()}return o===null&&u===null}else return!1;else return!1}}resolveIndex_(e){return e===fu?null:this.indexMap_.get(e.toString())}}et.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class b9 extends et{constructor(){super(new $n(qT),et.EMPTY_NODE,ls.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return et.EMPTY_NODE}isEmpty(){return!1}}const Gf=new b9;Object.defineProperties(Ge,{MIN:{value:new Ge(ku,et.EMPTY_NODE)},MAX:{value:new Ge(Go,Gf)}});TO.__EMPTY_NODE=et.EMPTY_NODE;an.__childrenNodeConstructor=et;E9(Gf);w9(Gf);const R9=!0;function bn(n,e=null){if(n===null)return et.EMPTY_NODE;if(typeof n=="object"&&".priority"in n&&(e=n[".priority"]),ce(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof n=="object"&&".value"in n&&n[".value"]!==null&&(n=n[".value"]),typeof n!="object"||".sv"in n){const t=n;return new an(t,bn(e))}if(!(n instanceof Array)&&R9){const t=[];let i=!1;if(bi(n,(u,h)=>{if(u.substring(0,1)!=="."){const d=bn(h);d.isEmpty()||(i=i||!d.getPriority().isEmpty(),t.push(new Ge(u,d)))}}),t.length===0)return et.EMPTY_NODE;const o=Dp(t,v9,u=>u.name,qT);if(i){const u=Dp(t,Cn.getCompare());return new et(o,bn(e),new ls({".priority":u},{".priority":Cn}))}else return new et(o,bn(e),ls.Default)}else{let t=et.EMPTY_NODE;return bi(n,(i,s)=>{if(Yi(n,i)&&i.substring(0,1)!=="."){const o=bn(s);(o.isLeafNode()||!o.isEmpty())&&(t=t.updateImmediateChild(i,o))}}),t.updatePriority(bn(e))}}T9(bn);class C9 extends _g{constructor(e){super(),this.indexPath_=e,ce(!ze(e)&&He(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const i=this.extractChild(e.node),s=this.extractChild(t.node),o=i.compareTo(s);return o===0?Ju(e.name,t.name):o}makePost(e,t){const i=bn(e),s=et.EMPTY_NODE.updateChild(this.indexPath_,i);return new Ge(t,s)}maxPost(){const e=et.EMPTY_NODE.updateChild(this.indexPath_,Gf);return new Ge(Go,e)}toString(){return _O(this.indexPath_,0).join("/")}}class N9 extends _g{compare(e,t){const i=e.node.compareTo(t.node);return i===0?Ju(e.name,t.name):i}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return Ge.MIN}maxPost(){return Ge.MAX}makePost(e,t){const i=bn(e);return new Ge(t,i)}toString(){return".value"}}const D9=new N9;function O9(n){return{type:"value",snapshotNode:n}}function x9(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function P9(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function hR(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}function M9(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}class jT{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Cn}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return ce(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return ce(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:ku}hasEnd(){return this.endSet_}getIndexEndValue(){return ce(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return ce(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Go}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return ce(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Cn}copy(){const e=new jT;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function fR(n){const e={};if(n.isDefault())return e;let t;if(n.index_===Cn?t="$priority":n.index_===D9?t="$value":n.index_===fu?t="$key":(ce(n.index_ instanceof C9,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=yn(t),n.startSet_){const i=n.startAfterSet_?"startAfter":"startAt";e[i]=yn(n.indexStartValue_),n.startNameSet_&&(e[i]+=","+yn(n.indexStartName_))}if(n.endSet_){const i=n.endBeforeSet_?"endBefore":"endAt";e[i]=yn(n.indexEndValue_),n.endNameSet_&&(e[i]+=","+yn(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function dR(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_),e.sin=!n.startAfterSet_),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_),e.ein=!n.endBeforeSet_),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;t===""&&(n.isViewFromLeft()?t="l":t="r"),e.vf=t}return n.index_!==Cn&&(e.i=n.index_.toString()),e}class Op extends mO{reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return t!==void 0?"tag$"+t:(ce(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}constructor(e,t,i,s){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=i,this.appCheckTokenProvider_=s,this.log_=jf("p:rest:"),this.listens_={}}listen(e,t,i,s){const o=e._path.toString();this.log_("Listen called for "+o+" "+e._queryIdentifier);const u=Op.getListenId_(e,i),h={};this.listens_[u]=h;const d=fR(e._queryParams);this.restRequest_(o+".json",d,(p,_)=>{let y=_;if(p===404&&(y=null,p=null),p===null&&this.onDataUpdate_(o,y,!1,i),du(this.listens_,u)===h){let w;p?p===401?w="permission_denied":w="rest_error:"+p:w="ok",s(w,null)}})}unlisten(e,t){const i=Op.getListenId_(e,t);delete this.listens_[i]}get(e){const t=fR(e._queryParams),i=e._path.toString(),s=new lE;return this.restRequest_(i+".json",t,(o,u)=>{let h=u;o===404&&(h=null,o=null),o===null?(this.onDataUpdate_(i,h,!1,null),s.resolve(h)):s.reject(new Error(h))}),s.promise}refreshAuthToken(e){}restRequest_(e,t={},i){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([s,o])=>{s&&s.accessToken&&(t.auth=s.accessToken),o&&o.token&&(t.ac=o.token);const u=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+zu(t);this.log_("Sending REST request for "+u);const h=new XMLHttpRequest;h.onreadystatechange=()=>{if(i&&h.readyState===4){this.log_("REST Response for "+u+" received. status:",h.status,"response:",h.responseText);let d=null;if(h.status>=200&&h.status<300){try{d=Hh(h.responseText)}catch{ai("Failed to parse JSON response for "+u+": "+h.responseText)}i(null,d)}else h.status!==401&&h.status!==404&&ai("Got unsuccessful REST response for "+u+" Status: "+h.status),i(h.status);i=null}},h.open("GET",u,!0),h.send()})}}class k9{constructor(){this.rootNode_=et.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function xp(){return{value:null,children:new Map}}function bO(n,e,t){if(ze(e))n.value=t,n.children.clear();else if(n.value!==null)n.value=n.value.updateChild(e,t);else{const i=He(e);n.children.has(i)||n.children.set(i,xp());const s=n.children.get(i);e=_t(e),bO(s,e,t)}}function jv(n,e,t){n.value!==null?t(e,n.value):V9(n,(i,s)=>{const o=new vt(e.toString()+"/"+i);jv(s,o,t)})}function V9(n,e){n.children.forEach((t,i)=>{e(i,t)})}class L9{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t={...e};return this.last_&&bi(this.last_,(i,s)=>{t[i]=t[i]-s}),this.last_=e,t}}const mR=10*1e3,U9=30*1e3,F9=300*1e3;class B9{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new L9(e);const i=mR+(U9-mR)*Math.random();Uh(this.reportStats_.bind(this),Math.floor(i))}reportStats_(){const e=this.statsListener_.get(),t={};let i=!1;bi(e,(s,o)=>{o>0&&Yi(this.statsToReport_,s)&&(t[s]=o,i=!0)}),i&&this.server_.reportStats(t),Uh(this.reportStats_.bind(this),Math.floor(Math.random()*2*F9))}}var Ar;(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(Ar||(Ar={}));function RO(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function CO(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function NO(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class Pp{constructor(e,t,i){this.path=e,this.affectedTree=t,this.revert=i,this.type=Ar.ACK_USER_WRITE,this.source=RO()}operationForChild(e){if(ze(this.path)){if(this.affectedTree.value!=null)return ce(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new vt(e));return new Pp(ht(),t,this.revert)}}else return ce(He(this.path)===e,"operationForChild called for unrelated child."),new Pp(_t(this.path),this.affectedTree,this.revert)}}class Ko{constructor(e,t,i){this.source=e,this.path=t,this.snap=i,this.type=Ar.OVERWRITE}operationForChild(e){return ze(this.path)?new Ko(this.source,ht(),this.snap.getImmediateChild(e)):new Ko(this.source,_t(this.path),this.snap)}}class mf{constructor(e,t,i){this.source=e,this.path=t,this.children=i,this.type=Ar.MERGE}operationForChild(e){if(ze(this.path)){const t=this.children.subtree(new vt(e));return t.isEmpty()?null:t.value?new Ko(this.source,ht(),t.value):new mf(this.source,ht(),t)}else return ce(He(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new mf(this.source,_t(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class HT{constructor(e,t,i){this.node_=e,this.fullyInitialized_=t,this.filtered_=i}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(ze(e))return this.isFullyInitialized()&&!this.filtered_;const t=He(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}function z9(n,e,t,i){const s=[],o=[];return e.forEach(u=>{u.type==="child_changed"&&n.index_.indexedValueChanged(u.oldSnap,u.snapshotNode)&&o.push(M9(u.childName,u.snapshotNode))}),gh(n,s,"child_removed",e,i,t),gh(n,s,"child_added",e,i,t),gh(n,s,"child_moved",o,i,t),gh(n,s,"child_changed",e,i,t),gh(n,s,"value",e,i,t),s}function gh(n,e,t,i,s,o){const u=i.filter(h=>h.type===t);u.sort((h,d)=>j9(n,h,d)),u.forEach(h=>{const d=q9(n,h,o);s.forEach(p=>{p.respondsTo(h.type)&&e.push(p.createEvent(d,n.query_))})})}function q9(n,e,t){return e.type==="value"||e.type==="child_removed"||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}function j9(n,e,t){if(e.childName==null||t.childName==null)throw Bu("Should only compare child_ events.");const i=new Ge(e.childName,e.snapshotNode),s=new Ge(t.childName,t.snapshotNode);return n.index_.compare(i,s)}function DO(n,e){return{eventCache:n,serverCache:e}}function Fh(n,e,t,i){return DO(new HT(e,t,i),n.serverCache)}function OO(n,e,t,i){return DO(n.eventCache,new HT(e,t,i))}function Hv(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function Qo(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let Yy;const H9=()=>(Yy||(Yy=new $n(DB)),Yy);class gt{static fromObject(e){let t=new gt(null);return bi(e,(i,s)=>{t=t.set(new vt(i),s)}),t}constructor(e,t=H9()){this.value=e,this.children=t}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(this.value!=null&&t(this.value))return{path:ht(),value:this.value};if(ze(e))return null;{const i=He(e),s=this.children.get(i);if(s!==null){const o=s.findRootMostMatchingPathAndValue(_t(e),t);return o!=null?{path:cn(new vt(i),o.path),value:o.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(ze(e))return this;{const t=He(e),i=this.children.get(t);return i!==null?i.subtree(_t(e)):new gt(null)}}set(e,t){if(ze(e))return new gt(t,this.children);{const i=He(e),o=(this.children.get(i)||new gt(null)).set(_t(e),t),u=this.children.insert(i,o);return new gt(this.value,u)}}remove(e){if(ze(e))return this.children.isEmpty()?new gt(null):new gt(null,this.children);{const t=He(e),i=this.children.get(t);if(i){const s=i.remove(_t(e));let o;return s.isEmpty()?o=this.children.remove(t):o=this.children.insert(t,s),this.value===null&&o.isEmpty()?new gt(null):new gt(this.value,o)}else return this}}get(e){if(ze(e))return this.value;{const t=He(e),i=this.children.get(t);return i?i.get(_t(e)):null}}setTree(e,t){if(ze(e))return t;{const i=He(e),o=(this.children.get(i)||new gt(null)).setTree(_t(e),t);let u;return o.isEmpty()?u=this.children.remove(i):u=this.children.insert(i,o),new gt(this.value,u)}}fold(e){return this.fold_(ht(),e)}fold_(e,t){const i={};return this.children.inorderTraversal((s,o)=>{i[s]=o.fold_(cn(e,s),t)}),t(e,this.value,i)}findOnPath(e,t){return this.findOnPath_(e,ht(),t)}findOnPath_(e,t,i){const s=this.value?i(t,this.value):!1;if(s)return s;if(ze(e))return null;{const o=He(e),u=this.children.get(o);return u?u.findOnPath_(_t(e),cn(t,o),i):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,ht(),t)}foreachOnPath_(e,t,i){if(ze(e))return this;{this.value&&i(t,this.value);const s=He(e),o=this.children.get(s);return o?o.foreachOnPath_(_t(e),cn(t,s),i):new gt(null)}}foreach(e){this.foreach_(ht(),e)}foreach_(e,t){this.children.inorderTraversal((i,s)=>{s.foreach_(cn(e,i),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,i)=>{i.value&&e(t,i.value)})}}class Qi{constructor(e){this.writeTree_=e}static empty(){return new Qi(new gt(null))}}function Bh(n,e,t){if(ze(e))return new Qi(new gt(t));{const i=n.writeTree_.findRootMostValueAndPath(e);if(i!=null){const s=i.path;let o=i.value;const u=wi(s,e);return o=o.updateChild(u,t),new Qi(n.writeTree_.set(s,o))}else{const s=new gt(t),o=n.writeTree_.setTree(e,s);return new Qi(o)}}}function pR(n,e,t){let i=n;return bi(t,(s,o)=>{i=Bh(i,cn(e,s),o)}),i}function gR(n,e){if(ze(e))return Qi.empty();{const t=n.writeTree_.setTree(e,new gt(null));return new Qi(t)}}function Gv(n,e){return el(n,e)!=null}function el(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return t!=null?n.writeTree_.get(t.path).getChild(wi(t.path,e)):null}function _R(n){const e=[],t=n.writeTree_.value;return t!=null?t.isLeafNode()||t.forEachChild(Cn,(i,s)=>{e.push(new Ge(i,s))}):n.writeTree_.children.inorderTraversal((i,s)=>{s.value!=null&&e.push(new Ge(i,s.value))}),e}function ya(n,e){if(ze(e))return n;{const t=el(n,e);return t!=null?new Qi(new gt(t)):new Qi(n.writeTree_.subtree(e))}}function Kv(n){return n.writeTree_.isEmpty()}function Vu(n,e){return xO(ht(),n.writeTree_,e)}function xO(n,e,t){if(e.value!=null)return t.updateChild(n,e.value);{let i=null;return e.children.inorderTraversal((s,o)=>{s===".priority"?(ce(o.value!==null,"Priority writes must always be leaf nodes"),i=o.value):t=xO(cn(n,s),o,t)}),!t.getChild(n).isEmpty()&&i!==null&&(t=t.updateChild(cn(n,".priority"),i)),t}}function PO(n,e){return UO(e,n)}function G9(n,e,t,i,s){ce(i>n.lastWriteId,"Stacking an older write on top of newer ones"),s===void 0&&(s=!0),n.allWrites.push({path:e,snap:t,writeId:i,visible:s}),s&&(n.visibleWrites=Bh(n.visibleWrites,e,t)),n.lastWriteId=i}function K9(n,e){for(let t=0;t<n.allWrites.length;t++){const i=n.allWrites[t];if(i.writeId===e)return i}return null}function Q9(n,e){const t=n.allWrites.findIndex(h=>h.writeId===e);ce(t>=0,"removeWrite called with nonexistent writeId.");const i=n.allWrites[t];n.allWrites.splice(t,1);let s=i.visible,o=!1,u=n.allWrites.length-1;for(;s&&u>=0;){const h=n.allWrites[u];h.visible&&(u>=t&&$9(h,i.path)?s=!1:ji(i.path,h.path)&&(o=!0)),u--}if(s){if(o)return Y9(n),!0;if(i.snap)n.visibleWrites=gR(n.visibleWrites,i.path);else{const h=i.children;bi(h,d=>{n.visibleWrites=gR(n.visibleWrites,cn(i.path,d))})}return!0}else return!1}function $9(n,e){if(n.snap)return ji(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&ji(cn(n.path,t),e))return!0;return!1}function Y9(n){n.visibleWrites=MO(n.allWrites,W9,ht()),n.allWrites.length>0?n.lastWriteId=n.allWrites[n.allWrites.length-1].writeId:n.lastWriteId=-1}function W9(n){return n.visible}function MO(n,e,t){let i=Qi.empty();for(let s=0;s<n.length;++s){const o=n[s];if(e(o)){const u=o.path;let h;if(o.snap)ji(t,u)?(h=wi(t,u),i=Bh(i,h,o.snap)):ji(u,t)&&(h=wi(u,t),i=Bh(i,ht(),o.snap.getChild(h)));else if(o.children){if(ji(t,u))h=wi(t,u),i=pR(i,h,o.children);else if(ji(u,t))if(h=wi(u,t),ze(h))i=pR(i,ht(),o.children);else{const d=du(o.children,He(h));if(d){const p=d.getChild(_t(h));i=Bh(i,ht(),p)}}}else throw Bu("WriteRecord should have .snap or .children")}}return i}function kO(n,e,t,i,s){if(!i&&!s){const o=el(n.visibleWrites,e);if(o!=null)return o;{const u=ya(n.visibleWrites,e);if(Kv(u))return t;if(t==null&&!Gv(u,ht()))return null;{const h=t||et.EMPTY_NODE;return Vu(u,h)}}}else{const o=ya(n.visibleWrites,e);if(!s&&Kv(o))return t;if(!s&&t==null&&!Gv(o,ht()))return null;{const u=function(p){return(p.visible||s)&&(!i||!~i.indexOf(p.writeId))&&(ji(p.path,e)||ji(e,p.path))},h=MO(n.allWrites,u,e),d=t||et.EMPTY_NODE;return Vu(h,d)}}}function X9(n,e,t){let i=et.EMPTY_NODE;const s=el(n.visibleWrites,e);if(s)return s.isLeafNode()||s.forEachChild(Cn,(o,u)=>{i=i.updateImmediateChild(o,u)}),i;if(t){const o=ya(n.visibleWrites,e);return t.forEachChild(Cn,(u,h)=>{const d=Vu(ya(o,new vt(u)),h);i=i.updateImmediateChild(u,d)}),_R(o).forEach(u=>{i=i.updateImmediateChild(u.name,u.node)}),i}else{const o=ya(n.visibleWrites,e);return _R(o).forEach(u=>{i=i.updateImmediateChild(u.name,u.node)}),i}}function J9(n,e,t,i,s){ce(i||s,"Either existingEventSnap or existingServerSnap must exist");const o=cn(e,t);if(Gv(n.visibleWrites,o))return null;{const u=ya(n.visibleWrites,o);return Kv(u)?s.getChild(t):Vu(u,s.getChild(t))}}function Z9(n,e,t,i){const s=cn(e,t),o=el(n.visibleWrites,s);if(o!=null)return o;if(i.isCompleteForChild(t)){const u=ya(n.visibleWrites,s);return Vu(u,i.getNode().getImmediateChild(t))}else return null}function e5(n,e){return el(n.visibleWrites,e)}function t5(n,e,t,i,s,o,u){let h;const d=ya(n.visibleWrites,e),p=el(d,ht());if(p!=null)h=p;else if(t!=null)h=Vu(d,t);else return[];if(h=h.withIndex(u),!h.isEmpty()&&!h.isLeafNode()){const _=[],y=u.getCompare(),w=o?h.getReverseIteratorFrom(i,u):h.getIteratorFrom(i,u);let A=w.getNext();for(;A&&_.length<s;)y(A,i)!==0&&_.push(A),A=w.getNext();return _}else return[]}function n5(){return{visibleWrites:Qi.empty(),allWrites:[],lastWriteId:-1}}function Qv(n,e,t,i){return kO(n.writeTree,n.treePath,e,t,i)}function VO(n,e){return X9(n.writeTree,n.treePath,e)}function yR(n,e,t,i){return J9(n.writeTree,n.treePath,e,t,i)}function Mp(n,e){return e5(n.writeTree,cn(n.treePath,e))}function i5(n,e,t,i,s,o){return t5(n.writeTree,n.treePath,e,t,i,s,o)}function GT(n,e,t){return Z9(n.writeTree,n.treePath,e,t)}function LO(n,e){return UO(cn(n.treePath,e),n.writeTree)}function UO(n,e){return{treePath:n,writeTree:e}}class r5{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,i=e.childName;ce(t==="child_added"||t==="child_changed"||t==="child_removed","Only child changes supported for tracking"),ce(i!==".priority","Only non-priority child changes can be tracked.");const s=this.changeMap.get(i);if(s){const o=s.type;if(t==="child_added"&&o==="child_removed")this.changeMap.set(i,hR(i,e.snapshotNode,s.snapshotNode));else if(t==="child_removed"&&o==="child_added")this.changeMap.delete(i);else if(t==="child_removed"&&o==="child_changed")this.changeMap.set(i,P9(i,s.oldSnap));else if(t==="child_changed"&&o==="child_added")this.changeMap.set(i,x9(i,e.snapshotNode));else if(t==="child_changed"&&o==="child_changed")this.changeMap.set(i,hR(i,e.snapshotNode,s.oldSnap));else throw Bu("Illegal combination of changes: "+e+" occurred after "+s)}else this.changeMap.set(i,e)}getChanges(){return Array.from(this.changeMap.values())}}class s5{getCompleteChild(e){return null}getChildAfterChild(e,t,i){return null}}const FO=new s5;class KT{constructor(e,t,i=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=i}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const i=this.optCompleteServerCache_!=null?new HT(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return GT(this.writes_,e,i)}}getChildAfterChild(e,t,i){const s=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Qo(this.viewCache_),o=i5(this.writes_,s,t,1,i,e);return o.length===0?null:o[0]}}function a5(n,e){ce(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),ce(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}function o5(n,e,t,i,s){const o=new r5;let u,h;if(t.type===Ar.OVERWRITE){const p=t;p.source.fromUser?u=$v(n,e,p.path,p.snap,i,s,o):(ce(p.source.fromServer,"Unknown source."),h=p.source.tagged||e.serverCache.isFiltered()&&!ze(p.path),u=kp(n,e,p.path,p.snap,i,s,h,o))}else if(t.type===Ar.MERGE){const p=t;p.source.fromUser?u=u5(n,e,p.path,p.children,i,s,o):(ce(p.source.fromServer,"Unknown source."),h=p.source.tagged||e.serverCache.isFiltered(),u=Yv(n,e,p.path,p.children,i,s,h,o))}else if(t.type===Ar.ACK_USER_WRITE){const p=t;p.revert?u=f5(n,e,p.path,i,s,o):u=c5(n,e,p.path,p.affectedTree,i,s,o)}else if(t.type===Ar.LISTEN_COMPLETE)u=h5(n,e,t.path,i,o);else throw Bu("Unknown operation type: "+t.type);const d=o.getChanges();return l5(e,u,d),{viewCache:u,changes:d}}function l5(n,e,t){const i=e.eventCache;if(i.isFullyInitialized()){const s=i.getNode().isLeafNode()||i.getNode().isEmpty(),o=Hv(n);(t.length>0||!n.eventCache.isFullyInitialized()||s&&!i.getNode().equals(o)||!i.getNode().getPriority().equals(o.getPriority()))&&t.push(O9(Hv(e)))}}function BO(n,e,t,i,s,o){const u=e.eventCache;if(Mp(i,t)!=null)return e;{let h,d;if(ze(t))if(ce(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const p=Qo(e),_=p instanceof et?p:et.EMPTY_NODE,y=VO(i,_);h=n.filter.updateFullNode(e.eventCache.getNode(),y,o)}else{const p=Qv(i,Qo(e));h=n.filter.updateFullNode(e.eventCache.getNode(),p,o)}else{const p=He(t);if(p===".priority"){ce(Da(t)===1,"Can't have a priority with additional path components");const _=u.getNode();d=e.serverCache.getNode();const y=yR(i,t,_,d);y!=null?h=n.filter.updatePriority(_,y):h=u.getNode()}else{const _=_t(t);let y;if(u.isCompleteForChild(p)){d=e.serverCache.getNode();const w=yR(i,t,u.getNode(),d);w!=null?y=u.getNode().getImmediateChild(p).updateChild(_,w):y=u.getNode().getImmediateChild(p)}else y=GT(i,p,e.serverCache);y!=null?h=n.filter.updateChild(u.getNode(),p,y,_,s,o):h=u.getNode()}}return Fh(e,h,u.isFullyInitialized()||ze(t),n.filter.filtersNodes())}}function kp(n,e,t,i,s,o,u,h){const d=e.serverCache;let p;const _=u?n.filter:n.filter.getIndexedFilter();if(ze(t))p=_.updateFullNode(d.getNode(),i,null);else if(_.filtersNodes()&&!d.isFiltered()){const A=d.getNode().updateChild(t,i);p=_.updateFullNode(d.getNode(),A,null)}else{const A=He(t);if(!d.isCompleteForPath(t)&&Da(t)>1)return e;const O=_t(t),V=d.getNode().getImmediateChild(A).updateChild(O,i);A===".priority"?p=_.updatePriority(d.getNode(),V):p=_.updateChild(d.getNode(),A,V,O,FO,null)}const y=OO(e,p,d.isFullyInitialized()||ze(t),_.filtersNodes()),w=new KT(s,y,o);return BO(n,y,t,s,w,h)}function $v(n,e,t,i,s,o,u){const h=e.eventCache;let d,p;const _=new KT(s,e,o);if(ze(t))p=n.filter.updateFullNode(e.eventCache.getNode(),i,u),d=Fh(e,p,!0,n.filter.filtersNodes());else{const y=He(t);if(y===".priority")p=n.filter.updatePriority(e.eventCache.getNode(),i),d=Fh(e,p,h.isFullyInitialized(),h.isFiltered());else{const w=_t(t),A=h.getNode().getImmediateChild(y);let O;if(ze(w))O=i;else{const F=_.getCompleteChild(y);F!=null?gO(w)===".priority"&&F.getChild(yO(w)).isEmpty()?O=F:O=F.updateChild(w,i):O=et.EMPTY_NODE}if(A.equals(O))d=e;else{const F=n.filter.updateChild(h.getNode(),y,O,w,_,u);d=Fh(e,F,h.isFullyInitialized(),n.filter.filtersNodes())}}}return d}function vR(n,e){return n.eventCache.isCompleteForChild(e)}function u5(n,e,t,i,s,o,u){let h=e;return i.foreach((d,p)=>{const _=cn(t,d);vR(e,He(_))&&(h=$v(n,h,_,p,s,o,u))}),i.foreach((d,p)=>{const _=cn(t,d);vR(e,He(_))||(h=$v(n,h,_,p,s,o,u))}),h}function ER(n,e,t){return t.foreach((i,s)=>{e=e.updateChild(i,s)}),e}function Yv(n,e,t,i,s,o,u,h){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let d=e,p;ze(t)?p=i:p=new gt(null).setTree(t,i);const _=e.serverCache.getNode();return p.children.inorderTraversal((y,w)=>{if(_.hasChild(y)){const A=e.serverCache.getNode().getImmediateChild(y),O=ER(n,A,w);d=kp(n,d,new vt(y),O,s,o,u,h)}}),p.children.inorderTraversal((y,w)=>{const A=!e.serverCache.isCompleteForChild(y)&&w.value===null;if(!_.hasChild(y)&&!A){const O=e.serverCache.getNode().getImmediateChild(y),F=ER(n,O,w);d=kp(n,d,new vt(y),F,s,o,u,h)}}),d}function c5(n,e,t,i,s,o,u){if(Mp(s,t)!=null)return e;const h=e.serverCache.isFiltered(),d=e.serverCache;if(i.value!=null){if(ze(t)&&d.isFullyInitialized()||d.isCompleteForPath(t))return kp(n,e,t,d.getNode().getChild(t),s,o,h,u);if(ze(t)){let p=new gt(null);return d.getNode().forEachChild(fu,(_,y)=>{p=p.set(new vt(_),y)}),Yv(n,e,t,p,s,o,h,u)}else return e}else{let p=new gt(null);return i.foreach((_,y)=>{const w=cn(t,_);d.isCompleteForPath(w)&&(p=p.set(_,d.getNode().getChild(w)))}),Yv(n,e,t,p,s,o,h,u)}}function h5(n,e,t,i,s){const o=e.serverCache,u=OO(e,o.getNode(),o.isFullyInitialized()||ze(t),o.isFiltered());return BO(n,u,t,i,FO,s)}function f5(n,e,t,i,s,o){let u;if(Mp(i,t)!=null)return e;{const h=new KT(i,e,s),d=e.eventCache.getNode();let p;if(ze(t)||He(t)===".priority"){let _;if(e.serverCache.isFullyInitialized())_=Qv(i,Qo(e));else{const y=e.serverCache.getNode();ce(y instanceof et,"serverChildren would be complete if leaf node"),_=VO(i,y)}_=_,p=n.filter.updateFullNode(d,_,o)}else{const _=He(t);let y=GT(i,_,e.serverCache);y==null&&e.serverCache.isCompleteForChild(_)&&(y=d.getImmediateChild(_)),y!=null?p=n.filter.updateChild(d,_,y,_t(t),h,o):e.eventCache.getNode().hasChild(_)?p=n.filter.updateChild(d,_,et.EMPTY_NODE,_t(t),h,o):p=d,p.isEmpty()&&e.serverCache.isFullyInitialized()&&(u=Qv(i,Qo(e)),u.isLeafNode()&&(p=n.filter.updateFullNode(p,u,o)))}return u=e.serverCache.isFullyInitialized()||Mp(i,ht())!=null,Fh(e,p,u,n.filter.filtersNodes())}}function d5(n,e){const t=Qo(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!ze(e)&&!t.getImmediateChild(He(e)).isEmpty())?t.getChild(e):null}function TR(n,e,t,i){e.type===Ar.MERGE&&e.source.queryId!==null&&(ce(Qo(n.viewCache_),"We should always have a full cache before handling merges"),ce(Hv(n.viewCache_),"Missing event cache, even though we have a server cache"));const s=n.viewCache_,o=o5(n.processor_,s,e,t,i);return a5(n.processor_,o.viewCache),ce(o.viewCache.serverCache.isFullyInitialized()||!s.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=o.viewCache,m5(n,o.changes,o.viewCache.eventCache.getNode())}function m5(n,e,t,i){const s=n.eventRegistrations_;return z9(n.eventGenerator_,e,t,s)}let wR;function p5(n){ce(!wR,"__referenceConstructor has already been defined"),wR=n}function QT(n,e,t,i){const s=e.source.queryId;if(s!==null){const o=n.views.get(s);return ce(o!=null,"SyncTree gave us an op for an invalid query."),TR(o,e,t,i)}else{let o=[];for(const u of n.views.values())o=o.concat(TR(u,e,t,i));return o}}function $T(n,e){let t=null;for(const i of n.views.values())t=t||d5(i,e);return t}let SR;function g5(n){ce(!SR,"__referenceConstructor has already been defined"),SR=n}class IR{constructor(e){this.listenProvider_=e,this.syncPointTree_=new gt(null),this.pendingWriteTree_=n5(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function _5(n,e,t,i,s){return G9(n.pendingWriteTree_,e,t,i,s),s?vg(n,new Ko(RO(),e,t)):[]}function su(n,e,t=!1){const i=K9(n.pendingWriteTree_,e);if(Q9(n.pendingWriteTree_,e)){let o=new gt(null);return i.snap!=null?o=o.set(ht(),!0):bi(i.children,u=>{o=o.set(new vt(u),!0)}),vg(n,new Pp(i.path,o,t))}else return[]}function yg(n,e,t){return vg(n,new Ko(CO(),e,t))}function y5(n,e,t){const i=gt.fromObject(t);return vg(n,new mf(CO(),e,i))}function v5(n,e,t,i){const s=HO(n,i);if(s!=null){const o=GO(s),u=o.path,h=o.queryId,d=wi(u,e),p=new Ko(NO(h),d,t);return KO(n,u,p)}else return[]}function E5(n,e,t,i){const s=HO(n,i);if(s){const o=GO(s),u=o.path,h=o.queryId,d=wi(u,e),p=gt.fromObject(t),_=new mf(NO(h),d,p);return KO(n,u,_)}else return[]}function zO(n,e,t){const s=n.pendingWriteTree_,o=n.syncPointTree_.findOnPath(e,(u,h)=>{const d=wi(u,e),p=$T(h,d);if(p)return p});return kO(s,e,o,t,!0)}function vg(n,e){return qO(e,n.syncPointTree_,null,PO(n.pendingWriteTree_,ht()))}function qO(n,e,t,i){if(ze(n.path))return jO(n,e,t,i);{const s=e.get(ht());t==null&&s!=null&&(t=$T(s,ht()));let o=[];const u=He(n.path),h=n.operationForChild(u),d=e.children.get(u);if(d&&h){const p=t?t.getImmediateChild(u):null,_=LO(i,u);o=o.concat(qO(h,d,p,_))}return s&&(o=o.concat(QT(s,n,i,t))),o}}function jO(n,e,t,i){const s=e.get(ht());t==null&&s!=null&&(t=$T(s,ht()));let o=[];return e.children.inorderTraversal((u,h)=>{const d=t?t.getImmediateChild(u):null,p=LO(i,u),_=n.operationForChild(u);_&&(o=o.concat(jO(_,h,d,p)))}),s&&(o=o.concat(QT(s,n,i,t))),o}function HO(n,e){return n.tagToQueryMap.get(e)}function GO(n){const e=n.indexOf("$");return ce(e!==-1&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new vt(n.substr(0,e))}}function KO(n,e,t){const i=n.syncPointTree_.get(e);ce(i,"Missing sync point for query tag that we're tracking");const s=PO(n.pendingWriteTree_,e);return QT(i,t,s,null)}class YT{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new YT(t)}node(){return this.node_}}class WT{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=cn(this.path_,e);return new WT(this.syncTree_,t)}node(){return zO(this.syncTree_,this.path_)}}const T5=function(n){return n=n||{},n.timestamp=n.timestamp||new Date().getTime(),n},AR=function(n,e,t){if(!n||typeof n!="object")return n;if(ce(".sv"in n,"Unexpected leaf node or priority contents"),typeof n[".sv"]=="string")return w5(n[".sv"],e,t);if(typeof n[".sv"]=="object")return S5(n[".sv"],e);ce(!1,"Unexpected server value: "+JSON.stringify(n,null,2))},w5=function(n,e,t){switch(n){case"timestamp":return t.timestamp;default:ce(!1,"Unexpected server value: "+n)}},S5=function(n,e,t){n.hasOwnProperty("increment")||ce(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const i=n.increment;typeof i!="number"&&ce(!1,"Unexpected increment value: "+i);const s=e.node();if(ce(s!==null&&typeof s<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!s.isLeafNode())return i;const u=s.getValue();return typeof u!="number"?i:u+i},I5=function(n,e,t,i){return XT(e,new WT(t,n),i)},A5=function(n,e,t){return XT(n,new YT(e),t)};function XT(n,e,t){const i=n.getPriority().val(),s=AR(i,e.getImmediateChild(".priority"),t);let o;if(n.isLeafNode()){const u=n,h=AR(u.getValue(),e,t);return h!==u.getValue()||s!==u.getPriority().val()?new an(h,bn(s)):n}else{const u=n;return o=u,s!==u.getPriority().val()&&(o=o.updatePriority(new an(s))),u.forEachChild(Cn,(h,d)=>{const p=XT(d,e.getImmediateChild(h),t);p!==d&&(o=o.updateImmediateChild(h,p))}),o}}class JT{constructor(e="",t=null,i={children:{},childCount:0}){this.name=e,this.parent=t,this.node=i}}function ZT(n,e){let t=e instanceof vt?e:new vt(e),i=n,s=He(t);for(;s!==null;){const o=du(i.node.children,s)||{children:{},childCount:0};i=new JT(s,i,o),t=_t(t),s=He(t)}return i}function Zu(n){return n.node.value}function QO(n,e){n.node.value=e,Wv(n)}function $O(n){return n.node.childCount>0}function b5(n){return Zu(n)===void 0&&!$O(n)}function Eg(n,e){bi(n.node.children,(t,i)=>{e(new JT(t,n,i))})}function YO(n,e,t,i){t&&e(n),Eg(n,s=>{YO(s,e,!0)})}function R5(n,e,t){let i=n.parent;for(;i!==null;){if(e(i))return!0;i=i.parent}return!1}function Kf(n){return new vt(n.parent===null?n.name:Kf(n.parent)+"/"+n.name)}function Wv(n){n.parent!==null&&C5(n.parent,n.name,n)}function C5(n,e,t){const i=b5(t),s=Yi(n.node.children,e);i&&s?(delete n.node.children[e],n.node.childCount--,Wv(n)):!i&&!s&&(n.node.children[e]=t.node,n.node.childCount++,Wv(n))}const N5=/[\[\].#$\/\u0000-\u001F\u007F]/,D5=/[\[\].#$\u0000-\u001F\u007F]/,Wy=10*1024*1024,WO=function(n){return typeof n=="string"&&n.length!==0&&!N5.test(n)},O5=function(n){return typeof n=="string"&&n.length!==0&&!D5.test(n)},x5=function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),O5(n)},XO=function(n,e,t){const i=t instanceof vt?new h9(t,n):t;if(e===void 0)throw new Error(n+"contains undefined "+wo(i));if(typeof e=="function")throw new Error(n+"contains a function "+wo(i)+" with contents = "+e.toString());if(YD(e))throw new Error(n+"contains "+e.toString()+" "+wo(i));if(typeof e=="string"&&e.length>Wy/3&&Bp(e)>Wy)throw new Error(n+"contains a string greater than "+Wy+" utf8 bytes "+wo(i)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let s=!1,o=!1;if(bi(e,(u,h)=>{if(u===".value")s=!0;else if(u!==".priority"&&u!==".sv"&&(o=!0,!WO(u)))throw new Error(n+" contains an invalid key ("+u+") "+wo(i)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);f9(i,u),XO(n,h,i),d9(i)}),s&&o)throw new Error(n+' contains ".value" child '+wo(i)+" in addition to actual children.")}},P5=function(n,e){const t=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!WO(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||t.length!==0&&!x5(t))throw new Error(qk(n,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};class M5{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function k5(n,e){let t=null;for(let i=0;i<e.length;i++){const s=e[i],o=s.getPath();t!==null&&!vO(o,t.path)&&(n.eventLists_.push(t),t=null),t===null&&(t={events:[],path:o}),t.events.push(s)}t&&n.eventLists_.push(t)}function tl(n,e,t){k5(n,t),V5(n,i=>ji(i,e)||ji(e,i))}function V5(n,e){n.recursionDepth_++;let t=!0;for(let i=0;i<n.eventLists_.length;i++){const s=n.eventLists_[i];if(s){const o=s.path;e(o)?(L5(n.eventLists_[i]),n.eventLists_[i]=null):t=!1}}t&&(n.eventLists_=[]),n.recursionDepth_--}function L5(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(t!==null){n.events[e]=null;const i=t.getEventRunner();Lh&&An("event: "+t.toString()),Hf(i)}}}const U5="repo_interrupt",F5=25;class B5{constructor(e,t,i,s){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=i,this.appCheckProvider_=s,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new M5,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=xp(),this.transactionQueueTree_=new JT,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function z5(n,e,t){if(n.stats_=FT(n.repoInfo_),n.forceRestClient_||VB())n.server_=new Op(n.repoInfo_,(i,s,o,u)=>{bR(n,i,s,o,u)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>RR(n,!0),0);else{if(typeof t<"u"&&t!==null){if(typeof t!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{yn(t)}catch(i){throw new Error("Invalid authOverride provided: "+i)}}n.persistentConnection_=new hs(n.repoInfo_,e,(i,s,o,u)=>{bR(n,i,s,o,u)},i=>{RR(n,i)},i=>{j5(n,i)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(i=>{n.server_.refreshAuthToken(i)}),n.appCheckProvider_.addTokenChangeListener(i=>{n.server_.refreshAppCheckToken(i.token)}),n.statsReporter_=zB(n.repoInfo_,()=>new B9(n.stats_,n.server_)),n.infoData_=new k9,n.infoSyncTree_=new IR({startListening:(i,s,o,u)=>{let h=[];const d=n.infoData_.getNode(i._path);return d.isEmpty()||(h=yg(n.infoSyncTree_,i._path,d),setTimeout(()=>{u("ok")},0)),h},stopListening:()=>{}}),ew(n,"connected",!1),n.serverSyncTree_=new IR({startListening:(i,s,o,u)=>(n.server_.listen(i,o,s,(h,d)=>{const p=u(h,d);tl(n.eventQueue_,i._path,p)}),[]),stopListening:(i,s)=>{n.server_.unlisten(i,s)}})}function q5(n){const t=n.infoData_.getNode(new vt(".info/serverTimeOffset")).val()||0;return new Date().getTime()+t}function JO(n){return T5({timestamp:q5(n)})}function bR(n,e,t,i,s){n.dataUpdateCount++;const o=new vt(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let u=[];if(s)if(i){const d=tp(t,p=>bn(p));u=E5(n.serverSyncTree_,o,d,s)}else{const d=bn(t);u=v5(n.serverSyncTree_,o,d,s)}else if(i){const d=tp(t,p=>bn(p));u=y5(n.serverSyncTree_,o,d)}else{const d=bn(t);u=yg(n.serverSyncTree_,o,d)}let h=o;u.length>0&&(h=nw(n,o)),tl(n.eventQueue_,h,u)}function RR(n,e){ew(n,"connected",e),e===!1&&G5(n)}function j5(n,e){bi(e,(t,i)=>{ew(n,t,i)})}function ew(n,e,t){const i=new vt("/.info/"+e),s=bn(t);n.infoData_.updateSnapshot(i,s);const o=yg(n.infoSyncTree_,i,s);tl(n.eventQueue_,i,o)}function H5(n){return n.nextWriteId_++}function G5(n){ZO(n,"onDisconnectEvents");const e=JO(n),t=xp();jv(n.onDisconnect_,ht(),(s,o)=>{const u=I5(s,o,n.serverSyncTree_,e);bO(t,s,u)});let i=[];jv(t,ht(),(s,o)=>{i=i.concat(yg(n.serverSyncTree_,s,o));const u=Y5(n,s);nw(n,u)}),n.onDisconnect_=xp(),tl(n.eventQueue_,ht(),i)}function K5(n){n.persistentConnection_&&n.persistentConnection_.interrupt(U5)}function ZO(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),An(t,...e)}function ex(n,e,t){return zO(n.serverSyncTree_,e,t)||et.EMPTY_NODE}function tw(n,e=n.transactionQueueTree_){if(e||Tg(n,e),Zu(e)){const t=nx(n,e);ce(t.length>0,"Sending zero length transaction queue"),t.every(s=>s.status===0)&&Q5(n,Kf(e),t)}else $O(e)&&Eg(e,t=>{tw(n,t)})}function Q5(n,e,t){const i=t.map(p=>p.currentWriteId),s=ex(n,e,i);let o=s;const u=s.hash();for(let p=0;p<t.length;p++){const _=t[p];ce(_.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),_.status=1,_.retryCount++;const y=wi(e,_.path);o=o.updateChild(y,_.currentOutputSnapshotRaw)}const h=o.val(!0),d=e;n.server_.put(d.toString(),h,p=>{ZO(n,"transaction put response",{path:d.toString(),status:p});let _=[];if(p==="ok"){const y=[];for(let w=0;w<t.length;w++)t[w].status=2,_=_.concat(su(n.serverSyncTree_,t[w].currentWriteId)),t[w].onComplete&&y.push(()=>t[w].onComplete(null,!0,t[w].currentOutputSnapshotResolved)),t[w].unwatcher();Tg(n,ZT(n.transactionQueueTree_,e)),tw(n,n.transactionQueueTree_),tl(n.eventQueue_,e,_);for(let w=0;w<y.length;w++)Hf(y[w])}else{if(p==="datastale")for(let y=0;y<t.length;y++)t[y].status===3?t[y].status=4:t[y].status=0;else{ai("transaction at "+d.toString()+" failed: "+p);for(let y=0;y<t.length;y++)t[y].status=4,t[y].abortReason=p}nw(n,e)}},u)}function nw(n,e){const t=tx(n,e),i=Kf(t),s=nx(n,t);return $5(n,s,i),i}function $5(n,e,t){if(e.length===0)return;const i=[];let s=[];const u=e.filter(h=>h.status===0).map(h=>h.currentWriteId);for(let h=0;h<e.length;h++){const d=e[h],p=wi(t,d.path);let _=!1,y;if(ce(p!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),d.status===4)_=!0,y=d.abortReason,s=s.concat(su(n.serverSyncTree_,d.currentWriteId,!0));else if(d.status===0)if(d.retryCount>=F5)_=!0,y="maxretry",s=s.concat(su(n.serverSyncTree_,d.currentWriteId,!0));else{const w=ex(n,d.path,u);d.currentInputSnapshot=w;const A=e[h].update(w.val());if(A!==void 0){XO("transaction failed: Data returned ",A,d.path);let O=bn(A);typeof A=="object"&&A!=null&&Yi(A,".priority")||(O=O.updatePriority(w.getPriority()));const V=d.currentWriteId,X=JO(n),ne=A5(O,w,X);d.currentOutputSnapshotRaw=O,d.currentOutputSnapshotResolved=ne,d.currentWriteId=H5(n),u.splice(u.indexOf(V),1),s=s.concat(_5(n.serverSyncTree_,d.path,ne,d.currentWriteId,d.applyLocally)),s=s.concat(su(n.serverSyncTree_,V,!0))}else _=!0,y="nodata",s=s.concat(su(n.serverSyncTree_,d.currentWriteId,!0))}tl(n.eventQueue_,t,s),s=[],_&&(e[h].status=2,(function(w){setTimeout(w,Math.floor(0))})(e[h].unwatcher),e[h].onComplete&&(y==="nodata"?i.push(()=>e[h].onComplete(null,!1,e[h].currentInputSnapshot)):i.push(()=>e[h].onComplete(new Error(y),!1,null))))}Tg(n,n.transactionQueueTree_);for(let h=0;h<i.length;h++)Hf(i[h]);tw(n,n.transactionQueueTree_)}function tx(n,e){let t,i=n.transactionQueueTree_;for(t=He(e);t!==null&&Zu(i)===void 0;)i=ZT(i,t),e=_t(e),t=He(e);return i}function nx(n,e){const t=[];return ix(n,e,t),t.sort((i,s)=>i.order-s.order),t}function ix(n,e,t){const i=Zu(e);if(i)for(let s=0;s<i.length;s++)t.push(i[s]);Eg(e,s=>{ix(n,s,t)})}function Tg(n,e){const t=Zu(e);if(t){let i=0;for(let s=0;s<t.length;s++)t[s].status!==2&&(t[i]=t[s],i++);t.length=i,QO(e,t.length>0?t:void 0)}Eg(e,i=>{Tg(n,i)})}function Y5(n,e){const t=Kf(tx(n,e)),i=ZT(n.transactionQueueTree_,e);return R5(i,s=>{Xy(n,s)}),Xy(n,i),YO(i,s=>{Xy(n,s)}),t}function Xy(n,e){const t=Zu(e);if(t){const i=[];let s=[],o=-1;for(let u=0;u<t.length;u++)t[u].status===3||(t[u].status===1?(ce(o===u-1,"All SENT items should be at beginning of queue."),o=u,t[u].status=3,t[u].abortReason="set"):(ce(t[u].status===0,"Unexpected transaction status in abort"),t[u].unwatcher(),s=s.concat(su(n.serverSyncTree_,t[u].currentWriteId,!0)),t[u].onComplete&&i.push(t[u].onComplete.bind(null,new Error("set"),!1,null))));o===-1?QO(e,void 0):t.length=o+1,tl(n.eventQueue_,Kf(e),s);for(let u=0;u<i.length;u++)Hf(i[u])}}function W5(n){let e="";const t=n.split("/");for(let i=0;i<t.length;i++)if(t[i].length>0){let s=t[i];try{s=decodeURIComponent(s.replace(/\+/g," "))}catch{}e+="/"+s}return e}function X5(n){const e={};n.charAt(0)==="?"&&(n=n.substring(1));for(const t of n.split("&")){if(t.length===0)continue;const i=t.split("=");i.length===2?e[decodeURIComponent(i[0])]=decodeURIComponent(i[1]):ai(`Invalid query segment '${t}' in query '${n}'`)}return e}const CR=function(n,e){const t=J5(n),i=t.namespace;t.domain==="firebase.com"&&_s(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!i||i==="undefined")&&t.domain!=="localhost"&&_s("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||CB();const s=t.scheme==="ws"||t.scheme==="wss";return{repoInfo:new oO(t.host,t.secure,i,s,e,"",i!==t.subdomain),path:new vt(t.pathString)}},J5=function(n){let e="",t="",i="",s="",o="",u=!0,h="https",d=443;if(typeof n=="string"){let p=n.indexOf("//");p>=0&&(h=n.substring(0,p-1),n=n.substring(p+2));let _=n.indexOf("/");_===-1&&(_=n.length);let y=n.indexOf("?");y===-1&&(y=n.length),e=n.substring(0,Math.min(_,y)),_<y&&(s=W5(n.substring(_,y)));const w=X5(n.substring(Math.min(n.length,y)));p=e.indexOf(":"),p>=0?(u=h==="https"||h==="wss",d=parseInt(e.substring(p+1),10)):p=e.length;const A=e.slice(0,p);if(A.toLowerCase()==="localhost")t="localhost";else if(A.split(".").length<=2)t=A;else{const O=e.indexOf(".");i=e.substring(0,O).toLowerCase(),t=e.substring(O+1),o=i}"ns"in w&&(o=w.ns)}return{host:e,port:d,domain:t,subdomain:i,secure:u,scheme:h,pathString:s,namespace:o}};class iw{constructor(e,t,i,s){this._repo=e,this._path=t,this._queryParams=i,this._orderByCalled=s}get key(){return ze(this._path)?null:gO(this._path)}get ref(){return new ec(this._repo,this._path)}get _queryIdentifier(){const e=dR(this._queryParams),t=LT(e);return t==="{}"?"default":t}get _queryObject(){return dR(this._queryParams)}isEqual(e){if(e=Ke(e),!(e instanceof iw))return!1;const t=this._repo===e._repo,i=vO(this._path,e._path),s=this._queryIdentifier===e._queryIdentifier;return t&&i&&s}toJSON(){return this.toString()}toString(){return this._repo.toString()+c9(this._path)}}class ec extends iw{constructor(e,t){super(e,t,new jT,!1)}get parent(){const e=yO(this._path);return e===null?null:new ec(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}p5(ec);g5(ec);const Z5="FIREBASE_DATABASE_EMULATOR_HOST",Xv={};let ez=!1;function tz(n,e,t,i){const s=e.lastIndexOf(":"),o=e.substring(0,s),u=kr(o);n.repoInfo_=new oO(e,u,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams,!0,t),i&&(n.authTokenProvider_=i)}function nz(n,e,t,i,s){let o=i||n.options.databaseURL;o===void 0&&(n.options.projectId||_s("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),An("Using default host for project ",n.options.projectId),o=`${n.options.projectId}-default-rtdb.firebaseio.com`);let u=CR(o,s),h=u.repoInfo,d;typeof process<"u"&&$0&&(d=$0[Z5]),d?(o=`http://${d}?ns=${h.namespace}`,u=CR(o,s),h=u.repoInfo):u.repoInfo.secure;const p=new UB(n.name,n.options,e);P5("Invalid Firebase Database URL",u),ze(u.path)||_s("Database URL must point to the root of a Firebase Database (not including a child path).");const _=rz(h,n,p,new LB(n,t));return new sz(_,n)}function iz(n,e){const t=Xv[e];(!t||t[n.key]!==n)&&_s(`Database ${e}(${n.repoInfo_}) has already been deleted.`),K5(n),delete t[n.key]}function rz(n,e,t,i){let s=Xv[e.name];s||(s={},Xv[e.name]=s);let o=s[n.toURLString()];return o&&_s("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),o=new B5(n,ez,t,i),s[n.toURLString()]=o,o}class sz{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(z5(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new ec(this._repo,ht())),this._rootInternal}_delete(){return this._rootInternal!==null&&(iz(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&_s("Cannot call "+e+" on a deleted database.")}}function az(n=qu(),e){const t=Oa(n,"database").getImmediate({identifier:e});if(!t._instanceStarted){const i=Fp("database");i&&rx(t,...i)}return t}function rx(n,e,t,i={}){n=Ke(n),n._checkNotDeleted("useEmulator");const s=`${e}:${t}`,o=n._repoInternal;if(n._instanceStarted){if(s===n._repoInternal.repoInfo_.host&&Dr(i,o.repoInfo_.emulatorOptions))return;_s("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let u;if(o.repoInfo_.nodeAdmin)i.mockUserToken&&_s('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),u=new Jm(Jm.OWNER);else if(i.mockUserToken){const h=typeof i.mockUserToken=="string"?i.mockUserToken:uE(i.mockUserToken,n.app.options.projectId);u=new Jm(h)}kr(e)&&(Ef(e),Tf("Database",!0)),tz(o,s,i,u)}function oz(n){wB(Vr),Wi(new Ii("database",(e,{instanceIdentifier:t})=>{const i=e.getProvider("app").getImmediate(),s=e.getProvider("auth-internal"),o=e.getProvider("app-check-internal");return nz(i,s,o,t)},"PUBLIC").setMultipleInstances(!0)),hn(Y0,W0,n),hn(Y0,W0,"esm2020")}hs.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)};hs.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)};oz();const sx="functions";class lz{constructor(e,t,i,s){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,vn(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=t.getImmediate({optional:!0}),this.messaging=i.getImmediate({optional:!0}),this.auth||t.get().then(o=>this.auth=o,()=>{}),this.messaging||i.get().then(o=>this.messaging=o,()=>{}),this.appCheck||s?.get().then(o=>this.appCheck=o,()=>{})}async getAuthToken(){if(this.auth)try{return(await this.auth.getToken())?.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const t=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return t.error?null:t.token}return null}async getContext(e){const t=await this.getAuthToken(),i=await this.getMessagingToken(),s=await this.getAppCheckToken(e);return{authToken:t,messagingToken:i,appCheckToken:s}}}const Jv="us-central1";class uz{constructor(e,t,i,s,o=Jv,u=(...h)=>fetch(...h)){this.app=e,this.fetchImpl=u,this.emulatorOrigin=null,this.contextProvider=new lz(e,t,i,s),this.cancelAllRequests=new Promise(h=>{this.deleteService=()=>Promise.resolve(h())});try{const h=new URL(o);this.customDomain=h.origin+(h.pathname==="/"?"":h.pathname),this.region=Jv}catch{this.customDomain=null,this.region=o}}_delete(){return this.deleteService()}_url(e){const t=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${t}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${t}.cloudfunctions.net/${e}`}}function cz(n,e,t){const i=kr(e);n.emulatorOrigin=`http${i?"s":""}://${e}:${t}`,i&&(Ef(n.emulatorOrigin+"/backends"),Tf("Functions",!0))}const NR="@firebase/functions",DR="0.13.1";const hz="auth-internal",fz="app-check-internal",dz="messaging-internal";function mz(n){const e=(t,{instanceIdentifier:i})=>{const s=t.getProvider("app").getImmediate(),o=t.getProvider(hz),u=t.getProvider(dz),h=t.getProvider(fz);return new uz(s,o,u,h,i)};Wi(new Ii(sx,e,"PUBLIC").setMultipleInstances(!0)),hn(NR,DR,n),hn(NR,DR,"esm2020")}function pz(n=qu(),e=Jv){const i=Oa(Ke(n),sx).getImmediate({identifier:e}),s=Fp("functions");return s&&ax(i,...s),i}function ax(n,e,t){cz(Ke(n),e,t)}mz();const{emulators:_h}=P6,gz={apiKey:"AIzaSyDZ1lQeqacE-is6-oWPyENblntcp99DkPY",authDomain:"vocabook-6acc6.firebaseapp.com",projectId:"vocabook-6acc6",storageBucket:"vocabook-6acc6.firebasestorage.app",messagingSenderId:void 0,appId:"1:1095850620307:web:510ea0b0d882c9c0e9a466",measurementId:void 0},Qf=zp(gz),pf=PU(Qf),_z=az(Qf),yz=pz(Qf,"asia-northeast3"),vz=vB(Qf),ys=KF(Qf);window.auth=ys;const Ez=new rs;{let n=window.location.hostname;window.location.hostname==="localhost"&&(n="127.0.0.1"),uT(pf,n,_h.firestore.port),rx(_z,n,_h.database.port),ax(yz,n,_h.functions.port),GD(vz,n,_h.storage.port),bD(ys,`http://${n}:${_h.auth.port}`)}function Tz(){const n=Fu(),[e,t]=$.useState(""),[i,s]=$.useState(""),[o,u]=$.useState(null),h=async()=>{try{const _=(await x3(ys,e,i)).user.uid;n(`/user/${_}/words`)}catch(p){u(p.message??" ")}},d=async()=>{try{const _=(await tF(ys,Ez)).user.uid;n(`/user/${_}/words`)}catch(p){u(p.message??"  ")}};return me.jsxs("div",{className:"container py-5",children:[me.jsx("h1",{className:"text-center mb-4",children:""}),me.jsxs("div",{className:"mb-3",children:[me.jsx("label",{className:"form-label",children:""}),me.jsx("input",{type:"email",className:"form-control",value:e,onChange:p=>t(p.target.value)})]}),me.jsxs("div",{className:"mb-3",children:[me.jsx("label",{className:"form-label",children:""}),me.jsx("input",{type:"password",className:"form-control",value:i,onChange:p=>s(p.target.value)})]}),o&&me.jsx("div",{className:"text-danger mb-3",children:o}),me.jsxs("div",{className:"d-grid gap-2 mb-3",children:[me.jsx("button",{className:"btn btn-primary",onClick:h,children:" "}),me.jsx("button",{className:"btn btn-outline-light",onClick:d,children:"  "})]}),me.jsx("div",{className:"text-center",children:me.jsx(vf,{to:"/sign/up",className:"link-light",children:""})})]})}function wz(){const n=Fu(),[e,t]=$.useState(""),[i,s]=$.useState(""),[o,u]=$.useState(null),h=async()=>{try{const p=(await O3(ys,e,i)).user.uid;await xv(Ca(pf,"Users",p),{readAccess:"Owner",words:""}),n(`/user/${p}/words`)}catch(d){u(d.message??" ")}};return me.jsxs("div",{className:"container py-5",children:[me.jsx("h1",{className:"text-center mb-4",children:""}),me.jsxs("div",{className:"mb-3",children:[me.jsx("label",{className:"form-label",children:""}),me.jsx("input",{type:"email",className:"form-control",value:e,onChange:d=>t(d.target.value)})]}),me.jsxs("div",{className:"mb-3",children:[me.jsx("label",{className:"form-label",children:""}),me.jsx("input",{type:"password",className:"form-control",value:i,onChange:d=>s(d.target.value)})]}),o&&me.jsx("div",{className:"text-danger mb-3",children:o}),me.jsx("div",{className:"d-grid gap-2 mb-3",children:me.jsx("button",{className:"btn btn-primary",onClick:h,children:""})}),me.jsx("div",{className:"text-center",children:me.jsx(vf,{to:"/sign/in",className:"link-light",children:" "})})]})}function ox(){const[n,e]=$.useState(null),t=Fu();$.useEffect(()=>{const s=MT(ys,o=>{e(o)});return()=>s()},[]);const i=async()=>{try{await k3(ys),t("/sign/in")}catch(s){console.error(" :",s)}};return n?me.jsx("button",{className:"btn btn-outline-light",onClick:i,children:""}):null}function Sz(){const{uid:n}=BR(),e=Fu(),[t,i]=$.useState(null),[s,o]=$.useState(null),[u,h]=$.useState(null);if($.useEffect(()=>{const _=MT(ys,y=>{h(y?.uid??null)});return()=>_()},[]),$.useEffect(()=>{if(!n)return;(async()=>{try{const y=await wT(Ca(pf,"Users",n));if(!y.exists()){o("  .");return}const w=y.data();i(w)}catch(y){y.code==="permission-denied"?o("   "):o("    .")}})()},[n]),s)return me.jsxs("div",{className:"container py-5",children:[me.jsx("p",{children:s}),me.jsx(vf,{to:"/sign/in",className:"link-light",children:"  "})]});if(!t)return me.jsx("div",{className:"container py-5",children:me.jsx("p",{children:" ..."})});const d=u===n,p=t.words?t.words.split(`
`).filter(_=>_.trim().length>0):[];return me.jsxs("div",{className:"container py-4",children:[me.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[me.jsx("button",{className:"btn btn-outline-light",onClick:()=>e(-1),children:"< "}),d&&me.jsx("button",{className:"btn btn-primary",onClick:()=>e(`/user/${n}/words/edit`),children:"<>"}),me.jsx(ox,{}),me.jsx("div",{style:{width:80}})," "]}),me.jsx("ul",{className:"list-group list-group-flush",children:p.map((_,y)=>{const w=_.split("/|/"),A=w[0]?.trim(),O=w[1]?.trim();return me.jsxs("li",{className:"list-group-item bg-black text-light border-secondary",children:[me.jsx("span",{className:"fw-bold me-2",children:A}),O&&me.jsx("a",{href:O,target:"_blank",rel:"noreferrer",className:"link-info",children:""})]},y)})})]})}function Iz(){const n=new Date,e=n.getFullYear(),t=String(n.getMonth()+1).padStart(2,"0"),i=String(n.getDate()).padStart(2,"0"),s=String(n.getHours()).padStart(2,"0"),o=String(n.getMinutes()).padStart(2,"0"),u=String(n.getSeconds()).padStart(2,"0");return`${e}-${t}-${i} ${s}:${o}:${u} +09:00`}const Az=/^\d{4}-\d{2}-\d{2} \d{2}:\d{2}:\d{2} \+09:00$/;function bz(n){return Az.test(n.trim())}function Rz(n){const e=n.split(`
`),t=[];for(const i of e){const s=i.trim();if(!s)continue;const o=s.split("/|/"),u=(o[0]??"").trim();if(!u)continue;const h=(o[1]??"").trim();let d=(o[2]??"").trim();const p=(o[3]??"").trim();(!d||!bz(d))&&(d=Iz()),t.push({word:u,link:h,addedAt:d,order:p})}return t.map((i,s)=>({...i,order:String(s+1)}))}function Cz(n){return n.map(({word:e,link:t,addedAt:i,order:s})=>`${e}/|/${t??""}/|/${i??""}/|/${s??""}`).join(`
`)}function Nz(n){const e=n.split(`
`).map(t=>t).filter(t=>t.trim().length>0);for(let t=e.length-1;t>0;t--){const i=Math.floor(Math.random()*(t+1));[e[t],e[i]]=[e[i],e[t]]}return e.join(`
`)}function Dz(){const{uid:n}=BR(),e=Fu(),[t,i]=$.useState(""),[s,o]=$.useState(null),[u,h]=$.useState(!0),[d,p]=$.useState(null);$.useEffect(()=>{if(!n)return;h(!0);const A=MT(ys,async O=>{try{if(!O){p(null),o(" ."),h(!1);return}if(p(O.uid),O.uid!==n){o("    ."),h(!1);return}const F=await wT(Ca(pf,"Users",n));if(!F.exists()){o("    ."),h(!1);return}const V=F.data();i(V.words??""),o(null)}catch(F){console.error(F),o("    .")}finally{h(!1)}});return()=>A()},[n]);const _=()=>{e(`/user/${n}/words`)},y=()=>{i(A=>Nz(A))},w=async()=>{if(!n||!d||d!==n){o("  .");return}try{const A=Rz(t),O=Cz(A);await Pv(Ca(pf,"Users",n),{words:O}),e(`/user/${n}/words`)}catch(A){console.error(A),o("   .")}};return u?me.jsx("div",{className:"container py-5",children:me.jsx("p",{children:" ..."})}):s?me.jsx("div",{className:"container py-5",children:me.jsx("p",{children:s})}):me.jsxs("div",{className:"container py-4",children:[me.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[me.jsx("button",{className:"btn btn-outline-light",onClick:_,children:"<>"}),me.jsx("button",{className:"btn btn-success",onClick:w,children:"<>"}),me.jsx("button",{className:"btn btn-secondary",onClick:y,children:"<>"}),me.jsx(ox,{})]}),me.jsx("textarea",{className:"form-control",rows:20,value:t,onChange:A=>i(A.target.value)})]})}const Oz="/sign/in",xz="/sign/up",Pz="/user/:uid/words",Mz="/user/:uid/words/edit";function kz(){return me.jsx(lk,{children:me.jsx("div",{className:"app-root bg-black text-light min-vh-100",children:me.jsxs(FM,{children:[me.jsx(yh,{path:Oz,element:me.jsx(Tz,{})}),me.jsx(yh,{path:xz,element:me.jsx(wz,{})}),me.jsx(yh,{path:Pz,element:me.jsx(Sz,{})}),me.jsx(yh,{path:Mz,element:me.jsx(Dz,{})})]})})})}QP.createRoot(document.getElementById("root")).render(me.jsx($.StrictMode,{children:me.jsx(kz,{})}));
